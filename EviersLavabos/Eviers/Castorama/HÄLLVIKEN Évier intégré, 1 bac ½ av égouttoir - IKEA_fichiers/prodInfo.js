
    var numberOfImages=8;var js_fn_SLIDE_SHOW_IDS;var currentRequest;var allowSubmit=false;var activeItemObject=null;var chosenProduct;var activeImgBut;var similarSolutionJSON;var depthinSSCJSON;var depthInFunctionJSON;var imgId;var msDir="/ms/";var optionValuesArray=new Array();var pipPopup=IkeaPopup();var itemObjFound=null;var difProducts=new Array();var ajaxReqClass=null;var liteBox=createLiteBox();var changeItemSub=changeItemSubFunctions();var globalVariables={activeItemPartNumber:null,previousStoreId:"",serviceParamArray:new Array(),completeProdCount:0,expressionMatchCount:0,complementaryCount:0,faqCount:0,techCount:0,plannerUsed:0};document.observe("dom:loaded",function(){if(typeof(stockSearchPage)=="undefined"||!stockSearchPage){initProductDisplay(jProductData,currentItem);initialiseOptionValueArray();Event.observe(window,"load",function(){preSelectStore();loadStockCheckDisplay();new initPipMpaLoaded();displayMoreProductsModule(moreProdBaseUrl,sscCatalogId,sscCategory,simsCategory,simsCatalogId,depthInFunctionCategory,invalidDIFAttr,"0");var enableElement;relatedProducts.init();if($("downloadLink")!=null){bindEventsDownload("span","downloadLink","downloadLink")}if($("morePackages")!=null){bindEventPackge("morePackages")}SWFAddress.addEventListener("change",function(e){uniqueUrl.addressChanged(e)});ikeaZoomOnPip.init();if(/Opera[\/\s](\d+\.\d+)/.test(navigator.userAgent)){var zoomOnPip=new com.ikea.irw.pip.ZoomImage("mainImgConatiner");localPricePip.bindMouseDownOnLocalPrice()}globalMethods.checkAjaxRequestStatus()})}});function StringBuffer(){this.__strings__=new Array}StringBuffer.prototype.append=function(str){this.__strings__.push(str)};StringBuffer.prototype.length=function(){return this.__strings__.join("").length};StringBuffer.prototype.toString=function(){return this.__strings__.join("")};StringBuffer.prototype.indexOf=function(str){return this.__strings__.join("").indexOf(str)};Array.prototype.contains=function(element){for(var i=0;i<this.length;i++){if(this[i]==element){return true}}return false};String.prototype.replaceAll=function(strTarget,strSubString){var strText=this;var intIndexOfMatch=strText.indexOf(strTarget);while(intIndexOfMatch!=-1){strText=strText.replace(strTarget,strSubString);intIndexOfMatch=strText.indexOf(strTarget)}return(strText)};function initProductDisplay(productData,currentItemPartnumber){var chosenItem=null;if($("subdiv")!=null){$("subdiv").childElements().each(function(element){if(element.hasClassName("displaynone")){element.removeClassName("displaynone")}})}if($("prodDiv")!=null){$("prodDiv").childElements().each(function(element){if(element.hasClassName("displaynone")){element.removeClassName("displaynone")}})}if($("cartTxtMoreLink")!=null&&$("cartTxtMoreLink").hasClassName("displaynone")){$("cartTxtMoreLink").removeClassName("displaynone")}if($("salesArg")!=null){if($("salesArg").hasClassName("displaynone")){$("salesArg").removeClassName("displaynone")}}if($("package_text")!=null){if($("package_text").hasClassName("displaynone")){$("package_text").removeClassName("displaynone");$("openPopup").removeClassName("displaynone")}}if(typeof(stockSearchPage)==="undefined"){var tempPartNumber=SWFAddress.getValue();var tempPartNumberLen=tempPartNumber.length;if(tempPartNumber!=="/"&&tempPartNumberLen>1){globalVariables.activeItemPartNumber=tempPartNumber.replace(/\W/g,"");chosenItem=productData.product.items.find(function(object){return object.partNumber==globalVariables.activeItemPartNumber});if(typeof(chosenItem)==="undefined"&&globalVariables.activeItemPartNumber.indexOf("review")==-1){window.location.href=baseURL+globalVariables.activeItemPartNumber}}}if(chosenItem===null){chosenItem=productData.product.items.find(function(object){return object.partNumber==currentItemPartnumber})}if(!chosenItem||chosenItem==null){chosenItem=productData.product.items[0]}allowSubmit=true;activeItemObject=chosenItem;chosenProduct=productData.product}function initialiseOptionValueArray(){if($("stockcheckdiv")==null){$$("#subdiv select").each(function(element){optionValuesArray.push(element)})}else{$$("#stockcheckdiv select").each(function(element){if(element.name=="attributeValuesSelect"){optionValuesArray.push(element)}})}if(activeItemObject!==null&&globalVariables.activeItemPartNumber!==null){var productFound=uniqueUrl.presetAttributes(activeItemObject.catEntryId);uniqueUrl.setPageTitle()}makeAttributesInvalid(-1);loadItem(jProductData.product);setWidthProd()}function getSelectedValuesAsArray(){var selectedValuesArray=new Array();optionValuesArray.each(function(optionsArrayIter){selectedValuesArray.push(optionsArrayIter.options[optionsArrayIter.options.selectedIndex].value)});return selectedValuesArray}function makeAttributesInvalid(dropDownIndx){selectedValuesArray=getSelectedValuesAsArray();var tmpArray=new Array();var selIndx=0;var indxSelected=false;var resetIndx=true;if(dropDownIndx==-1){dropDownIndx=0;resetIndx=false}var dropDwnLen=optionValuesArray.length-1;optionValuesArray.each(function(optionValuesArrayItr,outerIndex){if(dropDownIndx<outerIndex){tmpArray.clear();indxSelected=false;for(var i=0;i<=outerIndex;i++){if(dropDownIndx==0&&resetIndx){if(i==dropDownIndx||i==dropDwnLen){tmpArray.push(selectedValuesArray[i])}else{tmpArray.push(optionValuesArray[i].options[optionValuesArray[i].options.selectedIndex].value)}}else{tmpArray.push(selectedValuesArray[i])}}selIndx=0;if(optionValuesArrayItr.name=="attributeValuesSelect"){$A(optionValuesArrayItr.options).each(function(optionValuesArrayInnerItr,innerIndex){tmpArray[outerIndex]=optionValuesArrayInnerItr.value;if(findItemsByAttributes(tmpArray)){enableOption(optionValuesArrayInnerItr,indxSelected);if(!indxSelected&&resetIndx){selIndx=innerIndex;indxSelected=true}}else{disableOption(optionValuesArrayInnerItr)}});if(resetIndx&&(optionValuesArrayItr.options[optionValuesArrayItr.options.selectedIndex].disabled==true)){optionValuesArrayItr.options.selectedIndex=selIndx}}}})}function enableOption(theOption){if(theOption.disabled==true){theOption.style.color="#000000";theOption.disabled=false}}function disableOption(theOption){if(theOption.disabled==false){theOption.style.color="#828282";theOption.disabled=true}}function checkValidCombination(whichChanged,product,event){if(!allowSubmit){return}if((typeof whichChanged!="undefined")&&whichChanged!=null&&optionValuesArray[whichChanged].name=="attributeValuesSelect"){if(optionValuesArray[whichChanged].options[optionValuesArray[whichChanged].options.selectedIndex].disabled==true){whichChanged=whichChanged-1}}if((typeof whichChanged!="undefined")&&whichChanged!=null){makeAttributesInvalid(whichChanged)}loadItem(jProductData.product);if(itemObjFound!==null&&itemObjFound.images.zoom[0]!==null){zoomImageFlag="true"}else{zoomImageFlag="false"}if(typeof(stockSearchPage)==="undefined"&&itemObjFound!==null){if(typeof(event)==="undefined"){SWFAddress.setValue(itemObjFound.partNumber)}uniqueUrl.setPageTitle()}loadStockCheckDisplay();if(itemObjFound!==null&&$("innerLinkToPlannerBtn")){var tempURL=$("planner_url").readAttribute("value").split(";");var plannerUrl=tempURL[0];var partNumber=itemObjFound.partNumber;var deepLink=plannerUrl+"#"+partNumber;$("innerLinkToPlannerBtn").writeAttribute("href",deepLink)}}function loadItem(product){var catentryIdArray=new Array();var activeCatentryId;var tempLoc;if($("stockcheckdiv")==null){$$("#subdiv select").each(function(element){catentryIdArray.push(element.options[element.options.selectedIndex].value)})}else{$$("#stockcheckdiv select").each(function(element){if(element.name=="attributeValuesSelect"){catentryIdArray.push(element.options[element.options.selectedIndex].value)}})}if(catentryIdArray.length>0){if(catentryIdArray.length===1){tempLoc=catentryIdArray[0].split(";");activeCatentryId=tempLoc[0]}else{tempLoc=catentryIdArray[0].split(";");var arrayLength=catentryIdArray.length;for(var i=1;i<arrayLength;i++){tempLoc=tempLoc.intersect(catentryIdArray[i].split(";"))}activeCatentryId=tempLoc}if(Object.isArray(activeCatentryId)){activeCatentryId=activeCatentryId[0]}itemObjFound=product.items.find(function(itemsItr){if(itemsItr.catEntryId==activeCatentryId){return itemsItr}})}else{itemObjFound=product.items[0]}if(itemObjFound!=null){initImgButBar(itemObjFound);changeItem(itemObjFound)}}function initImgButBar(chosenItem){var numOfDispImgBut=chosenItem.images.normal.length;if($("buttonBar")!=null){$("buttonBar").removeClassName("thumbImgButtonBarVisible");$("viewMoreImages").removeClassName("buttonBarVisible");var success=true;var i=0;while(success){try{$("imageThumb_"+i).remove();i++}catch(err){success=false}}var imgNo=1;if(numOfDispImgBut>1||($("imgThumbContainer").childElements()!==""&&typeof(nbrRoomset)!=="undefined")){$("buttonBar").addClassName("thumbImgButtonBarVisible");$("viewMoreImages").addClassName("buttonBarVisible");var imageTemplate=new Template('<div class="imageThumb" id="imageThumb_#{id}"><a href="javascript:void(0);"  id="imageThumbLink_#{id}"><img src="#{src}" onclick=\'irwStatThumbImgClickedFromPIP();\' onmouseover=\'addOpacityEffect(this.id);\' onmouseout=\'rmvOpacityEffect(this.id);\' id="imgID_#{id}" ></a></div>');var imgCnt;for(imgCnt=0;imgCnt<numberOfImages&&numOfDispImgBut>1&&imgCnt<numOfDispImgBut;imgCnt++){var obj=new Object();obj.id=imgCnt;obj.src=chosenItem.images.normal[imgCnt];$("moreImgThumbContainer").insert(imageTemplate.evaluate(obj));if(imgCnt==0){activeImgBut=$("imageThumbLink_0");activeImgBut.addClassName("active")}Event.observe($("imageThumbLink_"+imgCnt),"click",function(e){for(var k=0;k<numOfDispImgBut;k++){if(typeof $("imageThumbLink_"+k)!="undefined"&&$("imageThumbLink_"+k)!=null){$("imageThumbLink_"+k).removeClassName("active")}}activeImgBut.removeClassName("active");activeImgBut=this;activeImgBut.addClassName("active");if(activeItemObject!=null){var imgNo=parseInt(this.id.substring(this.id.lastIndexOf("_")+1));$("productImg").src=activeItemObject.images.large[imgNo];attachAltTxt(activeItemObject.name,activeItemObject.type,activeItemObject.custBenefit);$("productImg").title=uniqueUrl.computeTitle();ikeaZoomOnPip.getUrlZoom()}})}if(imgCnt<numberOfImages&&typeof(nbrRoomset)!=="undefined"){var mpaImgCnt=numberOfImages;if(numOfDispImgBut>1){mpaImgCnt=numberOfImages-numOfDispImgBut}var index=0;$("imgThumbContainer").childElements().each(function(element){if(element.hasClassName("displaynone")&&index<mpaImgCnt){element.removeClassName("displaynone");index++}})}}}}var initPipMpaLoaded=Class.create({initialize:function(){var liteBoxObj;if(typeof(nbrRoomset)!=="undefined"&&nbrRoomset>0){var swfMpaObj=new SWFObject(flashSrc,flashName,flasWidth,flashHeight,flashVersion,falshBgColor);var flashParamSize=flashParamArray.length;var flashVarSize=falshVariableArray.length;for(var j=0;j<flashParamSize;j++){swfMpaObj.addParam(flashParamArray[j],flashParamValueArray[j])}for(var k=0;k<flashVarSize;k++){swfMpaObj.addVariable(falshVariableArray[k],falshVariableValueArray[k])}var i=0;$("imgThumbContainer").childElements().each(function(element){if(element.id.search(/roomsetImage_/g)!==-1){var swfContainer='<div id="flashcontent" class="firstFlashContent swfContentNomargin"></div>';new Tooltip(element,{maxWidth:"639",content:'<div class="roomSetToolTip">'+linkNameArray[i]+"</div>"});Event.observe(element,"click",function(event){var selectedSwfState=this.id.replace(/roomsetImage_/g,"");if(liteBoxObj!==null){liteBoxObj=new LiteboxFlash({id:"litebox",content:swfContainer,swfObj:swfMpaObj,firstSelect:selectedSwfState})}});i=i+1}})}}});function changeItem(itemObjToDisplay){var stockSearchPageSet=!(window.stockSearchPage===undefined);if(itemObjToDisplay==null){itemObjToDisplay=activeItemObject}var itemPropLen=itemProperties.length;changeItemSub.productInfo(itemObjToDisplay,itemPropLen,stockSearchPageSet);changeItemSub.warningInfo(itemObjToDisplay);changeItemSub.californiaTitle(itemObjToDisplay);var pricePropLen=priceProperties.length;changeItemSub.prfPriceChange(itemObjToDisplay,stockSearchPageSet,pricePropLen);var prodDetLen=productDetails.length;for(var k=0;k<prodDetLen;k++){if(typeof productDetails[k]!=="undefined"&&productDetails[k]!==null){if(productDetails[k]=="goodToKnowPIP"){productDetails[k]="goodToKnow"}}if($(productDetails[k])!==null){var value=eval("itemObjToDisplay."+productDetails[k]);if(productDetails[k]=="goodToKnow"){var gtk="goodToKnowPIP";value=eval("itemObjToDisplay."+gtk)}if(productDetails[k]=="soldSeparately"){if(value===""){$("soldSeparatelyPart").style.display="none"}else{$("soldSeparatelyPart").style.display="block"}}if(productDetails[k]==="custBenefit"){value=changeItemSub.customerBenefitsText(itemObjToDisplay,value)}if(productDetails[k]==="packageInfo"){var tmpArray;var tmpArrayNew;var packageObject=null;var packageValue=null;var packageCompleteInfo="";tmpArray=changeItemSub.getPackageInfo(itemObjToDisplay);tmpArrayNew=changeItemSub.getNewPackageInfo(itemObjToDisplay);if(tmpArray!=null){var tmpLen=tmpArray.length;if(tmpLen===1){packageValue=changeItemSub.templatePackage(tmpArray);var packageTemplate=new Template(packageValue);packageCompleteInfo=changeItemSub.getPackageCompleteInfo(itemObjToDisplay,packageTemplate);value='<div id="package_text" class="texts">'+singlePackage+': <span id="numberOfPackages">'+itemObjToDisplay.nopackages+'</span></div><div  class="texts">'+packageCompleteInfo+"</div>"}else{value='<div id="package_text" class="texts"><span id="numberOfPackages">'+itemObjToDisplay.nopackages+"</span>&nbsp;"+multiplePackage+'</div><a href="javascript:void(0)" class="links downloadLink" id="morePackages">'+packageText+"</a>"}}else{var tmpLenNew=tmpArrayNew.length;if(tmpLenNew===1){packageCompleteInfo=changeItemSub.getNewPackageCompleteInfo(itemObjToDisplay);value=packageCompleteInfo.template}else{if(tmpLenNew>1){value='<div id="package_text" class="texts"><span id="numberOfPackages">'+packages+":</span>&nbsp;"+itemObjToDisplay.nopackages+'</div><a href="javascript:void(0)" class="links downloadLink" id="morePackages">'+packageText+"</a>"}}}}if(productDetails[k]==="salesArg"){value=changeItemSub.salesArg(itemObjToDisplay);if(value==""){$("salesArg").style.display="none"}value=value.replace("&apos;","'")}if(productDetails[k]==="downloadAssembly"){value=changeItemSub.downloadAssembly(itemObjToDisplay)}if(productDetails[k]==="downloadAssemblyProdInfo"){value=changeItemSub.downloadAssemblyProdInfo(itemObjToDisplay)}if(productDetails[k]==="imperial"){value=changeItemSub.setMeasure(itemObjToDisplay,value,"imperial")}if(productDetails[k]==="metric"){value=changeItemSub.setMeasure(itemObjToDisplay,value,"metric")}if($(productDetails[k])!==null){$(productDetails[k]).update(value)}}}if($("downloadLink")!==null){bindEventsDownload("span","downloadLink","downloadLink")}if($("morePackages")!==null){bindEventPackge("morePackages")}var bufferVar=new StringBuffer();bufferVar.append(itemObjToDisplay.images.large[0]);$("productImg").src=bufferVar.toString();attachAltTxt(itemObjToDisplay.name,itemObjToDisplay.type,itemObjToDisplay.custBenefit);$("productImg").title=uniqueUrl.computeTitle();if($("img_prodInfo_lnk")!==null){bufferVar=new StringBuffer();bufferVar.append(itemObjToDisplay.images.thumb[0]);$("img_prodInfo_lnk").src=bufferVar.toString()}displayPipBlocks(stockSearchPageSet,itemObjToDisplay);com.ikea.irw.mobileweb.setPipUrl(itemObjToDisplay.partNumber);if(typeof(stockSearchPage)==="undefined"||!stockSearchPage){pipServiceModule.displayServiceModule(itemObjToDisplay)}ikeaZoomOnPip.getUrlZoom()}function displayPipBlocks(stockSearchPageSet,itemObjToDisplay){var newIcon="newicon";if(typeof(itemObjToDisplay.newsType)!=="undefined"){$(newIcon).style.display="block";$(newIcon).update('<img src="'+newImg+'" alt="'+newImgAlt+'" border ="0" class="Img" />')}else{if(itemObjToDisplay.prices.normal.priceNormal.nlp&&!itemObjToDisplay.bti&&itemObjToDisplay.prices.familyNormal===undefined){$(newIcon).style.display="block";$(newIcon).update('<img src="'+nlpImg+'" alt="'+nlpImgAlt+'" border ="0" />')}else{$(newIcon).style.display="none"}}var price="price1";var packagePrice="packagePrice";var nlpTroPrice="nlpTroPrice";if(itemObjToDisplay.prices.normal.priceNormal.tro&&itemObjToDisplay.prices.familyNormal===undefined){$(price).removeClassName(packagePrice);$(price).addClassName(nlpTroPrice)}else{$(price).removeClassName(nlpTroPrice);$(price).addClassName(packagePrice)}var price="price1";var packagePrice="packagePrice";var nlpTroPrice="nlpTroPrice";if(itemObjToDisplay.prices.normal.priceNormal.tro&&itemObjToDisplay.prices.familyNormal===undefined){$(price).removeClassName(packagePrice);$(price).addClassName(nlpTroPrice)}else{$(price).removeClassName(nlpTroPrice);$(price).addClassName(packagePrice)}var sc_com_price="sc_com_price";var sc_nlptro_price="sc_nlptro_price";if(stockSearchPageSet){if(itemObjToDisplay.prices.normal.priceNormal.tro&&itemObjToDisplay.prices.familyNormal===undefined){$(price).removeClassName(sc_com_price);$(price).addClassName(sc_nlptro_price)}else{$(price).removeClassName(sc_nlptro_price);$(price).addClassName(sc_com_price)}if($("itemUrl")!=null){$("itemUrl").href=itemObjToDisplay.url}if($("itemUrl")!=null){$("itemUrl").href=itemObjToDisplay.url}if($("pipUrl")!=null){$("pipUrl").href=itemObjToDisplay.url}}if($("catentryInForm")!=null){$("catentryInForm").value=itemObjToDisplay.catEntryId}if($("thePartnumberInForm")!=null){$("thePartnumberInForm").value=itemObjToDisplay.partNumber}if($("urlInForm")!=null){$("urlInForm").value=itemObjToDisplay.url}if($("stockUrlInForm")!=null){$("stockUrlInForm").value=itemObjToDisplay.availabilityUrl}var addButton=$("dispAddButton");var buttonBorder=$("buttonBorder2");var dispQty=$("dispQuantity");var dispNotShopableOnlineText=$("dispNotShopableOnlineText");if(itemObjToDisplay.buyable){if(buttonBorder!=null){buttonBorder.style.display="block";addButton.style.display="block"}if(dispQty!=null){dispQty.style.display="block";var shopCartButton=dispQty.down("div");shopCartButton.id="popupAddToCart"+itemObjToDisplay.partNumber}if(dispNotShopableOnlineText!=null){dispNotShopableOnlineText.style.display="none"}}else{if(buttonBorder!=null){buttonBorder.style.display="none";addButton.style.display="none"}if(dispQty!=null){dispQty.style.display="none"}if(dispNotShopableOnlineText!=null){dispNotShopableOnlineText.style.display="block"}}var buttonBorder=$("buttonBorder3");if($("buttonBorder3")!=null){var shopListButton=buttonBorder.down();shopListButton.id="popupShoppingList"+itemObjToDisplay.partNumber}var cartButton=$("shoppingCartButton");if($("shoppingCartButton")!=null){var shopCartButton=cartButton.down();if($(shopCartButton)!=null){shopCartButton.id="popupAddToCart"+itemObjToDisplay.partNumber}}if(itemObjToDisplay.prices.comparisonPriceExists){$("comparisonPIPContainer").style.display="block";var compPrice=new StringBuffer();compPrice.append("<span>");if(itemObjToDisplay.prices.unitMeasureEnglish===displayUnit){compPrice.append(unitPriceTxt)}else{compPrice.append(priceText+itemObjToDisplay.prices.normal.priceNormalPerUnit.unit)}compPrice.append('</span><span id="comparisonPIPPrice"> '+itemObjToDisplay.prices.normal.priceNormal.comparisonPrice+"</span></div>");$("comparisonPIPContainer").update(compPrice)}else{$("comparisonPIPContainer").style.display="none"}if(!stockSearchPageSet){if(itemObjToDisplay.prices.usesUnitPriceMeasure){$("mainunitprice").style.display="block";if(itemObjToDisplay.prices.isUnitPricePrimary){$("priceFieldSpan").update(pricePerPackage+' <span class="packagepricevaluebold">'+itemObjToDisplay.prices.normal.priceNormal.value+"</span>");if(showPriceExclVat&&itemObjToDisplay.prices.normal.priceNormal.priceExclVat!=null){$("mainPackPriceExclVat").update(this.getExclVattext(itemObjToDisplay.prices.normal.priceNormal.priceExclVat))}if(typeof(itemObjToDisplay.prices.familyNormal)!=="undefined"&&itemObjToDisplay.prices.familyNormal.priceNormal.value!=null){$("famunitprice").style.display="block";$("famPackPrice").update(pricePerPackage+' <span class="packagepricevaluebold">'+itemObjToDisplay.prices.familyNormal.priceNormal.value+"</span>");if(showPriceExclVat){$("famPackPriceExclVat").update(this.getExclVattext(itemObjToDisplay.prices.familyNormal.priceNormal.priceExclVat))}}}}else{$("famunitprice").style.display="none";$("mainunitprice").style.display="none"}if(itemObjToDisplay.custBenefit!==""&&itemObjToDisplay.custBenefit!=null){$("cbftssection").style.display="block"}else{$("cbftssection").style.display="none"}if(itemObjToDisplay.designerThoughts!==undefined){$("dessection").style.display="block";$("designDiv").update(designerThoughts);$("designerThoughts").update(itemObjToDisplay.designerThoughts.text+'<div class="designerName">'+itemObjToDisplay.designerThoughts.heading+"</div>");$("designer").update("")}else{if(itemObjToDisplay.designer!==""){$("dessection").style.display="block";$("designDiv").update(designer);$("designer").update(itemObjToDisplay.designer)}else{$("dessection").style.display="none"}}if(itemObjToDisplay.lowestPrice!==undefined){$("lowestPricePart").style.display="block";$("lowestPrice").update('<div class="prodInfoHeadline">'+itemObjToDisplay.lowestPrice.heading+"</div>"+itemObjToDisplay.lowestPrice.text)}else{$("lowestPricePart").style.display="none"}if(typeof($("cabinetDiv"))!=="undefined"&&$("cabinetDiv")!=null){if(itemObjToDisplay.FAcode!==undefined){$("cabinetDiv").removeClassName("displaynone")}else{$("cabinetDiv").addClassName("displaynone")}}if(itemObjToDisplay.careInst!=""){$("careInstructionsPart").style.display="block"}else{$("careInstructionsPart").style.display="none"}if(itemObjToDisplay.goodToKnowPIP!=""){$("goodToKnowPart").style.display="block"}else{$("goodToKnowPart").style.display="none"}if(itemObjToDisplay.environment!=""){$("environmentPart").style.display="block"}else{$("environmentPart").style.display="none"}if(itemObjToDisplay.custMaterials!=""){$("pkgmeasPart").style.display="block"}else{$("pkgmeasPart").style.display="none"}if(globalMethods.getMeasure(itemObjToDisplay)!=""){$("measuresPart").style.display="block"}else{$("measuresPart").style.display="none"}if((itemObjToDisplay.attachments).length>=1){if($("assemblyInstr")!==null){$("assemblyInstr").style.display="block"}var assembly_Exist=false;for(var i=0;i<itemObjToDisplay.attachments.length;i++){if(itemObjToDisplay.attachments[i].type=="ASSEMBLY_INSTRUCTIONS"){assembly_Exist=true}}if(assembly_Exist){$("requiresAssembly").style.display="block"}else{$("requiresAssembly").style.display="none"}}else{if($("assemblyInstr")!==null){$("assemblyInstr").style.display="none"}$("requiresAssembly").style.display="none"}if(itemObjToDisplay.imperialPackageInfo!=null||itemObjToDisplay.metricPackageInfo!=null||itemObjToDisplay.pkgInfoArr!=null){$("package").style.visibility="visible"}else{$("package").style.visibility="hidden"}}if(itemObjToDisplay.prices.normal.priceNormal.tro&&!itemObjToDisplay.prices.hasFamilyPrice&&!itemObjToDisplay.prices.hasTemporaryFamilyOffer){$("troPrice").style.display="block"}else{$("troPrice").style.display="none"}if($("nlpPrice")!==null){if(itemObjToDisplay.prices.normal.priceNormal.nlp&&!itemObjToDisplay.prices.hasFamilyPrice&&!itemObjToDisplay.bti&&!itemObjToDisplay.prices.hasTemporaryFamilyOffer){$("nlpPrice").style.display="block"}else{$("nlpPrice").style.display="none"}}if($("familyDate")!==null){if(itemObjToDisplay.prices.hasTemporaryFamilyOffer){$("familyDate").style.display="block"}else{$("familyDate").style.display="none"}}if($("familyOfferDateStock")!==null){if(itemObjToDisplay.prices.hasTemporaryFamilyOffer){$("familyOfferDateStock").style.display="block"}else{$("familyOfferDateStock").style.display="none"}}if(itemObjToDisplay.dualCurrencies){$("price2").style.visibility="visible"}else{$("price2").style.visibility="hidden"}if(itemObjToDisplay.prices.familyNormal){$("famsection").style.display="block";$("price5").style.visibility="visible";if(itemObjToDisplay.dualCurrencies){$("price6").style.visibility="visible"}else{$("price6").style.visibility="hidden"}if(itemObjToDisplay.prices.comparisonPriceExists&&$("familyComparisonPIPContainer")!=null){$("familyComparisonPIPContainer").style.display="block";var compFamPrice=new StringBuffer();compFamPrice.append("<span>");if(itemObjToDisplay.prices.unitMeasureEnglish===displayUnit){compFamPrice.append(unitPriceTxt)}else{compFamPrice.append(priceText+itemObjToDisplay.prices.normal.priceNormalPerUnit.unit)}compFamPrice.append('</span><span id="familycomparisonPIPPrice"> '+itemObjToDisplay.prices.familyNormal.priceNormal.comparisonPrice+"</span></div>");$("familyComparisonPIPContainer").update(compFamPrice)}else{$("familyComparisonPIPContainer").style.display="none"}}else{$("famsection").style.display="none";$("price5").style.visibility="hidden";$("price6").style.visibility="hidden"}if(itemObjToDisplay.prices.hasPrfCharge===true){$("prfCharge").style.display="block"}if(itemObjToDisplay.prices.hasEcoFee===true){$("prfCharge").style.display="block"}setStoreCheckProductId(itemObjToDisplay);activeItemObject=itemObjToDisplay}function getImperialPackageInfo(imperialArray){packageObject=new Object();packageObject={articleNoTxt:articleNo,widthTxt:width,heightTxt:height,lengthTxt:length,weightTxt:weight,quantityTxt:quantity};packageObject.articleValue=pipArticleNumber.formatArtNumber(imperialArray[0].articleNumber);if(imperialArray[0].width!=0){packageObject.widthValue=imperialArray[0].width}if(imperialArray[0].height!=0){packageObject.heightValue=imperialArray[0].height}if(imperialArray[0].length!=0){packageObject.lengthValue=imperialArray[0].length}if(imperialArray[0].weight!=0){packageObject.weightValue=imperialArray[0].weight}if(imperialArray[0].quantity!=0){packageObject.quantityValue=imperialArray[0].quantity}return packageObject}function getMetricPackageInfo(metricArray){packageObject=new Object();packageObject={articleNoTxt:articleNo,widthTxt:width,heightTxt:height,lengthTxt:length,weightTxt:weight,quantityTxt:quantity,cmTxt:cm,kgTxt:kg};packageObject.articleValue=pipArticleNumber.formatArtNumber(metricArray[0].articleNumber);if(metricArray[0].width!=0){packageObject.widthValue=Math.round(metricArray[0].width/10)}if(metricArray[0].height!=0){packageObject.heightValue=Math.round(metricArray[0].height/10)}if(metricArray[0].length!=0){packageObject.lengthValue=Math.round(metricArray[0].length/10)}if(metricArray[0].weight!=0){packageObject.weightValue=Math.round(metricArray[0].weight/100)/10}if(metricArray[0].quantity!=0){packageObject.quantityValue=metricArray[0].quantity}return packageObject}function openPackageAndMeasurement(args){if(activeItemObject!=null){openPopUp(activeItemObject.packagePopupUrl,"296","270","Pop10",1)}}function findItemsByAttributes(attributeList){var itemFound=false;var flag="";if(attributeList.length===1){itemFound=true}else{flag=attributeList[0].split(";");var attrLength=attributeList.length;for(var i=1;i<attrLength;i++){var temp=[];for(var j=0;j<flag.length;j++){if(attributeList[i].match(flag[j])){temp.push(flag[j])}}flag=temp}if(flag!=""){itemFound=true}}return itemFound}function setStoreCookie(){var storeform=null;if($("stocksearch")!=null){storeform=$("stocksearch")}if(storeform.ikeaStoreNumber1.selectedIndex==0){return false}setCookie("selected_store_num_"+localeJs,storeform.ikeaStoreNumber1.options[storeform.ikeaStoreNumber1.selectedIndex].value,null,"/");return true}function preSelectStore(){var storeNum=getCookie("selected_store_num_"+localeJs);if(storeNum!=null){var storeform=null;if($("stocksearch")!=null){storeform=$("stocksearch");var ikeaStoreLen=storeform.ikeaStoreNumber1.options.length;for(var i=0;i<ikeaStoreLen;i++){if(storeform.ikeaStoreNumber1.options[i].value==storeNum){storeform.ikeaStoreNumber1.options.selectedIndex=i}}}}}function setStoreCheckProductId(chosenItem){var storeform=null;if($("stocksearch")!=null){storeform=$("stocksearch")}if(storeform!=null){storeform.productId.value=chosenItem.catEntryId;storeform.partNumber.value=chosenItem.partNumber}}function checkStockPressed(){var storeform=null;if($("stocksearch")!=null){storeform=$("stocksearch")}var tempStore=$("ikeaStoreNumber1");var storeIdSelected=tempStore.options[tempStore.selectedIndex].value;var localStores=storeform.localStores.value;var store;var arr=localStores.split(":");var arrLen=arr.length;for(i=0;i<arrLen;i++){if(arr[i].indexOf(storeIdSelected+"|")!=-1){store=arr[i].substring(arr[i].indexOf("|")+1);break}}var url=storeform.shortURL.value;var partNum=storeform.partNumber.value;var sURL=url.replace(/[A-Za-z0-9]+\/null/,partNum);return sURL}function stockCheckDisplay(itemRelation){if(setStoreCookie()){$("stockInfoDiv").style.display="none";$("loaderDiv").style.display="block";var storeform=$("stocksearch");var storeId=storeform.storeId.value;var partNumber=storeform.partNumber.value;var localStores=storeform.localStores.value;var tempStore=$("ikeaStoreNumber1");var storeIdSelected=tempStore.options[tempStore.selectedIndex].value;var store=tempStore.options[tempStore.selectedIndex].text;var localStoreName;var hasChangedStore=(!globalVariables.previousStoreId.empty()&&globalVariables.previousStoreId!==storeIdSelected);if(hasChangedStore){irwstatAddLocalFlag("hasChangedStore")}else{irwstatDeleteLocalFlag("hasChangedStore")}globalVariables.previousStoreId=storeIdSelected;var arr=localStores.split(":");var arrLen=arr.length;for(i=0;i<arrLen;i++){if(arr[i].indexOf(storeIdSelected+"|")!=-1){localStoreName=arr[i].substring(arr[i].indexOf("|")+1);break}}var completeStoreURL=storeBaseURL+localStoreName;var completeStockCheckURL=stockCheckServiceURL+partNumber;var price;if(typeof(activeItemObject.prices.familyNormal)!=="undefined"&&typeof(activeItemObject.prices.familyNormal.priceNormal.value)!=="undefined"){price=activeItemObject.prices.familyNormal.priceNormal.value}else{price=activeItemObject.prices.normal.priceNormal.value}price=price.replace(/\s+/g,"");if(showFoodStockDataUnavailableMsg){handleExceptionStockCheckScenario(partNumber,price,storeIdSelected,itemRelation)}else{new Ajax.Request(completeStockCheckURL,{method:"get",contentType:"application/xml",onSuccess:function(response){if(response!=null&&response.status===0){handleExceptionStockCheckScenario(partNumber,price,storeIdSelected,itemRelation)}if(response!=null&&response.status===200&&response.responseXML!=null){var info=IRW.stockcheck.formatStockInfo(response.responseXML,storeIdSelected,partNumber);var pageCode="pip";var status=info.getFormattedStockStatus(pageCode);s.products=";"+info.partNumber+";;;event48=1|event49="+irwStatCheckProductPrice(price)+";eVar33="+status;stockCheckServiceResult(response.responseXML,storeIdSelected,store,completeStoreURL,itemRelation)}},onFailure:function(response){handleExceptionStockCheckScenario(partNumber,price,storeIdSelected,itemRelation)}})}if(stockCheckChoice=="true"){setSessionCookie("display_stock_info_"+localeJs,true,"/")}}}function handleExceptionStockCheckScenario(partNumber,price,storeIdSelected,itemRelation){var displayMessage,waMessage,waStatus;if(showFoodStockDataUnavailableMsg){displayMessage=FOOD_STOCK_DATA_UNAVAILABLE;waMessage="No information available for IKEA food products, please check in store";waStatus=IRW.stockcheck.formatFoodProductsNoStock("pip")}else{displayMessage=SERVICE_UNAVAILABLE;waMessage="Stock check unavailable, stock check service is down";waStatus=IRW.stockcheck.formatErrorStatus("pip")}$("stockInfo").update(displayMessage);$("stockImg").hide();$("localStoreLink").hide();$("viewPrognosis").hide();$("stockInfoDiv").slideDown(400);$("loaderDiv").style.display="none";s.products=";"+partNumber+";;;event48=1|event49="+irwStatCheckProductPrice(price)+";eVar33="+waStatus;irwStatStockCheckFromPIP(waMessage,storeIdSelected,itemRelation)}function nsResolver(prefix){var ns={ir:"http://www.ikea.com/v1.0"};return ns[prefix]||null}function stockChkBtnPressed(itemRelation){irwstatAddLocalFlag("stockChkPressed");stockCheckDisplay(itemRelation)}function stockCheckServiceResult(doc,storeIdSelected,store,completeStoreURL,itemRelation){var isSoldInStore=false;var isInStoreRange=false;var availableStock=-1;var inStockProbabilityCode="";var partsMustBeOrderedInStore="";var stockMsg="";var stockDetail=new StringBuffer();var myStores;var myStore;try{console.log("stockCheckServiceResult: Starting iteration");myStores=doc.getElementsByTagName("localStore");for(var storeCount=0;storeCount<myStores.length;storeCount++){if(myStores[storeCount].getAttribute("buCode")===storeIdSelected){myStore=myStores[storeCount];break}}isSoldInStoreNode=myStore.getElementsByTagName("isSoldInStore")[0];isInStoreRangeNode=myStore.getElementsByTagName("isInStoreRange")[0];availableStockNode=myStore.getElementsByTagName("availableStock")[0];inStockProbabilityCodeNode=myStore.getElementsByTagName("inStockProbabilityCode")[0];partsMustBeOrderedInStoreNode=myStore.getElementsByTagName("partsMustBeOrderedInStore")[0];if(isSoldInStoreNode!==undefined&&isSoldInStoreNode!==null){isSoldInStoreNodeValue=(isSoldInStoreNode.textContent||isSoldInStoreNode.innerText||isSoldInStoreNode.text);if(isSoldInStoreNodeValue==="true"){isSoldInStore=true}}if(isInStoreRangeNode!==undefined&&isInStoreRangeNode!==null){isInStoreRangeNodeValue=(isInStoreRangeNode.textContent||isInStoreRangeNode.innerText||isInStoreRangeNode.text);if(isInStoreRangeNodeValue==="true"){isInStoreRange=true}}if(availableStockNode!==undefined&&availableStockNode!==null){availableStockNodeValue=(availableStockNode.textContent||availableStockNode.innerText||availableStockNode.text);if(availableStockNodeValue.length>0){availableStock=availableStockNodeValue}}if(inStockProbabilityCodeNode!==undefined&&inStockProbabilityCodeNode!==null){inStockProbabilityCodeNodeValue=(inStockProbabilityCodeNode.textContent||inStockProbabilityCodeNode.innerText||inStockProbabilityCodeNode.text);if(inStockProbabilityCodeNodeValue){inStockProbabilityCode=inStockProbabilityCodeNodeValue}}if(partsMustBeOrderedInStoreNode!==undefined&&partsMustBeOrderedInStoreNode!==null){partsMustBeOrderedInStoreNodeValue=(partsMustBeOrderedInStoreNode.textContent||partsMustBeOrderedInStoreNode.innerText||partsMustBeOrderedInStoreNode.text);if(partsMustBeOrderedInStoreNodeValue){partsMustBeOrderedInStore=partsMustBeOrderedInStoreNodeValue}}$("viewPrognosis").down("a").href=checkStockPressed();$("noticeInfo").hide();if(partsMustBeOrderedInStore==""&&inStockProbabilityCode=="HIGH"&&isSoldInStore&&availableStock>0){$("stockImg").show();$("stockImg").replace('<img src="'+highChanceInfoBar+'" id="stockImg" width="57" height="13" />');$("stockInfo").update(MOST_LIKELY_IN_STOCK);$("localStoreLink").show();stockDetail.append("<a href="+completeStoreURL+">"+IKEA+"&nbsp;"+store+"</a>");if(js_ENABLE_STOCK_UNIT==="true"){stockDetail.append('<span class="noOfItems">:</span>&nbsp;<strong class="noOfItems">'+availableStock+"</strong>")}$("localStoreLink").update(stockDetail);$("viewPrognosis").show();stockMsg="High, Most likely in stock"}else{if(partsMustBeOrderedInStore==""&&inStockProbabilityCode=="MEDIUM"&&isSoldInStore&&availableStock>0){$("stockImg").show();$("stockImg").replace('<img src="'+probablyInfoBar+'" id="stockImg" width="57" height="13" />');$("stockInfo").update(PROBABLY_IN_STOCK);$("localStoreLink").show();stockDetail.append("<a href="+completeStoreURL+">"+IKEA+"&nbsp;"+store+"</a>");if(js_ENABLE_STOCK_UNIT==="true"){stockDetail.append('<span class="noOfItems">:</span>&nbsp;<strong class="noOfItems">'+availableStock+"</strong>")}$("localStoreLink").update(stockDetail);$("viewPrognosis").show();$("noticeInfo").show();$("noticeInfo").update(notice+"<a href="+completeStoreURL+">&nbsp;"+storehours+"</a>");stockMsg="Medium, Probably in stock"}else{if(partsMustBeOrderedInStore==""&&inStockProbabilityCode=="LOW"&&isSoldInStore&&availableStock>0){$("stockImg").show();$("stockImg").replace('<img src="'+smallChanceInfoBar+'" id="stockImg" width="57" height="13" />');$("stockInfo").update(SMALL_CHANCE_IN_STOCK);$("localStoreLink").show();stockDetail.append("<a href="+completeStoreURL+">"+IKEA+"&nbsp;"+store+"</a>");if(js_ENABLE_STOCK_UNIT==="true"){stockDetail.append('<span class="noOfItems">:</span>&nbsp;<strong class="noOfItems">'+availableStock+"</strong>")}$("localStoreLink").update(stockDetail);$("viewPrognosis").show();$("noticeInfo").show();$("noticeInfo").update(notice+"<a href="+completeStoreURL+">&nbsp;"+storehours+"</a>");stockMsg="Low, Small chance of being in stock"}else{if(partsMustBeOrderedInStore=="SOME"||partsMustBeOrderedInStore=="ALL"){$("stockImg").hide();$("stockInfo").update(AVAILABLE_BY_ORDER);$("localStoreLink").show();$("localStoreLink").update(" <a href="+completeStoreURL+">"+IKEA+"&nbsp;"+store+"</a>");$("viewPrognosis").show();stockMsg="By Order, Available by order";$("checkProductText").addClassName("checkProductTextWidth")}else{if(availableStock==-1||!isInStoreRange){$("stockImg").hide();$("viewPrognosis").hide();$("stockInfo").update(NOT_FOR_SALE);$("localStoreLink").show();$("localStoreLink").update(" <a href="+completeStoreURL+">"+IKEA+"&nbsp;"+store+"</a>");$("viewPrognosis").hide();stockMsg="Not for sale, Not sold at store";$("checkProductText").addClassName("checkProductTextWidth")}else{if(availableStock==0){$("stockImg").hide();$("stockInfo").update(NOT_IN_STOCK);$("localStoreLink").show();$("localStoreLink").update(" <a href="+completeStoreURL+">"+IKEA+"&nbsp;"+store+"</a>");$("viewPrognosis").show();$("noticeInfo").show();$("noticeInfo").update(notice+"<a href="+completeStoreURL+">&nbsp;"+storehours+"</a>");stockMsg="Not in stock, Not in stock";$("checkProductText").addClassName("checkProductTextWidth")}else{$("stockImg").hide();$("viewPrognosis").hide();$("stockInfo").update(NOT_FOR_SALE);$("localStoreLink").show();$("localStoreLink").update(" <a href="+completeStoreURL+">"+IKEA+"&nbsp;"+store+"</a>");$("viewPrognosis").hide();stockMsg="Not for sale, Not sold at store";$("checkProductText").addClassName("checkProductTextWidth")}}}}}}$("stockInfoDiv").slideDown(400);$("loaderDiv").style.display="none"}catch(e){$("stockInfo").update(SERVICE_UNAVAILABLE);$("stockImg").hide();$("localStoreLink").hide();$("viewPrognosis").hide();$("stockInfoDiv").slideDown(400);$("loaderDiv").style.display="none";stockMsg="Stock check unavailable, stock check service is down";$("checkProductText").addClassName("checkProductTextWidth")}var stockcheck=$("ikeaStoreNumber1");var storeNum=stockcheck.options[stockcheck.options.selectedIndex].value;irwStatStockCheckFromPIP(stockMsg,storeNum,itemRelation)}function loadStockCheckDisplay(){if(getCookie("display_stock_info_"+localeJs)=="true"){stockCheckDisplay()}else{if($("stockInfoDiv")!=null){$("stockInfoDiv").hide()}}}var Image_array=new Array();Image_array[0]=new Array("images/covers/black_S4.jpg","tnail_00","779");Image_array[1]=new Array("images/covers/brownRed_S4.jpg","tnail_01","779");Image_array[2]=new Array("images/covers/darkRed_S4.jpg","tnail_02","719");Image_array[3]=new Array("images/covers/natural_S4.jpg","tnail_03","779");Image_array[4]=new Array("images/covers/orange_S4.jpg","tnail_04","779");Image_array[5]=new Array("images/covers/sand_S4.jpg","tnail_05","779");var currPrice=Image_array[4][2];function showMoreHide(sliderId,number,linkOne){if($(number).hasClassName("displaynone")){$(linkOne).update(showAll);$(number).removeClassName("displaynone")}else{$(linkOne).update(showLess);$(number).addClassName("displaynone")}if(Prototype.Browser.IE){Effect.toggle(sliderId,"slide",{duration:0.2})}else{Effect.toggle(sliderId,"blind",{duration:0.2})}}function widthProdSelected(currTgt,catEntId){var previousImage;var firstDropDown=getFirstDropDown();$$("#prodDiv img").each(function(element){if(element.hasClassName("tNailCurrent")){previousImage=element}});if(typeof(firstDropDown)!="undefined"){var firstDropDownLen=firstDropDown.options.length;for(var i=0;i<firstDropDownLen;i++){if(firstDropDown.options[i].value.indexOf(catEntId)!=-1){firstDropDown.options.selectedIndex=i;break}}}var currImage;if(typeof(currTgt)==="string"){currImage=$(currTgt)}else{currImage=currTgt}if(typeof(previousImage)!="undefined"&&previousImage.hasClassName("tNailCurrent")){previousImage.removeClassName("tNailCurrent");currImage.addClassName("tNailCurrent")}if(previousImage.hasClassName("tNailCurrent")!==currImage.hasClassName("tNailCurrent")){checkValidCombination(0,jProductData)}irwstatAddLocalFlag("colorBarClicked");if(typeof $BV!=="undefined"){changeBVReviews($("thePartnumberInForm").value)}irwStatProductChanged($("thePartnumberInForm").value)}function changeBVReviews(id){var articleId=determineSPRorART(id);$BV.ui("rr","show_reviews",{productId:articleId,doShowContent:function(){irwStatProductBvTabViewed("submission");Effect.ScrollTo("productInfo1");if($("BVTab")!=null&&!$("BVTab").hasClassName("activeTab")){showBVTabAfterClick()}}})}function determineSPRorART(id){var tmpId="";if(id.substring(0,1)=="S"){tmpId="SPR-"+id.substring(1)}else{tmpId="ART-"+id}return tmpId}function setWidthProd(){var previousImage,currentImage;var firstDropDown=getFirstDropDown();if(typeof(firstDropDown)!="undefined"){var dropDownVal=firstDropDown.value.split(";");dropDownVal.each(function(element){var ImgId="img"+element+"_lnk";if(currentImage==null&&$(ImgId)!=null){currentImage=$(ImgId)}})}$$("#prodDiv img").each(function(element){if(element.hasClassName("tNailCurrent")){previousImage=element}});if(typeof(previousImage)!="undefined"&&typeof(currentImage)!="undefined"){previousImage.removeClassName("tNailCurrent");if(typeof(currentImage)!="undefined"){currentImage.addClassName("tNailCurrent");if($("cartTxtMoreLinkNbr")!=null&&!($("cartTxtMoreLinkNbr").hasClassName("displaynone"))&&"cartSlideDownWrapper"==$(currentImage).up(3).id){showMoreHide("cartSlideDownWrapper","cartTxtMoreLinkNbr","cartTxtMoreLinkLbl")}}}}function getFirstDropDown(){var firstDropDown;var optionLen=optionValuesArray.length;for(var i=0;i<optionLen;i++){if(optionValuesArray[i].name=="attributeValuesSelect"){firstDropDown=optionValuesArray[i];break}}return firstDropDown}function addOpacityEffect(idAtt){$(idAtt).style.opacity=0.8;$(idAtt).style.filter="alpha(opacity=70)"}function rmvOpacityEffect(idAtt){$(idAtt).style.opacity=10;$(idAtt).style.filter="alpha(opacity=100)"}function displayMoreProductsModule(url,sscCatalogId,sscCategory,simsCategory,simsCatalogId,depthInFunctionCategory,invalidDIFAttributes,changedOnVal){if(changedOnVal=="0"){if(sscCategory!=""){var depthInSSCUrl=url+"?catalog="+sscCatalogId+"&category="+sscCategory+"&type=json&dataset=small,allImages,prices&count=11&sort=relevance&sortorder=ascending&startIndex=0";var ajaxParams={url:depthInSSCUrl,contentType:"application/json",asyncFlag:true,singletonFlag:false};var inputParams={handlerId:"ssc"};new AjaxRequestObject(ajaxParams,inputParams)}if(simsCategory!==""){var similiarSolutionUrl=url+"?catalog="+simsCatalogId+"&category="+simsCategory+"&type=json&dataset=small,allImages,prices&count=11&sort=relevance&sortorder=ascending&startIndex=0";var ajaxParams={url:similiarSolutionUrl,contentType:"application/json",asyncFlag:true,singletonFlag:false};var inputParams={handlerId:"sims"};new AjaxRequestObject(ajaxParams,inputParams)}}}function displayDepthInFunction(sscCatalogId,depthInFunctionCategory,url,invalidDIFAttributes,reqId){var filterType;var filterName=new StringBuffer();var filterValue=new StringBuffer();var filterNameArray=new Array();var filterValueArray=new Array();var filterNameCount=0;var filterValueCount=0;var attributesLength=chosenProduct.attributes.length;for(var len=0;len<attributesLength;len++){if(typeof(chosenProduct.attributes[len].type)!="undefined"){if(invalidDIFAttributes.indexOf(chosenProduct.attributes[len].type)==-1){filterNameArray.push(chosenProduct.attributes[len].type)}}}filterNameCount=filterNameArray.length;if(filterNameCount>0){filterNameArray.sort()}filterNameArray.each(function(filtType){var attributeFound=false;optionValuesArray.each(function(object){var attrType=object.id.substring(object.id.lastIndexOf("_")+1,object.id.length);if(filtType==attrType){filterValueArray.push(object.options[object.options.selectedIndex].text);attributeFound=true}});if(!attributeFound&&$("attributteValueHidden_"+filtType)!=null){filterValueArray.push($("attributteValueHidden_"+filtType).value)}});if(typeof(activeItemObject.color)!="undefined"&&filterNameCount<2){filterType="&filterType=design";filterName.append("&filterName0=colour");filterValue.append("&filterValue0="+encodeURI(activeItemObject.color))}else{if(filterNameCount>0){filterType="&filterType=attribute";for(i=0;i<filterNameCount;i++){filterName.append("&filterName"+i+"="+filterNameArray[i]);filterValue.append("&filterValue"+i+"="+encodeURI(filterValueArray[i]))}}}if(typeof(filterType)!="undefined"&&isDIFEnabled){var depthInFunctionUrl=url+"?catalog="+sscCatalogId+"&category="+depthInFunctionCategory+"&type=json&dataset=small,allImages,prices&count=50&sort=relevance&sortorder=ascending&startIndex=0"+filterType+filterName.toString()+filterValue.toString();var urlFound=false;difProducts.each(function(difProduct){if(difProduct.url==depthInFunctionUrl){depthInFunctionJSON=difProduct.object;urlFound=true}});if(!urlFound){var ajaxParams={url:depthInFunctionUrl,contentType:"application/json",asyncFlag:true,singletonFlag:true};var inputParams={handlerId:"relatedproducts",requestId:reqId};new AjaxRequestObject(ajaxParams,inputParams)}else{showProductModule(depthInFunctionJSON,"modelVisibleConatiner","dif")}}else{if(!$("moreModel").hasClassName("displaynone")){$("moreModel").addClassName("displaynone")}relatedProducts.requestRelatedProductData(constantAjaxRequest.callRequestThree)}}function showProductModule(productsJson,divId,divPrefix){var itemCount=0;var colNum=5;var itemFormat=new Template('<div id="'+divPrefix+'Td#{id}" class="borderMar"><a href="#{productUrl}" ><img id="img'+divPrefix+"#{id}\" class=\"tNail\" src=#{smallImgSrc} onMouseOver=\"activatePipPopup('moreProductPopup',this.id,'#{smallImgSrc}','#{itemName}','#{itemType}','#{partNumber}','"+divPrefix+'\')"  onMouseOut="hideThumpPopup(this.id)" onClick="irwStatMoreModulesClicked(\''+divId+"')\"/></a></div>");$(divId).update("");var numberOfItems;var divClass=$(divId).up();if(divId=="modelVisibleConatiner"){if($("prodDiv").down()!=null){colNum=5;$("prodDiv").addClassName("widthCol5");$("moreModel").addClassName("moreModelWidth")}else{$("moreModel").addClassName("noMarginLeft");colNum=10}$("sliderContent").update("");numberOfItems=50}else{numberOfItems=10}productsJson.products.each(function(object){var flag=true;if(divId=="modelVisibleConatiner"){var image=object.item.images.small;$$("#moreModel img").find(function(element){if(element.src.indexOf(image)!=-1){flag=false}})}var cart=new Object();if(object.item.partNumber!=activeItemObject.partNumber&&itemCount<numberOfItems&&flag==true){if(itemCount==0||itemCount%colNum==0){if(itemCount<colNum*2){$(divId).insert(new Element("div",{id:divPrefix+"Div"+parseInt(itemCount/5+1)}))}else{$("sliderContent").insert(new Element("div",{id:divPrefix+"Div"+parseInt(itemCount/5+1)}))}}itemCount++;cart.id=itemCount;cart.smallImgSrc=object.item.images.small;cart.partNumber=object.partNumber;cart.itemName=escape(object.item.name);cart.itemType=escape(object.item.facts);cart.productUrl=object.item.URL;if(itemCount<=colNum*2){$(divId).childElements().last().insert(itemFormat.evaluate(cart))}else{$("sliderContent").childElements().last().insert(itemFormat.evaluate(cart));if(itemCount%colNum==0){$("sliderContent").childElements().last().insert("<div class='clear'></div>")}}}});if(divId=="modelVisibleConatiner"){if(itemCount>colNum*2){var moreItems=itemCount-(colNum*2);if($("modelTxtMoreLink").hasClassName("displaynone")){$("modelTxtMoreLink").removeClassName("displaynone")}if($("modelTxtMoreLinkLbl").innerHTML==""){$("modelTxtMoreLinkLbl").update(showAll)}$("modelTxtMoreLinkNbr").update("&nbsp;("+moreItems+"&nbsp;"+moreText+")")}else{if(!$("modelTxtMoreLink").hasClassName("displaynone")){$("modelTxtMoreLink").addClassName("displaynone")}}}if(itemCount>0){$(divClass).removeClassName("displaynone")}else{if(!$(divClass).hasClassName("displaynone")){$(divClass).addClassName("displaynone")}}}function activatePipPopup(action,targetID,prodImg,prodName,prodType,productPartNo,targetSection,averageRating,rating_count){imgId=null;pipPopup.createGenericPopup(149,"","thumpPopup","thumpPopup",targetID,0,0,"setBottomArrow");switch(action){case"pipPopup":newLayout=generateProductLayoutForPip(prodImg,prodName,prodType,targetID,averageRating,rating_count);break;case"moreProductPopup":newLayout=genProdLaytForSims.init(productPartNo,targetSection,null);break;default:alert("something went wrong...")}pipPopup.setGenericContent(newLayout,".divPopupMid");pipPopup.setDynamicHeight(targetID,"thumpPopup");$(targetID).addClassName("addOpacity")}var genProdLaytForSims={init:function(productPartNo,targetSection,product){var productFilter;var stringVal;var prodName;var prodType;var chosenProduct;var compProductFlag=false;var modulesUsed;var retString=new StringBuffer();if(targetSection=="ssc"){productFilter=depthinSSCJSON;modulesUsed="sscContainer"}else{if(targetSection=="sims"){productFilter=similarSolutionJSON;modulesUsed="simsContainer"}else{if(targetSection=="dif"){productFilter=depthInFunctionJSON;modulesUsed="modelVisibleConatiner"}}}if(product===undefined||product===null){chosenProduct=productFilter.products.find(function(object){return object.partNumber==productPartNo})}else{chosenProduct=product;compProductFlag=true;modulesUsed="complete products"}stringVal=this.layOutCreation(chosenProduct,retString,compProductFlag,modulesUsed);prodName=this.setProductName(chosenProduct);prodType=this.setProductType(chosenProduct);stringVal=this.setContent(chosenProduct,prodName,prodType,retString);return stringVal},layOutCreation:function(chosenProduct,retString,compProductFlag,modulesUsed){retString.append('<div id="popupContainer">');var pipPopUpURL=chosenProduct.item.URL;retString.append("<a href=\"javascript:setProductURL('"+compProductFlag+"','"+pipPopUpURL+"','"+modulesUsed+"')\">");retString.append('<div><img class="popupImg" src="'+chosenProduct.item.images.thumb[0]+'"> </div>');if(chosenProduct.item.isNew){retString.append('<div class="newIcon"><img src="'+smallNewImg+'"/></div>')}else{if(chosenProduct.item.prices.normal){if(chosenProduct.item.prices.normal.priceNormal.nlp&&chosenProduct.item.prices.familyNormal==undefined&&!chosenProduct.item.bti&&!chosenProduct.item.prices.normal.priceNormal.tro){retString.append('<div class="nlpImage"><img src="'+nlpPopupImgSrc+'" alt="'+nlpImgAlt+'" border ="0" /></div>')}}}if(chosenProduct.item.bti&&chosenProduct.item.prices.familyNormal==undefined&&!chosenProduct.item.prices.normal.priceNormal.tro){retString.append('<div class="popupTopYellow">&nbsp;</div>');retString.append('<div class="popupMidRed">');retString.append('<div class="popupMidYellow">')}},setProductName:function(chosenProduct){var prodNameFlag=false;var prodName=chosenProduct.item.name;if(prodName.indexOf("/")!=-1&&prodName.indexOf("+")!=-1){prodNameFlag=true;if(prodName.indexOf("/")>prodName.indexOf("+")){var newValue=prodName.substring(0,prodName.indexOf("/")+1);prodName=newValue+" "+prodName.substring(prodName.indexOf("/")+1,prodName.length)}else{var newValue=prodName.substring(0,prodName.indexOf("+")+1);prodName=newValue+" "+prodName.substring(prodName.indexOf("+")+1,prodName.length)}}if(prodName.indexOf("/")!=-1&&!prodNameFlag){var newValue=prodName.substring(0,prodName.indexOf("/")+1);prodName=newValue+" "+prodName.substring(prodName.indexOf("/")+1,prodName.length)}else{if(prodName.indexOf("+")!=-1&&!prodNameFlag){var newValue=prodName.substring(0,prodName.indexOf("+")+1);prodName=newValue+" "+prodName.substring(prodName.indexOf("+")+1,prodName.length)}}return prodName},setProductType:function(chosenProduct){var prodType=chosenProduct.item.facts;var prodTypeFlag=false;if(prodType.indexOf("/")!=-1&&prodType.indexOf("+")!=-1){prodTypeFlag=true;if(prodType.indexOf("/")>prodType.indexOf("+")){var newValue=prodType.substring(0,prodType.indexOf("/")+1);prodType=newValue+" "+prodType.substring(prodType.indexOf("/")+1,prodType.length)}else{var newValue=prodType.substring(0,prodType.indexOf("+")+1);prodType=newValue+" "+prodType.substring(prodType.indexOf("+")+1,prodType.length)}}if(prodType.indexOf("/")!=-1&&!prodTypeFlag){var newValue=prodType.substring(0,prodType.indexOf("/")+1);prodType=newValue+" "+prodType.substring(prodType.indexOf("/")+1,prodType.length)}else{if(prodType.indexOf("+")!=-1&&!prodTypeFlag){var newValue=prodType.substring(0,prodType.indexOf("+")+1);prodType=newValue+" "+prodType.substring(prodType.indexOf("+")+1,prodType.length)}}return prodType},setContent:function(chosenProduct,prodName,prodType,retString){retString.append('<div id="popupProdName" class="popupProdName">'+prodName+"</div>");retString.append('<div id="popupProdType" class="popupProdType">'+prodType+" ");this.getPrevPriceContent(chosenProduct,retString);retString.append("</div>");retString.append('<div id="poupIkeaPriceContainer">');this.getFamilyPriceContent(chosenProduct,retString);this.getPriceContent(chosenProduct,retString);retString.append('<div class="clear"></div>');retString.append("</div>");this.getNormalPriceContent(chosenProduct,retString);if(chosenProduct.item.bti){retString.append("</div>");retString.append("</div>");retString.append('<div class="popupBotRed">&nbsp;</div>')}this.getPrfPriceContent(chosenProduct,retString);retString.append("</a>");if(chosenProduct.item.avg_rating){if(chosenProduct.item.avg_rating<10){retString.append('<div class="ratingsContainer"><div class="ratingStarsContainer" style="float: left;width: 80%;"><div class="ratingStarsOffLarge">\u2605\u2605\u2605\u2605\u2605</div><div class="ratingStarsOnLarge" style="width: '+chosenProduct.item.avg_rating*20+'%">\u2605\u2605\u2605\u2605\u2605</div></div><div class="ratingsCountContainer" style="float: left;width: 20%;display: table;"><a class="ratingsCount" href='+chosenProduct.item.URL+'?bvtab">('+chosenProduct.item.rating_count+")</a></div></div>")}else{retString.append('<div class="ratingsContainer"><div class="ratingStarsContainer" style="float: left;width: 80%;"><div class="ratingStarsOffLarge">\u2605\u2605\u2605\u2605\u2605</div><div class="ratingStarsOnLarge" style="width: '+chosenProduct.item.avg_rating+'%">\u2605\u2605\u2605\u2605\u2605</div></div><div class="ratingsCountContainer" style="float: left;width: 20%;display: table;"><a class="ratingsCount" href='+chosenProduct.item.URL+'?bvtab">('+chosenProduct.item.rating_count+")</a></div></div>")}}retString.append("</div>");return retString},getPriceContent:function(chosenProduct,retString){if((chosenProduct.item.prices.normal.priceNormal.nlp||chosenProduct.item.prices.normal.priceNormal.tro)&&chosenProduct.item.prices.familyNormal===undefined){this.getNlpTroPriceContent(chosenProduct,retString)}else{if(chosenProduct.item.prices.isUnitPricePrimary){retString.append('<span id="popupProdPrice" class="popupProdPrice">'+chosenProduct.item.prices.normal.priceNormalPerUnit.value+"</span>");if(chosenProduct.item.prices.normal.priceNormalPerUnit.unit!=null){retString.append('<span id="popupProdUnit">/'+chosenProduct.item.prices.normal.priceNormalPerUnit.unit+"</span>")}}else{retString.append('<span id="popupProdPrice" class="popupProdPrice">'+chosenProduct.item.prices.normal.priceNormal.value+"</span>")}if(chosenProduct.item.prices.normal.priceNormal.perUnit!=null){retString.append('<span id="popupProdUnit1" class="floatleft">/'+chosenProduct.item.prices.normal.priceNormal.perUnit+"</span>")}if(chosenProduct.item.prices.normal.priceNormal.comparisonPrice!=null){this.getComparisonPriceContent(chosenProduct,retString)}}return retString},getNlpTroPriceContent:function(chosenProduct,retString){if(chosenProduct.item.prices.normal.priceNormal.nlp){if(chosenProduct.item.prices.isUnitPricePrimary){retString.append('<span class="prodPrice" id="txtPriceProduct_'+chosenProduct.item.partNumber+'">'+chosenProduct.item.prices.normal.priceNormalPerUnit.value+"</span>");if(chosenProduct.item.prices.normal.priceNormalPerUnit.unit!=null){retString.append('<span id="popupProdUnit1" class="floatleft prodPrice">/'+chosenProduct.item.prices.normal.priceNormalPerUnit.unit+"</span>")}}else{retString.append('<span class="prodPrice" id="txtPriceProduct_'+chosenProduct.item.partNumber+'">'+chosenProduct.item.prices.normal.priceNormal.value+"</span>");if(chosenProduct.item.prices.normal.priceNormal.perUnit!=null){retString.append('<span id="popupProdUnit1" class="floatleft">/'+chosenProduct.item.prices.normal.priceNormal.perUnit+"</span>")}}if(chosenProduct.item.prices.normal.priceNormal.comparisonPrice!=null){this.getComparisonPriceContent(chosenProduct,retString)}if((typeof(chosenProduct.item.prices.normal.priceNormal.nlpstartdate)!=="undefined")&&(typeof(chosenProduct.item.prices.normal.priceNormal.nlpenddate)!=="undefined")){if(chosenProduct.item.prices.enablenlpinterval==0){retString.append('<div id="nlpPrice"  style="display: none;" class="nlpDate"> </div>')}else{retString.append('<div id="nlpPrice"  style="display: block;" class="nlpDate">'+chosenProduct.item.prices.normal.priceNormal.nlpstartdate+" -<div>"+chosenProduct.item.prices.normal.priceNormal.nlpenddate+"</div></div>")}}else{if((typeof(chosenProduct.item.prices.normal.priceNormal.nlpstartdate)==="undefined")&&(typeof(chosenProduct.item.prices.normal.priceNormal.nlpenddate)!=="undefined")){retString.append('<div id="nlpPrice"  style="display: block;" class="nlpDate"> <div>'+chosenProduct.item.prices.normal.priceNormal.nlpenddate+"</div></div>")}else{if((typeof(chosenProduct.item.prices.normal.priceNormal.nlpstartdate)!=="undefined")&&(typeof(chosenProduct.item.prices.normal.priceNormal.nlpenddate)==="undefined")){retString.append('<div id="nlpPrice"  style="display: block;" class="nlpDate"> <div>'+chosenProduct.item.prices.normal.priceNormal.nlpstartdate+"</div></div>")}}}}else{if(chosenProduct.item.prices.isUnitPricePrimary){retString.append('<span class="prodNlpTroPrice" id="txtPriceProduct'+chosenProduct.item.partNumber+'">'+chosenProduct.item.prices.normal.priceNormalPerUnit.value+"</span>");if(chosenProduct.item.prices.normal.priceNormalPerUnit.unit!=null){retString.append('<span id="popupProdUnit1" class="floatleft prodNlpTroPrice">/'+chosenProduct.item.prices.normal.priceNormalPerUnit.unit+"</span>")}}else{retString.append('<span class="prodNlpTroPrice" id="txtPriceProduct'+chosenProduct.item.partNumber+'">'+chosenProduct.item.prices.normal.priceNormal.value+"</span>");if(chosenProduct.item.prices.normal.priceNormal.perUnit!=null){retString.append('<span id="popupProdUnit1" class="floatleft prodNlpTroPrice">/'+chosenProduct.item.prices.normal.priceNormal.perUnit+"</span>")}}if(chosenProduct.item.prices.normal.priceNormal.comparisonPrice!=null){this.getComparisonPriceContent(chosenProduct,retString)}retString.append('<div id="troPrice"  style="display: block;" class="troDate">'+chosenProduct.item.prices.normal.priceNormal.trostartdate+" -<div>"+chosenProduct.item.prices.normal.priceNormal.troenddate+" <span>"+troDisclaimer+"</span></div></div>")}return retString},getComparisonPriceContent:function(chosenProduct,retString){retString.append('<div class="comparisonContainer"><span>');if(chosenProduct.item.prices.unitMeasureEnglish===displayUnit){retString.append(unitPriceTxt)}else{retString.append(priceText+chosenProduct.item.prices.normal.priceNormalPerUnit.unit)}retString.append('</span> <span class="comparisonPrice"> '+chosenProduct.item.prices.normal.priceNormal.comparisonPrice+"</span></div>")},getPrevPriceContent:function(chosenProduct,retString){if(((chosenProduct.item.prices.normal.priceNormal.nlp&&!chosenProduct.item.bti&&!chosenProduct.item.isNew)||chosenProduct.item.prices.normal.priceNormal.tro)&&chosenProduct.item.prices.familyNormal===undefined){var previousPrice;if(chosenProduct.item.prices.isUnitPricePrimary){previousPrice=chosenProduct.item.prices.normal.priceNormal.previouspriceperunit}else{previousPrice=chosenProduct.item.prices.normal.priceNormal.previousprice}if((chosenProduct.item.prices.normal.priceNormal.nlp&&nlpPrevPriceCrossOverEnabled)||(chosenProduct.item.prices.normal.priceNormal.tro&&troPrevPriceCrossOverEnabled)){retString.append('<span class="prevPrice">'+previousPrice+"</span>");if(chosenProduct.item.prices.normal.priceNormal.perUnit!==""&&chosenProduct.item.prices.normal.priceNormal.perUnit!=null){retString.append('<span id="popupProdUnit1" class="floatleft prevPrice">/'+chosenProduct.item.prices.normal.priceNormal.perUnit+"</span>")}}else{retString.append('<div class="prodNlpTroPrice"><span>'+insteadOf+"&nbsp;</span>"+previousPrice+"</div>");retString.append('<div class="clear"></div>')}}return retString},getNormalPriceContent:function(chosenProduct,retString){if(chosenProduct.item.prices.usesUnitPriceMeasure){if(chosenProduct.item.prices.isUnitPricePrimary){var priceString=pricePerPackage+"&nbsp;"+chosenProduct.item.prices.normal.priceNormal.value;if(priceString.length>25){priceString=pricePerPackage+" "+chosenProduct.item.prices.normal.priceNormal.value}retString.append('<div id="popupProdPackage" class="popupProdUnitPrice">'+priceString+"</div>")}else{var newPriceString=pricePer+"&nbsp;"+chosenProduct.item.prices.normal.priceNormalPerUnit.unit+": "+chosenProduct.item.prices.normal.priceNormalPerUnit.value;if(newPriceString.length>25){newPriceString=pricePer+"&nbsp;"+chosenProduct.item.prices.normal.priceNormalPerUnit.unit+":  "+chosenProduct.item.prices.normal.priceNormalPerUnit.value}retString.append('<div id="popupProdPackage" class="popupProdUnitPrice">'+newPriceString+"</div>")}}return retString},getFamilyPriceContent:function(chosenProduct,retString){if(chosenProduct.item.prices.hasFamilyPrice){retString.append('<div id="poupIkeaFamContainer">');retString.append('<div id="popupIkeaFam" class="popupIkeaFam floatleft">'+ikeaFamily);if(storeId==21){retString.append('<span class="floatleft">'+chosenProduct.item.prices.familyNormal.priceNormal.value+"</span>")}retString.append("</div>");retString.append('<div class="clear"></div>');if(storeId!=21){retString.append('<span id="popupIkeaFamPrice" class="popupIkeaFamPrice">'+chosenProduct.item.prices.familyNormal.priceNormal.value+"</span>")}if(chosenProduct.item.prices.normal.priceNormal.perUnit!=null){retString.append('<span class="familyUnit floatleft">/'+chosenProduct.item.prices.normal.priceNormal.perUnit+"</span>")}if(chosenProduct.item.prices.familyNormal.priceNormal.comparisonPrice!=null){retString.append('<div class="comparisonContainer"><span>');if(chosenProduct.item.prices.unitMeasureEnglish===displayUnit){retString.append(unitPriceTxt)}else{retString.append(priceText+chosenProduct.item.prices.normal.priceNormalPerUnit.unit)}retString.append('</span><span class="comparisonPrice"> '+chosenProduct.item.prices.familyNormal.priceNormal.comparisonPrice+"</span></div>")}if(chosenProduct.item.prices.hasTemporaryFamilyOffer){retString.append('<div id="familyOfferDateMicro"  style="display: block;">'+chosenProduct.item.prices.familyNormal.priceNormal.familyofferstartdate+" -<div>"+chosenProduct.item.prices.familyNormal.priceNormal.familyofferenddate+" <span>"+troDisclaimer+"</span></div></div>")}retString.append("</div>");retString.append('<div class="regularPriceHead">'+ikeaRegular+"</div>")}return retString},getPrfPriceContent:function(chosenProduct,retString){if(chosenProduct.item.prices.normal.priceNormal.priceWithNoPrfCharge!=null){retString.append('<div id="popupPrfContainer">');retString.append('<div id="popupLessPrf1" class="popupLessPrf">'+weee_lessPrf+"&nbsp;"+chosenProduct.item.prices.normal.priceNormal.priceWithNoPrfCharge+"</div>");retString.append('<div id="popupPrf1" class="popupPrf">');retString.append("<a href=\"javascript:openPrfPopup('popupPrf1'); changePopupPos('prfinfo',23)\">"+weee_prf+"</a> <span>"+chosenProduct.item.prices.normal.priceNormal.prfCharge+"</span>");retString.append("</div>");retString.append("</div>")}return retString}};function setProductURL(compProductFlag,pipPopUpURL,modulesUsed){if(compProductFlag==="true"){relatedProducts.bindClickOnComplementaryPdts();irwStatMoreModulesClicked(modulesUsed)}else{irwStatMoreModulesClicked(modulesUsed);window.location.href=pipPopUpURL}}function hideThumpPopup(targetId){imgId=targetId;$("thumpPopup").observe("mouseover",respondToHover);function respondToHover(event){$("thumpPopup").style.display="block";$(imgId).addClassName("addOpacity")}$("thumpPopup").observe("mouseout",respondToOut);function respondToOut(event){$("thumpPopup").style.display="none";$(imgId).removeClassName("addOpacity")}$(imgId).removeClassName("addOpacity");$("thumpPopup").style.display="none"}function generateProductLayoutForPip(prodImg,prodName,prodType,targetID,averageRating,rating_count){var prodNameFlag=false;var prodTypeFlag=false;var catentryId=targetID.replace(/[img,_lnk]/g,"");if(prodName.indexOf("/")!=-1&&prodName.indexOf("+")!=-1){prodNameFlag=true;if(prodName.indexOf("/")>prodName.indexOf("+")){var newValue=prodName.substring(0,prodName.indexOf("/")+1);prodName=newValue+" "+prodName.substring(prodName.indexOf("/")+1,prodName.length)}else{var newValue=prodName.substring(0,prodName.indexOf("+")+1);prodName=newValue+" "+prodName.substring(prodName.indexOf("+")+1,prodName.length)}}if(prodName.indexOf("/")!=-1&&!prodNameFlag){var newValue=prodName.substring(0,prodName.indexOf("/")+1);prodName=newValue+" "+prodName.substring(prodName.indexOf("/")+1,prodName.length)}else{if(prodName.indexOf("+")!=-1&&!prodNameFlag){var newValue=prodName.substring(0,prodName.indexOf("+")+1);prodName=newValue+" "+prodName.substring(prodName.indexOf("+")+1,prodName.length)}}if(prodType.indexOf("/")!=-1&&prodType.indexOf("+")!=-1){prodTypeFlag=true;if(prodType.indexOf("/")>prodType.indexOf("+")){var newValue=prodType.substring(0,prodType.indexOf("/")+1);prodType=newValue+" "+prodType.substring(prodType.indexOf("/")+1,prodType.length)}else{var newValue=prodType.substring(0,prodType.indexOf("+")+1);prodType=newValue+" "+prodType.substring(prodType.indexOf("+")+1,prodType.length)}}if(prodType.indexOf("/")!=-1&&!prodTypeFlag){var newValue=prodType.substring(0,prodType.indexOf("/")+1);prodType=newValue+" "+prodType.substring(prodType.indexOf("/")+1,prodType.length)}else{if(prodType.indexOf("+")!=-1&&!prodTypeFlag){var newValue=prodType.substring(0,prodType.indexOf("+")+1);prodType=newValue+" "+prodType.substring(prodType.indexOf("+")+1,prodType.length)}}if(averageRating){var retString='<div id="popupContainer"><a href="javascript:widthProdSelected(\''+targetID+"','"+catentryId+'\');relatedProducts.init();"><div><img class="popupImg" src="'+prodImg+'"> </div><div id="popupProdName" class="popupProdName">'+prodName+'</div><div id="popupProdType" class="popupProdType">'+prodType+'</div><div class="ratingsContainer"><div class="ratingStarsContainer" style="float: left;width: 80%;"><div class="ratingStarsOffLarge">\u2605\u2605\u2605\u2605\u2605</div><div class="ratingStarsOnLarge" style="width:'+averageRating*20+'%">\u2605\u2605\u2605\u2605\u2605</div></div><div class="ratingsCountContainer" style="float: left;width: 20%;display: table;"><a class="ratingsCount" href=javascript:Effect.ScrollTo("productInfo1");showBVTabAfterClick();>('+rating_count+")</a></div></div></a></div>"}else{var retString='<div id="popupContainer"><a href="javascript:widthProdSelected(\''+targetID+"','"+catentryId+'\');relatedProducts.init();"><div><img class="popupImg" src="'+prodImg+'"> </div><div id="popupProdName" class="popupProdName">'+prodName+'</div><div id="popupProdType" class="popupProdType">'+prodType+"</div></div></a></div>"}return retString}function changePopupPos(popupId,topPos){var arr=$(popupId).positionedOffset();$(popupId).style.top=arr[1]-topPos+"px"}function bindEventsDownload(tagBind,idBind,classNameBind){if(typeof assemblyInstructions!="undefined"){var assemblyCont=generateContentForLiteBox.init("assemblyInstruction");if($(idBind)!=null){$$(tagBind).each(function(element){if(element.hasClassName(classNameBind)){element.observe("click",function(pEvent){liteBox.open(assemblyCont,700,assemblyInstructions,idBind)})}})}}}function bindEventPackge(idBind){var packageCont=generateContentForLiteBox.init("packageInstruction");$(idBind).observe("click",function(pEvent){var packageCont=generateContentForLiteBox.init("packageInstruction");liteBox.open(packageCont,700,packageHeader,idBind)})}function attachAltTxt(name,type,keyFeatures){var altText=name+" "+type+" IKEA";if(typeof keyFeatures!="undefined"){if(keyFeatures!==null&&keyFeatures.indexOf("</t></cb><cb><t>")!=-1){keyFeatures=keyFeatures.split("</t></cb><cb><t>");for(var i=0;i<keyFeatures.length;i++){keyFeatures[i]=keyFeatures[i].replace("<cbs><cb><t>","");keyFeatures[i]=keyFeatures[i].replace("</t></cb></cbs>","");if(altText.length+keyFeatures[i].length<150){altText=altText+" "+keyFeatures[i]}else{break}}}else{keyFeatures=keyFeatures.replace("<cbs><cb><t>","");keyFeatures=keyFeatures.replace("</t></cb></cbs>","");if(altText.length+keyFeatures.length<150){altText=altText+" "+keyFeatures}}}measuer=(unescape(altText.replaceAll("&#34;",'"')));measuer=(unescape(altText.replaceAll("&#39;","'")));$("productImg").alt=altText;if($("img_prodInfo_lnk")!=null){$("img_prodInfo_lnk").alt=altText}}function createLiteBox(){var outerContainer="liteBoxContainer";var bgContainer="liteboxBg";var dynamicHeader;var dynamicContent;var dynamicId;return{open:function(liteBoxContent,liteBoxWidth,liteBoxHeader,elementId){dynamicHeader=liteBoxHeader;dynamicContent=liteBoxContent;dynamicId=elementId;this.setBaseLayout(liteBoxWidth);this.createContentLayer(outerContainer);this.updateDynamicContent(outerContainer);this.centerWindow(bgContainer);this.fadeInBg("open",outerContainer)},setBaseLayout:function(liteBoxWidth){var overlay;if($(outerContainer)===null){var liteBox=new Element("div",{id:"liteBoxContainer"});document.body.insert(liteBox);liteBox.style.width=liteBoxWidth+"px";liteBox.style.display="none"}if($("transperentBg")===null){overlay=new Element("div",{id:"transperentBg"});var h=document.body.getHeight();overlay.setStyle({height:(h)+"px"});document.body.insert(overlay)}else{$("transperentBg").style.display="block"}},close:function(event){var eventTimeout=600;Effect.Fade($(outerContainer),{duration:0.4,from:0.5,to:0});Effect.Fade(bgContainer,{duration:0.4,from:0.5,to:0});$("transperentBg").style.display="none";if(dynamicId!==undefined&&dynamicId!==null){$(dynamicId).stopObserving()}var scTipDelay=setTimeout(function(){switch(dynamicId){case"morePackages":bindEventPackge("morePackages");break;case"downloadLink":bindEventsDownload("span","downloadLink","downloadLink");break;default:break}},eventTimeout)},centerWindow:function(element){var lftPos;var topPos;if($(element)!==null){if(typeof window.innerHeight!="undefined"){lftPos=Math.round(document.viewport.getScrollOffsets().left+((document.viewport.getWidth()-$(element).getWidth()))/2);topPos=Math.round(document.viewport.getScrollOffsets().top+((document.viewport.getHeight()-$(element).getHeight()))/2);$(element).style.top=topPos+"px";$(element).style.left=lftPos+"px"}else{lftPos=Math.round(document.viewport.getScrollOffsets().left+((document.viewport.getWidth()-$(element).getWidth()))/2);topPos=Math.round(document.viewport.getScrollOffsets().top+((document.viewport.getHeight()-$(element).getHeight()))/2);$(element).style.top=topPos+"px";$(element).style.left=lftPos+"px"}}},fadeInBg:function(userAction,whichDiv){Effect.Appear($(whichDiv),{duration:0.4,from:0,to:0.3});Effect.Appear(bgContainer,{duration:0.4,from:0,to:1})},createContentLayer:function(baseContainer){var dimensions=$(baseContainer).getDimensions();if($("liteboxBg")===null){var whiteLayer=new Element("div",{id:"liteboxBg"});document.body.insert(whiteLayer);whiteLayer.style.display="none";whiteLayer.style.width=dimensions.width-60+"px";var contentLayer='<div id="liteBoxContent"><a id="slideshowCloseBtn" href="javascript:void(0)" onclick="liteBox.close();return false;" ></a><div id="instructionContainer" class="instructionContainer"><div id="liteBoxHeadline" class="liteBoxHeadline"> </div><div id="dynamicRows"></div></div></div>';whiteLayer.update(contentLayer)}},updateDynamicContent:function(baseContainer){$("dynamicRows").update(dynamicContent);var contentHeight=$("liteboxBg").getDimensions();$(baseContainer).style.height=contentHeight.height+60+"px";$("transperentBg").observe("click",this.close);$("liteBoxHeadline").update(dynamicHeader);$("liteboxBg").style.display="block";$("liteboxBg").style.visibility="hidden";var thisElement=$("liteboxBg");var temp1=thisElement.getDimensions();var temp2=temp1.height;var temp3=contentHeight.height;if(temp2>temp3){$("liteboxBg").style.width=($("liteboxBg").getWidth()+15)+"px";$("liteBoxContainer").style.width=($("liteBoxContainer").getWidth()+15)+"px"}$("liteboxBg").style.display="none";$("liteboxBg").style.visibility="";this.centerWindow(outerContainer)}}}function changeItemSubFunctions(){var measFlagConstant;return{productInfo:function(itemObjToDisplay,itemPropLen,stockSearchPageSet){var count;for(count=0;count<itemPropLen;count++){var newValue;if($(itemProperties[count])!==null){var flag=false;var value=eval("itemObjToDisplay."+itemProperties[count]);if(itemProperties[count]=="name"||itemProperties[count]=="type"||itemProperties[count]=="productTypeProdInfo"){if(itemProperties[count]==="productTypeProdInfo"){value=itemObjToDisplay.type}if(value){if(value.indexOf("/")!=-1&&value.indexOf("+")!=-1){flag=true;if(value.indexOf("/")>value.indexOf("+")){newValue=value.substring(0,value.indexOf("/")+1);value=newValue+" "+value.substring(value.indexOf("/")+1,value.length)}else{newValue=value.substring(0,value.indexOf("+")+1);value=newValue+" "+value.substring(value.indexOf("+")+1,value.length)}}if(value.indexOf("/")!=-1&&!flag){newValue=value.substring(0,value.indexOf("/")+1);value=newValue+" "+value.substring(value.indexOf("/")+1,value.length)}else{if(value.indexOf("+")!=-1&&!flag){newValue=value.substring(0,value.indexOf("+")+1);value=newValue+" "+value.substring(value.indexOf("+")+1,value.length)}}}if(itemProperties[count]=="type"){value=eval("itemObjToDisplay.type");if(!stockSearchPageSet){var validDesign=itemObjToDisplay.validDesign;if(validDesign.length>0){value=value+uniqueUrl.getCommaSeperatedValue(validDesign)}}if(((itemObjToDisplay.prices.normal.priceNormal.nlp&&!itemObjToDisplay.bti&&typeof(itemObjToDisplay.newsType)=="undefined")||itemObjToDisplay.prices.normal.priceNormal.tro)&&itemObjToDisplay.prices.familyNormal===undefined){var previousPrice;if(itemObjToDisplay.prices.isUnitPricePrimary){previousPrice=itemObjToDisplay.prices.normal.priceNormal.previouspriceperunit}else{previousPrice=itemObjToDisplay.prices.normal.priceNormal.previousprice}if((itemObjToDisplay.prices.normal.priceNormal.nlp&&nlpPrevPriceCrossOverEnabled)||(itemObjToDisplay.prices.normal.priceNormal.tro&&troPrevPriceCrossOverEnabled)){var previousPriceUnit="";if(itemObjToDisplay.prices.normal.priceNormal.perUnit!=null){previousPriceUnit=" /"+itemObjToDisplay.prices.normal.priceNormal.perUnit}if(itemObjToDisplay.prices.isUnitPricePrimary&&(itemObjToDisplay.prices.normal.priceNormalPerUnit.unit!=null)){previousPriceUnit=" /"+itemObjToDisplay.prices.normal.priceNormalPerUnit.unit}var previouspriceperunitDE="";if(itemObjToDisplay.prices.normal.priceNormal.pricePreviousPerUnit!=null){previouspriceperunitDE="<br><span>"+priceText+itemObjToDisplay.prices.unitMeasureEnglish+" "+itemObjToDisplay.prices.normal.priceNormal.pricePreviousPerUnit+"</span>"}else{if(itemObjToDisplay.prices.isUnitPricePrimary){previouspriceperunitDE="<br><span>"+pricePerPackage+" "+itemObjToDisplay.prices.normal.priceNormal.previousprice+"</span>"}}if(!stockSearchPageSet){if(irwstats_locale=="de_DE"){value=value+"<br> <span>"+previousPrice+previousPriceUnit+"</span>"+previouspriceperunitDE}else{value=value+" <span>"+previousPrice+previousPriceUnit+"</span>"}}else{value=value+" <span class = 'sc_com_descPrice'>"+previousPrice+previousPriceUnit+"</span>"}}else{var previousPriceUnit="";if(itemObjToDisplay.prices.normal.priceNormal.perUnit!=null){previousPriceUnit=" /"+itemObjToDisplay.prices.normal.priceNormal.perUnit}value=value+" <b>"+insteadOf+" "+previousPrice+previousPriceUnit+"</b>"}}}}if(itemProperties[count]=="itemNumber"){value=itemObjToDisplay.partNumber;value=pipArticleNumber.formatArtNumber(value)}$(itemProperties[count]).update(value)}}},prfPriceChange:function(itemObjToDisplay,stockSearchPageSet,pricePropLen){var count;for(count=0;count<pricePropLen;count++){var pricePropertiesName=priceProperties[count];if(pricePropertiesName!==""){var value=eval("itemObjToDisplay.prices."+pricePropertiesName);if(pricePropertiesName==="prfCharge"){value=this.setPrfPriceCharge(itemObjToDisplay,value,pricePropertiesName)}if(pricePropertiesName==="price1"){value=this.setMainPrice(itemObjToDisplay,value,pricePropertiesName)}if(pricePropertiesName==="storeformatpieces"||pricePropertiesName==="storeformatpieces2"||pricePropertiesName==="familystoreformatpieces"){if(typeof(itemObjToDisplay.prices.normal.priceNormal.perUnit)!=="undefined"){$("price1").style.width="100%";if(pricePropertiesName==="familystoreformatpieces"){$("familystoreformatpieces").style.display=""}else{$("storeformatpieces").style.display=""}value="&nbsp;/"+itemObjToDisplay.prices.normal.priceNormal.perUnit}else{if(pricePropertiesName==="familystoreformatpieces"){$("familystoreformatpieces").style.display="none"}else{$("storeformatpieces").style.display="none"}var dimensions=$("productInfoWrapper2").getDimensions();$("price1").style.width=dimensions.width-20+"px"}}}if(pricePropertiesName==="troPrice"){value=itemObjToDisplay.prices.normal.priceNormal.trostartdate+" - "+itemObjToDisplay.prices.normal.priceNormal.troenddate+" <span> "+troDisclaimer+"</span>"}if((typeof(itemObjToDisplay.prices.familyNormal)!=="undefined")&&(pricePropertiesName==="familyDate"||pricePropertiesName==="familyOfferDateStock")){value=itemObjToDisplay.prices.familyNormal.priceNormal.familyofferstartdate+" - "+itemObjToDisplay.prices.familyNormal.priceNormal.familyofferenddate+" <span> "+troDisclaimer+"</span>"}if(pricePropertiesName==="nlpPrice"){if((typeof(itemObjToDisplay.prices.normal.priceNormal.nlpstartdate)!=="undefined")&&(typeof(itemObjToDisplay.prices.normal.priceNormal.nlpenddate)!=="undefined")){value=itemObjToDisplay.prices.normal.priceNormal.nlpstartdate+" - "+itemObjToDisplay.prices.normal.priceNormal.nlpenddate}else{if((typeof(itemObjToDisplay.prices.normal.priceNormal.nlpstartdate)==="undefined")&&(typeof(itemObjToDisplay.prices.normal.priceNormal.nlpenddate)!=="undefined")){value=itemObjToDisplay.prices.normal.priceNormal.nlpenddate}else{if((typeof(itemObjToDisplay.prices.normal.priceNormal.nlpstartdate)!=="undefined")&&(typeof(itemObjToDisplay.prices.normal.priceNormal.nlpenddate)==="undefined")){value=itemObjToDisplay.prices.normal.priceNormal.nlpstartdate}}}}if(pricePropertiesName==="priceProdInfo"){value=itemObjToDisplay.prices.normal.priceNormal.value}if(pricePropertiesName==="price5"&&typeof(itemObjToDisplay.prices.familyNormal)!=="undefined"){value=this.setFamilyPrice(itemObjToDisplay,value,pricePropertiesName)}if(pricePropertiesName==="price6"&&typeof(itemObjToDisplay.prices.familyNormal)!=="undefined"){value=itemObjToDisplay.prices.familyNormal.priceNormalDual.value}if(pricePropertiesName==="price2"){value=itemObjToDisplay.prices.normal.priceNormalDual.value}if(priceProperties[count]==="packUnitPrice"){value=itemObjToDisplay.prices.normal.priceNormal.packUnitPrice}if(priceProperties[count]==="packUnitPrice5"&&typeof(itemObjToDisplay.prices.familyNormal)!=="undefined"){value=itemObjToDisplay.prices.familyNormal.priceNormal.packUnitPriceFamily}if(priceProperties[count]==="mainPriceExclVat"&&showPriceExclVat&&itemObjToDisplay.prices.normal.priceNormal.priceExclVat!=null){var mMainPrice="";if(itemObjToDisplay.prices.isUnitPricePrimary){mMainPrice=itemObjToDisplay.prices.normal.priceNormalPerUnit.priceExclVat}else{mMainPrice=itemObjToDisplay.prices.normal.priceNormal.priceExclVat}value="("+mMainPrice+" "+exclVatText+")"}if(priceProperties[count]==="famPriceExclVat"&&showPriceExclVat&&typeof(itemObjToDisplay.prices.familyNormal)!=="undefined"&&itemObjToDisplay.prices.familyNormal.priceNormal.priceExclVat!=null){var mFamPrice="";if(itemObjToDisplay.prices.isUnitPricePrimary){mFamPrice=itemObjToDisplay.prices.familyNormal.priceNormalPerUnit.priceExclVat}else{mFamPrice=itemObjToDisplay.prices.familyNormal.priceNormal.priceExclVat}value=this.getExclVattext(mFamPrice)}if($(pricePropertiesName)!=null&&pricePropertiesName!="ecoFee"){$(pricePropertiesName).update(value)}}},getExclVattext:function(price){return"("+price+"&nbsp;"+exclVatText+")"},setPrfPriceCharge:function(itemObjToDisplay,value,pricePropertiesName){value=new StringBuffer();value.append("");if((itemObjToDisplay.bti===true)&&(itemObjToDisplay.prices.hasFamilyPrice===undefined||itemObjToDisplay.prices.hasFamilyPrice===false)&&(itemObjToDisplay.prices.normal.priceNormal.tro===undefined||itemObjToDisplay.prices.normal.priceNormal.tro===false)){if($("productInfoWrapper1")!=null){$("productInfoWrapper1").addClassName("productBtiBack productbtibackpadd productBtiBackWrapPadd")}if($("productInfoWrapper2")!=null){$("productInfoWrapper2").addClassName("productBtiFront productbtifrontpadd productWrapper2padd")}}else{if($("productInfoWrapper1")!=null){$("productInfoWrapper1").removeClassName("productBtiBack productbtibackpadd productBtiBackWrapPadd")}if($("productInfoWrapper2")!=null){$("productInfoWrapper2").removeClassName("productBtiFront productbtifrontpadd productWrapper2padd")}}if(itemObjToDisplay.prices.hasPrfCharge===true&&!itemObjToDisplay.prices.hasEcoFee){var price=itemObjToDisplay.prices.normal.priceNormal.priceWithNoPrfCharge;var prf=itemObjToDisplay.prices.normal.priceNormal.prfCharge;value.append('<div id="prf" class="prfcontainer');if(itemObjToDisplay.bti){value.append(" bti")}value.append('" > <div id = "lessPRF" class = "lessprf" > ');value.append(weee_lessPrf);value.append(price);value.append("</div>");value.append('<div id="prfPopUp" class="prf">');value.append("<a href=\"javascript:openPrfPopup('prfCharge'); changePopupPos('prfinfo',7)\"> ");value.append(weee_prf);value.append("</a> ");value.append('<span id="prfChargeSpan">');value.append(prf);value.append("</span>");value.append("</div>");value.append("</div>");$(pricePropertiesName).update(value)}return value},setMainPrice:function(itemObjToDisplay,value){if($("price1")!=null){if(itemObjToDisplay.prices.isUnitPricePrimary){value=itemObjToDisplay.prices.normal.priceNormalPerUnit.value}else{value=itemObjToDisplay.prices.normal.priceNormal.value}var currentPrice=$("price1").innerHTML.strip();currentPrice=currentPrice.replace(/&nbsp;/g,"");var newPrice=value.replace(/\s/g,"");newPrice=newPrice.replace(/\u00a0/g,"");$("price1").setStyle({opacity:1});if(currentPrice!==newPrice){$("price1").setStyle({opacity:0});$("price1").fade({duration:1,from:0,to:1});if(itemObjToDisplay.prices.isUnitPricePrimary){value=itemObjToDisplay.prices.normal.priceNormalPerUnit.value+'<span class="productunit"> / '+itemObjToDisplay.prices.normal.priceNormalPerUnit.unit+"<span>"}}else{$("price1").setStyle({opacity:1})}}return value},setFamilyPrice:function(itemObjToDisplay,value){if($("price5")!=null){if(itemObjToDisplay.prices.isUnitPricePrimary){value=itemObjToDisplay.prices.familyNormal.priceNormalPerUnit.value}else{value=itemObjToDisplay.prices.familyNormal.priceNormal.value}var enableSuperscript=typeof(js_fn_currencySuperscriptingEnabled)!=="undefined"?js_fn_currencySuperscriptingEnabled:false;if(enableSuperscript){var currency=js_fn_isRScurrency;value=value.replace(/\s/g,"");var currencySup='<sup class="superscriptStyle"> '+currency+"</sup>";value=value.replace(currency,currencySup)}var currentPrice=$("price5").innerHTML.strip();currentPrice=currentPrice.replace(/&nbsp;/g,"");var newPrice=value.replace(/\s/g,"");newPrice=newPrice.replace(/\u00a0/g,"");$("price5").setStyle({opacity:1});if(currentPrice!==newPrice){$("price5").setStyle({opacity:0});$("price5").fade({duration:1,from:0,to:1});if(itemObjToDisplay.prices.isUnitPricePrimary){value=itemObjToDisplay.prices.familyNormal.priceNormalPerUnit.value+'<span class="productunit"> / '+itemObjToDisplay.prices.normal.priceNormalPerUnit.unit+"<span>"}}else{$("price5").setStyle({opacity:1})}}return value},setPrfPriceCharge:function(itemObjToDisplay,value,pricePropertiesName){value=new StringBuffer();value.append("");if((itemObjToDisplay.bti===true)&&(itemObjToDisplay.prices.hasFamilyPrice===undefined||itemObjToDisplay.prices.hasFamilyPrice===false)&&(itemObjToDisplay.prices.normal.priceNormal.tro===undefined||itemObjToDisplay.prices.normal.priceNormal.tro===false)){if($("productInfoWrapper1")!=null){$("productInfoWrapper1").addClassName("productBtiBack productbtibackpadd productBtiBackWrapPadd")}if($("productInfoWrapper2")!=null){$("productInfoWrapper2").addClassName("productBtiFront productbtifrontpadd productWrapper2padd")}}else{if($("productInfoWrapper1")!=null){$("productInfoWrapper1").removeClassName("productBtiBack productbtibackpadd productBtiBackWrapPadd")}if($("productInfoWrapper2")!=null){$("productInfoWrapper2").removeClassName("productBtiFront productbtifrontpadd productWrapper2padd")}}if(itemObjToDisplay.prices.normal.priceNormal.prfCharge){value.append('<div id="prf"');if(itemObjToDisplay.bti){value.append(" bti")}value.append('" >');value.append('<div id="prfPopUp" class="prf">');value.append("<a href=javascript:loadFeesLightBox('"+itemObjToDisplay.partNumber+"')>"+js_fn_WEE_PRF+"</a>"+itemObjToDisplay.prices.normal.priceNormal.prfCharge+"</div>");value.append("</div>");$("ecoFee").style.display="none";$(pricePropertiesName).update(value)}if(itemObjToDisplay.prices.hasEcoFee===true){value.append('<div id="prf"');if(itemObjToDisplay.bti){value.append(" bti")}value.append('" >');value.append('<div id="prfPopUp" class="prf">');value.append("<a href=javascript:loadFeesLightBox('"+itemObjToDisplay.partNumber+"')>"+js_fn_ECO_FEE+"</a>"+itemObjToDisplay.prices.normal.priceNormal.ecoFee+"</div>");value.append("</div>");$("ecoFee").style.display="none";$(pricePropertiesName).update(value)}return value},setMainPrice:function(itemObjToDisplay,value){if($("price1")!=null){if(itemObjToDisplay.prices.isUnitPricePrimary){value=itemObjToDisplay.prices.normal.priceNormalPerUnit.value}else{value=itemObjToDisplay.prices.normal.priceNormal.value}var enableSuperscript=typeof(js_fn_currencySuperscriptingEnabled)!=="undefined"?js_fn_currencySuperscriptingEnabled:false;if(enableSuperscript){var currency=js_fn_isRScurrency;value=value.replace(/\s/g,"");var currencySup='<sup class="superscriptStyle"> '+currency+"</sup>";value=value.replace(currency,currencySup)}var currentPrice=$("price1").innerHTML.strip();currentPrice=currentPrice.replace(/&nbsp;/g,"");var newPrice=value.replace(/\s/g,"");newPrice=newPrice.replace(/\u00a0/g,"");$("price1").setStyle({opacity:1});if(currentPrice!==newPrice){$("price1").setStyle({opacity:0});$("price1").fade({duration:1,from:0,to:1});if(itemObjToDisplay.prices.isUnitPricePrimary){value=itemObjToDisplay.prices.normal.priceNormalPerUnit.value+'<span class="productunit"> / '+itemObjToDisplay.prices.normal.priceNormalPerUnit.unit+"<span>"}}else{$("price1").setStyle({opacity:1})}}return value},warningInfo:function(itemObjToDisplay){if(itemObjToDisplay.descriptiveAttributes!==undefined&&itemObjToDisplay.descriptiveAttributes.WARNING){value=new StringBuffer();value.append('<img src="');value.append(msDir);value.append(localeJs);value.append("/");value.append(itemObjToDisplay.descriptiveAttributes.WARNING.image1);value.append('"/>');value.append(itemObjToDisplay.descriptiveAttributes.WARNING.valueName);$("warningInfo").update(value)}},setMeasure:function(itemObjToDisplay,value,measure){measFlagConstant=getPackageDetails.constantContainer();var size1;var size2;if(measFlag==measFlagConstant.IMPERIAL_MEAS){size1=itemObjToDisplay.imperial}else{if(measFlag==measFlagConstant.METRIC_MEAS){size2=itemObjToDisplay.metric}else{if(measFlag==measFlagConstant.IMPERAIL_METRIC_MEAS){size1=itemObjToDisplay.imperial;size2=itemObjToDisplay.metric}else{if(measFlag==measFlagConstant.METRIC_IMPERIAL_MEAS){size1=itemObjToDisplay.metric;size2=itemObjToDisplay.imperial}}}}if(measure==="imperial"&&size1!==undefined){var dimensions1=size1.split("<br/>");var imperial="";dimensions1.each(function(element){imperial=imperial+element+"<br/>"});value=imperial}if(measure==="metric"&&size2!==undefined){var dimensions2=size2.split("<br/>");var metric="";dimensions2.each(function(element){metric=metric+element+"<br/>"});value=metric}return value},californiaTitle:function(itemObjToDisplay){if($("californiaTitle20Product")!==null){var calTitle20=itemObjToDisplay.californiaTitle20Product;if(calTitle20!==undefined&&calTitle20!==null&&calTitle20){var innerHTML=californiaLegalText+"&nbsp;"+californiaUrlText+"&nbsp; <a href='"+californiaUrlRef+"'>"+californiaMoreInfo+"</a>";$("californiaTitle20Product").update(innerHTML);$("californiaTitle20Product").style.visibility="visible"}else{$("californiaTitle20Product").style.visibility="hidden"}}},salesArg:function(itemObjToDisplay){var valueCustBenifit=itemObjToDisplay.custBenefit;var valueSummaryBenifit=itemObjToDisplay.summaryBenefit;var value="";if(typeof valueSummaryBenifit!="undefined"){if(valueSummaryBenifit!==null){value='<div id="salesArgHead">'+whyWeLikeIt+"</div>";value=value+valueSummaryBenifit}}else{if(typeof valueCustBenifit!="undefined"){if(valueCustBenifit!==null){var value=itemObjToDisplay.custBenefit;if(valueCustBenifit.indexOf("</t></cb><cb><t>")!=-1){var keyFeatures=valueCustBenifit.split("</t></cb><cb><t>");value="";keyFeatures.each(function(keyFeaturesItr,i){if(value.length<72){if(i!==0){value=value+" "}value=value+keyFeatures[i]}})}}else{value="";return value}var tmpArr=readMore.split(" ");value=value+'<br> <a id="scrollbut" style="white-space:nowrap;" class="links" href="javascript:void(0);" onclick="relatedProducts.bindMouseDownOnMoreInfoLink();">'+readMore+"</a>";return value}}if(value!=""){value=value+'<br> <a id="scrollbut" style="white-space:nowrap;" class="links" href="javascript:void(0);" onclick="relatedProducts.bindMouseDownOnMoreInfoLink();">'+readMore+"</a>"}return value},downloadAssembly:function(itemObjToDisplay){if((itemObjToDisplay.attachments).length>1){value='<span id="downloadLink" class="downloadLink">'+download+'</span><span id="disclaim" class="disclaimer">('+pdf+")</span>";return value}else{if((itemObjToDisplay.attachments).length==1){value="<a href="+itemObjToDisplay.attachments[0].attachmentPath+' onclick="irwStatDownload(this)" name="'+assemblyInstructions+'"  target="_new">'+itemObjToDisplay.attachments[0].attachmentName+'</a>&nbsp;<span class="disclaimer">('+pdf+")</span>";return value}}},downloadAssemblyProdInfo:function(itemObjToDisplay){if((itemObjToDisplay.attachments).length>1){value='<span id="downloadLinkProdInfo" class="downloadLink">'+assemblyProdInfo+"</span>";return value}else{if((itemObjToDisplay.attachments).length==1){value="<a href="+itemObjToDisplay.attachments[0].attachmentPath+' onclick="irwStatDownload(this)" name="'+assemblyInstructions+'" target="_new"><span id="downloadLink1" class="downloadLink">'+assemblyProdInfo+"</span></a>";return value}}},templatePackage:function(tmpArray){tmpArray.each(function(object){packageValue=new StringBuffer();if(object.articleNumber!==null){packageValue.append(" #{articleNoTxt}  #{articleValue} <br/>")}if(object.width!==null&&object.width!==0){packageValue.append(" #{widthTxt}  #{widthValue}  #{cmTxt} <br/>")}if(object.height!==null&&object.height!==0){packageValue.append(" #{heightTxt}  #{heightValue}  #{cmTxt} <br/>")}if(object.length!==null&&object.length!==0){packageValue.append(" #{lengthTxt}  #{lengthValue}  #{cmTxt}<br/>")}if(object.weight!==null&&object.weight!==0){packageValue.append(" #{weightTxt}  #{weightValue}  #{kgTxt} <br/>")}if(object.quantity!==0){packageValue.append(" #{quantityTxt}  #{quantityValue} <br/>")}});return packageValue},getPackageInfo:function(itemObjToDisplay){var valArray;measFlagConstant=getPackageDetails.constantContainer();if(measFlag==measFlagConstant.IMPERIAL_MEAS||measFlag==measFlagConstant.IMPERAIL_METRIC_MEAS){valArray=itemObjToDisplay.imperialPackageInfo;return valArray}if(measFlag==measFlagConstant.METRIC_MEAS||measFlag==measFlagConstant.METRIC_IMPERIAL_MEAS){valArray=itemObjToDisplay.metricPackageInfo;return valArray}},getNewPackageInfo:function(itemObjToDisplay){if(itemObjToDisplay.pkgInfoArr!=null){var valArray=itemObjToDisplay.pkgInfoArr;if(itemObjToDisplay.pkgInfoArr.length==1){var valArray=itemObjToDisplay.pkgInfoArr[0].pkgInfo}}else{var valArray=0}return valArray},getNewPackageCompleteInfo:function(itemObjToDisplay,contentMustBeCompleted){var NewPackageCompleteInfo=new StringBuffer();var PkgInfoArrObj=itemObjToDisplay.pkgInfoArr;for(var i=0;i<PkgInfoArrObj.length;i++){var PkgInfoArr=PkgInfoArrObj[i];var articlePackageNumber=PkgInfoArr.articleNumber;var getValue=PkgInfoArr.pkgInfo[0];var quantity=getValue.quantity;if(getValue.lengthMet!==undefined&&getValue.lengthImp!==undefined){var lengthTotal=lengthTitle+":&nbsp;"+getValue.lengthImp+"&nbsp;("+getValue.lengthMet+")<br>"}else{if(getValue.lengthMet!==undefined){var lengthTotal=lengthTitle+":&nbsp;"+getValue.lengthMet+"<br>"}else{if(getValue.lengthImp!==undefined){var lengthTotal=lengthTitle+":&nbsp;"+getValue.lengthImp+"<br>"}else{var lengthTotal=""}}}if(getValue.widthMet!==undefined&&getValue.widthImp!==undefined){var widthTotal=widthTitle+":&nbsp;"+getValue.widthImp+"&nbsp;("+getValue.widthMet+")<br>"}else{if(getValue.widthMet!==undefined){var widthTotal=widthTitle+":&nbsp;"+getValue.widthMet+"<br>"}else{if(getValue.widthImp!==undefined){var widthTotal=widthTitle+":&nbsp;"+getValue.widthImp+"<br>"}else{var widthTotal=""}}}if(getValue.weightMet!==undefined&&getValue.weightImp!==undefined){var weightTotal=weightTitle+":&nbsp;"+getValue.weightImp+"&nbsp;("+getValue.weightMet+")<br>"}else{if(getValue.weightMet!==undefined){var weightTotal=weightTitle+":&nbsp;"+getValue.weightMet+"<br>"}else{if(getValue.weightImp!==undefined){var widthTotal=weightTitle+":&nbsp;"+getValue.weightImp+"<br>"}else{var weightTotal=""}}}if(getValue.heightMet!==undefined&&getValue.heightImp!==undefined){var heightTotal=heightTitle+":&nbsp;"+getValue.heightImp+"&nbsp;("+getValue.heightMet+")<br>"}else{if(getValue.heightMet!==undefined){var heightTotal=heightTitle+":&nbsp;"+getValue.heightMet+"<br>"}else{if(getValue.heightImp!==undefined){var heightTotal=heightTitle+":&nbsp;"+getValue.heightImp+"<br>"}else{var heightTotal=""}}}if(getValue.diameterMet!==undefined&&getValue.diameterImp!==undefined){var diameterTotal=diameterTitle+":&nbsp;"+getValue.diameterImp+"&nbsp;("+getValue.diameterMet+")<br>"}else{if(getValue.diameterMet!==undefined){var diameterTotal=diameterTitle+":&nbsp;"+getValue.diameterMet+"<br>"}else{if(getValue.diameterImp!==undefined){var diameterTotal=diameterTitle+":&nbsp;"+getValue.diameterImp+"<br>"}else{var diameterTotal=""}}}var consumerPackNo=getValue.consumerPackNo;var newformat=pipArticleNumber.formatArtNumber(articlePackageNumber);if(itemObjToDisplay.nopackages>1){var packageAmount=packages}else{if(itemObjToDisplay.nopackages==1){var packageAmount=singlePackage}}NewPackageCompleteInfo.append('<div id="packageInfo1">'+articleNoTitle+":&nbsp;"+newformat+"<br>"+packageAmount+":&nbsp;"+quantity+"</div>");NewPackageCompleteInfo.append('<div id="packageInfo2">'+widthTotal+heightTotal+lengthTotal+diameterTotal+weightTotal+"</div>")}var packageInfo1=new Template(NewPackageCompleteInfo);return packageInfo1},getPackageCompleteInfo:function(itemObjToDisplay,packageTemplate){if(measFlag==measFlagConstant.IMPERIAL_MEAS){tmpArray=itemObjToDisplay.imperialPackageInfo;packageObject=getImperialPackageInfo(tmpArray);packageCompleteInfo=packageTemplate.evaluate(packageObject);return packageCompleteInfo}if(measFlag==measFlagConstant.METRIC_MEAS){tmpArray=itemObjToDisplay.metricPackageInfo;packageObject=getMetricPackageInfo(tmpArray);packageCompleteInfo=packageTemplate.evaluate(packageObject);return packageCompleteInfo}if(measFlag==measFlagConstant.IMPERAIL_METRIC_MEAS){tmpArray=itemObjToDisplay.imperialPackageInfo;packageObject=getImperialPackageInfo(tmpArray);packageCompleteInfo=packageTemplate.evaluate(packageObject);tmpArray=itemObjToDisplay.metricPackageInfo;packageObject=getMetricPackageInfo(tmpArray);packageCompleteInfo=packageCompleteInfo+"<br/>"+packageTemplate.evaluate(packageObject);return packageCompleteInfo}if(measFlag==measFlagConstant.METRIC_IMPERIAL_MEAS){tmpArray=itemObjToDisplay.metricPackageInfo;packageObject=getMetricPackageInfo(tmpArray);packageCompleteInfo=packageTemplate.evaluate(packageObject);tmpArray=itemObjToDisplay.imperialPackageInfo;packageObject=getImperialPackageInfo(tmpArray);packageCompleteInfo=packageCompleteInfo+"<br/>"+packageTemplate.evaluate(packageObject);return packageCompleteInfo}},customerBenefitsText:function(itemObjToDisplay,value){var keyFeatures;if(typeof value!="undefined"){if(value!==null&&value.indexOf("</t></cb><cb><t>")!=-1){keyFeatures=value.split("</t></cb><cb><t>");value="";for(var i=0;i<keyFeatures.length;i++){if(i==keyFeatures.length-1){value=value+"<div>- "+keyFeatures[i]+"</div>"}else{value=value+'<div style="padding-bottom : 10px">- '+keyFeatures[i]+"</div>"}}return value}else{value="<div>- "+value+"</div>";return value}}}}}var generateContentForLiteBox=function(){var measFlagConstant;var dynamicContent;var docMarker;var docType;return{init:function(liteBoxName,docs){docMarker=docs;measFlagConstant=getPackageDetails.constantContainer();if(liteBoxName==="assemblyInstruction"){dynamicContent=this.setAssemblyContent();return dynamicContent}else{if(liteBoxName==="packageInstruction"){if(activeItemObject.imperialPackageInfo!=null||activeItemObject.metricPackageInfo!=null){var packageHedaer=this.setPackageColumnHeader();return this.setPackageContent(packageHedaer)}else{var packageHedaer=this.setPackageColumnHeader();return this.setPackageContentNew(packageHedaer)}}else{if(liteBoxName==="faqInstruction"){return this.setFaqContent()}}}},setAssemblyContent:function(){var colHeader='<div class="rowContainer"><div class="colArticle liteBoxSubheadlines">'+article+'</div><div class="colInstruction liteBoxSubheadlines">'+assemblyInstructions+'</div><div class="clear"></div></div>';var assemblyStr=new StringBuffer();var assemblyTmp=new Template('<div class="rowContainer"><div class="colArticle">#{articleNo}</div><div class="colInstruction"><a href="#{attachmentPath}" class="assemblyLink" onclick="irwStatDownload(this)" name="'+assemblyInstructions+'" target="_new">#{attachmentName}</a><span class="fileType">('+pdf+')</span></div><div class="clear"></div></div>');activeItemObject.attachments.each(function(object){if(object!==null){var attachmentObj={};attachmentObj.articleNumber=pipArticleNumber.formatArtNumber(object.articleNumber);attachmentObj.attachmentPath=object.attachmentPath;attachmentObj.attachmentName=object.attachmentName;assemblyStr.append(assemblyTmp.evaluate(attachmentObj))}});return colHeader+assemblyStr},setPackageColumnHeader:function(){var colHeader;colHeader=new StringBuffer();if(activeItemObject.imperialPackageInfo==null&&activeItemObject.metricPackageInfo==null){colHeader.append('<div class="rowContainerPackageNew borderNone">');colHeader.append('<div class="colArticleNew liteBoxSubheadlines">'+articleNoTitle+"</div>");colHeader.append('<div class="colInstruction liteBoxSubheadlines colPackNew">'+packages+"</div>");colHeader.append('<div class="colInstruction liteBoxSubheadlines colWidthNew">'+widthTitle+"</div>");colHeader.append('<div class="colInstruction liteBoxSubheadlines colHeightNew">'+heightTitle+"</div>");colHeader.append('<div class="colInstruction liteBoxSubheadlines colLengthNew">'+lengthTitle+"</div>");colHeader.append('<div class="colInstruction liteBoxSubheadlines colDiameterNew">'+diameterTitle+"</div>");colHeader.append('<div class="colInstruction liteBoxSubheadlines colWeightNew">'+weightTitle+"</div>")}else{colHeader.append('<div class="rowContainer borderNone">');colHeader.append('<div class="colArticle liteBoxSubheadlines">'+articleNoTitle+"</div>");colHeader.append('<div class="colInstruction liteBoxSubheadlines colPack">'+packages+"</div>");colHeader.append('<div class="colInstruction liteBoxSubheadlines colWidth">'+widthTitle+"</div>");colHeader.append('<div class="colInstruction liteBoxSubheadlines colHeight">'+heightTitle+"</div>");colHeader.append('<div class="colInstruction liteBoxSubheadlines colLength">'+lengthTitle+"</div>");colHeader.append('<div class="colInstruction liteBoxSubheadlines colWeight">'+weightTitle+"</div>")}colHeader.append('<div class="clear"></div>');colHeader.append("</div>");return colHeader},setPackageContent:function(packageHeader){var packageTmp;packageTmp=new Template('<div class="rowContainerPackage"><div class="colArticle">#{articleNo}</div><div class="colPack">#{packages}</div><div class="colWidth">#{width} #{cm}</div><div class="colHeight">#{height} #{cm}</div><div class="colLength">#{length} #{cm}</div><div class="colWeight">#{weight} #{kg}</div><div class="clear"></div></div>');var packageContentStr=new StringBuffer();var tmpArray;if(measFlag==measFlagConstant.IMPERIAL_MEAS){tmpArray=activeItemObject.imperialPackageInfo;tmpArray.each(function(object){packageObject=getPackageDetails.getImperialPackages(object);packageContentStr.append(packageTmp.evaluate(packageObject))})}else{if(measFlag==measFlagConstant.METRIC_MEAS){tmpArray=activeItemObject.metricPackageInfo;tmpArray.each(function(object){packageObject=getPackageDetails.getMetricPackages(object);packageContentStr.append(packageTmp.evaluate(packageObject))})}else{if(measFlag==measFlagConstant.IMPERAIL_METRIC_MEAS){tmpArray=activeItemObject.imperialPackageInfo;tmpArray.each(function(object){packageObject=getPackageDetails.getImperialPackages(object);packageContentStr.append(packageTmp.evaluate(packageObject))});tmpArray=activeItemObject.metricPackageInfo;tmpArray.each(function(object){packageObject=getPackageDetails.getMetricPackages(object);packageContentStr.append(packageTmp.evaluate(packageObject))})}else{if(measFlag==measFlagConstant.METRIC_IMPERIAL_MEAS){tmpArray=activeItemObject.metricPackageInfo;tmpArray.each(function(object){packageObject=getPackageDetails.getMetricPackages(object);packageContentStr.append(packageTmp.evaluate(packageObject))});tmpArray=activeItemObject.imperialPackageInfo;tmpArray.each(function(object){packageObject=getPackageDetails.getImperialPackages(object);packageContentStr.append(packageTmp.evaluate(packageObject))})}}}}return packageHeader+packageContentStr},setPackageContentNew:function(packageHeader){var NewPackageCompleteInfo=new StringBuffer();var PkgInfoArrObj=activeItemObject.pkgInfoArr;for(var i=0;i<PkgInfoArrObj.length;i++){var PkgInfoArr=PkgInfoArrObj[i];var articlePackageNumber=PkgInfoArr.articleNumber;var newformat=pipArticleNumber.formatArtNumber(articlePackageNumber);NewPackageCompleteInfo.append('<div class="rowContainerPackageNew"><div class="colArticleNew">'+newformat+"</div>");for(var j=0;j<PkgInfoArr.pkgInfo.length;j++){var getValue=PkgInfoArr.pkgInfo[j];var quantity=getValue.quantity;if(getValue.lengthMet!==undefined&&getValue.lengthImp!==undefined){var lengthTotal=getValue.lengthImp+"</br>"+getValue.lengthMet}else{if(getValue.lengthMet!==undefined){var lengthTotal=getValue.lengthMet}else{if(getValue.lengthImp!==undefined){var lengthTotal=getValue.lengthImp}else{var lengthTotal="<span>-</span>"}}}if(getValue.widthMet!==undefined&&getValue.widthImp!==undefined){var widthTotal=getValue.widthImp+"</br>"+getValue.widthMet}else{if(getValue.widthMet!==undefined){var widthTotal=getValue.widthMet}else{if(getValue.widthImp!==undefined){var widthTotal=getValue.widthImp}else{var widthTotal="<span>-</span>"}}}if(getValue.weightMet!==undefined&&getValue.weightImp!==undefined){var weightTotal=getValue.weightImp+"</br>"+getValue.weightMet}else{if(getValue.weightMet!==undefined){var weightTotal=getValue.weightMet}else{if(getValue.weightImp!==undefined){var widthTotal=getValue.weightImp}else{var weightTotal="<span>-</span>"}}}if(getValue.heightMet!==undefined&&getValue.heightImp!==undefined){var heightTotal=getValue.heightImp+"</br>"+getValue.heightMet}else{if(getValue.heightMet!==undefined){var heightTotal=getValue.heightMet}else{if(getValue.heightImp!==undefined){var heightTotal=getValue.heightImp}else{var heightTotal="<span>-</span>"}}}if(getValue.diameterMet!==undefined&&getValue.diameterImp!==undefined){var diameterTotal=getValue.diameterImp+"</br>"+getValue.diameterMet}else{if(getValue.diameterMet!==undefined){var diameterTotal=getValue.diameterMet}else{if(getValue.diameterImp!==undefined){var diameterTotal=getValue.diameterImp}else{var diameterTotal="<span>-</span>"}}}var consumerPackNo=getValue.consumerPackNo;NewPackageCompleteInfo.append('<div class="colCollectedNew"><div class="colPackNew">'+quantity+'</div><div class="colWidthNew">'+widthTotal+'</div><div class="colHeightNew">'+heightTotal+'</div><div class="colLengthNew">'+lengthTotal+'</div><div class="colDiameterNew">'+diameterTotal+'</div><div class="colWeightNew">'+weightTotal+"</div></div>")}NewPackageCompleteInfo.append('<div class="clear"></div></div>')}return packageHeader+NewPackageCompleteInfo},setFaqContent:function(){var colDisclaim="<div id='disTexts' class='faqDisTexts'>"+attachmentDisclaimer+"</div>";var colHeader;var assemblyStr=new StringBuffer();var assemblyTmp=new Template('<div class="rowContainer"><div class="colArticle">#{articleNumber}</div><div class="colInstruction"><a href="#{attachmentPath}" class="assemblyLink" onclick="irwStatDownload(this)" name="'+assemblyInstructions+'" target="_new">#{attachmentName}</a>');var docmentType='<span class="fileType">('+pdf+")</span>";var divStructure='</div><div class="clear"></div></div>';activeItemObject.attachments.each(function(docObject){if(docObject!==null){if(docMarker==="ALL"){docType=docObject.name;colHeader='<div class="rowContainer"><div class="colArticle liteBoxSubheadlines">'+article+'</div><div class="colInstruction liteBoxSubheadlines">'+docType+'</div><div class="clear"></div></div>';assemblyStr.append(colHeader);for(var i=0;i<docObject.atcharray.length;i++){var attachmentObj={};attachmentObj.articleNumber=pipArticleNumber.formatArtNumber(docObject.atcharray[i].articleNumber);attachmentObj.attachmentPath=docObject.atcharray[i].attachmentPath;attachmentObj.attachmentName=docObject.atcharray[i].attachmentName;assemblyStr.append(assemblyTmp.evaluate(attachmentObj));var atchPath=docObject.atcharray[i].attachmentPath;var atchPathLowerCase=atchPath.toLowerCase();if(atchPathLowerCase.endsWith(".pdf")){assemblyStr.append(docmentType)}assemblyStr.append(divStructure)}assemblyStr.append('<div class="subSectionDivider"></div>')}else{if(docMarker===docObject.type){docType=docObject.name;colHeader='<div class="rowContainer"><div class="colArticle liteBoxSubheadlines">'+article+'</div><div class="colInstruction liteBoxSubheadlines">'+docType+'</div><div class="clear"></div></div>';assemblyStr.append(colHeader);for(var i=0;i<docObject.atcharray.length;i++){var attachmentObj={};attachmentObj.articleNumber=pipArticleNumber.formatArtNumber(docObject.atcharray[i].articleNumber);attachmentObj.attachmentPath=docObject.atcharray[i].attachmentPath;attachmentObj.attachmentName=docObject.atcharray[i].attachmentName;assemblyStr.append(assemblyTmp.evaluate(attachmentObj));var atchPath=docObject.atcharray[i].attachmentPath;var atchPathLowerCase=atchPath.toLowerCase();if(atchPathLowerCase.endsWith(".pdf")){assemblyStr.append(docmentType)}assemblyStr.append(divStructure)}}}}});return colDisclaim+assemblyStr}}}();var getPackageDetails={constantContainer:function(){var constantPackage={IMPERIAL_MEAS:0,METRIC_MEAS:1,IMPERAIL_METRIC_MEAS:2,METRIC_IMPERIAL_MEAS:3};return constantPackage},getImperialPackages:function(ImperialObj){var packageObject={cm:"",kg:""};packageObject.articleNo=pipArticleNumber.formatArtNumber(ImperialObj.articleNumber);if(typeof(ImperialObj.width)!=="undefined"){packageObject.width=ImperialObj.width}else{packageObject.width="&nbsp;"}if(typeof(ImperialObj.height)!=="undefined"){packageObject.height=ImperialObj.height}else{packageObject.height="&nbsp;"}if(typeof(ImperialObj.length)!=="undefined"){packageObject.length=ImperialObj.length}else{packageObject.length="&nbsp;"}if(typeof(ImperialObj.weight)!=="undefined"){packageObject.weight=ImperialObj.weight}else{packageObject.weight="&nbsp;"}if(typeof(ImperialObj.quantity)!=="undefined"){packageObject.packages=ImperialObj.quantity}else{packageObject.packages="&nbsp;"}return packageObject},getMetricPackages:function(metricObject){var packageObject={};packageObject.articleNo=pipArticleNumber.formatArtNumber(metricObject.articleNumber);if(metricObject.width!==0){packageObject.width=Math.round(metricObject.width/10);packageObject.cm=cm}else{packageObject.width="&nbsp;"}if(metricObject.height!==0){packageObject.height=Math.round(metricObject.height/10);packageObject.cm=cm}else{packageObject.height="&nbsp;"}if(metricObject.length!==0){packageObject.length=Math.round(metricObject.length/10);packageObject.cm=cm}else{packageObject.length="&nbsp;"}if(metricObject.weight!==0){packageObject.weight=Math.round(metricObject.weight/100)/10;packageObject.kg=kg}else{packageObject.weight="&nbsp;"}if(metricObject.quantity!==0){packageObject.packages=metricObject.quantity}else{packageObject.packages="&nbsp;"}return packageObject}};var constantAjaxRequest={callRequestOne:1,callRequestTwo:2,callRequestThree:3,callRequestFour:4,callRequestFive:5};Ajax.Request.prototype.abort=function(){this.transport.onreadystatechange=Prototype.emptyFunction;this.transport.abort();Ajax.activeRequestCount--};document.observe("dom:loaded",function(event){window.onunload=function(){popClass=null}});function showBVTabAfterClick(){if($("BVContainer")!=null){$("BVContainer").style.display="block"}$("matchingProductContainer").style.display="none";$("complementaryProductContainer").style.display="none";$("leftNavBottom").style.display="none";$("techInfoContainer").style.display="none";$("faqContainerJS").style.display="none";$("moreProdModule").style.display="none";$("contactLinkModule").style.display="none";if(globalVariables.expressionMatchCount>0){$("findStyleContainer").style.display="block"}if($("BVTab")!=null){$("BVTab").siblings().each(function(node){node.removeClassName("activeTab");node.addClassName("nonActiveTab")});$("BVTab").removeClassName("nonActiveTab");$("BVTab").addClassName("activeTab")}}var relatedProducts=function(){var TAB_NO_OF_COLUMNS=4;var TAB_PRODUCTS_LIMIT=16;var delayToHideLayer;var remainingProdNum;var idNoItem;var createShowAllLink=false;var rowIterator=1;var itemCount=0;var rowNum=1;var selectedTab="prodInfoTab";var slideshowEnabled=typeof(js_fn_SLIDE_SHOW_ENABLED)!="undefined"?js_fn_SLIDE_SHOW_ENABLED:false;var expressionMatchArr;var mustBeCompletedArr;var getsSaferWithArr;var productCareArr;var mayBeCompletedArr;var interiorFittingsArr;var completementaryItemsArr;var wppExpressionMatchingArr;var wppComplementaryArr;var completeProdArr=[];var expressionMatchRelArr=[];var completementaryItemsRelArr=[];var parentDIV;var activeFaq;var mustBeCompletedCount;var mustBeCountForLayout;function dynamicContent(link,parentDIV){var popStr;var id=link.id;id=id.split("_");popStr=new StringBuffer();popStr.append('<div id="popupContent" class="productContainer">');popStr.append("</div>");return popStr}function hideTransperentLayer(){$("layerTopOfMiniPip").style.display="none";clearTimeout(delayToHideLayer)}function makeBorderBottom(count){var str;if(count===4){str='<li class="liVerticalDivider"></li><li class="liVerticalDivider"></li><li class="liVerticalDivider"></li><li class="liVerticalDivider"></li>'}else{if(count===1){str='<li class="liVerticalDivider"></li><li class="liVerticalDivider"><div></div></li><li class="liVerticalDivider"><div></div></li><li class="liVerticalDivider"><div></div></li>'}else{if(count===2){str='<li class="liVerticalDivider"></li><li class="liVerticalDivider"></li><li class="liVerticalDivider"><div></div></li><li class="liVerticalDivider"><div></div></li>'}else{if(count===3){str='<li class="liVerticalDivider"></li><li class="liVerticalDivider"></li><li class="liVerticalDivider"></li><li class="liVerticalDivider"><div></div></li>'}else{str='<li class="liVerticalDivider"><div></div></li><li class="liVerticalDivider"><div></div></li><li class="liVerticalDivider"><div></div></li><li class="liVerticalDivider"><div></div></li>'}}}}return str}function positionMiniPIP(element){var miniPipPopDimension;var elementHeight;var increaseHeight=10;if(Prototype.Browser.IE){miniPipPopDimension=$(element).up().getDimensions();elementHeight=miniPipPopDimension.height+increaseHeight;return -elementHeight}else{miniPipPopDimension=$(element).down().getDimensions();elementHeight=miniPipPopDimension.height+increaseHeight;return -elementHeight}}function bindMouseOverOnProduct(parentDiv){enableElement=false;if(parentDiv==="complementaryProductContainer"){if($("complementaryProductContainer").getStyle("display")=="none"){$("complementaryProductContainer").style.display="block";$$("#complementaryProductContainer ul .prodClass").each(function(link){link.observe("mouseenter",function(evt){PresentationLayer.initialProdId=link.id;parentDIV=$(link.id).up().id.split("_")[0];new Pintip(link,{content:dynamicContent(link,parentDiv),categoryPage:"true",id:"miniPip",moreOption:"ture",maxWidth:"139",pinY:"bottomPL",align:"bottom",offsetY:positionMiniPIP(link)})})});$("complementaryProductContainer").style.display="none"}else{$$("#complementaryProductContainer ul .prodClass").each(function(link){link.observe("mouseenter",function(evt){PresentationLayer.initialProdId=link.id;parentDIV=$(link.id).up().id.split("_")[0];new Pintip(link,{content:dynamicContent(link,parentDiv),categoryPage:"true",id:"miniPip",moreOption:"ture",maxWidth:"139",pinY:"bottomPL",align:"bottom",offsetY:positionMiniPIP(link)})})})}}else{if(parentDiv==="matchingProductContainer"){if($("matchingProductContainer").getStyle("display")=="none"){$("matchingProductContainer").style.display="block";$$("#matchingProductContainer ul .prodClass").each(function(link){link.observe("mouseenter",function(evt){PresentationLayer.initialProdId=link.id;parentDIV=$(link.id).up().id.split("_")[0];new Pintip(link,{content:dynamicContent(link,parentDiv),categoryPage:"true",id:"miniPip",moreOption:"ture",maxWidth:"139",pinY:"bottomPL",align:"bottom",offsetY:positionMiniPIP(link)})})});$("matchingProductContainer").style.display="none"}else{$$("#matchingProductContainer ul .prodClass").each(function(link){link.observe("mouseenter",function(evt){PresentationLayer.initialProdId=link.id;parentDIV=$(link.id).up().id.split("_")[0];new Pintip(link,{content:dynamicContent(link,parentDiv),categoryPage:"true",id:"miniPip",moreOption:"ture",maxWidth:"139",pinY:"bottomPL",align:"bottom",offsetY:positionMiniPIP(link)})})})}}else{$$("#containerComplementaryProdAll ul .prodClass").each(function(link){link.observe("mouseenter",function(evt){PresentationLayer.initialProdId=link.id;parentDIV=$(link.id).up().id.split("_")[0];new Pintip(link,{content:dynamicContent(link,parentDiv),categoryPage:"true",id:"miniPip",moreOption:"ture",maxWidth:"139",pinY:"bottomPL",align:"bottom",offsetY:positionMiniPIP(link)})})})}}}function toggleDataContainer(eleId){if($("BVTab")!=null&&eleId!="BVTab"&&$("BVTab").hasClassName("activeTab")){$("BVTab").removeClassName("activeTab");$("BVTab").addClassName("nonActiveTab")}switch(eleId){case"matchingProductTab":if($("BVContainer")!=null){$("BVContainer").style.display="none"}$("matchingProductContainer").style.display="block";$("complementaryProductContainer").style.display="none";$("leftNavBottom").style.display="none";$("techInfoContainer").style.display="none";$("findStyleContainer").style.display="none";$("faqContainerJS").style.display="none";$("moreProdModule").style.display="block";$("contactLinkModule").style.display="none";toggleMustBeCompletedPopup("close");break;case"complementaryProductTab":if($("BVContainer")!=null){$("BVContainer").style.display="none"}$("matchingProductContainer").style.display="none";$("complementaryProductContainer").style.display="block";$("leftNavBottom").style.display="none";$("techInfoContainer").style.display="none";$("faqContainerJS").style.display="none";$("moreProdModule").style.display="block";$("contactLinkModule").style.display="none";if(globalVariables.expressionMatchCount>0){$("findStyleContainer").style.display="block"}if(mustBeCompletedCount>0){toggleMustBeCompletedPopup("close")}break;case"prodInfoTab":if($("BVContainer")!=null){$("BVContainer").style.display="none"}$("matchingProductContainer").style.display="none";$("complementaryProductContainer").style.display="none";$("leftNavBottom").style.display="block";$("techInfoContainer").style.display="none";$("faqContainerJS").style.display="none";$("moreProdModule").style.display="block";$("contactLinkModule").style.display="none";if(globalVariables.expressionMatchCount>0){$("findStyleContainer").style.display="block"}toggleMustBeCompletedPopup("close");break;case"BVTab":if($("BVContainer")!=null){$("BVContainer").style.display="block"}$("matchingProductContainer").style.display="none";$("complementaryProductContainer").style.display="none";$("leftNavBottom").style.display="none";$("techInfoContainer").style.display="none";$("faqContainerJS").style.display="none";$("moreProdModule").style.display="none";$("contactLinkModule").style.display="none";if(globalVariables.expressionMatchCount>0){$("findStyleContainer").style.display="block"}toggleMustBeCompletedPopup("close");break;case"faqTab":irwStatContactusFromPIP();if($("BVContainer")!=null){$("BVContainer").style.display="none"}$("matchingProductContainer").style.display="none";$("complementaryProductContainer").style.display="none";$("findStyleContainer").style.display="none";$("leftNavBottom").style.display="none";$("techInfoContainer").style.display="none";$("faqContainerJS").style.display="block";$("moreProdModule").style.display="none";$("contactLinkModule").style.display="block";if(globalVariables.expressionMatchCount>0){$("findStyleContainer").style.display="block"}break;case"techInfoTab":irwStatContactusFromPIP();if($("BVContainer")!=null){$("BVContainer").style.display="none"}$("matchingProductContainer").style.display="none";$("complementaryProductContainer").style.display="none";$("findStyleContainer").style.display="none";$("leftNavBottom").style.display="none";$("faqContainerJS").style.display="none";$("moreProdModule").style.display="block";$("contactLinkModule").style.display="none";$("techInfoContainer").style.display="block";if(globalVariables.expressionMatchCount>0){$("findStyleContainer").style.display="block"}break}}function tabAvailability(tabNonActive){toggleDataContainer(tabNonActive);$(selectedTab).removeClassName("activeTab");$(selectedTab).addClassName("nonActiveTab");$(tabNonActive).removeClassName("nonActiveTab");$(tabNonActive).addClassName("activeTab");selectedTab=tabNonActive}function toggleMustBeCompletedPopup(status){if($("popupMustBeCompleted")!==null){if(status=="open"){$("popupMustBeCompleted").style.display="block"}else{$("popupMustBeCompleted").style.display="none"}}}function faqClicks(item,docType,docName){Event.observe($(item),"click",function(event){var assemblyCont=generateContentForLiteBox.init("faqInstruction",docType);liteBox.open(assemblyCont,700,docName,null)})}return{init:function(){this.getKeys();this.prepareRelatedItems();this.prepareTechInfo();DataStructure.matchingNodes=new Array();DataStructure.complementaryNodes=new Array();if(DataStructure.wppExpressionMatchingArr.length>0){DataStructure.loadPartNumbers(DataStructure.wppExpressionMatchingArr,DataStructure.matchingNodes,expressionMatchArr)}if(DataStructure.wppComplementaryArr.length>0){DataStructure.loadPartNumbers(DataStructure.wppComplementaryArr,DataStructure.complementaryNodes,completementaryItemsArr)}this.cleanContainerDivs();this.requestRelatedProductData(constantAjaxRequest.callRequestOne);this.displayTab();this.bindMouseOverOnTabs();this.bindMouseOutOnTabs();this.bindMouseDownOnTabs();this.bindClickOnFindStyle();if(slideshowEnabled&&(globalVariables.expressionMatchCount>0||globalVariables.complementaryCount>0)){if(globalVariables.expressionMatchCount>0){js_fn_SLIDE_SHOW_IDS=expressionMatchArr}else{js_fn_SLIDE_SHOW_IDS=completementaryItemsArr}slideshow=new Slideshow()}},getKeys:function(){this.keys=new Hash();this.keys.set("r4_more_options",js_fn_MORE_OPTIONS);this.keys.set("r4_more_options_for",js_fn_MORE_OPTIONS_FOR);this.keys.set("r4_more_products",js_fn_MORE_PRODUCTS);this.keys.set("r4_ikea_family",js_fn_IKEA_FAMILY);this.keys.set("r4_all_products_new",js_fn_ALL_PRODUCTS_NEW);this.keys.set("fw11_buy_online",js_fn_BUY_ONLINE);this.keys.set("fw11_save_to_shopping_list",js_fn_SAVE_TO_SHOPPING_LIST);this.keys.set("weee_prf",js_fn_WEE_PRF);this.keys.set("PD_txt_eco_fee",js_fn_ECO_FEE);this.keys.set("eco_include_text",js_fn_FEE_INCLUDING_TXT);this.keys.set("weee_less_prf",js_fn_WEE_LESSPRF);this.keys.set("fw11_slideShow_more_info",js_fn_SLIDE_SHOW_MORE_INFO);this.keys.set("fw11_price_per_package",js_fn_PRICE_PER_PACKAGE);this.keys.set("californiaTitle20LegalText",js_fn_CAL_LEGAL_TEXT);this.keys.set("californiaTitle20UrlText",js_fn_CAL_URL_TEXT);this.keys.set("californiaTitle20UrlRef",js_fn_CAL_URL_REF);this.keys.set("californiaMoreInformation",js_fn_CAL_MORE_INFO);this.keys.set("nlpPrevPriceCrossOver",js_fn_NLP_PREV_PRICE_CROSSOVER_ENABLED);this.keys.set("troPrevPriceCrossOver",js_fn_TRO_PREV_PRICE_CROSSOVER_ENABLED);this.keys.set("insteadOf",js_fn_INSTEAD_OF);this.keys.set("disclaimer",js_fn_DISCLAIMER)},cleanContainerDivs:function(){$("matchingProductTab").style.display="none";$("techInfoContainer").style.display="none";$("complementaryProductTab").style.display="none";if($("completeProdContainer")!=null){$("completeProdContainer").innerHTML="";if(globalVariables.complementaryCount===0){if(!soldSeparatelyDesc.empty()){$("completeProdContainer").style.display="block";$("completeProdContainer").insert(new Element("div",{"class":"completeProdHead"}).update(soldSeparatelyTxt));$("completeProdContainer").insert(new Element("div",{"class":"soldSeparatelyNoComp"}).update(soldSeparatelyDesc))}else{$("completeProdContainer").style.display="none"}}$("complementaryProductContainer").innerHTML=""}$("matchingProductContainer").innerHTML="";idNoItem=0},displaySlideshow:function(productId){var layerTimeOut=100;if(parentDIV==="complementaryProductContainer"||parentDIV==="containerComplementaryProdAll"){slideshow.products=completementaryItemsArr;slideshow.length=globalVariables.complementaryCount;slideshow.relationArr=completementaryItemsRelArr;slideshow.open(productId)}else{if(parentDIV==="matchingProductContainer"){slideshow.products=expressionMatchArr;slideshow.length=globalVariables.expressionMatchCount;slideshow.relationArr=expressionMatchRelArr;slideshow.open(productId)}}$("miniPip").style.display="none";if($("layerTopOfMiniPip")===null){var overlay=new Element("div",{id:"layerTopOfMiniPip"});var h=document.body.getHeight();overlay.setStyle({height:(h)+"px"});document.body.insert(overlay)}else{$("layerTopOfMiniPip").style.display="block"}delayToHideLayer=setTimeout(function(){hideTransperentLayer();if($("miniPip")!==null){$("miniPip").style.display="none"}},layerTimeOut)},updateProduct:function(prodId){var index=PresentationLayer.initialProdId.split("_")[2];if($("complementaryProductContainer").getStyle("display")==="block"){completementaryItemsArr.splice((index-1),1,prodId)}if($("matchingProductContainer").getStyle("display")==="block"){expressionMatchArr.splice((index-1),1,prodId)}},writeBack:function(responseData,depthInFunctionUrl,idChk){switch(currentRequest){case constantAjaxRequest.callRequestOne:if(responseData!==null){relatedProducts.parseXmlResponse(responseData,constantAjaxRequest.callRequestTwo,"completeProdContainer")}relatedProducts.requestRelatedProductData(constantAjaxRequest.callRequestTwo);break;case constantAjaxRequest.callRequestTwo:if(responseData!==null){depthInFunctionJSON=responseData;difProducts.push({url:depthInFunctionUrl,object:depthInFunctionJSON});showProductModule(depthInFunctionJSON,"modelVisibleConatiner","dif")}relatedProducts.requestRelatedProductData(constantAjaxRequest.callRequestThree);if(typeof $BV!=="undefined"){changeBVReviews($("thePartnumberInForm").value)}break;case constantAjaxRequest.callRequestThree:if(responseData!==null){relatedProducts.parseXmlResponse(responseData,constantAjaxRequest.callRequestOne,"matchingProductContainer")}relatedProducts.requestRelatedProductData(constantAjaxRequest.callRequestFour);break;case constantAjaxRequest.callRequestFour:if(responseData!==null){relatedProducts.parseXmlResponse(responseData,constantAjaxRequest.callRequestOne,"complementaryProductContainer")}break;case constantAjaxRequest.callRequestFive:if(responseData!==null){relatedProducts.parseXmlResponse(responseData,constantAjaxRequest.callRequestOne,"containerComplementaryProdAll")}break}},displayTab:function(){if($("BVTab")!=null&&typeof $BV!=="undefined"){$("BVTab").style.display="block";tabAvailability("BVTab")}else{if(typeof($BV)==="undefined"&&$("BVTab")!=null){$("BVTab").style.display="block";$("BVContainer").innerHTML=PD_txt_bvDown;tabAvailability("BVTab")}}if(globalVariables.expressionMatchCount>0||globalVariables.complementaryCount>0||globalVariables.faqCount>0||globalVariables.techCount>0){if(activeFaq==null){$("leftNavBottom").style.display="block";activeFaq=true}if(globalVariables.expressionMatchCount>0){$("matchingProductTab").style.display="block";tabAvailability("matchingProductTab")}if(globalVariables.complementaryCount>0){$("complementaryProductTab").style.display="block";if(globalVariables.expressionMatchCount===0){tabAvailability("complementaryProductTab")}}if(globalVariables.techCount>0){$("techInfoTab").style.display="block"}if(globalVariables.faqCount>0){$("faqTab").style.display="block"}if(globalVariables.faqCount===0){$("faqTab").style.display="none";$("contactLinkModule").style.display="none"}if(globalVariables.techCount===0){$("techInfoTab").style.display="none"}}else{toggleDataContainer("prodInfoTab");tabAvailability("prodInfoTab")}},unbindMouseOverOnProduct:function(status){relatedProductForPip=true;enableElement=true},enableMouseEventOnProduct:function(){relatedProductForPip=false;bindMouseOverOnProduct("matchingProductContainer");bindMouseOverOnProduct("complementaryProductContainer");bindMouseOverOnProduct("containerComplementaryProdAll")},bindMouseDownOnMoreInfoLink:function(){Effect.ScrollTo("productInfo1");if(!$("prodInfoTab").hasClassName("activeTab")){tabAvailability("prodInfoTab")}},bindMouseOverOnTabs:function(){$$(".tabContainer1 li").each(function(link){Event.observe(link,"mouseover",function(event){var mouseOverTab=Event.element(event);if(mouseOverTab.up().hasClassName("nonActiveTab")){mouseOverTab.up().removeClassName("nonActiveTab");mouseOverTab.up().addClassName("nonActiveTabThick")}})})},bindMouseOutOnTabs:function(){$$(".tabContainer1 li").each(function(link){Event.observe(link,"mouseout",function(event){var mouseOutTab=Event.element(event);if(mouseOutTab.up().hasClassName("nonActiveTabThick")){mouseOutTab.up().removeClassName("nonActiveTabThick");mouseOutTab.up().addClassName("nonActiveTab")}})})},bindMouseDownOnTabs:function(){$$(".tabContainer1 li").each(function(link){Event.observe(link,"click",function(event){var mouseDownTab=Event.element(event);if(mouseDownTab.up().identify()=="BVTab"){irwStatProductBvTabViewed("tab")}if(mouseDownTab.up().hasClassName("nonActiveTabThick")){mouseDownTab.up().removeClassName("nonActiveTabThick");mouseDownTab.up().addClassName("activeTab");$(selectedTab).removeClassName("activeTab");$(selectedTab).addClassName("nonActiveTab");selectedTab=mouseDownTab.up().id;toggleDataContainer(selectedTab);closePopup();if($("miniPip")!==null){$("miniPip").style.display="none"}if(enableElement===true){relatedProducts.enableMouseEventOnProduct()}}})})},bindClickOnFindStyle:function(){Event.observe($("findStyle"),"click",function(event){if(!$("matchingProductTab").hasClassName("activeTab")){tabAvailability("matchingProductTab")}})},bindClickOnComplementaryPdts:function(){Effect.ScrollTo("productInfo1");if(!$("complementaryProductTab").hasClassName("activeTab")){tabAvailability("complementaryProductTab")}},bindClickOnShowAll:function(){Event.observe($("createShowAll"),"click",function(event){if($("containerComplementaryProdAll").innerHTML===""){relatedProducts.requestRelatedProductData(constantAjaxRequest.callRequestFive)}else{if($("containerComplementaryProdAll").getStyle("display")==="none"){$("createShowAll").update(showLess);Effect.SlideDown("containerComplementaryProdAll",{duration:0.5});$("complementaryShowall").style.visibility="hidden"}else{$("createShowAll").update(showAll);$("complementaryShowall").style.visibility="visible";if(navigator.userAgent.indexOf("Firefox")!=-1){var tragetedID;if(remainingProdNum>5){tragetedID="complementaryProductContainer_rowId3"}else{tragetedID="complementaryProductContainer_rowId4"}Effect.ScrollTo(tragetedID,{duration:"0.46"})}Effect.SlideUp("containerComplementaryProdAll",{duration:0.5})}}if($("slPopup")!==null){$("slPopup").style.display="none"}if(enableElement===true){relatedProducts.enableMouseEventOnProduct();$("miniPip").style.display="none"}})},bindMouseOverOnCompeltePorduct:function(){$$("#thumpContainer .productImage").each(function(link){Event.observe(link,"mouseover",function(event){pipPopup.createGenericPopup(149,"","thumpPopup","thumpPopup",link,0,0,"setBottomArrow");var id=link.id.split("_");var newLayout=completeProdArr[id[1]];pipPopup.setGenericContent(newLayout,".divPopupMid");pipPopup.setDynamicHeight(link,"thumpPopup");addOpacityEffect(link.down());if(Browser.Version()==6){disable("subdiv")}});Event.observe(link,"mouseout",function(event){hideThumpPopup(link);rmvOpacityEffect(link.down());if(Browser.Version()==6){enable("subdiv")}});Event.observe(link,"click",function(event){irwStatMoreModulesClicked("complete products");Effect.ScrollTo("productInfo1");tabAvailability("complementaryProductTab")})})},requestRelatedProductData:function(requestNumber){var relProdInfoUrl=productsBaseUrl;var relProdInfoUrlSuffix="?type=xml&dataset="+encodeURIComponent(Iows.dataset);currentRequest=requestNumber;switch(requestNumber){case constantAjaxRequest.callRequestOne:var urlCompleteProd="";if(globalVariables.complementaryCount>0){numProducts=globalVariables.complementaryCount>TAB_NO_OF_COLUMNS?TAB_NO_OF_COLUMNS:globalVariables.complementaryCount;urlCompleteProd=relProdInfoUrl+completementaryItemsArr.slice(0,numProducts).toString()+relProdInfoUrlSuffix;var ajaxParams={url:urlCompleteProd,contentType:"application/xml",asyncFlag:true,singletonFlag:true};var inputParams={handlerId:"relatedproducts",requestId:constantAjaxRequest.callRequestOne};new AjaxRequestObject(ajaxParams,inputParams)}else{this.requestRelatedProductData(constantAjaxRequest.callRequestTwo)}break;case constantAjaxRequest.callRequestTwo:if(depthInFunctionCategory!==""){displayDepthInFunction(sscCatalogId,depthInFunctionCategory,moreProdBaseUrl,invalidDIFAttr,constantAjaxRequest.callRequestTwo)}else{this.requestRelatedProductData(constantAjaxRequest.callRequestThree)}break;case constantAjaxRequest.callRequestThree:if(globalVariables.expressionMatchCount>0){var urlMatchingProducts="";urlMatchingProducts=relProdInfoUrl+expressionMatchArr.slice(0,globalVariables.expressionMatchCount).toString()+relProdInfoUrlSuffix;var ajaxParams={url:urlMatchingProducts,contentType:"application/xml",asyncFlag:true,singletonFlag:true};var inputParams={handlerId:"relatedproducts",requestId:constantAjaxRequest.callRequestThree};new AjaxRequestObject(ajaxParams,inputParams)}else{this.requestRelatedProductData(constantAjaxRequest.callRequestFour)}break;case constantAjaxRequest.callRequestFour:if(globalVariables.complementaryCount>0){var urlComplementaryProd="";numProducts=globalVariables.complementaryCount>TAB_PRODUCTS_LIMIT?TAB_PRODUCTS_LIMIT:globalVariables.complementaryCount;urlComplementaryProd=relProdInfoUrl+completementaryItemsArr.slice(0,numProducts).toString()+relProdInfoUrlSuffix;var ajaxParams={url:urlComplementaryProd,contentType:"application/xml",asyncFlag:true,singletonFlag:true};var inputParams={handlerId:"relatedproducts",requestId:constantAjaxRequest.callRequestFour};new AjaxRequestObject(ajaxParams,inputParams)}break;case constantAjaxRequest.callRequestFive:var urlComplementaryProdAll="";numProducts=completementaryItemsArr.length;urlComplementaryProdAll=relProdInfoUrl+completementaryItemsArr.slice(TAB_PRODUCTS_LIMIT,numProducts).toString()+relProdInfoUrlSuffix;var ajaxParams={url:urlComplementaryProdAll,contentType:"application/xml",asyncFlag:true,singletonFlag:true};var inputParams={handlerId:"relatedproducts",requestId:constantAjaxRequest.callRequestFive};new AjaxRequestObject(ajaxParams,inputParams);break}},miniPipTemplate:function(item,checkFeature,targetDiv){this.evaluateDisplayConditions(item);var dimensionTemplate=new Template('<div class="prodDimension">#{dimension}</div>');itemRelation=this.findRelationTypeByItem(item.partNumber);isMustBeCompleted=(itemRelation!==null&&itemRelation=="MUST_BE_COMPLETED_WITH")?true:false;var relationModules=(itemRelation!==null&&itemRelation=="EXPRESSION_MATCH")?"matching products":"complementary products";var buttonContainerId="buttonContainer"+i;var miniPipString=new StringBuffer();liClassList="prodClass";prodContainerClassList="productContainer productContainerPip";if(isMustBeCompleted){liClassList=liClassList+" classMustBeCompleted";prodContainerClassList=prodContainerClassList+" mustBeCompletedBg"}if((itemCount+1)%TAB_NO_OF_COLUMNS===0){liClassList=liClassList+" removeRightBorder"}var moreOptIndex=itemCount;if(checkFeature==="pipLayout"){var index=itemCount+1;if(typeof targetDiv!=="undefined"){if(targetDiv==="containerComplementaryProdAll"){index=16+index;moreOptIndex=16+itemCount}}miniPipString.append('<li id="item_#{partNumber}_'+index+'" class="'+liClassList+'">')}miniPipString.append('<div class="'+prodContainerClassList+'">');if(slideshowEnabled){miniPipString.append("<a href=\"javascript:relatedProducts.displaySlideshow('#{partNumber}','"+parentDIV+'\'); relatedProducts.disableDropdown();" class="zoom" title="Slideshow">&nbsp;</a>')}if(relationModules==="complementary products"){if(DataStructure.wppComplementaryArr.length!==0){if(DataStructure.wppComplementaryArr[moreOptIndex].length>1&&checkFeature==="pipLayout"){miniPipString.append(PresentationLayer.showMoreOption())}}}else{if(DataStructure.wppExpressionMatchingArr.length!==0){if(DataStructure.wppExpressionMatchingArr[moreOptIndex].length>1&&checkFeature==="pipLayout"){miniPipString.append(PresentationLayer.showMoreOption())}}}if(checkFeature==="moreOpt"){miniPipString.append(PresentationLayer.showMoreOption())}if(item.isNew===true){miniPipString.append('<img border="0" class="newImgSmall" alt="#{newImgAlt}" src="#{newImgSrc}"/>')}else{if(item.prices.normal.priceNormal.nlp){miniPipString.append('<img class="nlpImage" src="#{nlpImgSrc}" border="0"/>')}}miniPipString.append("<a href=\"#{URL}\" onclick=\"irwstatSetTrailingTag('IRWStats.productFindingMethod','"+itemRelation+"');irwStatMoreModulesClicked('"+relationModules+"');\">");miniPipString.append('<div><img class="popupImg" src="#{images.thumb[0]}" /> </div> <div class="clear"></div>');if(item.bti===true){miniPipString.append('<div class="productBtiBack" style="width:100px"> <div class="productBtiFront">')}miniPipString.append('<span class="prodName" id="txtNameProduct_#{partNumber}">#{name}</span> <div class="clear"></div>');miniPipString.append('<span class="prodDesc" id="txtDescrProduct_#{partNumber}">#{facts}&nbsp;');if(item.prices.normal.priceNormal.nlp||item.prices.normal.priceNormal.tro){if((item.prices.normal.priceNormal.nlp&&this.keys.get("nlpPrevPriceCrossOver"))||(item.prices.normal.priceNormal.tro&&this.keys.get("troPrevPriceCrossOver"))){miniPipString.append('<span class="prevPrice">#{prices.normal.priceNormal.previousprice} </span>');if(item.prices.normal.priceNormal.perUnit!==null){miniPipString.append('<span class="prevPrice">/#{prices.normal.priceNormal.perUnit}</span>')}}else{miniPipString.append('<div class="prodNlpTroPrice"><span>'+this.keys.get("insteadOf")+" </span>#{prices.normal.priceNormal.previousprice} </div>");if(item.prices.normal.priceNormal.perUnit!==null){miniPipString.append('<div class="prodNlpTroPrice">/#{prices.normal.priceNormal.perUnit}</div>')}}}miniPipString.append("</span>");if(item.prices.hasFamilyPrice){if(item.prices.normal.priceNormalPerUnit.unit!=null){miniPipString.append('<div id="txtPriceFamily_#{partNumber}" class="txtPriceFamily"><span class="popupIkeaFam">'+ikeaFamily+'</span><div class="clear"></div>');miniPipString.append('<div class="prodPriceFamily">#{prices.familyNormal.priceNormal.value}');if(item.prices.isUnitPricePrimary){miniPipString.append("/#{prices.normal.priceNormalPerUnit.unit}")}if(item.prices.normal.priceNormal.perUnit!=null){miniPipString.append('<span class="perProduct"> &nbsp;/#{prices.normal.priceNormal.perUnit}</span>')}miniPipString.append('</div> <div class="clear"></div>')}else{miniPipString.append('<div id="txtPriceFamily_#{partNumber}" class="txtPriceFamily"><span class="popupIkeaFam">'+ikeaFamily+'</span><div class="clear"></div>');miniPipString.append('<div class="prodPriceFamily">#{prices.familyNormal.priceNormal.value}');if(item.prices.normal.priceNormal.perUnit!=null){miniPipString.append('<span class="perProduct"> &nbsp;/#{prices.normal.priceNormal.perUnit}</span>')}if(item.prices.hasFamilyPrice&&item.productFiche=="true"){miniPipString.append('<a class="energy-small" href="javascript:energyLabelBox.open(\'#{partNumber}\');"><span class="energy-arrow-left-small"></span><span class="energy-class-small" value="'+item.energyLabel+'"></span><span class="energy-class-plus-small"></span><div style="display:none">'+item.energyRangeNo+"</div></a>");miniPipString.append('<a class="productFicheSmall" href="javascript:energyLabelBox.open(\'#{partNumber}\');">'+js_ENERGY_PRODUCT_FICHE+"</a>")}miniPipString.append('</div> <div class="clear"></div>')}if(item.prices.familyNormal.priceNormal.comparisonPrice!=null){miniPipString.append('<div class="comparisonContainer"><span>');if(item.prices.unitMeasureEnglish===displayUnit){miniPipString.append(unitPriceTxt)}else{miniPipString.append(priceText+item.prices.normal.priceNormalPerUnit.unit)}miniPipString.append('</span><span class="comparisonPrice"> #{prices.familyNormal.priceNormal.comparisonPrice} </span></div>')}if(item.prices.hasTemporaryFamilyOffer){miniPipString.append('<div id="familyOfferDateMini"  style="display: block;" class="familyOfferDateContainer">#{prices.familyNormal.priceNormal.familyofferstartdate} - #{prices.familyNormal.priceNormal.familyofferenddate} <span>'+this.keys.get("disclaimer")+"</span></div>")}miniPipString.append('<div class="regularPriceHeader">'+ikeaRegular+"</div>")}if(item.prices.normal.priceNormal.nlp||item.prices.normal.priceNormal.tro){if(item.prices.normal.priceNormal.nlp){miniPipString.append('<span class="prodPrice" id="txtPriceProduct_#{partNumber}">#{prices.normal.priceNormal.value}');if(item.prices.normal.priceNormal.perUnit!=null){miniPipString.append('<span class="perProduct"> &nbsp;/#{prices.normal.priceNormal.perUnit}</span>')}miniPipString.append('</span> <div class="clear"></div>');if(item.prices.normal.priceNormal.comparisonPrice!=null){miniPipString.append('<div class="comparisonContainer"><span>');if(item.prices.unitMeasureEnglish===displayUnit){miniPipString.append(unitPriceTxt)}else{miniPipString.append(priceText+item.prices.normal.priceNormalPerUnit.unit)}miniPipString.append('</span><span class="comparisonPrice"> #{prices.normal.priceNormal.comparisonPrice} </span></div>')}if((typeof(item.prices.normal.priceNormal.nlpstartdate)!=="undefined")&&(typeof(item.prices.normal.priceNormal.nlpenddate)!=="undefined")){miniPipString.append('<div id="nlpPrice"  style="display: block;" class="nlpDate">#{prices.normal.priceNormal.nlpstartdate} - #{prices.normal.priceNormal.nlpenddate} </div>')}else{if((typeof(item.prices.normal.priceNormal.nlpstartdate)==="undefined")&&(typeof(item.prices.normal.priceNormal.nlpenddate)!=="undefined")){miniPipString.append('<div id="nlpPrice"  style="display: block;" class="nlpDate">#{prices.normal.priceNormal.nlpenddate} </div>')}else{if((typeof(item.prices.normal.priceNormal.nlpstartdate)!=="undefined")&&(typeof(item.prices.normal.priceNormal.nlpenddate)==="undefined")){miniPipString.append('<div id="nlpPrice"  style="display: block;" class="nlpDate">#{prices.normal.priceNormal.nlpstartdate} </div>')}}}}else{miniPipString.append('<span class="prodNlpTroPrice" id="txtPriceProduct#{partNumber}">#{prices.normal.priceNormal.value}');if(item.prices.normal.priceNormal.perUnit!=null){miniPipString.append('<span class="troUnit"><span class="perProduct"> &nbsp;/#{prices.normal.priceNormal.perUnit}</span></span>')}miniPipString.append("</span>");if(item.prices.normal.priceNormal.comparisonPrice!=null){miniPipString.append('<div class="comparisonContainer"><span>');if(item.prices.unitMeasureEnglish===displayUnit){miniPipString.append(unitPriceTxt)}else{miniPipString.append(priceText+item.prices.normal.priceNormalPerUnit.unit)}miniPipString.append('</span><span class="comparisonPrice"> #{prices.normal.priceNormal.comparisonPrice} </span></div>')}miniPipString.append('<div id="troPrice"  style="display: block;" class="troDate">#{prices.normal.priceNormal.trostartdate} - #{prices.normal.priceNormal.troenddate} <span>'+this.keys.get("disclaimer")+"</span></div>")}miniPipString.append(item.prices.displayPrice)}else{if(item.prices.isUnitPricePrimary){miniPipString.append('<span class="prodPrice" id="txtPriceProduct_#{partNumber}">#{prices.normal.priceNormalPerUnit.value} /#{prices.normal.priceNormalPerUnit.unit}</span> <div class="clear"></div>')}else{if(item.prices.normal.priceNormal.perUnit!=null){miniPipString.append('<span class="prodPrice" id="txtPriceProduct_#{partNumber}">#{prices.normal.priceNormal.value}<span class="perProduct"> &nbsp;/#{prices.normal.priceNormal.perUnit}</span></span><div class="clear"></div>')}else{miniPipString.append('<span class="prodPrice" id="txtPriceProduct_#{partNumber}">#{prices.normal.priceNormal.value}</span> <div class="clear"></div>')}}if(item.prices.hasFamilyPrice!=true&&item.productFiche=="true"){miniPipString.append('<a class="energy-small" href="javascript:energyLabelBox.open(\'#{partNumber}\');"><span class="energy-arrow-left-small"></span><span class="energy-class-small" value="'+item.energyLabel+'"></span><span class="energy-class-plus-small"></span><div style="display:none">'+item.energyRangeNo+"</div></a>");miniPipString.append('<a class="productFicheSmall" href="javascript:energyLabelBox.open(\'#{partNumber}\');">'+js_ENERGY_PRODUCT_FICHE+"</a>")}if(item.bti===true&&item.productFiche=="true"){miniPipString.append('<a class="energy-small" href="javascript:energyLabelBox.open(\'#{partNumber}\');"><span class="energy-arrow-left-small"></span><span class="energy-class-small" value="'+item.energyLabel+'"></span><span class="energy-class-plus-small"></span><div style="display:none">'+item.energyRangeNo+"</div></a>")}if(item.prices.normal.priceNormal.comparisonPrice!=null){miniPipString.append('<div class="comparisonContainer"><span>');if(item.prices.unitMeasureEnglish===displayUnit){miniPipString.append(unitPriceTxt)}else{miniPipString.append(priceText+item.prices.normal.priceNormalPerUnit.unit)}miniPipString.append('</span><span class="comparisonPrice"> #{prices.normal.priceNormal.comparisonPrice} </span></div>')}}if(item.bti===true){miniPipString.append("</div></div>");if(item.productFiche=="true"){miniPipString.append('<a class="productFicheSmall" href="#">'+js_ENERGY_PRODUCT_FICHE+"</a>")}}miniPipString.append("</a>");if(item.isGPR){moreOptionsForTxt=this.keys.get("r4_more_options_for");moreOptionsForTxt=moreOptionsForTxt.replace("{0}","#{name} #{facts}");miniPipString.append('<a href="#{URL}" id="lnkMoreOptProduct7" class="moreOptions" title="'+moreOptionsForTxt+"\" onclick=\"irwstatSetTrailingTag('IRWStats.productFindingMethod','"+itemRelation+"');\">");miniPipString.append(this.keys.get("r4_more_options"));miniPipString.append("</a>")}if(showWeeeRelatedData&&item.prices.isWeePrf){miniPipString.append('<div id="prf#{partNumber}" class="prfcontainer#{btiClass}">');miniPipString.append('<div class="lessprice">#{weee_less_prf} #{prices.normal.priceNormal.priceWithNoPrfCharge}/#{prices.normal.priceNormalPerUnit.unit}</div><div class="prflist">');miniPipString.append("<a href=\"javascript:openPrfPopup('prf#{partNumber}')\">#{weee_prf}</a><span>&nbsp;#{prices.normal.priceNormal.prfCharge}/#{prices.normal.priceNormalPerUnit.unit}</span></div></div>")}if(item.prices.hasFees&&item.prices.hasPrf){miniPipString.append('<div class="prodFees" id="txtFeesProduct_#{partNumber}"><a href=javascript:loadFeesLightBox(\'#{partNumber}\')><div id="ecoIncludeTxt">'+this.keys.get("eco_include_text")+"</div>"+this.keys.get("PD_txt_eco_fee")+'</a><div id="#slideShowPricePIP">'+item.prices.normal.priceNormal.ecoFee+"</div></div>");miniPipString.append('<div class="prodFees" id="txtFeesProduct_#{partNumber}"><a href=javascript:loadFeesLightBox(\'#{partNumber}\')>'+this.keys.get("weee_prf")+'</a><div id="#slideShowPricePIP">'+item.prices.normal.priceNormal.prfCharge+"</div></div>")}if(item.prices.hasFees&&!item.prices.hasPrf){miniPipString.append('<div class="prodFees" id="txtFeesProduct_#{partNumber}"><a href=javascript:loadFeesLightBox(\'#{partNumber}\')><div id="ecoIncludeTxt">'+this.keys.get("eco_include_text")+"</div>"+this.keys.get("PD_txt_eco_fee")+'</a><div id="#slideShowPricePIP">'+item.prices.normal.priceNormal.ecoFee+"</div></div>")}if(!item.prices.hasFees&&item.prices.hasPrf){miniPipString.append('<div class="prodFees" id="txtFeesProduct_#{partNumber}"><a href=javascript:loadFeesLightBox(\'#{partNumber}\')><div id="ecoIncludeTxt">'+this.keys.get("eco_include_text")+"</div>"+this.keys.get("weee_prf")+'</a><div id="#slideShowPricePIP">'+item.prices.normal.priceNormal.prfCharge+"</div></div>")}miniPipString.append('<div class="hiddenSection">');if(item.avg_rating){miniPipString.append('<div class="ratingsContainer"><div class="ratingStarsContainer" style="float: left;width: 80%;"><div class="ratingStarsOffLarge">\u2605\u2605\u2605\u2605\u2605</div><div class="ratingStarsOnLarge" style="width: #{avg_rating}%">\u2605\u2605\u2605\u2605\u2605</div></div><div class="ratingsCountContainer" style="float: left;width: 20%;display: table;"><a class="ratingsCount" href="#{URL}?bvtab">(#{rating_count})</a></div></div>')}if(item.warningDescAttr!==undefined&&item.warningDescAttr!==null){miniPipString.append('<div id="warningsection"><img class="warningImg" src="#{warningDescAttr.attrImage1}" alt="#{warningDescAttr.attrValue}" border="0" />#{warningDescAttr.attrValue}</div>')}if(item.isCalTitle20){miniPipString.append("<div class='lightSource'>"+this.keys.get("californiaTitle20LegalText")+this.keys.get("californiaTitle20UrlText")+"</div><div id='lightSourceMoreInfo'><a href='"+this.keys.get("californiaTitle20UrlRef")+"'>"+this.keys.get("californiaMoreInformation")+"</a></div>")}var measureDiv=Iows.getMeasures(item.measure,dimensionTemplate);miniPipString.append(measureDiv);miniPipString.append('<div class="buttonsContainer">');var waPrice;if(item.prices.familyNormal!=null&&item.prices.familyNormal.priceNormal.value!=null){waPrice=item.prices.familyNormal.priceNormal.value}else{waPrice=item.prices.normal.priceNormal.value}if(item.isBuyable===true){miniPipString.append("<div class=\"buttonContainer\"><a onclick=\"activateShopListPopup('addToCart',$('popupAddToCart#{partNumber}'),"+storeId+","+langId+",'"+waPrice+"','"+itemRelation+'\'); relatedProducts.unbindMouseOverOnProduct();return false;" href="#" class="button" id="popupAddToCart#{partNumber}"><div class="buttonLeft">&nbsp;</div><div class="buttonCaption">#{keyBuyOnline}</div><div class="buttonRight">&nbsp;</div></a></div><div class="clear"></div>')}miniPipString.append("<div><a onclick=\"activateShopListPopup('add',$('popupShoppingList#{partNumber}'),"+storeId+","+langId+",'"+waPrice+"','"+itemRelation+'\'); relatedProducts.unbindMouseOverOnProduct();return false;" class="listLink floatLeft" id="popupShoppingList#{partNumber}" href="#">#{keySaveToList}</a></div><div class="clear"></div>');if(item.ssc!==undefined){miniPipString.append('<span class="linkContainer">'+item.ssc+"</span>")}miniPipString.append("</div>");miniPipString.append("</div>");miniPipString.append("</div>");miniPipString.append("</div>");if(checkFeature==="pipLayout"){miniPipString.append("</li>")}var myTemplate=new Template(miniPipString);return myTemplate},getRelatedProductData:function(object,targetDiv,numItems){var rowContainerId;var strBottomBorder;var countForLayout;if(targetDiv=="complementaryProductContainer"){if(mustBeCountForLayout>4){countForLayout=4}else{countForLayout=mustBeCountForLayout}}else{countForLayout=5}strBottomBorder=makeBorderBottom(countForLayout);if(targetDiv==="containerComplementaryProdAll"){if(itemCount===0){$(targetDiv).insert(new Element("ul",{id:"rowContainerStaticId"}));$(targetDiv).childElements().last().insert(strBottomBorder);$(targetDiv).childElements().last().addClassName("rowDivider")}}var myTemplate=this.miniPipTemplate(object,"pipLayout",targetDiv);if(itemCount===0||itemCount%TAB_NO_OF_COLUMNS===0){rowContainerId=targetDiv+"_rowId"+parseInt(itemCount/TAB_NO_OF_COLUMNS+rowIterator);$(targetDiv).insert(new Element("ul",{id:rowContainerId}));if(rowNum!==1||rowNum%2===0){$(targetDiv).childElements().last().insert(strBottomBorder);if(targetDiv=="complementaryProductContainer"){mustBeCountForLayout=mustBeCountForLayout-4}$(targetDiv).childElements().last().addClassName("rowDivider");rowIterator++;rowContainerId=targetDiv+"_rowId"+parseInt(itemCount/TAB_NO_OF_COLUMNS+rowIterator);$(targetDiv).insert(new Element("ul",{id:rowContainerId}))}}rowNum++;$(targetDiv).childElements().last().insert(myTemplate.evaluate(object));itemCount++;if(itemCount===numItems&&numItems%TAB_NO_OF_COLUMNS!==0){numEmptyLIs=TAB_NO_OF_COLUMNS-(numItems%TAB_NO_OF_COLUMNS);for(k=0;k<numEmptyLIs;k++){$(targetDiv).childElements().last().insert(new Element("li",{"class":"emptyLiContainer"}))}}},parseXmlResponse:function(doc,urlId,targetDiv){var id=urlId;var productNodeList=doc.getElementsByTagName("product");var productNodeListCount=productNodeList.length;for(i=0;i<productNodeListCount;i++){var product=productNodeList[i];var item=IowsCommon.parseAjaxResponse(product);this.populateItemContent(id,item,targetDiv,productNodeListCount);if(targetDiv!=="completeProdContainer"&&i==productNodeListCount-1){this.finalizeTabContents(targetDiv);energyLabelSmall()}}},faqDocLiteBox:function(texts){if($("downloadAssembly")!==null){$("downloadAssembly").setStyle({display:"none"})}if($("allDocLinks")!==null){$("allDocLinks").remove()}if($("assemblyTexts")!==null){$("assemblyTexts").remove()}if($("assemblyIcons")!==null){$("assemblyIcons").remove()}if($("assemblyTextsWrapper")!==null){$("assemblyTextsWrapper").remove()}if(texts!=null){$("assemblyInstr").insert("<div id='assemblyIcons'><img src='/ms/img/doc.png' class='icon' alt='"+texts+"'></div><div id='assemblyTextsWrapper'><div id='assemblyTexts' class='subHeadlines'>"+texts+"</div><a href='javascript:void(0);' id='allDocLinks' class=''>"+attachmentDownloads+"</a></div><div class='clear'/>");this.faqDocClicks($("allDocLinks"))}else{if($("assemblyInstr")!==null){$("assemblyInstr").remove()}}this.closeFaqDocLiteBox()},faqDocClicks:function(elemen){Event.observe($(elemen),"click",function(event){var liteBox=createLiteBox();var assemblyCont=generateContentForLiteBox.init("faqInstruction","ALL");liteBox.open(assemblyCont,700,assemblyInstructions,null)})},closeFaqDocLiteBox:function(){document.onkeydown=function(evt){var evt=evt||window.event;if(evt.keyCode==27){liteBox.close()}}},addFaqContent:function(){this.faqDocs();if(activeItemObject.faq==null){this.faqSelectParent(jProductData)}else{this.faqSelect(activeItemObject)}if($("contactLinkModule")==null){var contHeading=new Element("div");contHeading.update("<div id='contactLinkModule' class='contactLinkModule'>");Element.insert($("moreProdModule"),{after:contHeading});$("contactLinkModule").insert("<div id='contactLinkHeadline'>"+faqContactUsHeadline+"</div>");$("contactLinkModule").insert("<a id='contactLink' onclick='irwStatContactusFromPIP()' href="+faqContactUsLink+">"+faqContactUsLinkTxt+"</a>")}},faqSelectParent:function(fa){var faqsToUse=fa;var id=0;if($("faqContainerModule")!=null){$("faqContainerModule").remove()}if(faqsToUse.product.faq!=null){$("faqContainerJS").insert("<div id='faqContainerModule'></div>");var faqSize=faqsToUse.product.faq.length;for(var i=0;i<faqSize;i++){var headLine=faqsToUse.product.faq[i].headline;$("faqContainerModule").insert("<div class='faqHeading'>"+headLine+"</div>");var qaSize=faqsToUse.product.faq[i].qagroup.length;for(var j=0;j<qaSize;j++){id=id+j+1;var click="question"+id;var item="answer"+id;$("faqContainerModule").insert("<a class='question' href='javascript:void(0);' id='"+click+"'>"+faqsToUse.product.faq[i].qagroup[j].question+"</a>");$("faqContainerModule").insert("<div class='answer' style='display: none;' id='"+item+"'><div>"+faqsToUse.product.faq[i].qagroup[j].answer+"</div></div>");this.faqClicks(click,item)}}}$("leftNavBottom").setStyle({display:"none"})},faqSelect:function(fa){var faqsToUse=fa;var id=0;if($("faqContainerModule")!=null){$("faqContainerModule").remove()}var faqSize=faqsToUse.faq.length;$("faqContainerJS").insert("<div id='faqContainerModule'></div>");for(var i=0;i<faqSize;i++){var headLine=faqsToUse.faq[i].headline;$("faqContainerModule").insert("<div class='faqHeading'>"+headLine+"</div>");var qaSize=faqsToUse.faq[i].qagroup.length;for(var j=0;j<qaSize;j++){id=id+j+1;var click="question"+id;var item="answer"+id;$("faqContainerModule").insert("<a class='question' href='javascript:void(0);' id='"+click+"'>"+faqsToUse.faq[i].qagroup[j].question+"</a>");$("faqContainerModule").insert("<div class='answer' style='display: none;' id='"+item+"'><div>"+faqsToUse.faq[i].qagroup[j].answer.replace(/&#39;/g,"'")+"</div></div>");this.faqClicks(click,item)}}$("leftNavBottom").setStyle({display:"none"})},faqClicks:function(click,item){Event.observe($(click),"click",function(event){Effect.toggle(item,"appear");return false})},faqDocs:function(){if($("docLinkContainer")){$("docLinkContainer").remove()}var cont=new Element("div");cont.update("<div id='docLinkContainer' class='productInformation prodInfoSub keyFeaturesMargin'></div>");Element.insert($("cbftssection"),{before:cont});var totalDocs;var docName;var linkStr="";totalDocs=activeItemObject.attachments.length;$("docLinkContainer").insert("<div id='docsContainer' class='productsubheadline'>"+attachmentHeadline+"</div>");$("docsContainer").insert("<div id='docsContainer' class='faqTexts'>"+attachmentDocumentsTxt+"</div>");for(var z=0;z<totalDocs;z++){docName=activeItemObject.attachments[z].name;var newLink=new Element("div",{"class":"",id:id="docLinks"});$("docLinkContainer").insert(newLink);var clickLink="clickLink"+z;$("docLinks").insert("<a class='faqDocLinks' href='javascript:void(0);' id='"+clickLink+"'>"+docName+"</a><br/>");docType=activeItemObject.attachments[z].type;faqClicks(clickLink,docType,docName)}if($("docLinks")===null){$("docLinkContainer").remove()}this.faqDownloadLinkText()},faqDownloadLinkText:function(){if(atchSummaryUsgTypes.length===0){var headingStr=null}else{if(atchSummaryUsgTypes.length===1){for(var i=0;i<activeItemObject.attachments.length;i++){for(var y=0;y<atchSummaryUsgTypes.length;y++){if(activeItemObject.attachments[i].name===atchSummaryUsgTypes[y]){headingStr=activeItemObject.attachments[i].name}}}}else{if(atchSummaryUsgTypes.length===2){for(var i=0;i<activeItemObject.attachments.length;i++){for(var y=0;y<atchSummaryUsgTypes.length;y++){if(activeItemObject.attachments[i].type===atchSummaryUsgTypes[y]){if(headingStr==null){headingStr=activeItemObject.attachments[i].name}else{headingStr=headingStr+" & "+(activeItemObject.attachments[i].name.toLowerCase())}}}}}else{if(atchSummaryUsgTypes.length>2){for(var i=0;i<atchSummaryUsgTypes.length;i++){for(var j=0;j<activeItemObject.attachments.length;j++){if(atchSummaryUsgTypes[i]===activeItemObject.attachments[j].type){if(headingStr==null){headingStr=activeItemObject.attachments[j].name}else{headingStr=headingStr+", "+activeItemObject.attachments[j].name.toLowerCase()}}}}if(headingStr!==undefined){var displayStr=headingStr.split(",");headingStr=null;for(var k=0;k<displayStr.length;k++){if(headingStr!==null&&k===displayStr.length-1){headingStr=headingStr+" & "+displayStr[k]}else{if(headingStr===null){headingStr=displayStr[k]}else{headingStr=headingStr+","+displayStr[k]}}}}}}}this.faqDocLiteBox(headingStr)}},evaluateDisplayConditions:function(item){if(item.prices.hasFamilyPrice){item.prices.normal.priceNormal.nlp=false;item.prices.normal.priceNormal.tro=false;item.bti=false}else{if(item.prices.normal.priceNormal.tro){item.prices.normal.priceNormal.nlp=false;item.bti=false}else{if(item.isNew||item.bti){item.prices.normal.priceNormal.nlp=false}}}},completeProducts:function(item){if(mustBeCompletedCount>0){completeSectionTxt=completeProductsText}else{if(soldSeparatelyFlag=="true"){completeSectionTxt=soldSeparatelyTxt}else{completeSectionTxt=complementaryProdsTxt}}if(localPriceFlag==="false"){$("completeProdContainer").style.display="block"}var myTemplate=new Template('<li id="hidden_#{partNumber}"" class="productImage"><img src="#{images.small[0]}" /> </li>');if(idNoItem===0){$("completeProdContainer").insert(new Element("div",{"class":"completeProdHead"}).update(completeSectionTxt));$("completeProdContainer").insert(new Element("div",{"class":"clear"}));$("completeProdContainer").insert(new Element("div",{id:"productPlus","class":"productPlus"}).update("+"));$("completeProdContainer").insert(new Element("ul",{id:"thumpContainer","class":"thumpContainer"}));Event.observe($("productPlus"),"click",function(event){irwStatMoreModulesClicked("complete products");Effect.ScrollTo("productInfo1");tabAvailability("complementaryProductTab")})}$("thumpContainer").insert(myTemplate.evaluate(item));var idContent="hidden_"+item.partNumber;product={};product.item=item;popupObj=genProdLaytForSims.init(item.partNumber,idContent,product);completeProdArr[item.partNumber]=popupObj;idNoItem++;if(idNoItem===globalVariables.completeProdCount){$("completeProdContainer").insert(new Element("div",{"class":"clear"}));soldSeparatelyDesc=(activeItemObject.soldSeparately);if(!soldSeparatelyDesc.empty()){$("completeProdContainer").insert(new Element("div",{"class":"soldSeparately"}).update(soldSeparatelyDesc))}$("completeProdContainer").insert(new Element("div",{"class":"anchorContainer"}));$("completeProdContainer").childElements().last().insert(new Element("a",{href:"JavaScript:void(0);",id:"completeProdLink"}).update(viewComplementaryProdsText));$("completeProdContainer").insert(new Element("div",{"class":"clear"}));Event.observe($("completeProdLink"),"click",function(event){Effect.ScrollTo("productInfo1");if(!$("complementaryProductTab").hasClassName("activeTab")){tabAvailability("complementaryProductTab")}irwStatMoreModulesClicked("complete products")});this.bindMouseOverOnCompeltePorduct()}},prepareRelatedItems:function(){var itemPartnumber=$("thePartnumberInForm").value;var mainHash=$H(jsonRelatedProducts);var subHash=mainHash.get("item_"+itemPartnumber);var arrayItem=$H(subHash);this.addFaqContent();expressionMatchArr=arrayItem.get("EXPRESSION_MATCH");if(expressionMatchArr===undefined||expressionMatchArr===null){expressionMatchArr=[]}expressionMatchArr.each(function(obj){expressionMatchRelArr.push("EXPRESSION_MATCH")});mustBeCompletedArr=arrayItem.get("MUST_BE_COMPLETED_WITH");if(mustBeCompletedArr===undefined||mustBeCompletedArr===null){mustBeCompletedArr=[]}getsSaferWithArr=arrayItem.get("GETS_SAFER_WITH");if(getsSaferWithArr===undefined||getsSaferWithArr===null){getsSaferWithArr=[]}productCareArr=arrayItem.get("PRODUCT_CARE");if(productCareArr===undefined||productCareArr===null){productCareArr=[]}mayBeCompletedArr=arrayItem.get("MAY_BE_COMPLETED_WITH");if(mayBeCompletedArr===undefined||mayBeCompletedArr===null){mayBeCompletedArr=[]}interiorFittingsArr=arrayItem.get("INTERIOR_FITTINGS");if(interiorFittingsArr===undefined||interiorFittingsArr===null){interiorFittingsArr=[]}completementaryItemsArr=mustBeCompletedArr.concat(getsSaferWithArr).concat(productCareArr).concat(mayBeCompletedArr).concat(interiorFittingsArr);var wppMatchingArray=arrayItem.get("WPP_MATCHING_CONTAINER");if(wppMatchingArray===undefined){DataStructure.wppExpressionMatchingArr=[]}else{DataStructure.wppExpressionMatchingArr=wppMatchingArray}var wppCompleArray=arrayItem.get("WPP_COMPLEMENTARY_CONTAINER");if(wppCompleArray===undefined){DataStructure.wppComplementaryArr=[]}else{var newWppArray=new Array();for(var i=0;i<completementaryItemsArr.length;i++){for(var j=0;j<wppCompleArray.length;j++){var value=wppCompleArray[j];if(completementaryItemsArr[i]===value[0]){newWppArray[i]=wppCompleArray[j];break}else{newWppArray[i]=[]}}}DataStructure.wppComplementaryArr=newWppArray}mustBeCompletedArr.each(function(obj){completementaryItemsRelArr.push("MUST_BE_COMPLETED_WITH")});getsSaferWithArr.each(function(obj){completementaryItemsRelArr.push("GETS_SAFER_WITH")});productCareArr.each(function(obj){completementaryItemsRelArr.push("PRODUCT_CARE")});mayBeCompletedArr.each(function(obj){completementaryItemsRelArr.push("MAY_BE_COMPLETED_WITH")});interiorFittingsArr.each(function(obj){completementaryItemsRelArr.push("INTERIOR_FITTINGS")});globalVariables.expressionMatchCount=expressionMatchArr.length;globalVariables.complementaryCount=completementaryItemsArr.length;if(activeItemObject.faq!=null&&activeItemObject.faq.length>0){globalVariables.faqCount=activeItemObject.faq.length}else{if((activeItemObject!==null||activeItemObject.faq.length===0)&&(jProductData.product.faq!=null&&jProductData.product.faq.length>0)){globalVariables.faqCount=jProductData.product.faq.length}else{globalVariables.faqCount=0}}mustBeCompletedCount=mustBeCompletedArr.length;mustBeCountForLayout=mustBeCompletedArr.length;globalVariables.completeProdCount=globalVariables.complementaryCount<TAB_NO_OF_COLUMNS?globalVariables.complementaryCount:TAB_NO_OF_COLUMNS;if(globalVariables.complementaryCount>TAB_PRODUCTS_LIMIT){createShowAllLink=true}},prepareTechInfo:function(event,contentMustBeCompleted){var tempPartNum=SWFAddress.getValue();var tempPartNumLen=tempPartNum.length;if(globalVariables.activeItemPartNumber==null){if(tempPartNum!=="/"&&tempPartNumLen>1){globalVariables.activeItemPartNumber=tempPartNum.replace(/\W/g,"")}else{if(tempPartNum.indexOf("review")==-1){var url=window.location.href;var temp=url.split("#")[0].split("/");var tempLen=temp.length;tempPartNum=temp[tempLen-1];var temp1=tempPartNum.split("?");tempPartNum=temp1[0];if(tempPartNum===""){tempPartNum=temp[tempLen-2]}globalVariables.activeItemPartNumber=tempPartNum}}}if(typeof(activeItemObject)!=="undefined"&&activeItemObject!==null&&activeItemObject.partNumber!==globalVariables.activeItemPartNumber){activeItemObject=jProductData.product.items.find(function(object){return object.partNumber===globalVariables.activeItemPartNumber});if(typeof(activeItemObject)!=="undefined"){this.presetAttributes(activeItemObject.catEntryId);checkValidCombination(0,jProductData,event.type)}}var energyTemplate=new StringBuffer();var ficheTemplate=new StringBuffer();var techInfoTemplate=new StringBuffer();var techInfoArray=$H(activeItemObject).get("techInfoArr");if(techInfoArray!=null&&techInfoArray.length>0){globalVariables.techCount=techInfoArray.length;$$(".energy").each(function(i){i.setAttribute("href",'javascript:energyLabelBox.open("'+globalVariables.activeItemPartNumber+'");');i.show()});$$(".productFicheLarge").each(function(j){j.setAttribute("href",'javascript:energyLabelBox.open("'+globalVariables.activeItemPartNumber+'");');j.show()})}else{globalVariables.techCount=0;$$(".energy").each(function(i){i.hide()});$$(".productFicheLarge").each(function(j){j.hide()})}if(typeof(techInfoArray)!=="undefined"&&techInfoArray!==null&&techInfoArray.length>=2){techInfoTemplate.append("<p>"+sprTechInfoTabText+"</p>")}if(globalVariables.techCount!=0){for(var i=0;i<techInfoArray.length;i++){var techProdName=$H(techInfoArray[i]).get("name");var techProdType=$H(techInfoArray[i]).get("type");if(techProdName==null){techProdName=""}if(techProdType==null){techProdType=""}techInfoTemplate.append('<div class="techProdName">'+techProdName+'</div><div class="techProdType">'+techProdType+"</div>");var techInfoShow=$H(techInfoArray[i]).get("techInfo");var header=$H(techInfoShow[0]).get("headText");techInfoTemplate.append('<table class="technical-specification-table"><th>'+header+"</th>");for(var j=0;j<techInfoShow.length;j++){var headerText=$H($H(techInfoShow[j])).get("headText");var setUnitMet=$H($H(techInfoShow[j])).get("unitMet");var infoText=$H($H(techInfoShow[j])).get("techInfoText");var valueMet=$H($H(techInfoShow[j])).get("valueMet");var explainText=$H($H(techInfoShow[j])).get("explainText");var techInfoNoText=$H($H(techInfoShow[j])).get("techInfoNo");var rangeNoText=$H($H(techInfoShow[0])).get("rangeNo");var energyCLass=["00292","00293","00294","00713","00289","00423","03222","00300","00286","00281"];var findSPR=globalVariables.activeItemPartNumber.include("S");for(var k=0;k<energyCLass.length;k++){if(techInfoNoText===energyCLass[k]){var printEnergyClass=valueMet;if($$(".energy")[0]==null&&findSPR==0&&techInfoNoText!="00423"){energyTemplate.append('<a class="energy" href="javascript:energyLabelBox.open('+globalVariables.activeItemPartNumber+')";><span class="arrow-left"></span><span class="energy-class">'+printEnergyClass+'</span><span class="energy-class-plus"></span><div style="display:none">'+rangeNoText+"</div></a>")}if($$(".productFicheLarge")[0]==null&&techInfoNoText!="00423"){ficheTemplate.append('<a class="productFicheLarge" href="javascript:energyLabelBox.open('+globalVariables.activeItemPartNumber+')";>'+js_ENERGY_PRODUCT_FICHE+"<a>")}}}if(headerText!=header){techInfoTemplate.append("<th>"+headerText+"</th>");header=headerText}if(setUnitMet!=null){setUnitMet=$H($H(techInfoShow[j])).get("unitMet")}else{setUnitMet=""}if(techInfoNoText!="00981"){techInfoTemplate.append("<tr><td>"+infoText+"</td><td>"+valueMet+"&nbsp;"+setUnitMet+"</td></tr>")}if(explainText){techInfoTemplate.append('<tr class="exptext"><td colspan="2" class="exptextitalic">'+explainText+"</td></tr>")}}techInfoTemplate.append("</table>")}}energyLabelTemplate=new Template(energyTemplate);$("prodPrice").insert(energyLabelTemplate.evaluate(contentMustBeCompleted));productFicheTemplate=new Template(ficheTemplate);$("prodPrice").insert(productFicheTemplate.evaluate(contentMustBeCompleted));testTemplate=new Template(techInfoTemplate);$("techInfoContainer").insert(testTemplate.evaluate(contentMustBeCompleted));energyLabelLarge()},finalizeTabContents:function(targetDiv){itemCount=0;rowNum=1;rowIterator=1;if(targetDiv=="matchingProductContainer"){bindMouseOverOnProduct("matchingProductContainer")}else{if(targetDiv==="complementaryProductContainer"){$("complementaryProductContainer").style.display="block";bindMouseOverOnProduct("complementaryProductContainer");if(globalVariables.expressionMatchCount>0){$("complementaryProductContainer").style.display="none"}if(mustBeCompletedCount!==0){this.popupLayerMustbeCompleted()}}else{$("containerComplementaryProdAll").style.display="block";$("createShowAll").update(showLess);$("complementaryShowall").style.visibility="hidden";bindMouseOverOnProduct("containerComplementaryProdAll");$("containerComplementaryProdAll").style.display="none";Effect.SlideDown("containerComplementaryProdAll",{duration:0.5})}}if(targetDiv==="complementaryProductContainer"&&createShowAllLink===true){remainingProdNum=globalVariables.complementaryCount-TAB_PRODUCTS_LIMIT;$(targetDiv).insert(new Element("div",{"class":"clear"}));$(targetDiv).insert(new Element("div",{id:"containerComplementaryProdAll"}));$(targetDiv).insert(new Element("div",{"class":"clear"}));$(targetDiv).insert(new Element("ul",{id:"containerShowAll"}));$("containerShowAll").insert(new Element("li",{id:"containerShowAll"}));$("containerShowAll").childElements().last().insert(new Element("a",{href:"JavaScript:void(0);",id:"createShowAll"}).update(showAll));$("containerShowAll").childElements().last().insert(new Element("span",{id:"complementaryShowall","class":"cartTxtMoreLinkNbr"}).update("&nbsp;("+remainingProdNum+"&nbsp;more)"));if(remainingProdNum<1){$("containerShowAll").style.display="none"}this.bindClickOnShowAll()}},populateItemContent:function(id,item,targetDiv,numItems){switch(id){case constantAjaxRequest.callRequestOne:this.getRelatedProductData(item,targetDiv,numItems);break;case constantAjaxRequest.callRequestTwo:this.completeProducts(item);break}},findRelationTypeByItem:function(partNumber){if(mustBeCompletedArr.indexOf(partNumber)!==-1){return"MUST_BE_COMPLETED_WITH"}else{if(getsSaferWithArr.indexOf(partNumber)!==-1){return"GETS_SAFER_WITH"}else{if(productCareArr.indexOf(partNumber)!==-1){return"PRODUCT_CARE"}else{if(mayBeCompletedArr.indexOf(partNumber)!==-1){return"MAY_BE_COMPLETED_WITH"}else{if(interiorFittingsArr.indexOf(partNumber)!==-1){return"INTERIOR_FITTINGS"}else{if(expressionMatchArr.indexOf(partNumber)!==-1){return"EXPRESSION_MATCH"}}}}}}return null},popupLayerMustbeCompleted:function(){var moveTop=57;var moveLeft=93;if($("popupMustBeCompleted")===null){var ownerObjectDimension=$("tabContainer").cumulativeOffset();var prodName="<span>"+activeItemObject.name+" "+activeItemObject.type+"</span>";if(mustBeCompletedCount===1){if(!mustBeCompletedTxtOne.blank()){mustBeCompletedText=mustBeCompletedTxtOne}else{mustBeCompletedText="Remember to complete {0} with the following product"}}else{if(!mustBeCompletedTxtMany.blank()){mustBeCompletedText=mustBeCompletedTxtMany}else{mustBeCompletedText="Remember to complete {0} with the following {1} products"}}mustBeCompletedText=mustBeCompletedText.replace("{0}",prodName);mustBeCompletedText=mustBeCompletedText.replace("{1}",mustBeCompletedCount);var contentMustBeCompleted={text:mustBeCompletedText,top:ownerObjectDimension.top+moveTop+"px",left:ownerObjectDimension.left-moveLeft+"px"};var mustBePopupString=new StringBuffer();mustBePopupString.append('<div id="popupMustBeCompleted" style="margin-top:23px; left:#{left}" class="shadow-one"><div class="corner-a"></div><div class="corner-b"></div><div class="shadow-two"><div class="shadow-three"><div class="shadow-four"><div class="content">');mustBePopupString.append("#{text}");mustBePopupString.append('<div class="rightArrow">&nbsp;</div>');mustBePopupString.append("</div></div></div></div></div>");myTemplate=new Template(mustBePopupString);$("popupMustBeCompletedContainer").insert(myTemplate.evaluate(contentMustBeCompleted));if(globalVariables.expressionMatchCount===0){$("popupMustBeCompleted").style.display="block"}}},disableDropdown:function(){var browserVersion=6;if(Browser.Version()==browserVersion){disable("rightNavContainer")}}}}();var uniqueUrl=function(){return{computeTitle:function(){var title="";title=activeItemObject.name+" "+activeItemObject.type+" - ";var optionLen=optionValuesArray.length;var i;for(i=0;i<optionLen;i++){if(optionValuesArray[i].name==="attributeValuesSelect"){dropDown=optionValuesArray[i];title+=optionValuesArray[i].options[optionValuesArray[i].options.selectedIndex].text+", "}}title=title.substring(0,title.length-2);title+=" - IKEA";title=(unescape(title.replaceAll("&#39;","'")));return title},setPageTitle:function(){SWFAddress.setTitle(this.computeTitle());var metatags;metatags=document.getElementsByTagName("meta");var metalength=metatags.length;var cnt;for(cnt=0;cnt<metalength;cnt++){var name=metatags[cnt].getAttribute("name");var content=metatags[cnt].getAttribute("content");var property=metatags[cnt].getAttribute("property");if(metatags[cnt].getAttribute("name")==="title"){metatags[cnt].setAttribute("content",this.computeTitle())}if(property!==undefined&&property==="og:title"){metatags[cnt].setAttribute("content",this.computeTitle())}}},addressChanged:function(event){var tempPartNum=SWFAddress.getValue();var tempPartNumLen=tempPartNum.length;if(tempPartNum!=="/"&&tempPartNumLen>1){globalVariables.activeItemPartNumber=tempPartNum.replace(/\W/g,"")}else{var url=window.location.href;var temp=url.split("#")[0].split("/");var tempLen=temp.length;tempPartNum=temp[tempLen-1];var temp1=tempPartNum.split("?");tempPartNum=temp1[0];if(tempPartNum===""){tempPartNum=temp[tempLen-2]}globalVariables.activeItemPartNumber=tempPartNum}if(typeof(activeItemObject)!=="undefined"&&activeItemObject!==null&&activeItemObject.partNumber!==globalVariables.activeItemPartNumber){activeItemObject=jProductData.product.items.find(function(object){return object.partNumber===globalVariables.activeItemPartNumber});if(typeof(activeItemObject)!=="undefined"){this.presetAttributes(activeItemObject.catEntryId);checkValidCombination(0,jProductData,event.type);setWidthProd()}}},getCommaSeperatedValue:function(validDesign){var value="";for(index=0;index<validDesign.length;index++){value=value+", "+validDesign[index]}return value},presetAttributes:function(catEntId){var productFound=false;var optionLen=optionValuesArray.length;var i;for(i=0;i<optionLen;i++){if(optionValuesArray[i].name==="attributeValuesSelect"){firstDropDown=optionValuesArray[i];var dropDownLen=optionValuesArray[i].options.length;var j;for(j=0;j<dropDownLen;j++){if(optionValuesArray[i].options[j].value.indexOf(catEntId)!==-1){optionValuesArray[i].options.selectedIndex=j;productFound=true;break}}}}return productFound},updateProductMetaTag:function(){var partNumber=SWFAddress.getValue();var partNumberLen=partNumber.length;if(partNumber!=="/"&&partNumberLen>1){var itemPartNumber=partNumber.replace(/\W/g,"");irwstatSetTrailingTag("IRWStats.products",itemPartNumber)}}}}();function checkBuyable(val,prtNo,strId,lngId,itemRelationValue){if(activeItemObject!==null){var price;if(typeof(activeItemObject.prices.familyNormal)!=="undefined"&&typeof(activeItemObject.prices.familyNormal.priceNormal.value)!=="undefined"){price=activeItemObject.prices.familyNormal.priceNormal.value}else{price=activeItemObject.prices.normal.priceNormal.value}if(activeItemObject.buyable){activateShopListPopup(val,prtNo,strId,lngId,price,itemRelationValue,"pipBuyOnline")}}}var ServiceLiteBox=Class.create({initialize:function(){this.bindMouseDown()},bindMouseDown:function(){$$("#content .serviceItemMenuLink").each(function(obj){Event.observe(obj,"click",function(e){var lb;irwStatPageFunctionality("modules>services","pip service module");var liteBoxContent=ServiceLiteBoxData.getContent(obj);if($("serviceliteboxId")==null){lb=new Litebox({id:"serviceliteboxId",position:"center",content:liteBoxContent})}})})}});var ServiceLiteBoxData=new function(){return{getContent:function(obj){return obj.up("div.pipServiceMenuItem").down("div.servicelbContainer").innerHTML}}};var pipServiceModule=new function(){return{displayServiceModule:function(itemObjToDisplay){var serviceModule="serviceModule";var inValidServiceCount=0;globalVariables.serviceParamArray.each(function(serviceParam){var serviceCount=serviceParam.serviceName.substring(18);var pipServiceDiv=("pipServiceMenu"+serviceCount).split(" ").join("");var isPriceValid=true;var isReqAssembleValid=true;if(serviceParam.price!==null&&serviceParam.price!==""){if(itemObjToDisplay.prices.normal.priceNormal.rawPrice<serviceParam.price){isPriceValid=false}}if(serviceParam.requiresAssembly!==null&&serviceParam.requiresAssembly!==""){if(itemObjToDisplay.reqAssembly!==(serviceParam.requiresAssembly==="true")){isReqAssembleValid=false}}var link=$$("#"+pipServiceDiv+" a.serviceItemMenuLink")[0];var serviceContainer=$(pipServiceDiv).up("div");var displayNone="displaynone";var displayBlock="displayblock";if(isPriceValid===true&&isReqAssembleValid===true){pipServiceModule.updateClassName(pipServiceDiv,displayNone,displayBlock);pipServiceModule.updateClassName(link,displayNone,displayBlock);pipServiceModule.updateClassName(serviceContainer,displayNone,displayBlock)}else{inValidServiceCount++;pipServiceModule.updateClassName(pipServiceDiv,displayBlock,displayNone);pipServiceModule.updateClassName(link,displayBlock,displayNone);pipServiceModule.updateClassName(serviceContainer,displayBlock,displayNone)}});if(inValidServiceCount!==globalVariables.serviceParamArray.length){pipServiceModule.updateClassName(serviceModule,"showService","displayblock")}else{pipServiceModule.updateClassName(serviceModule,"displayblock","showService")}this.hideInvalidServiceModule();new ServiceLiteBox()},updateClassName:function(divName,oldClassName,newClassName){if($(divName).hasClassName(oldClassName)){$(divName).removeClassName(oldClassName)}$(divName).addClassName(newClassName)},hideInvalidServiceModule:function(){var k=0;var serviceHash=new Hash();var cssProperty="right";for(var count=1;count<11;count++){var serviceMenu="pipServiceMenu"+count;var serviceDiv=serviceMenu.split(" ").join("");if($(serviceDiv)!==null){var isServiceValid=false;globalVariables.serviceParamArray.each(function(serviceParam){var serviceCount=serviceParam.serviceName.substring(18);if(serviceCount==count){isServiceValid=true}});if(!isServiceValid){var serviceContainer=$(serviceDiv).up("div");this.updateClassName(serviceContainer,"displayblock","displaynone")}var chk=$(serviceMenu).down();if(chk!==null){k++;serviceIndex="serviceIndex"+k;var content=$(serviceMenu).up("div");serviceHash.set(serviceIndex,content)}}}var i=1;var breakPoint=Math.round(k/2);var leftContainer=new Element("div",{"class":"leftColumn"});var rightContainer=new Element("div",{"class":"rightColumn"});var mainConatiner=new Element("div",{id:"mainContainer"});serviceHash.each(function(pair){hashIndex="serviceIndex"+i;prod=serviceHash.get(hashIndex);if(breakPoint>=i){leftContainer.insert(prod)}else{rightContainer.insert(prod)}i++});mainConatiner.insert(leftContainer);mainConatiner.insert(rightContainer);$("content").update(mainConatiner)}}}();ikeaZoomOnPip={init:function(){this.getUrlZoom();this.toolTipOnImgae()},toolTipOnImgae:function(){var zoomToolTip,toolTip,urlZoom;zoomToolTip='<div class="zoomRightArrow">&nbsp;</div><div class="roomSetToolTip">'+zoomText+"</div>";toolTip=new Tooltip("productImg",{id:"toolTipZoom",maxWidth:"639",zoomOnPip:"true",align:"right",content:zoomToolTip});var urlZoom=this.getUrlZoom();var bImg;if(!bImg){bImg=new Element("img",{"class":"ikeaZoomImg",src:urlZoom});Element.insert(document.body,new Element("div",{id:"Loading","class":"Loading"}));$("Loading").appendChild(bImg)}},getUrlZoom:function(){var ImgIdx,ImgLen,k;ImgLen=(typeof(activeItemObject)!=="undefined"&&activeItemObject!==null)?activeItemObject.images.large.length:0;for(k=0;k<ImgLen;k++){if(($("productImg").src).indexOf(activeItemObject.images.large[k])!==-1){ImgIdx=k}}urlZoom=(typeof(activeItemObject)!=="undefined"&&activeItemObject!==null)?activeItemObject.images.zoom[ImgIdx]:null;if(urlZoom!==null){this.clearZoom();if($("mainImgConatiner")!==null){$("productImg").addClassName("zoomMousePointer")}}else{this.clearZoom()}return urlZoom},clearZoom:function(){$("productImg").removeClassName("zoomMousePointer")},refreshObject:function(){this.toolTipOnImgae();var refreshObj=new com.ikea.irw.pip.ZoomImage("mainImgConatiner")}};var localPricePip={bindMouseDownOnLocalPrice:function(){var loadingImg,liteBox;if(typeof($("localPriceLink"))!=="undefined"&&$("localPriceLink")!==null){$("localPriceLink").down("a").href="javascript:void(0);";Event.observe($("localPriceLink"),"click",function(e){localPriceLiteBox.stockChkFlag=true;irwStatStockCheckOnLiteBox();loadingImg='<img src="/ms/img/loading.gif" class="localPriceLoader" >';if($("serviceliteboxId")===null){liteBox=new Litebox({id:"localPrice",fullScreen:"true",content:loadingImg})}localPriceLiteBox.widthEnabled=false;localPriceLiteBox.requestJSPage("frmPip")})}}};document.observe("dom:loaded",function(){if(typeof($("pipContainer"))!=="undefined"&&$("pipContainer"&&$("addCartContainer"))!==null&&$("planner_url")&&$("generic_planner_buttonText")){var buttonText=$("generic_planner_buttonText").readAttribute("value");var buttonImageUrl="/ms/img/plannerButton/plannerButton.png";var plannerUrl=$("planner_url").readAttribute("value");var partNumber=$("thePartnumberInForm").readAttribute("value");var plannerBtn=com.ikea.irw.elements.plannerButton.init(buttonText,buttonImageUrl,plannerUrl,partNumber);plannerBtn.id="pipPlannerButton";$("rightNavContainer").childElements()[2].insert({bottom:plannerBtn})}if(typeof(stockSearchPage)=="undefined"||!stockSearchPage){var zoomOnPip=new com.ikea.irw.pip.ZoomImage("mainImgConatiner");localPricePip.bindMouseDownOnLocalPrice()}if($("itemUrl")!==null){globalMethods.changeProdStyle()}});var globalMethods=function(){return{calculatePipRangeFunctionality:function(){var binaryValues=new Array();binaryValues.push("0");binaryValues.push(globalVariables.plannerUsed);binaryValues.push("0");if(localPriceFlag==="true"){binaryValues.push("1")}else{binaryValues.push("0")}if(zoomImageFlag==="true"){binaryValues.push("1")}else{binaryValues.push("0")}if(typeof(activeItemObject)!="undefined"&&activeItemObject!==null&&activeItemObject.buyable){binaryValues.push("1")}else{binaryValues.push("0")}if(globalVariables.completeProdCount>0){binaryValues.push("1")}else{binaryValues.push("0")}if(simsCategory!=""&&similarSolutionJSON!=null&&similarSolutionJSON.products!=""){binaryValues.push("1")}else{binaryValues.push("0")}if(sscCategory!=""&&depthinSSCJSON!=null&&depthinSSCJSON.products!=""){binaryValues.push("1")}else{binaryValues.push("0")}if(depthInFunctionCategory!=""&&depthInFunctionJSON!=null&&depthInFunctionJSON.products!=""){if(depthInFunctionJSON.products.length===1&&depthInFunctionJSON.products[0].item.partNumber===activeItemObject.partNumber){binaryValues.push("0")}else{binaryValues.push("1")}}else{binaryValues.push("0")}if($("cartTxtLabel")!=null){binaryValues.push("1")}else{binaryValues.push("0")}if(globalVariables.expressionMatchCount>0){binaryValues.push("1")}else{binaryValues.push("0")}if(globalVariables.complementaryCount>0){binaryValues.push("1")}else{binaryValues.push("0")}if(typeof(nbrRoomset)!=="undefined"&&nbrRoomset>0){binaryValues.push("1")}else{binaryValues.push("0")}if(altImgFlag==="true"){binaryValues.push("1")}else{binaryValues.push("0")}binaryValues.push("1");var binaryVal=binaryValues.join("");this.convertBinarytoDecimal(binaryVal)},convertBinarytoDecimal:function(binaryValues){var numlen=binaryValues.length;var decimalValue=0;var pos=numlen-1;for(var x=0;x<numlen;x++){if(binaryValues.substr(x,1)==1){decimalValue=decimalValue+Math.pow(2,pos)}else{if(binaryValues.substr(x,1)!=0){return}}pos--}irwStatSendRangeFunctionality(decimalValue)},getMeasure:function(itemObjToDisplay){var measure;measFlagConstant=getPackageDetails.constantContainer();if(measFlag==measFlagConstant.IMPERIAL_MEAS){measure=itemObjToDisplay.imperial}else{if(measFlag==measFlagConstant.METRIC_MEAS){measure=itemObjToDisplay.metric}else{if(measFlag==measFlagConstant.IMPERAIL_METRIC_MEAS){measure=itemObjToDisplay.imperial+itemObjToDisplay.metric}else{if(measFlag==measFlagConstant.METRIC_IMPERIAL_MEAS){measure=itemObjToDisplay.metric+itemObjToDisplay.imperial}}}}return measure},checkAjaxRequestStatus:function(){new PeriodicalExecuter(function(pe){if(Ajax.activeRequestCount<=0){pe.stop();if(window.location.href.indexOf("bvtab")>0){Effect.ScrollTo("productInfo1");if(!$("BVTab").hasClassName("activeTab")){showBVTabAfterClick()}$("complementaryProductContainer").hide()}globalMethods.calculatePipRangeFunctionality()}}.bind(this),0.5)},changeProdStyle:function(){$("itemUrl").observe("mouseenter",function(){$("name").style.textDecoration="underline";$("type").style.textDecoration="underline"}.bind(this));$("itemUrl").observe("mouseout",function(){$("name").style.textDecoration="";$("type").style.textDecoration=""}.bind(this))}}}();com.ikea.irw.pip={};com.ikea.irw.pip.ZoomImage=Class.create({initialize:function(el){this.zOpt={};this.zEle={};$("productImg").observe("click",function(e){if($("zBaseImage")===null){var mCord,urlZoom;urlZoom=ikeaZoomOnPip.getUrlZoom();if(urlZoom!==null){irwStatThumbImgClickedFromPIP("zoom");this.createLiteBox();curosrPos1=com.ikea.irw.pip.ZoomUtil.trackMousePostion($("productImg"),e);com.ikea.irw.pip.ZoomUtil.init($("productImg"),urlZoom,$("zoomLiteBox"),curosrPos1);if($("Loading")!==null){$("Loading").remove()}}}}.bind(this));this.removeZoom(el)},createLiteBox:function(){var lBoxPos,alphaLayer;if($("toolTipZoom")!==null){$("toolTipZoom").remove()}Element.insert(document.body,new Element("div",{id:"zoomLiteBox","class":"zoomLiteBox"}));lBoxPos=$("rightNavContainer").positionedOffset();$("zoomLiteBox").setStyle({display:"block",left:lBoxPos[0]+"px",top:lBoxPos[1]+"px"});alphaLayer=new Element("div",{id:"alphaLayer","class":"alphaLayer"});$("mainImgConatiner").appendChild(alphaLayer);alphaLayer.setStyle({display:"block"})},removeZoom:function(el){$("mainImgConatiner").observe("mouseleave",function(e){if($("zoomLiteBox")!==null){$("zoomLiteBox").remove()}if($("zBaseImage")!==null){$("zBaseImage").remove()}if($("alphaLayer")!==null){$("alphaLayer").remove()}}.bind(this))}});com.ikea.irw.pip.ZoomUtil=new function(){return{init:function(img,zoomSrc,zLbox,curosrPos1){var src,imgLeft,imgTop,bImg,magnifySec,zIcon,sImg,clearImg,imgOffset,xPosition,yPosition;src=img.src;imgOffset=img.positionedOffset();bImg=new Element("img",{"class":"ikeaZoomImg"});magnifySec=new Element("div",{"class":"magnifySection"});zIcon=new Element("div",{"class":"zoomIcon"});sImg=new Element("div",{id:"zBaseImage","class":"zBaseImage"});clearImg=new Element("img",{"class":"ikeaZoomCleanImg",src:src});setTimeout(function(){var ieBrwoser,imgDimension,zInput,lboxDimension;ieBrwoser=!!document.all&&!!window.attachEvent&&!window.opera;imgDimension=img.getDimensions();lboxDimension=zLbox.getDimensions();zLbox.appendChild(bImg);sImg.appendChild(magnifySec);img.up().appendChild(sImg);zInput=img.up();bImg.observe("load",function(){var zW,zH,ctrW,ctrH,ratioW,ratioH,frameW,frameH;zW=bImg.offsetWidth?bImg.offsetWidth:bImg.naturalWidth;zH=bImg.offsetHeight?bImg.offsetHeight:bImg.naturalHeight;ratioW=zW/imgDimension.width;ratioH=zH/imgDimension.height;frameW=Math.round(lboxDimension.width/ratioW);frameH=Math.round(lboxDimension.height/ratioH);zLbox.appendChild(bImg);xPosition=frameW/2;yPosition=frameH/2;magnifySec.appendChild(clearImg);magnifySec.appendChild(zIcon);magnifySec.setStyle({width:frameW+"px",height:frameH+"px"});bImg.setStyle({left:-((curosrPos1.x*ratioW-lboxDimension.width/2)|0)+"px",top:-((curosrPos1.y*ratioH-lboxDimension.height/2)|0)+"px"});magnifySec.setStyle({left:(curosrPos1.x-xPosition)+"px",top:(curosrPos1.y-yPosition)+"px"});magnifySec.style.cursor="default";sImg.setStyle({display:"block"});bImg.setStyle({visibility:"visible"});clearImg.setStyle({left:-(curosrPos1.x-xPosition)+"px",top:-(curosrPos1.y-yPosition)+"px"});zInput.observe("mousemove",function(e){var imgPos,curosrPos,imgCord,xPos,yPos,lPos,tPos;imgPos=com.ikea.irw.pip.ZoomUtil.trackElementPostion(img);sImg.setStyle({display:"block"});zLbox.setStyle({visibility:"visible"});curosrPos=com.ikea.irw.pip.ZoomUtil.trackMousePostion(zInput,e);if(e.srcElement&&ieBrwoser){if(e.srcElement===magnifySec){return}if(e.srcElement!==zInput){imgCord=com.ikea.irw.pip.ZoomUtil.trackElementPostion(e.srcElement);curosrPos.x-=(imgPos.xCord-imgCord.xCord);curosrPos.y-=(imgPos.yCord-imgCord.yCord)}}xPos=frameW/2;yPos=frameH/2;curosrPos.x-=imgOffset[0];curosrPos.y-=imgOffset[1];if(curosrPos.x<xPos){curosrPos.x=xPos}if(curosrPos.x>imgDimension.width-xPos){curosrPos.x=imgDimension.width-xPos}if(curosrPos.y<yPos){curosrPos.y=yPos}if(curosrPos.y>imgDimension.height-yPos){curosrPos.y=imgDimension.height-yPos}lPos=((curosrPos.x-xPos)|0);tPos=((curosrPos.y-yPos)|0);if(lPos===0||lPos===423||tPos===0||tPos===385){zIcon.style.display="none";magnifySec.style.cursor="default"}else{zIcon.style.display="block";magnifySec.style.cursor=""}magnifySec.setStyle({left:lPos+"px",top:tPos+"px"});bImg.setStyle({left:-((curosrPos.x*ratioW-lboxDimension.width/2)|0)+"px",top:-((curosrPos.y*ratioH-lboxDimension.height/2)|0)+"px"});clearImg.setStyle({left:-(lPos+2)+"px",top:-(tPos+2)+"px"})})});setTimeout(function(){bImg.src=zoomSrc;if(bImg.complete){bImg.setStyle({visibility:"visible"});var zWL,zHL,ratioWL,ratioHL,frameWL,frameHL,imgPosL,xPosL,yPosL;zWL=bImg.offsetWidth?bImg.offsetWidth:bImg.naturalWidth;zHL=bImg.offsetHeight?bImg.offsetHeight:bImg.naturalHeight;ratioWL=zWL/imgDimension.width;ratioHL=zHL/imgDimension.height;frameWL=Math.round(lboxDimension.width/ratioWL);frameHL=Math.round(lboxDimension.height/ratioHL);imgPosL=com.ikea.irw.pip.ZoomUtil.trackElementPostion(img);xPosL=frameWL/2;yPosL=frameHL/2;curosrPos1.x-=imgOffset[0];curosrPos1.y-=imgOffset[1];if(curosrPos1.x<xPosL){curosrPos1.x=xPosL}if(curosrPos1.x>imgDimension.width-xPosL){curosrPos1.x=imgDimension.width-xPosL}if(curosrPos1.y<yPosL){curosrPos1.y=yPosL}if(curosrPos1.y>imgDimension.height-yPosL){curosrPos1.y=imgDimension.height-yPosL}lPos1=((curosrPos1.x-xPosL)|0);tPos1=((curosrPos1.y-yPosL)|0);magnifySec.setStyle({left:lPos1+"px",top:tPos1+"px"});sImg.setStyle({display:"block"});bImg.setStyle({left:-((curosrPos1.x*ratioWL-lboxDimension.width/2)|0)+"px",top:-((curosrPos1.y*ratioHL-lboxDimension.height/2)|0)+"px"});clearImg.setStyle({left:-(lPos1+2)+"px",top:-(tPos1+2)+"px"})}else{}},0.5)},1)},trackElementPostion:function(el){var obj={},xPos,yPos,parent;xPos=el.offsetLeft;yPos=el.offsetTop;parent=el.offsetParent;while(parent){xPos+=parent.offsetLeft-parent.scrollLeft;yPos+=parent.offsetTop-parent.scrollTop;parent=parent.offsetParent}obj.xCord=xPos;obj.yCord=yPos;return obj},trackMousePostion:function(el,ev){var obj={},scroll,elPos;scroll=document.viewport.getScrollOffsets();if(ev.currentTarget){elPos=this.trackElementPostion(el);obj.x=ev.clientX-elPos.xCord+scroll[0];obj.y=ev.clientY-elPos.yCord+scroll[1];return obj}obj.x=ev.offsetX;obj.y=ev.offsetY;return obj}}}(); 

