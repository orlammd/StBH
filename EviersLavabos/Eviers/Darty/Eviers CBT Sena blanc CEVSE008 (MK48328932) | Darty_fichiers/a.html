<!--?xml version="1.0" encoding="utf-8"?-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en"><head>
		<title>Kameleoon Platform</title>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<script type="text/javascript">
			var allowedDomains = null;
			var isDomainAllowed;
			if (allowedDomains != null)
			{
				isDomainAllowed = function(domain)
				{
					for (var i = 0, l = allowedDomains.length; i < l; ++i)
					{
						var allowedDomain = allowedDomains[i];
						if (domain == allowedDomain || domain.endsWith("." + allowedDomain))
						{
							return true;
						}
					}
					return false;
				};
			}
			else
			{
				isDomainAllowed = function(domain)
				{
					return true;
				};
			}
			var parentURLLink = document.createElement("a");
			parentURLLink.href = document.referrer;
			if (isDomainAllowed(parentURLLink.hostname))
			{
				try
				{
					if (window.localStorage)
					{
						localStorage.setItem("kameleoonPrivateMode", "false");
						localStorage.removeItem("kameleoonPrivateMode");
					}
					else
					{
						window.noLocalStorage = true;
					}
				}
				catch (e)
				{
					window.noLocalStorage = true;
				}
				if (! window.noLocalStorage)
				{
					window.retrieve = function()
					{
						var currentTime = new Date().getTime();
						var data = {};
						var deletedKeys = [];
						for (var i = 0, l = localStorage.length; i < l; ++i)
						{
							var currentData = JSON.parse(localStorage.getItem(localStorage.key(i)));
							if ("kameleoonTabs" != localStorage.key(i) && currentTime > currentData.date)
							{
								deletedKeys.push(i);
							}
							else
							{
								data[localStorage.key(i)] = currentData.value;
							}
						}
						for (var i = 0, l = deletedKeys.length; i < l; ++i)
						{
							localStorage.removeItem(localStorage.key(deletedKeys[i]));
						}
						return data;
					};
					var performBeaconServerCall = function(url, readyStateChangeHandler, errorHandler)
					{
						var request = new XMLHttpRequest();
						if (request.withCredentials !== undefined || ! XDomainRequest)
						{
							request.open("GET", url, true);
							if (readyStateChangeHandler)
							{
								request.onreadystatechange = readyStateChangeHandler;
							}
							if (errorHandler)
							{
								request.onerror = errorHandler;
							}
							request.send();
						}
						else
						{
							request = new XDomainRequest();
							request.open("get", url);
							if (readyStateChangeHandler)
							{
								request.onload = readyStateChangeHandler;
							}
							request.send();
						}
					};
					var processMessageEvent = function(event)
					{
						var eventURLLink = document.createElement("a");
						eventURLLink.href = event.origin;
						if (!isDomainAllowed(eventURLLink.hostname))
						{
							return;
						}
						var messageData = event.data;
						if (messageData.indexOf("kameleoon") != 0)
						{
							return;
						}
						messageData = messageData.slice("kameleoon".length);
						try
						{
							messageData = JSON.parse(messageData);
						}
						catch (exception)
						{
							return;
						}
						if (! messageData.type)
						{
							return;
						}
						switch (messageData.type.toLowerCase())
						{
							case "retrieve":
								event.source.postMessage(JSON.stringify({"callbackId": messageData.callbackId, "data": window.retrieve()}), event.origin);
								break;
							case "get":
								var currentData = JSON.parse(localStorage.getItem(messageData.key));
								if ("kameleoonTabs" != messageData.key && (! currentData || new Date().getTime() > currentData.date))
								{
									localStorage.removeItem(messageData.key);
									currentData = null;
								}
								else
								{
									currentData = currentData.value;
								}
								event.source.postMessage(JSON.stringify({"callbackId": messageData.callbackId, "data": currentData}), event.origin);
								break;
							case "set":
								localStorage.setItem(messageData.key, JSON.stringify(messageData.data));
								event.source.postMessage(JSON.stringify({"callbackId": messageData.callbackId}), event.origin);
								break;
							case "remove":
								localStorage.removeItem(messageData.key);
								event.source.postMessage(JSON.stringify({"callbackId": messageData.callbackId}), event.origin);
								break;
							case "tabcount":
								// reading tabs from local storage
								var tabs = JSON.parse(localStorage.getItem("kameleoonTabs"));
								// removing dead tabs and counts number of tabs
								var nowTime = new Date().getTime();
								var tabCount = 0;
								for (var tabId in tabs)
								{
									var tabDeadTime = tabs[tabId];
									if (tabDeadTime < nowTime)
									{
										delete(tabs[tabId]);
									}
									else
									{
										++tabCount;
									}
								}
								// updating calling tab registration and number of tabs
								if (! tabs[messageData.tabCode])
								{
									++tabCount;
								}
								tabs[messageData.tabCode] = messageData.deadTime;
								// updating tabs in local storage
								localStorage.setItem("kameleoonTabs", JSON.stringify(tabs));
								// sending tab count as response
								event.source.postMessage(JSON.stringify({"callbackId": messageData.callbackId, "data": tabCount}), event.origin);
								break;
							case "kameleoonfull":
								var callback = function(kameleoonFull)
								{
									// sending full script as response
									event.source.postMessage(JSON.stringify({"callbackId": messageData.callbackId, "data": kameleoonFull}), event.origin);
								};
								var kameleoonFull = sessionStorage.getItem("kameleoonFull");
								var kameleoonFullTime = sessionStorage.getItem("kameleoonFullTime");
								if ((null == kameleoonFull) || (null == kameleoonFullTime) || (new Date().getTime() - parseInt(kameleoonFullTime) >= 12 * 60 * 60 * 1000 /* 12 hours */))
								{
									performBeaconServerCall
									(
										"//static." + messageData.domain + "/kameleoon-full" + (messageData.betaCode ? "-beta" : "") + ".js?cache=" + messageData.cache,
										function()
										{
											if ((undefined === this.readyState) || ((this.readyState == 4) && (this.status == 200)))
											{
												sessionStorage.setItem("kameleoonFull", this.responseText);
												sessionStorage.setItem("kameleoonFullTime", new Date().getTime());
												callback(this.responseText);
											}
										}
									);
								}
								else
								{
									callback(kameleoonFull);
								}
								break;
						}
					};
					// initializing tabs in local storage if necessary
					if (! localStorage.getItem("kameleoonTabs"))
					{
						localStorage.setItem("kameleoonTabs", JSON.stringify({}));
					}
					// adding message event listenner
					if (window.addEventListener)
					{
						window.addEventListener("message", processMessageEvent, false);
					}
				}
				// sending Kameleoon script as string
				var messageToPost = "Kameleoon={processOmniture:function(a){Kameleoon.API.processOmniture(a)}};Kameleoon.API={load:function(){Kameleoon.Analyst.load()},runWhenElementPresent:function(a,c,b,f){if(typeof f===\"undefined\"){f=true}var d=Kameleoon.Utils.querySelectorAll(a);if(0<d.length){Kameleoon.Utils.runProtectedFunction(c)}else{if(!Kameleoon.Internals.runtime.pageLoaded){if(typeof MutationObserver!==\"function\"||!f){Kameleoon.Utils.setTimeout(function(){Kameleoon.API.runWhenElementPresent.apply(Kameleoon,[a,c,b,f])},b?b:250)}else{var e={};e.selector=a;e.targetFunction=c;e.useAntiFlicker=f;Kameleoon.Internals.runtime.waitingElementPresentObjects.push(e)}}}},runWhenConditionTrue:function(b,c,a){if(b()){Kameleoon.Utils.runProtectedFunction(c)}else{if(!Kameleoon.Internals.runtime.pageLoaded){Kameleoon.Utils.setTimeout(function(){Kameleoon.API.runWhenConditionTrue.apply(Kameleoon,[b,c,a])},a?a:200)}}},processRedirect:function(b,a){if(window.location.href!=b){if(Kameleoon.Internals.configuration.googleAnalytics&&Kameleoon.Internals.runtime.gathererRun&&(1==Kameleoon.Internals.runtime.Visitor.currentVisit.wholeVisitHistory.timesStartedPages.length)){b=Kameleoon.Utils.addParameterToURL(b,\"utm_referrer=\"+encodeURIComponent(document.referrer),Kameleoon.Internals.configuration.googleAnalyticsAllowAnchor)}if(Kameleoon.Internals.configuration.adobeOmniture&&Kameleoon.Internals.configuration.adobeOmniture.anchorReferrer&&Kameleoon.Internals.runtime.gathererRun&&(1==Kameleoon.Internals.runtime.Visitor.currentVisit.wholeVisitHistory.timesStartedPages.length)){b=Kameleoon.Utils.addParameterToURL(b,\"sc_referrer=\"+encodeURIComponent(document.referrer),true)}if(a){b=Kameleoon.Utils.addParameterToURL(b,\"kameleoonAVTE-\"+Kameleoon.API.currentContainer.id+\"=\"+Kameleoon.API.currentContainer.registeredVariation.id,true);b=Kameleoon.Utils.addParameterToURL(b,\"kameleoonRedirect-\"+Kameleoon.API.currentContainer.id+\"=true\",true)}if(window.location.href!=b){Kameleoon.Utils.createLocalData(\"kameleoonRedirect-\"+Kameleoon.API.currentContainer.id,window.location.href,1,null,null,false);Kameleoon.API.forceNoFlicker(\"*\");Kameleoon.Internals.runtime.Analyst.applyRedirect=true;window.location.replace(b)}}},triggerEvent:function(a){Kameleoon.API.runWhenConditionTrue(function(){return Kameleoon.Internals.runtime.setupAfterLocalDataRetrieval===true},function(){Kameleoon.API.events.push(a);Kameleoon.Analyst.processAllContainers();Kameleoon.Analyst.processAllTargetingSegments();if(Kameleoon.Internals.runtime.simulationMode){Kameleoon.Loader.enableSimulationPanel()}},100)},processConversion:function(a,b){this.processConversions(a,b,false)},cancelConversion:function(a,b){this.processConversions(a,b,true)},processConversions:function(f,a,c){for(var g=0,b=Kameleoon.Internals.configuration.goals.length;g<b;++g){var h=Kameleoon.Internals.configuration.goals[g];if((f==h.id)||(f==h.name)){var d=[{goal:h,revenue:a,negative:c}];if(!h.linkedExperimentId){for(var e=0;e<b;++e){var k=Kameleoon.Internals.configuration.goals[e];if(k.linkedExperimentId&&(k.masterGoalId==h.id)){d.push({goal:k,revenue:a,negative:c})}}}Kameleoon.Analyst.processConversions(d);break}}},processOmniture:function(d){if(Kameleoon.API.experiments){for(var c=0,b=Kameleoon.API.experiments.length;c<b;++c){var a=Kameleoon.API.experiments[c];if(a.adobeOmnitureTracking&&a.adobeOmnitureTracking.active){if(a.adobeOmnitureTracking.omnitureAlreadyLoaded){d.linkTrackVars=((!d.linkTrackVars||\"None\"==d.linkTrackVars)?\"\":(d.linkTrackVars+\",\"))+\"eVar\"+a.adobeOmnitureTracking.eVar}d[\"eVar\"+a.adobeOmnitureTracking.eVar]=a.name+\" / \"+a.registeredVariation.name}}}},forceNoFlicker:function(c){var b=document.createElement(\"style\");b.setAttribute(\"id\",\"kameleoonPageLoading\");b.setAttribute(\"rel\",\"stylesheet\");b.setAttribute(\"type\",\"text/css\");b.setAttribute(\"media\",\"screen\");var a=c+\" { visibility: hidden !important; background-image: none !important; }\";if(b.styleSheet){b.styleSheet.cssText=a}else{b.appendChild(document.createTextNode(a))}Kameleoon.Internals.runtime.headNode.appendChild(b)},refresh:function(){Kameleoon.Analyst.refreshForScreenResize()},loadScriptSequentially:function(b){if(b){var a=document.createElement(\"script\");a.src=b;a.setAttribute(\"onload\",\"Kameleoon.API.loadScriptSequentially();\");Kameleoon.Internals.runtime.waitingScripts.push(a);if(1==Kameleoon.Internals.runtime.waitingScripts.length){Kameleoon.Internals.runtime.headNode.appendChild(Kameleoon.Internals.runtime.waitingScripts[0])}}else{Kameleoon.Internals.runtime.waitingScripts.shift();if(0<Kameleoon.Internals.runtime.waitingScripts.length){Kameleoon.Internals.runtime.headNode.appendChild(Kameleoon.Internals.runtime.waitingScripts[0])}}},processPageLoaded:function(){Kameleoon.Internals.runtime.pageLoaded=true;Kameleoon.Utils.removeBlockingStyleSheet();for(var b=0,a=Kameleoon.Internals.runtime.variations.length;b<a;++b){if(Kameleoon.Internals.runtime[\"enginePollerForVariation\"+Kameleoon.Internals.runtime.variations[b].id]){window.clearInterval(Kameleoon.Internals.runtime[\"enginePollerForVariation\"+Kameleoon.Internals.runtime.variations[b].id]);Kameleoon.Internals.runtime[\"enginePollerForVariation\"+Kameleoon.Internals.runtime.variations[b].id]=null}}},setCustomData:function(c,g,f){if(Kameleoon.Internals.runtime.gathererRun){var e=Kameleoon.Internals.runtime.Gatherer.configuration;var b=null;for(var d=0,a=e.customData.length;d<a;++d){if(e.customData[d].name==c){b=d;break}}if(b!=null){if(f==null){f=false}Kameleoon.Gatherer.trackCustomData([b],[g],[f])}}}};Kameleoon.Analyst={load:function(){if(Kameleoon.Internals.runtime!=null){if(Kameleoon.Internals.runtime.eventListeners!=null){for(var f=0,d=Kameleoon.Internals.runtime.eventListeners.length;f<d;++f){var b=Kameleoon.Internals.runtime.eventListeners[f];b.element.removeEventListener(b.eventType,b.actionFunction,b.useCapture)}}if(Kameleoon.Internals.runtime.timeoutIds!=null){for(var f=0,d=Kameleoon.Internals.runtime.timeoutIds.length;f<d;++f){window.clearTimeout(Kameleoon.Internals.runtime.timeoutIds[f])}}if(Kameleoon.Internals.runtime.intervalIds!=null){for(var f=0,d=Kameleoon.Internals.runtime.intervalIds.length;f<d;++f){window.clearInterval(Kameleoon.Internals.runtime.intervalIds[f])}}if(Kameleoon.Internals.runtime.mutationObserver!=null){Kameleoon.Internals.runtime.mutationObserver.disconnect()}if(Kameleoon.Internals.runtime.Analyst!=null){if((Kameleoon.Internals.runtime.Analyst.targetingPanel!=null)&&(Kameleoon.Internals.runtime.Analyst.targetingPanel.parentNode!=null)){Kameleoon.Internals.runtime.Analyst.targetingPanel.parentNode.removeChild(Kameleoon.Internals.runtime.Analyst.targetingPanel)}if((Kameleoon.Internals.runtime.Analyst.targetingPanelHideButton!=null)&&(Kameleoon.Internals.runtime.Analyst.targetingPanelHideButton.parentNode!=null)){Kameleoon.Internals.runtime.Analyst.targetingPanelHideButton.parentNode.removeChild(Kameleoon.Internals.runtime.Analyst.targetingPanelHideButton)}if((Kameleoon.Internals.runtime.Analyst.targetingPanelShowButton!=null)&&(Kameleoon.Internals.runtime.Analyst.targetingPanelShowButton.parentNode!=null)){Kameleoon.Internals.runtime.Analyst.targetingPanelShowButton.parentNode.removeChild(Kameleoon.Internals.runtime.Analyst.targetingPanelShowButton)}}}Kameleoon.API.pageCallbacks=null;Kameleoon.API.activityCallbacks=null;Kameleoon.API.interestsCallbacks=null;Kameleoon.API.searchCallbacks=null;Kameleoon.API.conversionCallbacks=null;Kameleoon.API.mentalistActionCallbacks=null;Kameleoon.API.experimentCallbacks=null;Kameleoon.API.personalizationCallbacks=null;Kameleoon.API.weatherCallbacks=null;Kameleoon.API.customDatumCallbacks=null;Kameleoon.API.tabCountCallbacks=null;Kameleoon.API.productCallbacks=null;Kameleoon.API.geolocationCallbacks=null;Kameleoon.API.numberClicksCallbacks=null;Kameleoon.API.startOfVisitCallbacks=null;var a;a=Kameleoon.Utils.querySelectorAll(\"[id^=kameleoonElement]\");for(var f=0,d=a.length;f<d;++f){var g=a[f];g.parentNode.removeChild(g)}a=Kameleoon.Utils.querySelectorAll(\"[id^=kameleoonScenarioLayerBase]\");for(var f=0,d=a.length;f<d;++f){var g=a[f];g.parentNode.removeChild(g)}a=Kameleoon.Utils.querySelectorAll(\"[id^=kameleoonStyleSheet]\");for(var f=0,d=a.length;f<d;++f){var g=a[f];g.parentNode.removeChild(g)}a=Kameleoon.Utils.querySelectorAll(\"[id^=kameleoonId]\");for(var f=0,d=a.length;f<d;++f){var g=a[f];g.removeAttribute(\"id\")}a=Kameleoon.Utils.querySelectorAll(\"[class^=kameleoonClass]\");for(var f=0,d=a.length;f<d;++f){var g=a[f];g.removeAttribute(\"class\")}var k=document.getElementById(\"kameleoonVariationSelectionPopup\");if(k!=null){k.parentNode.removeChild(k)}var c=Kameleoon.Internals.configuration;Kameleoon.Internals={};Kameleoon.Internals.configuration=c;Kameleoon.Internals.runtime={};Kameleoon.Utils.domReady(function(){Kameleoon.Internals.runtime.domReady=true});if(!Kameleoon.Internals.configuration.useWideDomainSupport){try{if(window.localStorage){localStorage.setItem(\"kameleoonPrivateMode\",\"false\");localStorage.removeItem(\"kameleoonPrivateMode\")}else{Kameleoon.Internals.runtime.noLocalStorage=true}}catch(j){Kameleoon.Internals.runtime.noLocalStorage=true}}try{var h;Kameleoon.Utils.createLocalData(\"kameleoonTestCookie\",\"test\",null,\"CURRENT_HOST\",\"COOKIE\",false,null,true);if(Kameleoon.Utils.readLocalData(\"kameleoonTestCookie\",\"COOKIE\",false)!=\"test\"){h=false}else{h=true;Kameleoon.Utils.eraseLocalData(\"kameleoonTestCookie\",\"CURRENT_HOST\",\"COOKIE\")}if(!h){Kameleoon.Internals.runtime.noCookie=true}}catch(j){Kameleoon.Internals.runtime.noCookie=true}if(window.kameleoonDisplayPage){if(!Kameleoon.Internals.configuration.disableWhenTimeout||document.getElementById(\"kameleoonLoadingStyleSheet\")){window.clearTimeout(window.kameleoonDisplayPageTimeOut)}else{if(!Kameleoon.Internals.runtime.noLocalStorage&&Kameleoon.Internals.configuration.disableVisitWhenTimeout){sessionStorage.setItem(\"kameleoonDisableForVisit\",\"true\")}}try{window.kameleoonDisplayPage()}catch(j){}}if(Kameleoon.Internals.runtime.noLocalStorage||Kameleoon.Internals.runtime.noCookie||sessionStorage.getItem(\"kameleoonDisableForVisit\")){return}this.setupKameleoon()},setupKameleoon:function(){if(Kameleoon.Internals.configuration.variations!=null){Kameleoon.Internals.runtime.variations=Kameleoon.Utils.clone(Kameleoon.Internals.configuration.variations)}if(Kameleoon.Internals.configuration.experiments!=null){Kameleoon.Internals.runtime.experiments=Kameleoon.Utils.clone(Kameleoon.Internals.configuration.experiments)}if(Kameleoon.Internals.configuration.personalizations!=null){Kameleoon.Internals.runtime.personalizations=Kameleoon.Utils.clone(Kameleoon.Internals.configuration.personalizations)}if(Kameleoon.Internals.configuration.targetingSegments!=null){Kameleoon.Internals.runtime.targetingSegments=Kameleoon.Utils.clone(Kameleoon.Internals.configuration.targetingSegments)}Kameleoon.Internals.runtime.addedIDs=[];Kameleoon.Internals.runtime.addedClasses=[];if(Kameleoon.Internals.runtime.Analyst==null){Kameleoon.Internals.runtime.Analyst={}}if(Kameleoon.Internals.runtime.requestedVariations==null){Kameleoon.Internals.runtime.requestedVariations={}}Kameleoon.Internals.runtime.adblockCheckIntervalId=Kameleoon.Utils.setInterval(function(){var e=document.getElementById(\"adBlockerCheck\");if((e==null)&&(document.body!=null)){e=document.createElement(\"div\");e.id=\"adBlockerCheck\";e.className=\"ad-placement\";document.body.appendChild(e)}if((e!=null)&&(window.getComputedStyle(e).display==\"none\")){clearInterval(Kameleoon.Internals.runtime.adblockCheckIntervalId);Kameleoon.Internals.runtime.adblock=true}}.bind(this),50);Kameleoon.Utils.setTimeout(function(){var e=document.getElementById(\"adBlockerCheck\");if(e!=null){e.parentNode.removeChild(e)}if(Kameleoon.Internals.runtime.adblock==null){clearInterval(Kameleoon.Internals.runtime.adblockCheckIntervalId);Kameleoon.Internals.runtime.adblock=false}else{if(Kameleoon.Internals.runtime.gathererRun){Kameleoon.Gatherer.trackAdBlocker()}}}.bind(this),2000);Kameleoon.Internals.runtime.ghosteryCheckIntervalId=Kameleoon.Utils.setInterval(function(){if(Kameleoon.Utils.querySelectorAll(\"[id^=ghostery-]\").length>0){clearInterval(Kameleoon.Internals.runtime.ghosteryCheckIntervalId);Kameleoon.Internals.runtime.ghostery=true}}.bind(this),50);Kameleoon.Utils.setTimeout(function(){if(Kameleoon.Internals.runtime.ghostery==null){clearInterval(Kameleoon.Internals.runtime.ghosteryCheckIntervalId);Kameleoon.Internals.runtime.ghostery=false}else{if(Kameleoon.Internals.runtime.gathererRun){Kameleoon.Gatherer.trackAdBlocker()}}}.bind(this),2000);Kameleoon.Internals.runtime.mouseDownEvent=(\"ontouchend\" in document.documentElement?\"touchend\":\"mousedown\");if((window.kameleoonStartLoadTime!=null)&&(Kameleoon.Internals.configuration.kameleoonByteLength!=null)){if(window.kameleoonEndLoadTime==null){window.kameleoonEndLoadTime=new Date().getTime()}var p=(window.kameleoonEndLoadTime-window.kameleoonStartLoadTime)-25;Kameleoon.Internals.runtime.bandwithBytesPerMillisecond=Kameleoon.Internals.configuration.kameleoonByteLength/p}if(Kameleoon.Internals.configuration.localDataLegalControl&&(Kameleoon.Utils.readLocalData(\"kameleoonLocalDataConsent\",\"LS\",false)==null)&&((Kameleoon.Internals.configuration.localDataConsentCookieName==null)||(Kameleoon.Utils.readLocalData(Kameleoon.Internals.configuration.localDataConsentCookieName,\"COOKIE\",false)==null))){Kameleoon.Internals.runtime.saveLocalDataAllowed=false;var g=function(){document.removeEventListener(Kameleoon.Internals.runtime.mouseDownEvent,g,false);window.removeEventListener(\"scroll\",g,false);Kameleoon.Internals.runtime.saveLocalDataAllowed=true;Kameleoon.Utils.createLocalData(\"kameleoonLocalDataConsent\",true,1000,null,\"LS\",false,null,true);var e=(Kameleoon.Internals.runtime.localDataMap==null?null:Kameleoon.Internals.runtime.localDataMap.LS);var j=(Kameleoon.Internals.runtime.localDataMap==null?null:Kameleoon.Internals.runtime.localDataMap.COOKIE);if(e!=null){for(var i in e){Kameleoon.Utils.createLocalData(e[i].name,e[i].value,e[i].days,e[i].domain,e[i].forceLocalAccess,e[i].jsonFormat,null,true)}}if(j!=null){for(var i in j){Kameleoon.Utils.createLocalData(j[i].name,j[i].value,j[i].days,j[i].domain,j[i].forceLocalAccess,j[i].jsonFormat,null,true)}}Kameleoon.Internals.runtime.localDataMap=null}.bind(this);Kameleoon.Utils.addEventListener(document,Kameleoon.Internals.runtime.mouseDownEvent,g,false);Kameleoon.Utils.addEventListener(window,\"scroll\",g,false)}else{Kameleoon.Internals.runtime.saveLocalDataAllowed=true}Kameleoon.Internals.runtime.JS_EDITOR_URL=Kameleoon.Internals.configuration.BASE_EDITOR_URL+\"script/editor.js\";Kameleoon.Internals.runtime.PAGE_LOADING_POLL_DELAY=75;Kameleoon.Internals.runtime.PAGE_LOADED_POLL_DELAY=250;Kameleoon.Internals.runtime.GEOLOCATION_URL=\"//tracker.kameleoon.com/geolocation.gif?\";Kameleoon.Internals.runtime.IP_URL=\"//tracker.kameleoon.com/get-ip.gif?\";Kameleoon.Internals.runtime.OPEN_WEATHER_MAP_APPID=\"c47db1e8ab50752e5f42c72f175b5210\";Kameleoon.Internals.runtime.OPEN_WEATHER_MAP_WEATHER_URL=\"//api.openweathermap.org/data/2.5/weather?APPID=\"+Kameleoon.Internals.runtime.OPEN_WEATHER_MAP_APPID+\"&\";Kameleoon.Internals.runtime.OPEN_WEATHER_MAP_WEATHER_FORECAST_URL=\"//api.openweathermap.org/data/2.5/forecast?APPID=\"+Kameleoon.Internals.runtime.OPEN_WEATHER_MAP_APPID+\"&\";Kameleoon.Internals.runtime.deviceType=(bowser.tablet?\"TABLET\":(bowser.mobile?\"PHONE\":\"DESKTOP\"));Kameleoon.Internals.runtime.mobileDevice=(Kameleoon.Internals.runtime.deviceType==\"TABLET\")||(Kameleoon.Internals.runtime.deviceType==\"PHONE\");Kameleoon.Internals.runtime.linux=bowser.linux;Kameleoon.Internals.runtime.mac=bowser.mac;Kameleoon.Internals.runtime.windows=bowser.windows;Kameleoon.Internals.runtime.android=bowser.android;Kameleoon.Internals.runtime.ios=bowser.ios;Kameleoon.Internals.runtime.windowsphone=bowser.windowsphone;Kameleoon.Internals.runtime.gecko=bowser.gecko;Kameleoon.Internals.runtime.webkit=bowser.webkit;Kameleoon.Internals.runtime.browserName=(bowser.name==\"\"?null:bowser.name);Kameleoon.Internals.runtime.browserVersion=(bowser.version==\"\"?null:parseFloat(bowser.version));Kameleoon.Internals.runtime.msie=bowser.msie;Kameleoon.Internals.runtime.msedge=bowser.msedge;Kameleoon.Internals.runtime.chrome=bowser.chrome;Kameleoon.Internals.runtime.firefox=bowser.firefox;Kameleoon.Internals.runtime.safari=bowser.safari;Kameleoon.Internals.runtime.opera=bowser.opera;Kameleoon.Internals.runtime.modernMsie=Kameleoon.Internals.runtime.msie&&(Kameleoon.Internals.runtime.browserVersion>=10);Kameleoon.Internals.runtime.unsupportedBrowser=(Kameleoon.Internals.runtime.msie&&(Kameleoon.Internals.runtime.browserVersion<9))||(Kameleoon.Internals.runtime.opera&&(Kameleoon.Internals.runtime.browserVersion<13));Kameleoon.Internals.runtime.parameters=Kameleoon.Utils.parseParameters();Kameleoon.Internals.runtime.kameleoonVisibility=document.visibilityState;Kameleoon.Internals.runtime.conversionsEvent=new Kameleoon.Utils.Event();Kameleoon.Internals.runtime.targetingsEvent=new Kameleoon.Utils.Event();Kameleoon.Internals.runtime.memorizedTargetingsEvent=Kameleoon.Internals.runtime.targetingsEvent.memorize();if(Kameleoon.Internals.runtime.parameters.kameleoonOptout){Kameleoon.Utils.createLocalData(\"kameleoonOptout\",true,45,null,\"COOKIE\",false)}if(Kameleoon.Internals.configuration.checkTraffic){if(!Kameleoon.Utils.readLocalData(\"kameleoonTraffic\",\"COOKIE\",false)){var h=Kameleoon.Internals.configuration.trackerNodeCode;if(null==h){h=\"01\"}var r=\"//counter-\"+h+\".\"+Kameleoon.Internals.configuration.DOMAIN+\"/_.gif?\";Kameleoon.Utils.performBeaconServerCall(r+\"siteCode=\"+Kameleoon.Internals.configuration.siteCode+\"&totalTraffic=true\");Kameleoon.Utils.createLocalData(\"kameleoonTraffic\",\"true\",30,null,\"COOKIE\",false)}}if(this.shouldAbortSetup()){return}if(Kameleoon.Internals.configuration.goals==null){Kameleoon.Internals.configuration.goals=[]}for(var d=0,b=Kameleoon.Internals.configuration.goals.length;d<b;++d){var m=Kameleoon.Internals.configuration.goals[d];if(!m.linkedExperimentId){for(var c=0;c<b;++c){var o=Kameleoon.Internals.configuration.goals[c];if(o.linkedExperimentId&&(o.masterGoalId==m.id)){for(var n in m){if((n!=\"id\")&&(n!=\"mentalistWeight\")&&(n!=\"masterGoalId\")&&(n!=\"masterGoalName\")&&(n!=\"linkedExperimentId\")){o[n]=m[n]}}}}}}if((Kameleoon.Mentalist!=null)&&(!Kameleoon.Mentalist.computeIsSecure())){Kameleoon.Mentalist=null}Kameleoon.Internals.runtime.headNode=document.getElementsByTagName(\"head\")[0];Kameleoon.Internals.runtime.waitingScripts=[];Kameleoon.Internals.runtime.pageElementSets=[];Kameleoon.Internals.runtime.waitingElementPresentObjects=[];Kameleoon.Internals.runtime.editorMode=(\"true\"==Kameleoon.Internals.runtime.parameters.kameleoon);Kameleoon.Internals.runtime.proxyMode=((\"proxy.\"+Kameleoon.Internals.configuration.DOMAIN)===window.location.hostname);Kameleoon.Internals.runtime.disableCache=(\"true\"==Kameleoon.Internals.runtime.parameters.kameleoonDisableCache)||Kameleoon.Internals.runtime.parameters.kameleoonVariationId;Kameleoon.Internals.configuration.activePersonalizations=[];Kameleoon.Internals.configuration.displayedPersonalizations=[];for(var d=0,b=Kameleoon.Internals.runtime.personalizations.length;d<b;++d){var q=Kameleoon.Internals.runtime.personalizations[d];q.targeting=undefined}Kameleoon.Internals.runtime.pageStartTime=new Date().getTime();Kameleoon.Internals.runtime.virtualRootElement=document.createElement(\"div\");if(Kameleoon.Internals.runtime.parameters.kameleoonVariationId){var k=Kameleoon.Internals.runtime.parameters.kameleoonVariationId;var a={id:\"\",name:\"Visualization\",forceTargeting:true,forceExposition:true,associatedVariation:{name:\"\",id:k}};Kameleoon.Internals.runtime.variations=[{id:\"reference\",name:\"Reference\",builtCssCodeLevel2:\"\",elementSets:[]}];Kameleoon.Internals.runtime.personalizations.push(a);a.displayedVariation={id:k};this.loadVariationData(a,true)}Kameleoon.Internals.runtime.apiPersonalizations=new Kameleoon.Analyst.APIPersonalizations();if(window.parent!=window){try{Kameleoon.Internals.runtime.editorMode=Kameleoon.Internals.runtime.editorMode||(window.parent.location.search&&-1!=window.parent.location.search.indexOf(\"kameleoon=true\"))}catch(f){}}Kameleoon.Utils.addEventListener(window,\"message\",Kameleoon.Utils.processMessageEvent,false);if(Kameleoon.Internals.configuration.abtestingSetup||Kameleoon.Internals.configuration.personalizationSetup){Kameleoon.API.events=[];Kameleoon.API.experiments=Kameleoon.Internals.runtime.parameters.kameleoonVariationId?[]:Kameleoon.Internals.runtime.experiments;for(var d=0,b=Kameleoon.API.experiments.length;d<b;++d){Kameleoon.API.experiments[d].targeting=undefined}this.obtainSimulationModeData()}else{this.setupAfterLocalDataRetrieval()}Kameleoon.API.experiments.forEach(function(i){if(i.targetingSegment&&i.targetingSegment.targetingTree!=null){i.flatTargetingSegment=Kameleoon.Utils.flattenTargetingTree(i.targetingSegment.targetingTree)}});Kameleoon.API.personalizations.forEach(function(e){if(e.targetingSegment&&e.targetingSegment.targetingTree!=null){e.flatTargetingSegment=Kameleoon.Utils.flattenTargetingTree(e.targetingSegment.targetingTree)}});if(Kameleoon.Internals.configuration.singlePageSupport){Kameleoon.Internals.runtime.href=window.location.href;Kameleoon.Utils.setInterval(function(){var e=Kameleoon.Internals.runtime.href;Kameleoon.Internals.runtime.href=window.location.href;if(e!=Kameleoon.Internals.runtime.href){Kameleoon.Analyst.load.apply(Kameleoon.Analyst,[])}},100)}},APIPersonalizations:function(){var c=[];var b,a;var e=function(){b=Kameleoon.Internals.runtime.personalizations;Kameleoon.API.activePersonalizations=[];Kameleoon.API.displayedPersonalizations=[];d()};var d=function(){a=Kameleoon.API.personalizations=[];a=Kameleoon.Utils.api.mapAll(c,b,a);Kameleoon.API.displayedPersonalizations=Kameleoon.Internals.configuration.displayedPersonalizations;Kameleoon.API.activePersonalizations=Kameleoon.Internals.configuration.activePersonalizations};var f=function(){Kameleoon.API.displayedPersonalizations=Kameleoon.Internals.configuration.displayedPersonalizations;Kameleoon.API.activePersonalizations=Kameleoon.Internals.configuration.activePersonalizations};e();return{update:f,updateAll:d}},shouldAbortSetup:function(){if(Kameleoon.Internals.runtime.parameters.kameleoonDisabled||Kameleoon.Internals.configuration.kameleoonDisabled){return true}if(Kameleoon.Internals.runtime.unsupportedBrowser){return true}if(Kameleoon.Utils.readLocalData(\"kameleoonOptout\",\"COOKIE\",false)){return true}return false},obtainSimulationModeData:function(){if(Kameleoon.Internals.runtime.parameters[\"kameleoon-simulation\"]){Kameleoon.Internals.runtime.newSimulationModeData=true;if(0==Kameleoon.Internals.runtime.parameters[\"kameleoon-simulation\"].indexOf(\"server-call-\")){Kameleoon.Utils.performBeaconServerCall(\"https://\"+Kameleoon.Internals.configuration.API_HOST_NAME+\".\"+Kameleoon.Internals.configuration.DOMAIN+\"/simulation?siteCode=\"+Kameleoon.Internals.configuration.siteCode+\"&simulationCode=\"+Kameleoon.Internals.runtime.parameters[\"kameleoon-simulation\"].substring(12),function(){if((this.readyState==4)&&(this.status==200)){eval(this.responseText)}},null);return}Kameleoon.Internals.runtime.simulationModeData=Kameleoon.Utils.JSONParse(Kameleoon.Internals.runtime.parameters[\"kameleoon-simulation\"])}this.setupLocalData()},setupLocalData:function(){if(Kameleoon.Internals.configuration.useWideDomainSupport){Kameleoon.Internals.runtime.externalIframe=document.getElementById(\"kameleoonExternalIframe\");Kameleoon.Internals.runtime.postMessageOrigin=Kameleoon.Internals.configuration.customIFrameOrigin?Kameleoon.Internals.configuration.customIFrameOrigin:Kameleoon.Internals.configuration.IFRAME_ORIGIN;Kameleoon.Internals.runtime.postMessageCallbacks={};if(Kameleoon.Internals.configuration.externalIframeData==null){Kameleoon.Utils.postMessageToExternalIframe(Kameleoon.Utils.JSONStringify({type:\"retrieve\",callbackId:Kameleoon.Utils.addPostMessageCallback(function(a){this.setupLocalDataCallback(a)}.bind(this))}))}else{this.setupLocalDataCallback(Kameleoon.Internals.configuration.externalIframeData);delete (Kameleoon.Internals.configuration.externalIframeData)}}else{this.setupLocalDataCallback(null)}},loadKameleoonFull:function(c){if(Kameleoon.Internals.configuration.kameleoonFull!=null){this.updateAndEvaluateKameleoonFull(Kameleoon.Internals.configuration.kameleoonFull,c)}else{if(Kameleoon.Internals.configuration.useWideDomainSupport){Kameleoon.Utils.postMessageToExternalIframe(Kameleoon.Utils.JSONStringify({type:\"kameleoonfull\",domain:Kameleoon.Internals.configuration.DOMAIN,betaCode:Kameleoon.Internals.configuration.betaCode,cache:Kameleoon.Utils.obtainRandomString(16),callbackId:Kameleoon.Utils.addPostMessageCallback(function(d){Kameleoon.Analyst.updateAndEvaluateKameleoonFull(d,c)})}))}else{var b=sessionStorage.getItem(\"kameleoonFull\");var a=sessionStorage.getItem(\"kameleoonFullTime\");if((null==b)||(null==a)||(new Date().getTime()-parseInt(a)>=12*60*60*1000)){Kameleoon.Utils.performBeaconServerCall(\"//\"+Kameleoon.Internals.configuration.STATIC_HOST_NAME+\".\"+Kameleoon.Internals.configuration.DOMAIN+\"/kameleoon-full\"+(Kameleoon.Internals.configuration.betaCode?\"-beta\":\"\")+\".js?cache=\"+Kameleoon.Utils.obtainRandomString(16),function(){if((undefined===this.readyState)||((this.readyState==4)&&(this.status==200))){sessionStorage.setItem(\"kameleoonFull\",this.responseText);sessionStorage.setItem(\"kameleoonFullTime\",new Date().getTime());Kameleoon.Analyst.updateAndEvaluateKameleoonFull(this.responseText,c)}})}else{this.updateAndEvaluateKameleoonFull(b,c)}}}},updateAndEvaluateKameleoonFull:function(kameleoonFull,callback){Kameleoon.Internals.configuration.kameleoonFull=kameleoonFull;eval(kameleoonFull);callback&&callback()},setupLocalDataCallback:function(p){Kameleoon.Utils.removeBlockingStyleSheet();if(Kameleoon.Internals.runtime.newSimulationModeData){Kameleoon.Utils.createLocalData(\"kameleoonSimulationMode\",Kameleoon.Internals.runtime.simulationModeData,1/24,null,\"LS\",true);Kameleoon.Utils.createLocalData(\"kameleoonSimulationModeShortURL\",Kameleoon.Internals.runtime.simulationModeShortURL,1/24,null,\"LS\",true)}else{Kameleoon.Internals.runtime.simulationModeData=p?p.kameleoonSimulationMode:Kameleoon.Utils.readLocalData(\"kameleoonSimulationMode\",\"LS\",true);Kameleoon.Internals.runtime.simulationModeShortURL=p?p.kameleoonSimulationModeShortURL:Kameleoon.Utils.readLocalData(\"kameleoonSimulationModeShortURL\",\"LS\",true)}if(Kameleoon.Internals.runtime.simulationModeData){Kameleoon.Internals.runtime.simulationMode=true;Kameleoon.Internals.runtime.disableCache=true;Kameleoon.Internals.runtime.variations=[{id:\"reference\",name:\"Reference\",builtCssCodeLevel2:\"\",elementSets:[]}];this.loadKameleoonFull(function(){Kameleoon.Analyst.processSimulations.apply(Kameleoon.Analyst)})}for(var y=0,v=Kameleoon.API.experiments.length;y<v;++y){var f=Kameleoon.API.experiments[y];var b=false;var o=p?p[\"kameleoonRedirect-\"+f.id]:Kameleoon.Utils.readLocalData(\"kameleoonRedirect-\"+f.id,null,false)?true:false;o=o?true:(Kameleoon.Internals.runtime.parameters[\"kameleoonRedirect-\"+f.id]?true:false);f.previousRequestRedirected=o;var k=p?p[\"kameleoonExperiment-\"+f.id]:Kameleoon.Utils.readLocalData(\"kameleoonExperiment-\"+f.id,null,false);for(var D in Kameleoon.Internals.runtime.parameters){if(0==D.indexOf(\"kameleoonAVTE-\"+f.id)){k=Kameleoon.Internals.runtime.parameters[D]+\"/\"+new Date().getTime()+\"/\"+false;b=true}}if(k){var t=k.split(\"/\");f.registeredVariationId=t[0];f.assignmentTime=t[1];f.counterActive=(t[2]==\"true\"&&(new Date().getTime()-f.assignmentTime<2592000000))?true:false}else{f.counterActive=false}if(f.registeredVariationId&&-1!=f.registeredVariationId.toString().indexOf(\"-mentalist\")){f.registeredVariationId=f.registeredVariationId.replace(\"-mentalist\",\"\");f.mentalistEnabled=true}if(b){Kameleoon.Analyst.writeExperimentLocalData(f)}}if(Kameleoon.Internals.runtime.personalizations.length>0){var c;var k=p?p.kameleoonPersonalizations:Kameleoon.Utils.readLocalData(\"kameleoonPersonalizations\");if(k){var t=k.split(\"/\");c=(t[0]==\"true\")?true:false}else{if(Math.random()<Kameleoon.Internals.configuration.personalizationsDeviation){c=true}else{c=false}k=c+\"/\"+new Date().getTime();Kameleoon.Utils.createLocalData(\"kameleoonPersonalizations\",k,380,null,null,false)}if(Kameleoon.API.visitor==null){Kameleoon.API.visitor={}}Kameleoon.API.visitor.personalizationsActive=c}var d;if(p){try{var h=p.kameleoonData;if(!Kameleoon.Utils.LOCAL_STORAGE_OBFUSCATED_KEYS.kameleoonData){d=h}else{var n;if(h.slice(0,2)===\"2\"&&h.slice(-1)===\"\"){n=Kameleoon.Utils.unobfuscateString(h)}else{n=Kameleoon.Utils.decodeString(h)}d=n&&Kameleoon.Utils.JSONParse(n)||{}}}catch(B){d=null}}else{d=Kameleoon.Utils.readLocalData(\"kameleoonData\",\"LS\",true)}Kameleoon.Internals.runtime.storedData=d||{};Kameleoon.Analyst.setupAfterLocalDataRetrieval();var a={simulation:true};for(var y=0,v=Kameleoon.API.experiments.length;y<v;++y){a[Kameleoon.API.experiments[y].id]=true}for(var y=0,v=Kameleoon.Internals.configuration.pausedExperiments.length;y<v;++y){a[Kameleoon.Internals.configuration.pausedExperiments[y]]=true}var g=[];var x=document.cookie.split(new RegExp(\"; *\"));for(var y=0,v=x.length;y<v;++y){var z=x[y].substring(0,x[y].indexOf(\"=\"));var r=z.indexOf(\"kameleoonExperiment-\");if(r==0){var A=z.substring(\"kameleoonExperiment-\".length);if(a[A]==null){g.push(z)}}}var s=window.location.hostname.split(\".\");for(var y=0,v=g.length;y<v;++y){var C=g[y];var q=\"\";for(var w=0,u=s.length;w<u;w++){if(w>0){q=\".\"+q}q=s[u-w-1]+q;Kameleoon.Utils.eraseLocalData(C,q,\"COOKIE\")}}},setupAfterLocalDataRetrieval:function(){Kameleoon.Internals.runtime.setupAfterLocalDataRetrieval=true;if((!Kameleoon.Internals.runtime.simulationMode)&&Kameleoon.Internals.runtime.parameters.kameleoonHeatMap&&Kameleoon.Internals.runtime.parameters.kameleoonVariationId){Kameleoon.Utils.performBeaconServerCall(\"https://\"+Kameleoon.Internals.configuration.API_HOST_NAME+\".\"+Kameleoon.Internals.configuration.DOMAIN+\"/heatmap\",function(){if((this.readyState==4)&&(this.status==200)){eval(this.responseText);Kameleoon.API.getHeatMap()}},null)}if(Kameleoon.Analyst.processScriptActivityTracking){Kameleoon.Analyst.processScriptActivityTracking()}if(Kameleoon.Internals.configuration.abtestingSetup||Kameleoon.Internals.configuration.personalizationSetup){if(Kameleoon.Gatherer&&Kameleoon.Internals.configuration.Gatherer){Kameleoon.Gatherer.run();Kameleoon.Internals.runtime.gathererRun=true}else{Kameleoon.Utils.saveStoredData()}if(Kameleoon.Internals.configuration.geolocation||Kameleoon.Internals.runtime.simulationMode){var registerGeolocation=function(geolocationString){Kameleoon.Internals.runtime.geolocation=Kameleoon.Utils.JSONParse(geolocationString);if(Kameleoon.Internals.runtime.gathererRun){Kameleoon.Gatherer.trackGeolocation(Kameleoon.Internals.runtime.geolocation.country,Kameleoon.Internals.runtime.geolocation.region,Kameleoon.Internals.runtime.geolocation.city,Kameleoon.Internals.runtime.geolocation.latitude,Kameleoon.Internals.runtime.geolocation.longitude)}if(Kameleoon.Internals.configuration.weather||Kameleoon.Internals.runtime.simulationMode){var registerWeather=function(weatherString){Kameleoon.Internals.runtime.weather=Kameleoon.Utils.JSONParse(weatherString);if(Kameleoon.Internals.runtime.gathererRun){Kameleoon.Gatherer.trackWeather(Kameleoon.Internals.runtime.weather.main.temp,Kameleoon.Internals.runtime.weather.main.humidity,Kameleoon.Internals.runtime.weather.main.pressure,Kameleoon.Internals.runtime.weather.wind.speed,Kameleoon.Internals.runtime.weather.clouds.all,Kameleoon.Internals.runtime.weather.sys.sunrise*1000,Kameleoon.Internals.runtime.weather.sys.sunset*1000,Kameleoon.Internals.runtime.weather.weather&&Kameleoon.Internals.runtime.weather.weather[0]?Kameleoon.Internals.runtime.weather.weather[0].description:null)}}.bind(this);var weatherString=sessionStorage.getItem(\"KameleoonWeather\");if(weatherString==null){if((null!=Kameleoon.Internals.runtime.geolocation.latitude)&&(null!=Kameleoon.Internals.runtime.geolocation.longitude)&&(\"http:\"==window.location.protocol)){Kameleoon.Utils.performBeaconServerCall(Kameleoon.Internals.runtime.OPEN_WEATHER_MAP_WEATHER_URL+\"lat=\"+Kameleoon.Internals.runtime.geolocation.latitude+\"&lon=\"+Kameleoon.Internals.runtime.geolocation.longitude,function(){if((this.readyState==4)&&(this.status==200)){weatherString=this.responseText;sessionStorage.setItem(\"KameleoonWeather\",weatherString);registerWeather(weatherString)}},null)}}else{registerWeather(weatherString)}}if(Kameleoon.Internals.configuration.weatherForecast||Kameleoon.Internals.runtime.simulationMode){var registerWeatherForecast=function(weatherForecastString){Kameleoon.Internals.runtime.weatherForecast=Kameleoon.Utils.JSONParse(weatherForecastString)}.bind(this);var weatherForecastString=sessionStorage.getItem(\"KameleoonWeatherForecast\");if(weatherForecastString==null){if((null!=Kameleoon.Internals.runtime.geolocation.latitude)&&(null!=Kameleoon.Internals.runtime.geolocation.longitude)&&(\"http:\"==window.location.protocol)){Kameleoon.Utils.performBeaconServerCall(Kameleoon.Internals.runtime.OPEN_WEATHER_MAP_WEATHER_FORECAST_URL+\"lat=\"+Kameleoon.Internals.runtime.geolocation.latitude+\"&lon=\"+Kameleoon.Internals.runtime.geolocation.longitude,function(){if((this.readyState==4)&&(this.status==200)){weatherForecastString=this.responseText;sessionStorage.setItem(\"KameleoonWeatherForecast\",weatherForecastString);registerWeatherForecast(weatherForecastString)}},null)}}else{registerWeatherForecast(weatherForecastString)}}}.bind(this);var geolocationString=sessionStorage.getItem(\"KameleoonGeolocation\");if(geolocationString==null){Kameleoon.Utils.performBeaconServerCall(Kameleoon.Internals.runtime.GEOLOCATION_URL,function(){if((this.readyState==4)&&((this.status==200)||(this.status==204))){geolocationString=Kameleoon.Utils.JSONStringify({country:this.getResponseHeader(\"geoip_country_name\")||this.getResponseHeader(\"geoip_city_country_name\"),region:this.getResponseHeader(\"geoip_region_name\"),city:this.getResponseHeader(\"geoip_city\"),latitude:this.getResponseHeader(\"geoip_latitude\"),longitude:this.getResponseHeader(\"geoip_longitude\"),postalCode:this.getResponseHeader(\"geoip_postal_code\")});sessionStorage.setItem(\"KameleoonGeolocation\",geolocationString);registerGeolocation(geolocationString)}},null)}else{registerGeolocation(geolocationString)}}if(Kameleoon.Internals.configuration.ip||Kameleoon.Internals.runtime.simulationMode){var registerIP=function(ipString){Kameleoon.Internals.runtime.ip=ipString}.bind(this);var ipString=sessionStorage.getItem(\"KameleoonIP\");if(ipString==null){Kameleoon.Utils.performBeaconServerCall(Kameleoon.Internals.runtime.IP_URL,function(){if((this.readyState==4)&&((this.status==200)||(this.status==204))){ipString=this.getResponseHeader(\"ip\");sessionStorage.setItem(\"KameleoonIP\",ipString);registerIP(ipString)}},null)}else{registerIP(ipString)}}}if(Kameleoon.API.experiments){for(var i=0,l=Kameleoon.API.experiments.length;i<l;++i){this.setupExperiment(Kameleoon.API.experiments[i])}}if(Kameleoon.API.personalizations){for(var i=0,l=Kameleoon.API.personalizations.length;i<l;++i){this.setupPersonalization(Kameleoon.API.personalizations[i])}}this.processAllContainers();this.processAllTargetingSegments();if(Kameleoon.API.experiments){var experimentsTracking=[];for(var i=0,l=Kameleoon.API.experiments.length;i<l;++i){var experiment=Kameleoon.API.experiments[i];if(true!==experiment.targeting&&experiment.redirectProcessed){this.performVariationAssignment(experiment,true);experimentsTracking.push(experiment)}else{if(experiment.preAssignVariation){this.performVariationAssignment(experiment,true)}}}this.performContainersTracking(experimentsTracking)}this.checkKameleoonGoals();Kameleoon.Utils.domReady(function(){Kameleoon.Internals.runtime.domReady=true;if(!(true===Kameleoon.Internals.configuration.disableEditorLaunchViaKeys)){Kameleoon.Loader.enableKameleoonEditorListener()}if(Kameleoon.Internals.runtime.editorMode&&!Kameleoon.Internals.runtime.editorEnabled&&Kameleoon.Internals.configuration.abtestingSetup){Kameleoon.Analyst.loadKameleoonFull(function(){Kameleoon.Loader.enableKameleoonEditor.apply(Kameleoon.Loader)})}Kameleoon.Analyst.processTrackingScript.apply(Kameleoon.Analyst);if(Kameleoon.Internals.runtime.simulationMode&&!(Kameleoon.Internals.runtime.editorMode&&Kameleoon.Internals.runtime.editorEnabled)){Kameleoon.Analyst.loadKameleoonFull(function(){Kameleoon.Loader.enableSimulationPanel()})}})},setupExperiment:function(a){if(a.previousRequestRedirected){a.redirectProcessed=true;if(Kameleoon.Internals.configuration.adobeOmniture){var b=Kameleoon.Internals.configuration.adobeOmniture.object?Kameleoon.Internals.configuration.adobeOmniture.object:\"s\";if(Kameleoon.Internals.runtime.parameters.sc_referrer){window[b].referrer=Kameleoon.Internals.runtime.parameters.sc_referrer}}Kameleoon.Utils.eraseLocalData(\"kameleoonRedirect-\"+a.id,null,null)}},setupPersonalization:function(a){this.associateContainerAndVariation(a,\"reference\",\"DISPLAYED_VARIATION\")},performVariationAssignment:function(experiment,onlyRegisteredVariation){if(experiment.displayedVariation&&!onlyRegisteredVariation){return}var registeredVariationId=experiment.registeredVariationId,assignmentTime=experiment.assignmentTime;if(registeredVariationId&&assignmentTime){for(var i=0,l=experiment.variations.length;i<l;++i){if(registeredVariationId==experiment.variations[i].id&&experiment.variations[i].respoolTime>assignmentTime||(\"none\"==registeredVariationId&&experiment.untrackedRespoolTime>assignmentTime)){registeredVariationId=null;break}}}if(\"none\"!=registeredVariationId&&!Kameleoon.Internals.runtime.simulationMode&&!this.findVariation(registeredVariationId)){registeredVariationId=null}if(!registeredVariationId||\"true\"==Kameleoon.Internals.runtime.parameters.kameleoonEraseCookies){var customVariationSelectionFunction=null;if(experiment.customVariationSelectionScript){try{eval(experiment.customVariationSelectionScript)}catch(exception){}}if(experiment.mentalistDeviation&&Kameleoon.Internals.runtime.gathererRun&&(Kameleoon.Mentalist!=null)){var deviationRandom=Math.random();if(deviationRandom<=experiment.mentalistDeviation){experiment.mentalistEnabled=true}}if(experiment.mentalistEnabled){var idList=[];for(var i=0,l=experiment.variations.length;i<l;++i){if(\"reference\"!=experiment.variations[i].id){idList.push(experiment.variations[i].id)}}registeredVariationId=Kameleoon.Mentalist.computeBestActionToApply(idList);if(!registeredVariationId){registeredVariationId=\"reference\"}}else{if(customVariationSelectionFunction){registeredVariationId=customVariationSelectionFunction(experiment)}else{var deviationRandom=this.obtainVariationAssignmentRandomNumber(experiment);var total=0;for(var i=0,l=experiment.variations.length;i<l;++i){total+=experiment.variations[i].deviation;if(deviationRandom<=total){registeredVariationId=experiment.variations[i].id;break}}registeredVariationId=registeredVariationId?registeredVariationId:\"none\"}}experiment.registeredVariationId=registeredVariationId;experiment.assignmentTime=new Date().getTime();this.writeExperimentLocalData(experiment)}this.associateContainerAndVariation(experiment,registeredVariationId,onlyRegisteredVariation?\"REGISTERED_VARIATION\":\"BOTH\")},obtainVariationAssignmentRandomNumber:function(a){if(Kameleoon.Internals.runtime.gathererRun&&(Kameleoon.Internals.runtime.Gatherer.configuration.mappingIdentifier!=null)&&(Kameleoon.Internals.runtime.Visitor.currentVisit.wholeVisitHistory.valueByCustomDatum[Kameleoon.Internals.runtime.Gatherer.configuration.mappingIdentifier]!=null)){return Kameleoon.Utils.seededRandom(a.id+\"//\"+Kameleoon.Internals.runtime.Visitor.currentVisit.wholeVisitHistory.valueByCustomDatum[Kameleoon.Internals.runtime.Gatherer.configuration.mappingIdentifier])}else{return Math.random()}},processAllContainers:function(){this.setMutationObserver();var a=[];if(Kameleoon.API.experiments){a=a.concat(Kameleoon.API.experiments)}if(Kameleoon.API.personalizations){a=a.concat(Kameleoon.API.personalizations)}this.processContainers(a)},processContainers:function(d){this.internalProcessContainers(d);if(!Kameleoon.Internals.runtime.domReady){var e=[];for(var c=0,b=d.length;c<b;++c){var a=d[c];if(!a.domReadyCallback){a.domReadyCallback=true;e.push(a)}}Kameleoon.Utils.domReady(function(){Kameleoon.Internals.runtime.domReady=true;Kameleoon.Analyst.internalProcessContainers(e,true)})}},internalProcessContainers:function(f,d){this.checkContainersTargeting(f);var e=[];for(var c=0,b=f.length;c<b;++c){var a=f[c];if(true===a.targeting){a.domReadyCallback=true;if(a.experimentContainer){this.performVariationAssignment(a,false)}else{this.associateContainerAndVariation(a,a.exposition?a.associatedVariation.id:\"reference\",\"BOTH\")}if(a.displayedVariation&&a.displayedVariation.elementSets){if(a.experimentContainer){if((\"reference\"!=a.displayedVariation.id)||a.executeCodeForReference){if(a.cssCode&&(!a.cssCodeEvaluated)){this.addCSSStyleSheet(a.cssCode,a,null);a.cssCodeEvaluated=true}if(a.javaScriptCode&&(!a.javaScriptCodeEvaluated)){Kameleoon.Utils.callJavaScriptCode(a.javaScriptCode);a.javaScriptCodeEvaluated=true}}}if(!d){this.initVariationCommands(a.displayedVariation)}e.push(a)}}}this.performContainersTracking(e)},processAllTargetingSegments:function(){if(Kameleoon.Internals.runtime.targetingSegments){this.processTargetingSegments(Kameleoon.Internals.runtime.targetingSegments)}},processTargetingSegments:function(b){this.internalProcessTargetingSegments(b);if(!Kameleoon.Internals.runtime.domReady){var a=[];for(var d=0,c=b.length;d<c;++d){var e=b[d];if(!e.domReadyCallback){e.domReadyCallback=true;a.push(e)}}Kameleoon.Utils.domReady(function(){Kameleoon.Internals.runtime.domReady=true;Kameleoon.Analyst.internalProcessTargetingSegments(a,true)})}},internalProcessTargetingSegments:function(a,d){this.checkTargetingSegmentsTargeting(a);var f=[];for(var c=0,b=a.length;c<b;++c){var e=a[c];if(true===e.targeting){e.domReadyCallback=true;f.push(e)}}this.performTargetingSegmentsTracking(f)},loadVariationData:function(d,a){var h=d.displayedVariation.id;if(a){sessionStorage.removeItem(\"kameleoonVariation\"+h);if(!Kameleoon.Internals.runtime.requestedVariations[h]){this.loadVariationFromServer(d,h)}Kameleoon.Internals.runtime.requestedVariations[h].simulation=true}else{var e=sessionStorage.getItem(\"kameleoonVariation\"+h);if(e){Kameleoon.Internals.runtime.variations.push(Kameleoon.Utils.JSONParse(e));Kameleoon.Analyst.associateContainerAndVariation(d,h,\"BOTH\");return}if(!Kameleoon.Internals.runtime.requestedVariations[h]){this.loadVariationFromServer(d,h)}var c=d.id;var g=false;for(var f=0,b=Kameleoon.Internals.runtime.requestedVariations[h].containers.length;f<b;++f){if(c==Kameleoon.Internals.runtime.requestedVariations[h].containers[f].id){g=true;break}}if(!g){Kameleoon.Internals.runtime.requestedVariations[h].containers.push(d)}}},loadVariationFromServer:function(a,d){Kameleoon.Internals.runtime.requestedVariations[d]={containers:[]};if(\"reference\"!=d){var b=\"//\"+Kameleoon.Internals.configuration.STATIC_HOST_NAME+\".\"+Kameleoon.Internals.configuration.DOMAIN+\"/css/customers/\"+Kameleoon.Internals.configuration.siteCode+\"/\"+Kameleoon.Internals.configuration.memberCode+\"/\";if(a.simulationMode&&a.multiVariateTest){b+=\"simulation/\"+d+\"-data.js\"}else{b+=d+\"/data.js\"}if(Kameleoon.Internals.runtime.disableCache){b+=\"?cache=\"+Kameleoon.Utils.obtainRandomString(16)}var c=document.createElement(\"script\");c.setAttribute(\"type\",\"text/javascript\");c.setAttribute(\"charset\",\"utf-8\");c.setAttribute(\"src\",b);Kameleoon.Internals.runtime.headNode.appendChild(c)}},checkKameleoonGoals:function(){var f=[];for(var d=0,b=Kameleoon.Internals.configuration.goals.length;d<b;++d){var c=Kameleoon.Internals.configuration.goals[d];var e={goal:c};if(\"URL\"==c.type){var a=new RegExp(c.url);if(a.test(Kameleoon.Utils.computeCurrentPageCleanAbsoluteURL())){f.push(e)}}if(\"PAGE_VIEWS\"==c.type){if(Kameleoon.Internals.runtime.gathererRun){if(Kameleoon.Internals.runtime.Visitor.currentVisit.wholeVisitHistory.timesStartedPages.length>=c.pageViews){f.push(e)}}}}if(f.length>0){this.processConversions(f)}Kameleoon.Internals.runtime.conversionsProcessingEngagement=[];for(var d=0,b=Kameleoon.Internals.configuration.goals.length;d<b;++d){var c=Kameleoon.Internals.configuration.goals[d];if(\"ENGAGEMENT\"==c.type){Kameleoon.Internals.runtime.conversionsProcessingEngagement.push({goal:c})}}Kameleoon.Utils.addEventListener(document,Kameleoon.Internals.runtime.mouseDownEvent,function(g){Kameleoon.Analyst.processConversions(Kameleoon.Internals.runtime.conversionsProcessingEngagement)},true);Kameleoon.Utils.setInterval(function(){if(Kameleoon.Internals.runtime.gathererRun){var k=[];for(var j=0,g=Kameleoon.Internals.configuration.goals.length;j<g;++j){var h=Kameleoon.Internals.configuration.goals[j];if(\"TIME_SPENT\"==h.type){if(Kameleoon.Internals.runtime.Visitor.currentVisit.timeLastActivity-Kameleoon.Internals.runtime.Visitor.currentVisit.timeStarted>=h.timeSpent*1000){k.push({goal:h})}}}if(k.length>0){this.processConversions(k)}}}.bind(this),1000)},processConversions:function(e){if(Kameleoon.Internals.runtime.gathererRun){var k=[];for(var g=0,b=Kameleoon.API.currentVisit.activeExperiments.length;g<b;++g){k.push(Kameleoon.API.currentVisit.activeExperiments[g].id)}var h=[];for(var f=0,a=e.length;f<a;++f){var d=e[f];var n=d.goal;var c=(d.negative===true);if((c||((\"PAGE_VIEWS\"!=n.type)&&(\"TIME_SPENT\"!=n.type)&&(\"ENGAGEMENT\"!=n.type))||(Kameleoon.Internals.runtime.Visitor.currentVisit.obtainNumberConversions(n.id)==0))&&((!n.linkedExperimentId)||(-1!=k.indexOf(n.linkedExperimentId)))){h.push({goalId:n.id,revenue:(d.revenue?d.revenue:0),negative:c})}}if(h.length>0){Kameleoon.Gatherer.trackConversions(h)}}},checkTargetingSegmentsTargeting:function(d){var c=[];for(var f=0,e=d.length;f<e;++f){var g=d[f];if(g.numberTargetingCheckings==null){g.numberTargetingCheckings=0}if(this.checkIfTargetingMustBeComputed(g.targeting,g.rescheduleTargeting||(0==g.numberTargetingCheckings),false)){c.push(g)}}d=c;for(var f=0,e=d.length;f<e;++f){var g=d[f];var b=this.checkTargetingTree(null,g.targetingTree,false);g.targeting=b.targeting;g.rescheduleTargeting=b.rescheduleTargeting;g.numberTargetingCheckings++}var a=[];for(var f=0,e=d.length;f<e;++f){var g=d[f];if(this.checkIfTargetingMustBeComputed(g.targeting,g.rescheduleTargeting,false)){a.push(g)}}if(a.length>0){Kameleoon.Utils.setTimeout(function(){Kameleoon.Analyst.processTargetingSegments.apply(Kameleoon.Analyst,[a])},Kameleoon.Internals.runtime.PAGE_LOADING_POLL_DELAY)}},checkContainersTargeting:function(x){if(Kameleoon.Internals.runtime.personalizations){for(var H=0,D=Kameleoon.Internals.runtime.personalizations.length;H<D;++H){var K=Kameleoon.Internals.runtime.personalizations[H];K.previousExposition=K.exposition}}var e=[];for(var H=0,D=x.length;H<D;++H){var w=x[H];if(w.numberTargetingCheckings==null){w.numberTargetingCheckings=0}if(this.checkIfTargetingMustBeComputed(w.targeting,w.rescheduleTargeting||(0==w.numberTargetingCheckings),(!w.experimentContainer)&&(\"CUMULATIVE_WEIGHT\"==w.personalizationCheckConditionsRule))){e.push(w)}}x=e;for(var H=0,D=x.length;H<D;++H){var w=x[H];if(true===w.forceTargeting){w.targeting=true}else{var h=(!w.experimentContainer)&&(\"CUMULATIVE_WEIGHT\"==w.personalizationCheckConditionsRule);var u=this.checkTargetingTree(w,w.targetingSegment.targetingTree,h);if(h){w.targeting=(u.weight>=w.cumulativeWeightOfConditions)}else{w.targeting=u.targeting}if(Kameleoon.Internals.runtime.simulationModeData){var f=Kameleoon.Internals.runtime.simulationModeData.targetingSegment;if(f&&f.id==w.targetingSegmentId){w.targeting=true}}w.rescheduleTargeting=u.rescheduleTargeting;w.numberTargetingCheckings++}if(true===w.targeting){if(w.experimentContainer){Kameleoon.Internals.runtime.targetedExperiments=true}else{Kameleoon.Internals.runtime.targetedPersonalizations=true}}}var g=[];for(var H=0,D=x.length;H<D;++H){var w=x[H];if(!w.experimentContainer){if(true===w.targeting){g.push(w)}else{w.exposition=false;w.notExposedReason=\"TARGETING\"}}}var z=function(N){var n=[];for(var m=0,j=Kameleoon.Internals.runtime.personalizations.length;m<j;++m){var k=Kameleoon.Internals.runtime.personalizations[m];if(N!=k.id){n.push(k)}}return n};var I=new Date().getTime();for(var H=0,D=g.length;H<D;++H){var K=g[H];if(K.forceExposition!==undefined){K.exposition=K.forceExposition;if(!K.exposition){K.notExposedReason=\"FORCED_TO_BE_FALSE\"}}else{K.exposition=true;if((true===K.exposition)&&(!Kameleoon.Internals.runtime.simulationMode||null!=Kameleoon.Internals.runtime.simulationModeData.experiments)&&!Kameleoon.API.visitor.personalizationsActive){K.exposition=false;K.notExposedReason=\"INACTIVE_PERSONALIZATIONS\"}if((true===K.exposition)&&K.globalCappingNumberVisitors&&(K.numberVisitorsExposed>=K.maxNumberVisitorsExposed)){K.exposition=false;K.notExposedReason=\"GLOBAL_CAPPING_NUMBER_VISITORS\"}if(true===K.exposition){switch(K.customExpositionRate){case 1:break;case 0:K.exposition=false;break;default:var q=Kameleoon.Utils.readLocalData(\"kameleoonPersonalizationTargeted-\"+K.id,\"COOKIE\",false);if(q!=null){var B=q.split(\"/\");K.exposition=(B[0]==\"true\")}else{K.exposition=(Math.random()<K.customExpositionRate);Kameleoon.Utils.createLocalData(\"kameleoonPersonalizationTargeted-\"+K.id,K.exposition+\"/\"+new Date().getTime(),380,null,\"COOKIE\",false)}break}if(false===K.exposition){K.notExposedReason=\"CUSTOM_EXPOSITION_RATE\"}if(true===K.exposition){if(Kameleoon.Internals.runtime.gathererRun&&((K.expositionFrequencySameVisit!=null)&&(Kameleoon.Visitor.obtainPersonalizationNumberActivations(K.id,1,null,I,true,false)>=K.expositionFrequencySameVisit))||((K.expositionFrequencySameVisitor!=null)&&(K.expositionFrequencySameVisitorDelaySeconds!=null)&&(Kameleoon.Visitor.obtainPersonalizationNumberActivations(K.id,1,I-(K.expositionFrequencySameVisitorDelaySeconds*1000),I,true,true)>=K.expositionFrequencySameVisitor))||(K.cappingPerVisitorNumberExpositions&&(Kameleoon.Visitor.obtainPersonalizationNumberActivations(K.id,1,null,I,true,true)>=K.expositionFrequencySameVisitorMax))||(K.cappingPerVisitorConvertGoal&&(Kameleoon.Visitor.obtainNumberConversions(K.cappingPerVisitorGoalId)>0))||((K.expositionFrequencyDelaySecondsBetweenTwoExpositions!=null)&&(Kameleoon.Visitor.obtainPersonalizationNumberActivations(K.id,1,I-(K.expositionFrequencyDelaySecondsBetweenTwoExpositions*1000),I,true,true)>=1))){K.exposition=false;K.notExposedReason=\"EXPOSITION_FREQUENCY\"}}if((true===K.exposition)&&(null!=K.personalizationsInteractionConditions)){for(var F=0,C=K.personalizationsInteractionConditions.length;F<C;++F){var a=K.personalizationsInteractionConditions[F];if((\"SAME_PAGE\"!=a.personalizationsInteractionVisitsConfiguration)&&(!Kameleoon.Internals.runtime.gathererRun)){continue}var p;var J;var c;switch(a.personalizationsInteractionConfiguration){case\"NO_OTHER_PERSO\":p=z(K.id);J=0;c=0;break;case\"AT_LEAST_ONE_OTHER_PERSO\":p=z(K.id);J=1;c=p.length;break;case\"NUMBER_OF_OTHER_PERSOS\":p=z(K.id);switch(a.personalizationsInteractionNumberOtherPersosMatchType){case\"GREATER\":J=a.personalizationsInteractionNumberOtherPersos+1;c=p.length;break;case\"LOWER\":J=0;c=a.personalizationsInteractionNumberOtherPersos-1;break;case\"GREATER_THAN_EQUAL\":J=a.personalizationsInteractionNumberOtherPersos;c=p.length;break;case\"LOWER_THAN_EQUAL\":J=0;c=a.personalizationsInteractionNumberOtherPersos;break;case\"EQUAL\":default:J=a.personalizationsInteractionNumberOtherPersos;c=a.personalizationsInteractionNumberOtherPersos;break}break;case\"ALL_OTHER_PERSOS\":p=z(K.id);J=p.length;c=p.length;break;case\"ID_PERSO\":p=[];for(var E=0,A=Kameleoon.Internals.runtime.personalizations.length;E<A;++E){var M=Kameleoon.Internals.runtime.personalizations[E];if(M.id==a.personalizationsInteractionIdPerso){p.push(M);break}}if(p.length==0){p.push({id:a.personalizationsInteractionIdPerso,previousExposition:false})}J=1;c=1;break;default:p=[];J=1;c=1;break}var s=0;for(var E=0,A=p.length;E<A;++E){var v=p[E];var d;switch(a.personalizationsInteractionVisitsConfiguration){case\"SAME_PAGE\":d=(true===v.previousExposition);break;case\"CURRENT_VISIT\":d=Kameleoon.Visitor.obtainPersonalizationIsActive(v.id,1,true,false);break;case\"PREVIOUS_VISIT\":d=Kameleoon.Visitor.obtainPersonalizationIsActive(v.id,1,false,true);break;case\"ALL_VISITS\":d=Kameleoon.Visitor.obtainPersonalizationIsActive(v.id,1,true,true);break;default:d=false;break}if(!a.personalizationsInteractionDisplayOthersPersos){d=!d}if(d){s++}}var b=(s>=J)&&(s<=c);if((b&&(!a.personalizationsInteractionDisplayPerso))||((!b)&&a.personalizationsInteractionDisplayPerso)){K.exposition=false;K.notExposedReason=\"INTERACTIONS\";break}}}}}}var L={};for(var H=0,D=x.length;H<D;++H){var w=x[H];if((!w.experimentContainer)&&(true===w.exposition)){var t=w.personalizationConfiguration;var y=L[t];if((y==null)||(w.priority>y[0].priority)){L[t]=[w]}else{if(w.priority==y[0].priority){y.push(w)}}}}var o={};for(var t in L){var y=L[t];var r={};if(!Kameleoon.Internals.configuration.disablePersonalizationsOfTheSameType){for(var H=0,D=y.length;H<D;++H){r[y[H].id]=true}}else{r[y[Math.floor(Math.random()*y.length)].id]=true}o[t]=r}L=null;for(var H=0,D=g.length;H<D;++H){var K=g[H];if((true===K.exposition)&&(true!==K.forceExposition)){if(o[K.personalizationConfiguration][K.id]==null){K.exposition=false;K.notExposedReason=\"PRIORITY\"}}}o=null;var G=[];for(var H=0,D=x.length;H<D;++H){var w=x[H];if((false===w.targeting)||((!w.experimentContainer)&&(true===w.targeting)&&(false===w.exposition))){this.associateContainerAndVariation(w,\"reference\",\"DISPLAYED_VARIATION\");this.removeCSSStyleSheet(w)}if(this.checkIfTargetingMustBeComputed(w.targeting,w.rescheduleTargeting,(!w.experimentContainer)&&(\"CUMULATIVE_WEIGHT\"==w.personalizationCheckConditionsRule))){G.push(w)}}if(G.length>0){Kameleoon.Utils.setTimeout(function(){Kameleoon.Analyst.processContainers.apply(Kameleoon.Analyst,[G])},Kameleoon.Internals.runtime.PAGE_LOADING_POLL_DELAY)}x.length&&Kameleoon.Internals.runtime.targetingsEvent.emit(x)},checkTargetingTree:function(a,f,d){var i;if(null==f){i={targeting:true,rescheduleTargeting:false};if(d){i.weight=0}}else{if(f.numberTargetingCheckings==null){f.numberTargetingCheckings=0}if(!this.checkIfTargetingMustBeComputed(f.targeting,f.rescheduleTargeting||(0==f.numberTargetingCheckings),d)){i={targeting:f.targeting,rescheduleTargeting:false};if(d){i.weight=f.weight}}else{if(null!=f.targetingCondition){i=this.checkTargetingCondition(a,f.targetingCondition)}else{var g=this.checkTargetingTree(a,f.leftChild,d);var b=false;if(!b){if(Kameleoon.Internals.runtime.simulationMode){b=true}}if(!b){if(d){b=true}}if(!b){switch(g.targeting){case true:if(!f.orOperator){b=true}break;case false:if(f.orOperator){b=true}break;case undefined:default:b=true;break}}var h=null;if(b){h=this.checkTargetingTree(a,f.rightChild,d)}var c;switch(g.targeting){case true:if(f.orOperator){c=true}else{switch(h.targeting){case true:c=true;break;case false:c=false;break;case undefined:default:c=undefined;break}}break;case false:if(f.orOperator){switch(h.targeting){case true:c=true;break;case false:c=false;break;case undefined:default:c=undefined;break}}else{c=false}break;case undefined:default:if(f.orOperator){switch(h.targeting){case true:c=true;break;case false:c=undefined;break;case undefined:default:c=undefined;break}}else{switch(h.targeting){case true:c=undefined;break;case false:c=false;break;case undefined:default:c=undefined;break}}break}i={targeting:c,rescheduleTargeting:this.checkIfTargetingMustBeComputed(c,g.rescheduleTargeting||(b&&h.rescheduleTargeting),d)};if(d){var e;if(f.orOperator){e=Math.max(g.weight,h.weight)}else{e=g.weight+h.weight}i.weight=e}}f.targeting=i.targeting;f.rescheduleTargeting=i.rescheduleTargeting;if(d){f.weight=i.weight}}f.numberTargetingCheckings++}return i},checkTargetingCondition:function(b,g){var a;if(g.numberTargetingCheckings==null){g.numberTargetingCheckings=0}if(!this.checkIfTargetingMustBeComputed(g.targeting,g.rescheduleTargeting||(0==g.numberTargetingCheckings),undefined)){a={targeting:g.targeting,rescheduleTargeting:false}}else{var c=Kameleoon.Analyst[\"evaluateTargeting_\"+g.type];var f;if(c!=null){f=c.bind(this)(g,b)}else{f=null}var d,e;if(f==null){d=true;e=false}else{d=f.targeting;e=f.rescheduleTargeting;if(true!==g.include){if(undefined===d){if(f.excludedUndefinedIsTargeted===true){d=true}}else{d=!d}}}a={targeting:d,rescheduleTargeting:this.checkIfTargetingMustBeComputed(d,e,undefined)};g.targeting=a.targeting;g.rescheduleTargeting=a.rescheduleTargeting}if(a.targeting===true){a.weight=g.weight}else{a.weight=0}g.numberTargetingCheckings++;return a},checkIfTargetingMustBeComputed:function(b,c,a){var d=(true===c)&&((undefined===b)||((false===b)&&(true===a)));return d},initVariationCommands:function(e){if(!e||Kameleoon.Internals.runtime.editorMode){return}Kameleoon.API.currentContainer=e.container;if(e.redirections){var b=e.redirections;for(var d=0,a=b.length;d<a;++d){if(!b[d].scope||new RegExp(b[d].scope).test(window.location.href)){if(b[d].additionalParameters){if(-1==window.location.search.indexOf(b[d].string)){if(\"#\"!=b[d].string[0]){Kameleoon.API.processRedirect(window.location.protocol+\"//\"+window.location.hostname+((!window.location.port)?\"\":\":\"+window.location.port)+window.location.pathname+(window.location.search+((-1==window.location.search.indexOf(\"?\"))?\"?\":\"&\")+b[d].string)+window.location.hash)}else{window.location.replace(window.location.protocol+\"//\"+window.location.hostname+((!window.location.port)?\"\":\":\"+window.location.port)+window.location.pathname+window.location.search+b[d].string)}}}else{var f=b[d].string;if(b[d].keepParameters){f+=(-1!=f.indexOf(\"?\"))?window.location.search.replace(\"?\",\"&\"):window.location.search}Kameleoon.API.processRedirect(f)}}}}if(e.forceNoFlicker&&!Kameleoon.Internals.runtime.domReady){var c=\"\";for(var d=0,a=e.elementSets.length;d<a;++d){c+=((0!=d)?\", \":\"\")+e.elementSets[d].selector}Kameleoon.API.forceNoFlicker(c)}if(!e.styleSheetAdded){this.addCSSStyleSheet(e.builtCssCodeLevel2,e.container,null);e.styleSheetAdded=true}if(e.javaScriptCode&&!e.javaScriptCode.afterDOMReady){this.applyJavascriptCode(e)}this.processVariationCommands(e)},processVariationCommands:function(b){if(!b){return}var a=b.container;if(b.javaScriptCode&&b.javaScriptCode.afterDOMReady&&!b.permanentRefreshActive){Kameleoon.Utils.domReady(function(){Kameleoon.Analyst.applyJavascriptCode(b)})}if(b.elementSets&&(!a||a.targeting)){b.elementSets.forEach(function(d){d.evaluated=true;Kameleoon.Analyst.processElementSet(d,b,false,b.permanentRefreshActive,b.editionMode)})}if(b.replaceData){var c=JSON.parse(b.replaceData);Kameleoon.Analyst.processReplaceData(c)}if(b.forceNoFlicker&&!b.permanentRefreshActive){Kameleoon.Utils.removeBlockingStyleSheet()}if(Kameleoon.Internals.runtime[\"enginePollerForVariation\"+b.id]&&!b.permanentRefreshActive){window.clearInterval(Kameleoon.Internals.runtime[\"enginePollerForVariation\"+b.id]);Kameleoon.Internals.runtime[\"enginePollerForVariation\"+b.id]=null}if(!Kameleoon.Internals.runtime[\"enginePollerForVariation\"+b.id]&&!Kameleoon.Internals.runtime.editorMode){b.permanentRefreshActive=true;if(!Kameleoon.Internals.runtime.listenVariations){Kameleoon.Internals.runtime.listenVariations=[]}Kameleoon.Internals.runtime.listenVariations.push(b);Kameleoon.Internals.runtime[\"enginePollerForVariation\"+b.id]=true;if(typeof MutationObserver!==\"function\"){Kameleoon.Internals.runtime[\"enginePollerForVariation\"+b.id]=Kameleoon.Utils.setInterval(function(){Kameleoon.Analyst.processVariationCommands.apply(Kameleoon.Analyst,[b])},10)}}},applyJavascriptCode:function(a){if(a.javaScriptCode&&a.javaScriptCode.code&&!a.javaScriptCode.evaluated){Kameleoon.Utils.callJavaScriptCode(a.javaScriptCode.code);a.javaScriptCode.evaluated=true}},setMutationObserver:function(){if(typeof MutationObserver!==\"function\"){return}Kameleoon.Analyst.fillInternalObjectsForMutationObserver();var b=document.documentElement,a;if(!Kameleoon.Internals.runtime.mutationObserver){Kameleoon.Internals.runtime.mutationObserver=new MutationObserver(function(c){c.forEach(function(e){var n=true,h=e.addedNodes,g=e.removedNodes,f=Kameleoon.Internals.runtime.listenVariations;Kameleoon.Analyst.removeMutationElementsFromInternalObjects(g);Kameleoon.Analyst.addMutationElementsToInternalObjects(h);var o=Array.prototype.slice.call(h);var k=Array.prototype.slice.call(g);var l=o.concat(k);for(var d=0;d<l.length;++d){var i=l[d];var m=i.parentNode;if(Kameleoon.Internals.runtime.editorMode&&i&&i.id&&i.id.match(\"kameleoon\")!==null){if(i.closest){if(i.closest(\".KameleoonProtected\")!==null){n=false}}}if(n&&i&&i.innerHTML&&e.type===\"childList\"){Kameleoon.Analyst.fillInternalObjectsForMutationObserver(i)}if(n&&i&&f){f.forEach(function(q){if(q.elementSets){q.elementSets.forEach(function(u){if((!(u.evaluated&&(u.options.autoGeneratedSelector||u.options.idSelector||u.options.domOperation)))&&Kameleoon.Analyst.checkIDsForSelector(u)&&Kameleoon.Analyst.checkClassesForSelector(u)&&Kameleoon.Analyst.checkContainsTextesForSelector(u,i)){if(!q.container||q.container.targeting){u.evaluated=true;Kameleoon.Analyst.processElementSet(u,q,false,q.permanentRefreshActive,q.editionMode,m)}}})}if(q.replaceData&&i.nodeType===Node.TEXT_NODE&&(!i.parentNode||(i.parentNode.nodeName!==\"SCRIPT\"&&i.parentNode.nodeName!==\"STYLE\"))){var s=JSON.parse(q.replaceData);for(var r=0;r<s.length;++r){var t=new RegExp(s[r].toReplace,\"gi\");if(!s[r].disabled&&i.nodeValue&&t.test(i.nodeValue)){Kameleoon.Analyst.saveElementOriginalData(i);i.kameleoonData.powered=true;i.nodeValue=i.nodeValue.replace(t,s[r].replaceBy)}}}})}if(n&&i){for(var p=Kameleoon.Internals.runtime.waitingElementPresentObjects.length-1;p>=0;p-=1){var j=Kameleoon.Internals.runtime.waitingElementPresentObjects[p];if(j&&j.useAntiFlicker){if(Kameleoon.Analyst.checkIDsForSelector(j)&&Kameleoon.Analyst.checkClassesForSelector(j)&&Kameleoon.Analyst.checkContainsTextesForSelector(j,i)){if(0<Kameleoon.Utils.querySelectorAll(j.selector,m).length){Kameleoon.Utils.runProtectedFunction(j.targetFunction);Kameleoon.Internals.runtime.waitingElementPresentObjects.splice(p,1)}}}}}}})})}a={attributes:true,childList:true,characterData:true,subtree:true};if(typeof Kameleoon.Internals.runtime.mutationObserver.observe===\"function\"){Kameleoon.Internals.runtime.mutationObserver.observe(b,a)}},addMutationElementsToInternalObjects:function(e){for(var b=0;b<e.length;++b){var c=e[b];if(c&&c.id){if(Kameleoon.Internals.runtime.addedIDs.indexOf(\"#\"+c.id)===-1){Kameleoon.Internals.runtime.addedIDs.push(\"#\"+c.id)}}if(c&&c.className&&typeof c.className===\"string\"){var d=c.className.split(\" \");for(var a=0;a<d.length;++a){if(Kameleoon.Internals.runtime.addedClasses.indexOf(\".\"+d[a])===-1){Kameleoon.Internals.runtime.addedClasses.push(\".\"+d[a])}}}}},removeMutationElementsFromInternalObjects:function(a){for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.id){if(Kameleoon.Internals.runtime.addedIDs.indexOf(\"#\"+c.id)!==-1){var d=Kameleoon.Internals.runtime.addedIDs.indexOf(c.id);Kameleoon.Internals.runtime.addedIDs.splice(d,1)}}}},fillInternalObjectsForMutationObserver:function(a){if(!a){a=document}var d=a.getElementsByTagName(\"*\");for(var e=0,g=d.length;e<g;++e){var c=d[e];if(c.id&&(Kameleoon.Internals.runtime.addedIDs.indexOf(\"#\"+c.id)===-1)){Kameleoon.Internals.runtime.addedIDs.push(\"#\"+c.id)}if(c.className&&typeof c.className===\"string\"){var b=c.className.split(\" \");for(var f=0;f<b.length;++f){if(Kameleoon.Internals.runtime.addedClasses.indexOf(\".\"+b[f])===-1){Kameleoon.Internals.runtime.addedClasses.push(\".\"+b[f])}}}}},checkIDsForSelector:function(h){var f=h.selector;var m;if(h.currentQuery){m=h.currentQuery}var k;if(h.options){k=h.options.domReference}var e=[];if(f&&f.indexOf(\"#\")!==-1){if(!h.selectorIDs||h.selectorIDs.length===0){if(f.indexOf(\"contains\")!==-1){var j=f.match(/:contains\\(['\"]([\\s\\S]+)['\"]\\)/);var g=f.replace(j[0],\"\");e=g.match(/#([^\\s:\\[]+)/g)}else{e=f.match(/#([^\\s:\\[]+)/g)}h.selectorIDs=e;if(m&&m.indexOf(\"#\")!==-1){if(m.indexOf(\"contains\")!==-1){var j=m.match(/:contains\\(['\"]([\\s\\S]+)['\"]\\)/);var c=m.replace(j[0],\"\");e=c.match(/#([^\\s:\\[]+)/g)}else{e=m.match(/#([^\\s:\\[]+)/g)}}for(var l=0,d=e.length;l<d;++l){if(h.selectorIDs.indexOf(e[l])===-1){h.selectorIDs.push(e[l])}}}}else{return true}for(var b=0,i=h.selectorIDs.length;b<i;++b){var a=h.selectorIDs[b];if(a.indexOf(\"kameleoonElement\")!==-1){if(k&&!Kameleoon.Analyst.checkIDsForSelector({selector:k,checkDomReference:true})){return false}if(h.checkDomReference){if(Kameleoon.Internals.runtime.addedIDs.indexOf(a)===-1){return false}}}else{if(Kameleoon.Internals.runtime.addedIDs.indexOf(a)===-1){return false}}}return true},checkClassesForSelector:function(d){var b=d.selector;var h=[];if(b&&b.indexOf(\".\")!==-1){if(!d.selectorClasses||d.selectorClasses.length===0){if(b.indexOf(\"contains\")!==-1){var c=b.match(/:contains\\(['\"]([\\s\\S]+)['\"]\\)/);var g=b.replace(c[0],\"\");h=g.match(/\\.([^\\s.:\\[]+)/g)}h=b.match(/\\.([^\\s.:\\[]+)/g);d.selectorClasses=h}}else{return true}for(var e=0,a=d.selectorClasses.length;e<a;++e){var f=d.selectorClasses[e];if(f.indexOf(\"kameleoon\")===-1&&Kameleoon.Internals.runtime.addedClasses.indexOf(f)===-1){return false}}return true},checkContainsTextesForSelector:function(e,d){var a=e.selector;var c;if(d&&d.nodeType==Node.TEXT_NODE){if(a&&a.indexOf(\"contains\")!==-1){if(!e.selectorContainsText){var b=a.match(/:contains\\(['\"]([\\s\\S]+)['\"]\\)/);c=b[1];e.selectorContainsText=c;if(d.nodeValue&&d.nodeValue.indexOf(c)===-1){return false}}}else{return false}}return true},processTrackingScript:function(){if(Kameleoon.Internals.configuration.trackingScript&&!Kameleoon.Internals.runtime.trackingScriptProcessed&&!Kameleoon.Internals.runtime.editorMode){Kameleoon.Internals.runtime.trackingScriptProcessed=true;eval(Kameleoon.Internals.configuration.trackingScript)}},performTargetingSegmentsTracking:function(a){if(Kameleoon.Internals.runtime.gathererRun){var c=[];for(var d=0,b=a.length;d<b;++d){c.push(a[d].id)}Kameleoon.Gatherer.trackTargetingSegments(c)}},performContainersTracking:function(containers){var containersKameleoonTrackingToTrack=[];var containersKameleoonTrackingNotToTrack=[];var containersMentalistTracking=[];for(var i=0,l=containers.length;i<l;++i){var container=containers[i];if(container.trackingPerformed||!container.registeredVariation){continue}if(!container.experimentContainer){if(\"reference\"!=container.displayedVariation.id){Kameleoon.Internals.configuration.displayedPersonalizations.push({id:container.id,name:container.name})}if(container.api){Kameleoon.Internals.configuration.activePersonalizations.push(container.name)}Kameleoon.Internals.runtime.apiPersonalizations.update()}var variation=container.registeredVariation;if(container.mentalistEnabled){variation.name+=\" (Predicteo)\"}if(Kameleoon.Internals.configuration.checkTestedTrafficActive&&!container.counterActive&&container.experimentContainer){container.counterActive=true;var trackerNodeCode=Kameleoon.Internals.configuration.trackerNodeCode;if(null==trackerNodeCode){trackerNodeCode=\"01\"}var requestPrefix=\"//counter-\"+trackerNodeCode+\".\"+Kameleoon.Internals.configuration.DOMAIN+\"/_.gif?\";Kameleoon.Utils.performBeaconServerCall(requestPrefix+\"siteCode=\"+Kameleoon.Internals.configuration.siteCode+\"&anniversaryDay=\"+Kameleoon.Internals.configuration.anniversaryDay);this.writeExperimentLocalData(container)}if(container.googleAnalyticsTracking){this.processGoogleAnalyticsTracking(container)}if(container.kissMetricsTracking){this.processKissMetricsTracking(container)}if(container.piwikTracking){this.processPiwikTracking(container)}if(container.comScoreTracking){this.processComScoreTracking(container)}if(container.crazyEggTracking){this.processCrazyEggTracking(container)}if(container.universalAnalyticsTracking){this.processUniversalAnalyticsTracking(container)}if(container.econdaTracking){this.processEcondaTracking(container)}if(container.atInternetTracking){this.processATInternetTracking(container)}if(container.adobeOmnitureTracking){this.processAdobeOmnitureTracking(container)}if(container.webtrendsTracking){this.processWebtrendsTracking(container)}if(container.eulerianTracking){this.processEulerianTracking(container)}if(container.experimentContainer&&(Kameleoon.Internals.configuration.ysanceCustomVariable!=null)){this.processYsanceTracking(container)}(container.kameleoonTracking?containersKameleoonTrackingToTrack:containersKameleoonTrackingNotToTrack).push({type:(container.experimentContainer?\"EXPERIMENT\":\"PERSONALIZATION\"),id:container.id,variationId:(\"reference\"==variation.id?null:(container.experimentContainer?variation.id:1)),mentalistDecision:(container.mentalistEnabled?true:false)});if(container.mentalist){containersMentalistTracking.push(container)}if(container.heatMapTracking){Kameleoon.Utils.addEventListener(document,Kameleoon.Internals.runtime.mouseDownEvent,Kameleoon.Analyst.processHeatMapClick.bind(Kameleoon.Analyst,container),true)}if(container.javaScriptTracking){try{eval(container.javaScriptTracking)}catch(exception){}}container.trackingPerformed=true}if(Kameleoon.Internals.runtime.gathererRun){Kameleoon.Gatherer.trackContainers(containersKameleoonTrackingToTrack,containersKameleoonTrackingNotToTrack)}if(containersMentalistTracking.length>0){this.processMentalistTracking(containersMentalistTracking)}},processHeatMapClick:function(b,d){if(Kameleoon.Internals.runtime.editorMode||d.kameleoonCreated||!d.preventDefault||!document.createEvent){return}var a=(d.clientX!==undefined)?d.clientX:(d.touches?d.touches[0].clientX:null);var f=(d.clientY!==undefined)?d.clientY:(d.touches?d.touches[0].clientY:null);if(a!==null){a=a-(document.documentElement.clientWidth-b.heatMapTracking.pageWidth)*0.5;a=Math.round(a)}if(f!==null){f+=document.body.scrollTop}var e=Kameleoon.Internals.configuration.trackerNodeCode;if(null==e){e=\"01\"}var c=\"//heatmap-\"+e+\".\"+Kameleoon.Internals.configuration.DOMAIN+\"/_.gif?\";Kameleoon.Utils.performBeaconServerCall(c+\"x=\"+a+\"&y=\"+f+\"&siteCode=\"+Kameleoon.Internals.configuration.siteCode+\"&experimentId=\"+b.id+\"&variationId=\"+b.registeredVariation.id)},addCSSStyleSheet:function(f,a,c){if(!f){return}var i=c?c:document;var b=\"kameleoonStyleSheet\"+(a?(\"-\"+a.id):\"\");var d=c?c.getElementById(b):null;var e=\"\";if(d){e=d.textContent;d.parentNode.removeChild(d)}var h=i.createElement(\"style\");h.className=\"KameleoonStyleSheet\";h.setAttribute(\"id\",b);h.setAttribute(\"rel\",\"stylesheet\");h.setAttribute(\"type\",\"text/css\");h.setAttribute(\"media\",\"screen\");var g=e+f;if(h.styleSheet){h.styleSheet.cssText=g}else{h.appendChild(document.createTextNode(g))}if(c){i.getElementsByTagName(\"head\")[0].appendChild(h,i.getElementsByTagName(\"head\")[0].firstChild)}else{Kameleoon.Internals.runtime.headNode.appendChild(h)}if(a){a.loadedCSSStyleSheet=h}},removeCSSStyleSheet:function(a){if(a.loadedCSSStyleSheet){var b=a.loadedCSSStyleSheet.id.replace(\"kameleoonStyleSheet-\",\"\");if(-1==b.indexOf(\",\")){Kameleoon.Internals.runtime.headNode.removeChild(a.loadedCSSStyleSheet);a.loadedCSSStyleSheet=null}else{a.loadedCSSStyleSheet.id=\"kameleoonStyleSheet-\"+b.replace(new RegExp(a.id+\",?\"),\"\")}}},findExperiment:function(a){return Kameleoon.Utils.findObjectWithId(a,Kameleoon.Internals.runtime.experiments)},findVariation:function(a){return Kameleoon.Utils.findObjectWithId(a,Kameleoon.Internals.runtime.variations)},associateContainerAndVariation:function(a,h,g){var d=true;var f=true;if(\"REGISTERED_VARIATION\"==g){f=false}if(\"DISPLAYED_VARIATION\"==g){d=false}if(\"none\"==h){a.trackingPerformed=true;h=\"reference\";d=false}var c=this.findVariation(h);var e;if(a&&a.variations){a.variations.forEach(function(j,i){if(j.id&&j.name&&j.id.toString()==h){e=j.name}})}if(a&&d){a.registeredVariation={id:h,name:e}}if(c){var b=Kameleoon.Utils.clone(c);if(a&&!a.associationMade){if(d){a.registeredVariation=b;a.associationMade=true}if(f){a.displayedVariation=b}b.container=a;if(a.experimentContainer){b.experiment=a}else{b.personalization=a}}}else{a.displayedVariation={id:h,name:e}}if(a.displayedVariation&&!a.displayedVariation.elementSets){this.loadVariationData(a)}},writeExperimentLocalData:function(a){var b=a.registeredVariationId+(a.mentalistEnabled?\"-mentalist\":\"\")+\"/\"+a.assignmentTime+\"/\"+a.counterActive;if(!a.simulationMode){Kameleoon.Utils.createLocalData(\"kameleoonExperiment-\"+a.id,b,a.cookieDuration?a.cookieDuration:30,a.cookieDomain,null,false)}},processReplaceData:function(d){if(document&&document.body){var f=function(i){var h=true,g=i.parentNode,j;if(g){j=g.getAttribute(\"id\")}if(Kameleoon.Internals.runtime.editorMode&&j&&j.match(\"kameleoon\")!==null){if(g.closest&&g.closest(\".KameleoonProtected\")!==null){h=false}}if(g.nodeName===\"SCRIPT\"||g.nodeName===\"STYLE\"){h=false}if(h){return NodeFilter.FILTER_ACCEPT}};var b=f;b.acceptNode=f;var e=document.createTreeWalker(document.body,NodeFilter.SHOW_TEXT,b,false);while(e.nextNode()){for(var c=0;c<d.length;++c){var a=new RegExp(d[c].toReplace,\"gi\");if(!d[c].disabled&&e.currentNode.nodeValue&&a.test(e.currentNode.nodeValue)){Kameleoon.Analyst.saveElementOriginalData(e.currentNode);e.currentNode.kameleoonData.powered=true;e.currentNode.nodeValue=e.currentNode.nodeValue.replace(a,d[c].replaceBy)}}}}},processElementSet:function(c,h,g,e,f,k){var a=null;var j=[];Kameleoon.Internals.runtime.pageElementSets=Kameleoon.Internals.runtime.pageElementSets.concat([c]);a=this.performHTMLReplacements([c],g,e,h,k);if(f){editor.services.EngineService.getInstance().refreshCustomizableElements()}for(var d=0,b=a.length;d<b;++d){if(g&&(a[d].options.userPosition&&\"RELATIVE\"!=a[d].options.userPosition.positionMode)){continue}j.push(a[d])}this.powerElements(c,j);if(j.length===0){c.evaluated=false}return j?j.length>0:false},performHTMLReplacements:function(c,e,d,g,k){var h=null;var f=true;while(f){h=this.obtainElements(c,e,d,g,k);if(0==h.length){break}h=h.sort(function(l,i){var n=Kameleoon.Utils.obtainDepth(l.element),m=Kameleoon.Utils.obtainDepth(i.element);return n<m?-1:n>m?1:0});h=this.removeDuplicates(h);f=false;for(var b=0,a=h.length;b<a;++b){var j=h[b].options;if(j.htmlContent){f=this.changeHTMLContent(h[b],c,j.htmlContent,false,true)||f}if(j.replaceHtmlContent){f=this.changeHTMLContent(h[b],c,j.replaceHtmlContent,true,true)||f;if(f){f=false}}}}for(var b=0,a=c.length;b<a;++b){if(c[b]&&c[b].removeSelector){c[b]=null}}return h},obtainElements:function(h,v,y,f,o){var k,w,u=[];if(this.timeOutCallback){window.clearTimeout(this.timeOutCallback)}for(var t=0,q=h.length;t<q;++t){if(null===h[t]){continue}var e=h[t].selector;var x=h[t].currentQuery;var d=h[t].options;var c=null,a=document;if(d.context){c=Kameleoon.Utils.querySelectorAll(d.context);if(!c[0]){continue}c=c[0].contentWindow.document;a=c;if(f){this.addCSSStyleSheet(f.builtCssCodeLevel2,f.container,c)}}if(!c&&o){c=o}if(d.scopeURL&&!new RegExp(d.scopeURL).test(window.location.href)){k=[]}else{if(d.customSelector||d.autoGeneratedSelector||d.contentSelector){k=Kameleoon.Utils.querySelectorAll(e,c);if(0==k.length&&x){k=Kameleoon.Utils.querySelectorAll(x,c)}if(d.kameleoonClass){for(var r=0,p=k.length;r<p;++r){if(-1==(\" \"+k[r].className+\" \").indexOf(\" KameleoonClass\"+d.kameleoonClass+\" \")){this.saveElementOriginalData(k[r]);k[r].className+=(k[r].className?\" \":\"\")+\"KameleoonClass\"+d.kameleoonClass}}}if(0==k.length){if(d.kameleoonId){var b=document.getElementById(\"kameleoonId\"+d.kameleoonId);k=b?[b]:[]}if(d.kameleoonClass){k=Kameleoon.Utils.querySelectorAll(\".KameleoonClass\"+d.kameleoonClass,null)}}if(0==k.length){k=Kameleoon.Utils.querySelectorAll(e,Kameleoon.Internals.runtime.virtualRootElement)}}else{switch(e.charAt(0)){case\"#\":var n=e.substr(1);k=[a.getElementById(e.substr(1))];if(!k[0]){var b=null;if(h[t].element){b=h[t].element}else{if(0==n.indexOf(\"kameleoonElement\")){if(d.domOperation){var g=Kameleoon.Utils.querySelectorAll(d.domReference,c)[0];if(!g&&d.domReferenceCurrentQuery){g=Kameleoon.Utils.querySelectorAll(d.domReferenceCurrentQuery,c)[0]}if(g){b=a.createElement(\"div\");Kameleoon.Internals.runtime.virtualRootElement.appendChild(b);h[t].element=b}else{h[t].evaluated=false}}else{if(a.body){b=a.createElement(\"div\");a.body.appendChild(b)}else{h[t].evaluated=false}}}}if(b){b.id=n;Kameleoon.Internals.runtime.addedIDs.push(\"#\"+n);k=[b]}else{k=[]}}break;default:k=Kameleoon.Utils.querySelectorAll(e,c);break}}}var s=false;w=[];for(var r=0,p=k.length;r<p;++r){if(!k[r].getAttribute(\"kameleoon\")){if(!v||undefined===d.htmlContent||Kameleoon.Utils.checkElementLoaded(k[r])){if(d.userPosition&&d.userPosition.referenceElement&&!Kameleoon.Utils.querySelectorAll(d.userPosition.referenceElement)[0]){continue}if(d.domOperation){var g=Kameleoon.Utils.querySelectorAll(d.domReference,c)[0];if(!g&&d.domReferenceCurrentQuery){g=Kameleoon.Utils.querySelectorAll(d.domReferenceCurrentQuery,c)[0]}this.saveElementOriginalData(k[r]);k[r].kameleoonData.domTargetElement=g;if(v||y){if((!Kameleoon.Utils.checkElementLoaded(k[r])&&0!=d.selector.indexOf(\"#kameleoonElement\"))||!Kameleoon.Utils.checkElementLoaded(k[r].kameleoonData.domTargetElement)){continue}s=true}}w.push({element:k[r],options:Kameleoon.Utils.clone(d)})}}}h[t].removeSelector=s||(y&&0<k.length&&d.autoGeneratedSelector);u=u.concat(w)}return u},powerElements:function(b,d){for(var c=0,a=d.length;c<a;++c){this.powerElement(b,d[c].element,d[c].options)}},powerElement:function(c,e,b){if(!e.dataset||!e.dataset.kameleoonEvaluated||Kameleoon.Internals.runtime.editorMode){if(Kameleoon.Internals.configuration.specifyElements&&(-1==e.className.indexOf(\"Kameleoon\"))){return}if(e.dataset){e.dataset.kameleoonEvaluated=true}this.saveElementOriginalData(e);e.kameleoonData.powered=true;e.setAttribute(\"kameleoon\",\"active\");if(b.kameleoonId&&!e.id){e.id=\"kameleoonId\"+b.kameleoonId}if(b.kameleoonClass){if(-1==(\" \"+e.className+\" \").indexOf(\" KameleoonClass\"+b.kameleoonClass+\" \")){e.className+=(e.className?\" \":\"\")+\"KameleoonClass\"+b.kameleoonClass}}if(b.keepSpace){this.reserveSpaceForElement(e)}if(b.domOperation){var a=e.kameleoonData.domTargetElement;if(!a){var d=null;if(b.context){d=Kameleoon.Utils.querySelectorAll(b.context);d=d[0]?d[0].contentWindow.document:null}a=Kameleoon.Utils.querySelectorAll(b.domReference,d)[0];if(!a&&b.domReferenceCurrentQuery){a=Kameleoon.Utils.querySelectorAll(b.domReferenceCurrentQuery,d)[0]}}this.processDomOperation(c,e,a,b.domOperation)}this.processUserPosition(e,e,b.userPosition,\"inline\"!=Kameleoon.Utils.obtainComputedStyle(e).display);this.setupNoLinkPropagation(b,e);this.processSpecialCases(e);this.processLinks(e,b.href)}},saveElementOriginalData:function(a){if(a.kameleoonData&&a.kameleoonData.originalData){return}if(!a.kameleoonData){a.kameleoonData={}}a.kameleoonData.originalData={};if(a.style&&a.style.cssText){a.kameleoonData.originalData.style=a.style.cssText}if(a.id){a.kameleoonData.originalData.id=a.id}if(a.className){a.kameleoonData.originalData.className=a.className}if(a.parentNode){a.kameleoonData.originalData.parentNode=a.parentNode}if(a.nextSibling){a.kameleoonData.originalData.nextSibling=a.nextSibling}if(a.href){a.kameleoonData.originalData.href=a.getAttribute(\"href\")}if(a.nodeValue){a.kameleoonData.originalData.nodeValue=a.nodeValue}},reserveSpaceForElement:function(a){if(!a.kameleoonData||!a.kameleoonData.originalData){this.saveElementOriginalData(a)}if(!a.kameleoonData.originalData.originalNode){var h=true;for(var e=0,b=a.childNodes.length;e<b;++e){var d=a.childNodes[e];if(d.nodeType==1){h=false}}var g=a.cloneNode(h);var f;if(Kameleoon.Internals.runtime.msie&&!Kameleoon.Internals.runtime.modernMsie){f=a.offsetWidth-1}else{f=a.getBoundingClientRect().width}Kameleoon.Utils.setStyle(g,\"width\",f+\"px\",false);if(!h){Kameleoon.Utils.setStyle(g,\"height\",a.clientHeight+\"px\",false)}var c=Kameleoon.Utils.obtainComputedStyle(a);Kameleoon.Utils.setStyle(g,\"float\",c.cssFloat,false);Kameleoon.Utils.setStyle(g,\"margin-top\",c.marginTop,false);Kameleoon.Utils.setStyle(g,\"margin-bottom\",c.marginBottom,false);Kameleoon.Utils.setStyle(g,\"margin-left\",c.marginLeft,false);Kameleoon.Utils.setStyle(g,\"margin-right\",c.marginRight,false);Kameleoon.Utils.setStyle(g,\"overflow\",c.overflow,false);Kameleoon.Utils.setStyle(g,\"visibility\",\"hidden\",false);g.removeAttribute(\"id\");g.removeAttribute(\"class\");a.parentNode.insertBefore(g,a);a.kameleoonData.originalData.originalNode=g;Kameleoon.Utils.setStyle(a,\"position\",\"absolute\",false)}},removeDuplicates:function(f){var a=[];for(var e=0,b=f.length;e<b;++e){if(undefined==f[e].element.kameleoonUnique){f[e].element.kameleoonUnique=a.length;if(f[e].options.kameleoonClass){f[e].options.kameleoonClass=[f[e].options.kameleoonClass]}a.push(f[e])}else{var c=f[e].element.kameleoonUnique;for(var d in f[e].options){if(\"kameleoonClass\"==d){if(!a[c].options[d]){a[c].options[d]=[]}a[c].options[d].push(f[e].options[d])}else{a[c].options[d]=f[e].options[d]}}}}for(var e=0,b=a.length;e<b;++e){if(undefined!==a[e].element.kameleoonUnique){a[e].element.kameleoonUnique=undefined;a[e].element.removeAttribute(\"kameleoonUnique\")}}return a},setupNoLinkPropagation:function(a,b){if(a.noLinkPropagation){b.setAttribute(\"kData\",\"nlp\")}},changeHTMLContent:function(b,f,c,a,e){var d=b.element;var i=false;var h=(\"input\"==d.nodeName.toLowerCase()&&(\"button\"==d.getAttribute(\"type\")||\"submit\"==d.getAttribute(\"type\")||\"text\"==d.getAttribute(\"type\")));var g=h?d.value:d.innerHTML;this.saveElementOriginalData(d);if(undefined===d.kameleoonData.originalData.htmlContent){d.kameleoonData.originalData.htmlContent=g;i=true}if((!e||i)&&g!=c){if(a){b.element=this.replaceHTMLContent(d,f,c,b.options)}else{if(h){d.value=c}else{d.innerHTML=c}}}return i},replaceHTMLContent:function(j,g,e,m){var b=Kameleoon.Utils.checkElementIsInDocument(j,m);if(0==e.indexOf(\"kameleoonInputImage:\")){this.saveElementOriginalData(j);j.kameleoonData.originalData.imgSrc=j.src;j.src=e.replace(\"kameleoonInputImage:\",\"\");return j}var a=document.createElement(b?j.parentNode.nodeName.toLowerCase():\"div\");a.innerHTML=e;var h=false;while(a.childNodes.length>0){var f=a.childNodes[0];f.kameleoonData=j.kameleoonData;f.kameleoonData.originalData.replacedElement=j;if(!h){h=f;f.id=j.id;if(\"copyAttributes\"==h.getAttribute(\"kameleoon\")){for(var d=0,c=j.attributes.length;d<c;++d){if(\"src\"!=j.attributes[d].name){h.setAttribute(j.attributes[d].name,j.attributes[d].value)}}h.removeAttribute(\"kameleoon\")}var k=j.className.match(/(KameleoonClass[^\\s]*)/);if(k){f.className+=(f.className?\" \":\"\")+k[1]}if(m.kameleoonId){f.id=\"kameleoonId\"+m.kameleoonId}if(m.kameleoonClass&&-1==(\" \"+f.className+\" \").indexOf(\" KameleoonClass\"+m.kameleoonClass+\" \")){f.className+=(f.className?\" \":\"\")+\"KameleoonClass\"+m.kameleoonClass}if((f.id||f.className)&&3==f.nodeType){return false}}if(b){j.parentNode.insertBefore(f,j)}if(b!==true){for(var d=0,c=g.length;d<c;++d){if(j==g[d].element){g[d].element=f}}}if(b===false){j=f;f.parentNode.removeChild(f)}}if(b){j.parentNode.removeChild(j)}return h},processUserPosition:function(b,e,a,d){if(a){switch(a.positionMode){case\"ABSOLUTE_KEEP_SPACE\":case\"ABSOLUTE\":if(d){var h=(\"ABSOLUTE_KEEP_SPACE\"==a.positionMode)?b.kameleoonData.originalData.originalNode.offsetWidth:b.offsetWidth;if(h){Kameleoon.Utils.setStyle(e,\"width\",h+\"px\",(\"th\"!=e.nodeName.toLowerCase()&&\"td\"!=e.nodeName.toLowerCase()))}}var g=null;var c=false;if(a.referenceElement){g=Kameleoon.Utils.querySelectorAll(a.referenceElement)[0];c=true}if(!g){g=document.body}if(g&&e.parentNode!=g){e.parentNode.removeChild(e);g.appendChild(e);if(!e.kameleoonData){e.kameleoonData={}}e.kameleoonData.moved=true}Kameleoon.Utils.setStyle(e,\"position\",\"absolute\",false);var f=Kameleoon.Utils.obtainComputedStyle(e).left.replace(\"px\",\"\")/a.referenceWidth;Kameleoon.Utils.setStyle(e,\"left\",Math.round(f*g.offsetWidth)+\"px\",true);if(c){this.addRelativePositionToReferenceElement(g)}break;case\"RELATIVE\":Kameleoon.Utils.setStyle(e,\"position\",\"\",false)}Kameleoon.Utils.setStyle(e,\"top\",\"\",false);Kameleoon.Utils.setStyle(e,\"left\",\"\",false);Kameleoon.Utils.setStyle(e,\"right\",\"\",false);Kameleoon.Utils.setStyle(e,\"bottom\",\"\",false);if(!d){Kameleoon.Utils.setStyle(e,\"width\",\"\",false)}Kameleoon.Utils.setStyle(e,\"height\",\"\",false)}},processDomOperation:function(e,d,c,a){if(!c){if(d.dataset){d.dataset.kameleoonEvaluated=false}e.evaluated=false;return}var h=d.parentNode;var b=c.parentNode;var g=d.nextSibling;while(b){if(b==d){return}b=b.parentNode}b=c.parentNode;try{if(h){h.removeChild(d)}switch(a){case\"SWAP\":this.saveElementOriginalData(c);b.insertBefore(d,c);b.removeChild(c);if(g){try{h.insertBefore(c,g)}catch(f){h=d.parentNode;g=d.nextSibling;h.insertBefore(c,g)}}else{h.appendChild(c)}if(\"left\"==Kameleoon.Utils.obtainComputedStyle(d)[\"float\"]&&\"right\"==Kameleoon.Utils.obtainComputedStyle(c)[\"float\"]){d.style[\"float\"]=\"right\";c.style[\"float\"]=\"left\"}else{if(\"right\"==Kameleoon.Utils.obtainComputedStyle(d)[\"float\"]&&\"left\"==Kameleoon.Utils.obtainComputedStyle(c)[\"float\"]){d.style[\"float\"]=\"left\";c.style[\"float\"]=\"right\"}}d.kameleoonData.swapTargetElement=c;break;case\"INSERT_BEFORE\":b.insertBefore(d,c);break;case\"INSERT_AFTER\":if(c.nextSibling){b.insertBefore(d,c.nextSibling)}else{b.appendChild(d)}break;case\"INSERT_AS_CHILD\":if(0==c.childNodes.length){c.appendChild(d)}else{c.insertBefore(d,c.firstChild)}break}}catch(f){}},addRelativePositionToReferenceElement:function(a){if(\"absolute\"!=Kameleoon.Utils.obtainComputedStyle(a).position&&document.body!=a){Kameleoon.Utils.setStyle(a,\"position\",\"relative\",false)}},processSpecialCases:function(a){if(\"body\"==a.nodeName.toLowerCase()&&-1!=Kameleoon.Utils.obtainComputedStyle(a).background.indexOf(\"linear-gradient\")){a.style.backgroundRepeat=\"no-repeat\";if(window.innerHeight-document.documentElement.scrollHeight>0){a.style.backgroundAttachment=\"fixed\"}}},processLinks:function(b,a){if(!a){return}if(\"a\"==b.nodeName.toLowerCase()){b.href=a}else{Kameleoon.Utils.addEventListener(b,\"click\",function(){window.location.href=a});b.style.cursor=\"pointer\"}},refreshForScreenResize:function(){for(var a=Kameleoon.poweredNodes.length,b=a-1;b>=0;--b){this.processUserPosition(Kameleoon.poweredNodes[b].originalElement,Kameleoon.poweredNodes[b].baseElement,data?data.userPosition:null,true)}}};Kameleoon.Utils={LOCAL_STORAGE_OBFUSCATED_KEYS:{kameleoonData:true},api:{mapAll:function(c,b,a){b.forEach(function(e,d){a.push(Kameleoon.Utils.api.mapItems(c,b,d))});return a},mapItems:function(c,b,a){var f={},e;e=(b.constructor===Array&&a!==undefined)?b[a]:b;for(var d in e){if(e[d]!==undefined&&e[d]!==null&&c.indexOf(d)===-1){f[d]=e[d]}}return f}},addEventListener:function(e,d,c,b){if(Kameleoon.Internals.runtime.eventListeners==null){Kameleoon.Internals.runtime.eventListeners=[]}var a=e.addEventListener(d,c,b);Kameleoon.Internals.runtime.eventListeners.push({element:e,eventType:d,actionFunction:c,useCapture:b});return a},setTimeout:function(){if(Kameleoon.Internals.runtime.timeoutIds==null){Kameleoon.Internals.runtime.timeoutIds=[]}var a=window.setTimeout.apply(window,arguments);Kameleoon.Internals.runtime.timeoutIds.push(a);return a},setInterval:function(){if(Kameleoon.Internals.runtime.intervalIds==null){Kameleoon.Internals.runtime.intervalIds=[]}var a=window.setInterval.apply(window,arguments);Kameleoon.Internals.runtime.intervalIds.push(a);return a},findObjectWithId:function(a,c){for(var e=0,b=c.length;e<b;++e){var d=c[e];if(a==d.id){return d}}return null},computeCurrentPageCleanAbsoluteURL:function(){if(Kameleoon.Internals.runtime.currentPageCleanAbsoluteURL==null){Kameleoon.Internals.runtime.currentPageCleanAbsoluteURL=this.computeURLNoKameleoonParameters(this.computeCurrentPageAbsoluteURLNoProxyMode());try{Kameleoon.Internals.runtime.currentPageCleanAbsoluteURL=decodeURIComponent(Kameleoon.Internals.runtime.currentPageCleanAbsoluteURL)}catch(a){}}return Kameleoon.Internals.runtime.currentPageCleanAbsoluteURL},computeCurrentPageCleanRelativeURL:function(){if(Kameleoon.Internals.runtime.currentPageCleanRelativeURL==null){Kameleoon.Internals.runtime.currentPageCleanRelativeURL=this.computeRelativeURL(this.computeCurrentPageCleanAbsoluteURL())}return Kameleoon.Internals.runtime.currentPageCleanRelativeURL},computeCurrentPageAbsoluteURLNoProxyMode:function(){if(Kameleoon.Internals.runtime.currentPageAbsoluteURLNoProxyMode==null){if(Kameleoon.Internals.runtime.proxyMode){var d=Kameleoon.Internals.runtime.parameters.kameleoonExperimentId;if(d==null){d=Kameleoon.Internals.runtime.parameters[\"kameleoon-experiment-id\"]}if(d!=null){for(var c=0,b=Kameleoon.Internals.runtime.experiments.length;c<b;++c){var a=Kameleoon.Internals.runtime.experiments[c];if(a.id==d){Kameleoon.Internals.runtime.currentPageAbsoluteURLNoProxyMode=a.baseURL;break}}}}if(Kameleoon.Internals.runtime.currentPageAbsoluteURLNoProxyMode==null){Kameleoon.Internals.runtime.currentPageAbsoluteURLNoProxyMode=window.location.href}}return Kameleoon.Internals.runtime.currentPageAbsoluteURLNoProxyMode},computeURLNoKameleoonParameters:function(a){return a.replace(/(\\?|&|#)kameleoon[^&#]*/g,\"\")},computeURLRegExpNoKameleoonParameters:function(a){return a.replace(/(\\\\\\?|&|#)kameleoon[^&#()]*/g,\"\")},computeRelativeURL:function(c){var b=document.createElement(\"a\");b.href=c;return b.pathname+b.search+b.hash},seededRandom:function(b){var c=0;for(var a=0;a<b.length;++a){c=((c<<5)-c)+b.charCodeAt(a);c=c&c}c=(Math.abs(c)*9301+49297)%233280;return c/233280},JSONParse:function(string){return(((typeof JSON!=\"undefined\")&&JSON.parse)?JSON.parse(string):eval(\"(\"+string+\")\"))},JSONStringify:function(a){var c=null;if((typeof JSON!=\"undefined\"&&JSON.stringify)&&(\"[]\"===JSON.stringify([])||!a.toJSON)){var b=Array.prototype.toJSON;if(b){delete Array.prototype.toJSON}c=JSON.stringify(a);if(b){Array.prototype.toJSON=b}}else{if(a.toJSON&&\"[]\"===[].toJSON()){c=a.toJSON()}else{if((typeof JSON!=\"undefined\"&&JSON.encode)&&\"[]\"===JSON.encode([])){c=JSON.encode(a)}}}return c},performBeaconServerCall:function(c,b,a){var d=new XMLHttpRequest();if(d.withCredentials!==undefined||!XDomainRequest){d.open(\"GET\",c,true);if(b){d.onreadystatechange=function(e){b.bind(d)(e)}}if(a){d.onerror=function(e){a.bind(d)(e)}}d.send()}else{d=new XDomainRequest();d.open(\"get\",c);if(b){d.onload=b}d.send()}},runProtectedFunction:function(b){try{b()}catch(a){if(typeof console!==\"undefined\"&&console.log){console.log(\"An error occurred in one of your Kameleoon custom JavaScript functions, please check your code. Experiment caused the error is \"+Kameleoon.API.currentContainer.name+\" : \"+Kameleoon.API.currentContainer.id);console.log(a,a.message)}Kameleoon.API.processPageLoaded()}},obtainComputedStyle:function(a){if(window.getComputedStyle){var b=getComputedStyle(a,\"\");return b?b:{backgroundImage:\"none\"}}else{return a.currentStyle}},setStyle:function(c,f,e,b){Kameleoon.Analyst.saveElementOriginalData(c);var g=c.style.cssText;if(g){g=g.replace(/^\\s+|\\s+$/g,\"\");var a=new RegExp(\"(^|;)(\\\\s*\"+f+\"(.*?);)\");g=g.replace(a,\"$1\");if(g){if(g.lastIndexOf(\";\")<(g.length-2)){g=g+\";\"}if(g.lastIndexOf(\" \")!=(g.length-1)&&e){g=g+\" \"}}}else{g=\"\"}var d=g+(e?(f+\": \"+e+(b?\" !important;\":\";\")):\"\");c.style.cssText=d},processMessageEvent:function(d){if(typeof d.data!==\"string\"){return}if(\"obtainTagCommanderVariableNames\"==d.data){var b=[];if(window.tc_vars){for(var a in window.tc_vars){b.push(a)}}d.source.postMessage(\"tagCommanderVariableNames\"+Kameleoon.Utils.JSONStringify(b),d.origin);return}if(\"checkKameleoonScriptPresent\"==d.data){d.source.postMessage(\"kameleoonScriptPresent\"+Kameleoon.Internals.configuration.siteCode,d.origin);return}if(Kameleoon.Internals.configuration.useWideDomainSupport&&(Kameleoon.Internals.runtime.postMessageOrigin==d.origin)){var c=Kameleoon.Utils.JSONParse(d.data);if(c.callbackId){var e=Kameleoon.Internals.runtime.postMessageCallbacks[c.callbackId];delete (Kameleoon.Internals.runtime.postMessageCallbacks[c.callbackId]);e&&e(c.data)}}},addPostMessageCallback:function(b){var a=Math.random().toString();Kameleoon.Internals.runtime.postMessageCallbacks[a]=b;return a},postMessageToExternalIframe:function(a){Kameleoon.Internals.runtime.externalIframe.contentWindow.postMessage(\"kameleoon\"+a,\"*\")},encodeString:function(d){var b=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";var a=\"\";var l,j,g,k,h,f,e;var c=0;d=this.encodeUTF8(d);while(c<d.length){l=d.charCodeAt(c++);j=d.charCodeAt(c++);g=d.charCodeAt(c++);k=l>>2;h=((l&3)<<4)|(j>>4);f=((j&15)<<2)|(g>>6);e=g&63;if(isNaN(j)){f=e=64}else{if(isNaN(g)){e=64}}a=a+b.charAt(k)+b.charAt(h)+b.charAt(f)+b.charAt(e)}return a},decodeString:function(d){var b=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";var a=\"\";var l,j,g;var k,h,f,e;var c=0;d=d.replace(/[^A-Za-z0-9\\+\\/\\=]/g,\"\");while(c<d.length){k=b.indexOf(d.charAt(c++));h=b.indexOf(d.charAt(c++));f=b.indexOf(d.charAt(c++));e=b.indexOf(d.charAt(c++));l=(k<<2)|(h>>4);j=((h&15)<<4)|(f>>2);g=((f&3)<<6)|e;a=a+String.fromCharCode(l);if(f!=64){a=a+String.fromCharCode(j)}if(e!=64){a=a+String.fromCharCode(g)}}a=this.decodeUTF8(a);return a},obfuscateString:function(c){var e=\"\";for(var d=0,a=c.length;d<a;d+=1){var b=c[d];if(b==\"’\"){b=\"'\"}e+=String.fromCharCode(b.charCodeAt(0)+16)}return e},unobfuscateString:function(d){var b=\"\";for(var c=0,a=d.length;c<a;c+=1){b+=String.fromCharCode(d[c].charCodeAt(0)-16)}return b},encodeUTF8:function(b){b=b.replace(/\\r\\n/g,\"\\n\");var a=\"\";for(var e=0;e<b.length;e++){var d=b.charCodeAt(e);if(d<128){a+=String.fromCharCode(d)}else{if((d>127)&&(d<2048)){a+=String.fromCharCode((d>>6)|192);a+=String.fromCharCode((d&63)|128)}else{a+=String.fromCharCode((d>>12)|224);a+=String.fromCharCode(((d>>6)&63)|128);a+=String.fromCharCode((d&63)|128)}}}return a},decodeUTF8:function(a){var b=\"\";var d=0;var e=c1=c2=0;while(d<a.length){e=a.charCodeAt(d);if(e<128){b+=String.fromCharCode(e);d++}else{if((e>191)&&(e<224)){c2=a.charCodeAt(d+1);b+=String.fromCharCode(((e&31)<<6)|(c2&63));d+=2}else{c2=a.charCodeAt(d+1);c3=a.charCodeAt(d+2);b+=String.fromCharCode(((e&15)<<12)|((c2&63)<<6)|(c3&63));d+=3}}}return b},restoreStoredData:function(a){if(Kameleoon.Internals.configuration.useWideDomainSupport){Kameleoon.Utils.postMessageToExternalIframe(Kameleoon.Utils.JSONStringify({type:\"get\",key:\"kameleoonData\",callbackId:Kameleoon.Utils.addPostMessageCallback(function(b){Kameleoon.Internals.runtime.storedData=Kameleoon.Utils.LOCAL_STORAGE_OBFUSCATED_KEYS.kameleoonData&&Kameleoon.Utils.JSONParse(Kameleoon.Utils.unobfuscateString(b))||b;a&&a()})}))}else{Kameleoon.Internals.runtime.storedData=Kameleoon.Utils.readLocalData(\"kameleoonData\",\"LS\",true);a&&a()}},saveStoredData:function(a){this.createLocalData(\"kameleoonData\",Kameleoon.Internals.runtime.storedData||{},1000,null,\"LS\",true,a)},createLocalData:function(a,i,k,f,d,c,l,m){var j=(\"LS\"==d)?true:((\"COOKIE\"==d)?false:Kameleoon.Internals.configuration.useLocalStorage);var b=new Date().getTime();if((!m)&&(!Kameleoon.Internals.runtime.saveLocalDataAllowed)){var h=j?\"LS\":\"COOKIE\";if(Kameleoon.Internals.runtime.localDataMap==null){Kameleoon.Internals.runtime.localDataMap={}}if(Kameleoon.Internals.runtime.localDataMap[h]==null){Kameleoon.Internals.runtime.localDataMap[h]={}}Kameleoon.Internals.runtime.localDataMap[h][a]={name:a,value:i,days:k,domain:f,forceLocalAccess:d,jsonFormat:c,creationTime:b};if(j){l&&l()}return}if(j){var e=b+(k*24*60*60*1000);if(Kameleoon.Internals.configuration.useWideDomainSupport){this.postMessageToExternalIframe(this.JSONStringify({type:\"set\",key:a,data:{value:this.LOCAL_STORAGE_OBFUSCATED_KEYS[a]&&this.obfuscateString(this.JSONStringify(i))||i,date:e},callbackId:this.addPostMessageCallback(l)}))}else{var g=this.JSONStringify({value:i,date:e});localStorage.setItem(a,this.LOCAL_STORAGE_OBFUSCATED_KEYS[a]&&this.obfuscateString(g)||g);l&&l()}}else{var n=\"\";if(k){var e=new Date(b+(k*24*60*60*1000));n=\"; expires=\"+e.toGMTString()}if(\"CURRENT_HOST\"!=f){f=f||this.obtainCurrentRootDomain();n+=\"; domain=\"+f}document.cookie=a+\"=\"+(c?this.JSONStringify(i):i)+n+\"; path=/\"}},readLocalData:function(b,g,d){var s=(\"LS\"==g)?true:((\"COOKIE\"==g)?false:Kameleoon.Internals.configuration.useLocalStorage);var f=new Date().getTime();try{if(!Kameleoon.Internals.runtime.saveLocalDataAllowed){var a=Kameleoon.Internals.runtime.localDataMap;var r=s?\"LS\":\"COOKIE\";if((a!=null)&&(a[r]!=null)&&(a[r][b]!=null)){var k=a[r][b];if(f-(k.days*24*60*60*1000)>=k.creationTime){delete a[r][b]}else{return k.value}}}if(s){var k=localStorage&&localStorage.getItem(b);if(!k){return null}var m=false;if(this.LOCAL_STORAGE_OBFUSCATED_KEYS[b]){if(k.slice(0,2)==='{\"'&&k.slice(-1)===\"}\"){m=true}else{k=this.unobfuscateString(k)}}k=this.JSONParse(k);if(f>k.date){localStorage.removeItem(b);return null}return m&&this.JSONParse(this.decodeString(k.value))||k.value}else{var p=b+\"=\";var h=document.cookie.split(\";\");for(var j=0,l=h.length,o,q;j<l;++j){o=h[j].trim();q=o.indexOf(p);if(q===-1){continue}k=o.slice(q+p.length);return d&&this.JSONParse(k)||k}}}catch(n){}return null},eraseLocalData:function(b,c,f){var e=(\"LS\"==f)?true:((\"COOKIE\"==f)?false:Kameleoon.Internals.configuration.useLocalStorage);if(!Kameleoon.Internals.runtime.saveLocalDataAllowed){var d=Kameleoon.Internals.runtime.localDataMap;var a=e?\"LS\":\"COOKIE\";if((d!=null)&&(d[a]!=null)&&(d[a][b]!=null)){delete d[a][b]}}if(e){if(Kameleoon.Internals.configuration.useWideDomainSupport){this.postMessageToExternalIframe(this.JSONStringify({type:\"remove\",key:b,callbackId:this.addPostMessageCallback(null)}))}else{localStorage.removeItem(b)}}else{this.createLocalData(b,\"\",-1,c,\"COOKIE\",false,null,true)}},obtainCurrentRootDomain:function(){if(Kameleoon.Internals.runtime.currentRootDomain==null){var d=window.location.hostname.split(\".\");var c=\"\";for(var b=0,a=d.length;b<a;b++){if(b>0){c=\".\"+c}c=d[a-b-1]+c;this.createLocalData(\"kameleoonTestCookie\",\"test\",1,c,\"COOKIE\",false,undefined,true);if(this.readLocalData(\"kameleoonTestCookie\",\"COOKIE\",false)){this.eraseLocalData(\"kameleoonTestCookie\",c,\"COOKIE\");Kameleoon.Internals.runtime.currentRootDomain=c;break}}}return Kameleoon.Internals.runtime.currentRootDomain},obtainRandomString:function(e){var b=\"0123456789abcdefghijklmnopqrstuvwxyz\";var a=\"\";for(var c=0;c<e;++c){var d=Math.floor(Math.random()*b.length);a+=b.substring(d,d+1)}return a},parseParameters:function(){var e={};var a=window.location.search.substring(1);if(a){a=a.split(\"&\");for(var d=0,b=a.length;d<b;++d){var f=a[d].split(\"=\");try{e[decodeURIComponent(f[0])]=f[1]?decodeURIComponent(f[1]):null}catch(c){e[unescape(f[0])]=f[1]?unescape(f[1]):null}}}a=window.location.hash.substring(1);if(Kameleoon.Internals.runtime.firefox){a=window.location.toString().substring(window.location.toString().indexOf(\"#\")+1)}if(a){a=a.split(\"&\");for(var d=0,b=a.length;d<b;++d){var f=a[d].split(\"=\");try{e[decodeURIComponent(f[0])]=f[1]?decodeURIComponent(f[1]):null}catch(c){e[unescape(f[0])]=f[1]?unescape(f[1]):null}}}return e},addParameterToURL:function(a,d,c){if(c){return(a+((-1==a.indexOf(\"#\"))?\"#\":\"&\")+d)}var b=\"\";if(-1!=a.indexOf(\"#\")){b=a.substr(a.indexOf(\"#\"));a=a.substr(0,a.indexOf(\"#\"))}a+=((-1==a.indexOf(\"?\"))?\"?\":\"&\")+d+b;return a},removeBlockingStyleSheet:function(){var a=document.getElementById(\"kameleoonPageLoading\");if(a&&a.parentNode){a.parentNode.removeChild(a)}},domReady:function(a){if(\"complete\"==document.readyState||\"loaded\"==document.readyState||(\"interactive\"==document.readyState&&(!Kameleoon.Internals.runtime.msie||Kameleoon.Internals.runtime.modernMsie))){return a()}return Kameleoon.Utils.addEventListener(document,\"DOMContentLoaded\",a,false)},obtainDepth:function(b){var a=0;while(!(b.parentNode===null)){++a;b=b.parentNode}return a},collectionToArray:function(d){var a=[];for(var c=0,b=d.length;c<b;++c){a.push(d[c])}return a},getLocale:function(b){var a=null;if(navigator){if(navigator.language){a=navigator.language}else{if(navigator.browserLanguage){a=navigator.browserLanguage}else{if(navigator.systemLanguage){a=navigator.systemLanguage}else{if(navigator.userLanguage){a=navigator.userLanguage}}}}}if(\"fr-FR\"==a){a=\"fr\"}if(\"en-US\"==a){a=\"en\"}if(b&&(!a||\"fr\"!=a)){a=\"en\"}return a},callJavaScriptCode:function(b){var a=document.createElement(\"script\");a.type=\"text/javascript\";Kameleoon.Internals.runtime.headNode.appendChild(a);if(Kameleoon.Internals.runtime.msie){a.text=b}else{a.appendChild(document.createTextNode(b))}},checkElementLoaded:function(a){if(!a||!a.parentNode){return false}return((a.nextSibling)?true:this.checkElementLoaded(a.parentNode))},checkElementIsInDocument:function(c,a){var b=null,d=document;if(a.context){b=Kameleoon.Utils.querySelectorAll(a.context);if(b[0]){d=b[0].contentWindow.document}}while(c&&c!=d.documentElement&&c!=Kameleoon.Internals.runtime.virtualRootElement){if(c.parentNode){c=c.parentNode}else{return false}}return(c==d.documentElement)?true:\"VIRTUAL\"},clone:function(a){return this.JSONParse(this.JSONStringify(a))},treatContainsSelector:function(a){var d={},c;function b(g,e){var f=false;if(e.textContent&&e.textContent.indexOf(g)!==-1){f=true}return f}c=a.match(/:contains\\(['\"]([\\s\\S]+)['\"]\\)/);d.containText=c[1];d.newSelector=a.replace(c[0],\"\");if(d.newSelector===\"\"){d.newSelector=\"*\"}d.check=b;return d},treatEqSelector:function(d,c){if(d===undefined){return null}var b=[];var f=function(g){if(g.indexOf(\":eq(\")===-1){return undefined}var j=g.indexOf(\":eq(\");var i=g.substring(0,j);var h=g.substring((j+4),g.indexOf(\")\",j));d=g.substring(g.indexOf(\")\",j)+1,g.length);if(i.charAt(0)===\">\"){i=i.substring(1,i.length)}if(d.charAt(0)===\">\"){d=d.substring(1,d.length)}b.push({selector:i,index:h})};while(d.indexOf(\":eq\")!==-1){f(d)}var a;while(b.length>0){var e=b.shift();a=(a||c).querySelectorAll(e.selector)[e.index]}if(d.trim().length>0){return(a||c).querySelectorAll(d)}if(undefined===a){return[]}else{return[a]}},querySelectorAll:function(f,p){var m=false,k,d=[],n=[];if(p==null){p=document}var g=f.match(/#([0-9]+.*)(?: |$)/);if(g){var o=f.charAt(1);f=f.replace(\"#\"+o,\"#\\\\3\"+o+\" \")}if(f!==\"\"){if(f.indexOf(\"[\")!==-1&&f.indexOf(\"']\")===-1&&f.indexOf('\"]')===-1){var j=f.split(/(?=\\.)|(?=#)|(?=\\[)/),a,c,b;j.forEach(function(i){if(i[0]===\"[\"&&i.indexOf(\"']\")===-1&&f.indexOf('\"]')===-1&&f.indexOf(\"=\")!==-1){a=i.split(/=(.+)?/);c=a[1];c=c.substring(0,c.length-1);b=a[0]+\"='\"+c+\"']\";f=f.replace(i,b)}})}if(f.indexOf(\":contains\")!==-1){m=true;k=this.treatContainsSelector(f);f=k.newSelector}if(p&&p.querySelectorAll){if(f.indexOf(\":eq\")!==-1){d=this.treatEqSelector(f,p)}else{d=p.querySelectorAll(f)}}for(var h=0,e=d.length;h<e;++h){if(m){if(k.check(k.containText,d[h])){n.push(d[h])}}else{n.push(d[h])}}}return n},flatten:function(){var b=[];for(var a=0;a<arguments.length;a++){if(arguments[a] instanceof Array){b.push.apply(b,Kameleoon.Utils.flatten.apply(this,arguments[a]))}else{b.push(arguments[a])}}return b},flattenTargetingTree:function(b){var a=function(f,d){if(f!=null){if(f.targetingCondition!=null){return f.targetingCondition.targeting===false?[\"!\",f.targetingCondition]:f.targetingCondition}else{var e=f.orOperator?\"OR\":\"AND\";var c=[a(f.leftChild,e),e,a(f.rightChild,e)];return d==\"AND\"&&e==\"OR\"?[\"(\",c,\")\"]:c}}};return Kameleoon.Utils.flatten(a(b,\"OR\"))},Event:(function(){function c(){this.subscribers={};this.key=0}c.prototype.subscribe=function b(i){var g=this.key;this.subscribers[g]=i;++this.key;this.onSubscribe(g);return function h(){this.onUnsubscribe(g);delete this.subscribers[g]}.bind(this)};c.prototype.emit=function d(){for(var f in this.subscribers){this.subscribers[f].apply(null,arguments)}};c.prototype.onSubscribe=function e(f){};c.prototype.onUnsubcribe=function a(f){};c.prototype.filter=function(h){var g=new c();this.subscribe(function(){if(h.apply(null,arguments)){g.emit.apply(g,arguments)}});return g};c.prototype.map=function(h){var g=new c();this.subscribe(function(){g.emit(h.apply(null,arguments))});return g};c.prototype.memorize=function(){var g=new c();var f=[];this.subscribe(function(){f.push(arguments);g.emit.apply(g,arguments)});g.onSubscribe=function(h){f.forEach(function(i){g.subscribers[h].apply(null,i)})};return g};return c})()};Kameleoon.Loader={enableKameleoonEditorListener:function(){if(!this.editorListenerEnabled){this.editorListenerEnabled=true;var a=function(b){if(!b){b=window.event}Kameleoon.Loader.listenKeys.call(Kameleoon.Loader,b)};Kameleoon.Utils.addEventListener(document,\"keyup\",a,false)}},listenKeys:function(a){if(a.shiftKey){if(113==a.keyCode&&Kameleoon.Internals.configuration.abtestingSetup){Kameleoon.Internals.runtime.editorMode=true;Kameleoon.Analyst.loadKameleoonFull(function(){Kameleoon.Loader.enableKameleoonEditor.apply(Kameleoon.Loader)})}if(115==a.keyCode&&(Kameleoon.Internals.runtime.simulationMode||Kameleoon.Internals.runtime.parameters.kameleoonVariationSelection)){Kameleoon.Analyst.loadKameleoonFull(function(){Kameleoon.Loader.enableSimulationPanel()})}}}};Kameleoon.Analyst.processAdobeOmnitureTracking=function(a){a.adobeOmnitureTracking.active=true;var b=Kameleoon.Analyst.findAdobeOmnitureObject(a);if(undefined==window.s_doPlugins){window.s_doPlugins=Kameleoon.API.processOmniture}if(b){if(undefined==b.doPlugins){b.usePlugins=true;b.doPlugins=Kameleoon.API.processOmniture}a.adobeOmnitureTracking.omnitureAlreadyLoaded=true;try{if(!a.adobeOmnitureTracking.willIncludeTracksentMarker||b.tracksent){b.tl(true,\"o\",\"Kameleoon Tracking\")}}catch(c){Kameleoon.Utils.setTimeout(function(){Kameleoon.Analyst.processAdobeOmnitureTracking.apply(Kameleoon.Analyst,[a])},150)}}else{if(a.adobeOmnitureTracking.eventCallDelayed){Kameleoon.Utils.setTimeout(function(){Kameleoon.Analyst.processAdobeOmnitureTracking.apply(Kameleoon.Analyst,[a])},150)}}};Kameleoon.Analyst.findAdobeOmnitureObject=function(experiment){if(experiment.adobeOmnitureTracking.objectDetectionScript){return eval(\"(function() {\"+experiment.adobeOmnitureTracking.objectDetectionScript+\"})();\")}if(experiment.adobeOmnitureTracking.object){return window[experiment.adobeOmnitureTracking.object]}return window.s};(function(a){var b=(function(){var d=\"s\",g={DAY:86400000,HOUR:3600000,MINUTE:60000,SECOND:1000,BASELINE_YEAR:2014,MAX_SCORE:864000000,AMBIGUITIES:{\"America/Denver\":[\"America/Mazatlan\"],\"Europe/London\":[\"Africa/Casablanca\"],\"America/Chicago\":[\"America/Mexico_City\"],\"America/Asuncion\":[\"America/Campo_Grande\",\"America/Santiago\"],\"America/Montevideo\":[\"America/Sao_Paulo\",\"America/Santiago\"],\"Asia/Beirut\":[\"Asia/Amman\",\"Asia/Jerusalem\",\"Europe/Helsinki\",\"Asia/Damascus\",\"Africa/Cairo\",\"Asia/Gaza\",\"Europe/Minsk\"],\"Pacific/Auckland\":[\"Pacific/Fiji\"],\"America/Los_Angeles\":[\"America/Santa_Isabel\"],\"America/New_York\":[\"America/Havana\"],\"America/Halifax\":[\"America/Goose_Bay\"],\"America/Godthab\":[\"America/Miquelon\"],\"Asia/Dubai\":[\"Asia/Yerevan\"],\"Asia/Jakarta\":[\"Asia/Krasnoyarsk\"],\"Asia/Shanghai\":[\"Asia/Irkutsk\",\"Australia/Perth\"],\"Australia/Sydney\":[\"Australia/Lord_Howe\"],\"Asia/Tokyo\":[\"Asia/Yakutsk\"],\"Asia/Dhaka\":[\"Asia/Omsk\"],\"Asia/Baku\":[\"Asia/Yerevan\"],\"Australia/Brisbane\":[\"Asia/Vladivostok\"],\"Pacific/Noumea\":[\"Asia/Vladivostok\"],\"Pacific/Majuro\":[\"Asia/Kamchatka\",\"Pacific/Fiji\"],\"Pacific/Tongatapu\":[\"Pacific/Apia\"],\"Asia/Baghdad\":[\"Europe/Minsk\",\"Europe/Moscow\"],\"Asia/Karachi\":[\"Asia/Yekaterinburg\"],\"Africa/Johannesburg\":[\"Asia/Gaza\",\"Africa/Cairo\"]}},f=function f(o){var p=-o.getTimezoneOffset();return(p!==null?p:0)},h=function h(){var o=f(new Date(g.BASELINE_YEAR,0,2)),p=f(new Date(g.BASELINE_YEAR,5,2)),q=o-p;if(q<0){return o+\",1\"}else{if(q>0){return p+\",1,\"+d}}return o+\",0\"},j=function j(){var p,o;if(typeof Intl===\"undefined\"||typeof Intl.DateTimeFormat===\"undefined\"){return}p=Intl.DateTimeFormat();if(typeof p===\"undefined\"||typeof p.resolvedOptions===\"undefined\"){return}o=p.resolvedOptions().timeZone;if(o&&(o.indexOf(\"/\")>-1||o===\"UTC\")){return o}},i=function i(s){var v=new Date(s,0,1,0,0,1,0).getTime();var u=new Date(s,12,31,23,59,59).getTime();var r=v;var p=(new Date(r)).getTimezoneOffset();var t=null;var w=null;while(r<u-86400000){var q=new Date(r);var o=q.getTimezoneOffset();if(o!==p){if(o<p){t=q}if(o>p){w=q}p=o}r+=86400000}if(t&&w){return{s:k(t).getTime(),e:k(w).getTime()}}return false},k=function k(w,v,t){if(typeof v===\"undefined\"){v=g.DAY;t=g.HOUR}var q=new Date(w.getTime()-v).getTime();var x=w.getTime()+v;var s=new Date(q).getTimezoneOffset();var u=q;var p=null;while(u<x-t){var r=new Date(u);var o=r.getTimezoneOffset();if(o!==s){p=r;break}u+=t}if(v===g.DAY){return k(p,g.HOUR,g.MINUTE)}if(v===g.HOUR){return k(p,g.MINUTE,g.SECOND)}return p},n=function e(o,r,q,p){if(q!==\"N/A\"){return q}if(r===\"Asia/Beirut\"){if(p.name===\"Africa/Cairo\"){if(o[6].s===1398376800000&&o[6].e===1411678800000){return 0}}if(p.name===\"Asia/Jerusalem\"){if(o[6].s===1395964800000&&o[6].e===1411858800000){return 0}}}else{if(r===\"America/Santiago\"){if(p.name===\"America/Asuncion\"){if(o[6].s===1412481600000&&o[6].e===1397358000000){return 0}}if(p.name===\"America/Campo_Grande\"){if(o[6].s===1413691200000&&o[6].e===1392519600000){return 0}}}else{if(r===\"America/Montevideo\"){if(p.name===\"America/Sao_Paulo\"){if(o[6].s===1413687600000&&o[6].e===1392516000000){return 0}}}else{if(r===\"Pacific/Auckland\"){if(p.name===\"Pacific/Fiji\"){if(o[6].s===1414245600000&&o[6].e===1396101600000){return 0}}}}}}return q},m=function m(r,o){var y=function y(B){var C=0;for(var A=0;A<r.length;A++){if(!!B.rules[A]&&!!r[A]){if(r[A].s>=B.rules[A].s&&r[A].e<=B.rules[A].e){C=0;C+=Math.abs(r[A].s-B.rules[A].s);C+=Math.abs(B.rules[A].e-r[A].e)}else{C=\"N/A\";break}if(C>g.MAX_SCORE){C=\"N/A\";break}}}C=n(r,o,C,B);return C};var u={};var x=b.olson.dst_rules.zones;var v=x.length;var z=g.AMBIGUITIES[o];for(var t=0;t<v;t++){var w=x[t];var p=y(x[t]);if(p!==\"N/A\"){u[w.name]=p}}for(var q in u){if(u.hasOwnProperty(q)){for(var s=0;s<z.length;s++){if(z[s]===q){return q}}}}return o},c=function c(s){var p=function p(){var u=[];for(var v=0;v<b.olson.dst_rules.years.length;v++){var t=i(b.olson.dst_rules.years[v]);u.push(t)}return u};var o=function o(u){for(var t=0;t<u.length;t++){if(u[t]!==false){return true}}return false};var r=p();var q=o(r);if(q){return m(r,s)}return s},l=function l(){var o=j();if(!o){o=b.olson.timezones[h()];if(typeof g.AMBIGUITIES[o]!==\"undefined\"){o=c(o)}}return{name:function(){return o}}};return{determine:l}}());b.olson=b.olson||{};b.olson.timezones={\"-720,0\":\"Etc/GMT+12\",\"-660,0\":\"Pacific/Pago_Pago\",\"-660,1,s\":\"Pacific/Apia\",\"-600,1\":\"America/Adak\",\"-600,0\":\"Pacific/Honolulu\",\"-570,0\":\"Pacific/Marquesas\",\"-540,0\":\"Pacific/Gambier\",\"-540,1\":\"America/Anchorage\",\"-480,1\":\"America/Los_Angeles\",\"-480,0\":\"Pacific/Pitcairn\",\"-420,0\":\"America/Phoenix\",\"-420,1\":\"America/Denver\",\"-360,0\":\"America/Guatemala\",\"-360,1\":\"America/Chicago\",\"-360,1,s\":\"Pacific/Easter\",\"-300,0\":\"America/Bogota\",\"-300,1\":\"America/New_York\",\"-270,0\":\"America/Caracas\",\"-240,1\":\"America/Halifax\",\"-240,0\":\"America/Santo_Domingo\",\"-240,1,s\":\"America/Asuncion\",\"-210,1\":\"America/St_Johns\",\"-180,1\":\"America/Godthab\",\"-180,0\":\"America/Argentina/Buenos_Aires\",\"-180,1,s\":\"America/Montevideo\",\"-120,0\":\"America/Noronha\",\"-120,1\":\"America/Noronha\",\"-60,1\":\"Atlantic/Azores\",\"-60,0\":\"Atlantic/Cape_Verde\",\"0,0\":\"UTC\",\"0,1\":\"Europe/London\",\"60,1\":\"Europe/Berlin\",\"60,0\":\"Africa/Lagos\",\"60,1,s\":\"Africa/Windhoek\",\"120,1\":\"Asia/Beirut\",\"120,0\":\"Africa/Johannesburg\",\"180,0\":\"Asia/Baghdad\",\"180,1\":\"Europe/Moscow\",\"210,1\":\"Asia/Tehran\",\"240,0\":\"Asia/Dubai\",\"240,1\":\"Asia/Baku\",\"270,0\":\"Asia/Kabul\",\"300,1\":\"Asia/Yekaterinburg\",\"300,0\":\"Asia/Karachi\",\"330,0\":\"Asia/Kolkata\",\"345,0\":\"Asia/Kathmandu\",\"360,0\":\"Asia/Dhaka\",\"360,1\":\"Asia/Omsk\",\"390,0\":\"Asia/Rangoon\",\"420,1\":\"Asia/Krasnoyarsk\",\"420,0\":\"Asia/Jakarta\",\"480,0\":\"Asia/Shanghai\",\"480,1\":\"Asia/Irkutsk\",\"525,0\":\"Australia/Eucla\",\"525,1,s\":\"Australia/Eucla\",\"540,1\":\"Asia/Yakutsk\",\"540,0\":\"Asia/Tokyo\",\"570,0\":\"Australia/Darwin\",\"570,1,s\":\"Australia/Adelaide\",\"600,0\":\"Australia/Brisbane\",\"600,1\":\"Asia/Vladivostok\",\"600,1,s\":\"Australia/Sydney\",\"630,1,s\":\"Australia/Lord_Howe\",\"660,1\":\"Asia/Kamchatka\",\"660,0\":\"Pacific/Noumea\",\"690,0\":\"Pacific/Norfolk\",\"720,1,s\":\"Pacific/Auckland\",\"720,0\":\"Pacific/Majuro\",\"765,1,s\":\"Pacific/Chatham\",\"780,0\":\"Pacific/Tongatapu\",\"780,1,s\":\"Pacific/Apia\",\"840,0\":\"Pacific/Kiritimati\"};b.olson.dst_rules={years:[2008,2009,2010,2011,2012,2013,2014],zones:[{name:\"Africa/Cairo\",rules:[{e:1219957200000,s:1209074400000},{e:1250802000000,s:1240524000000},{e:1285880400000,s:1284069600000},false,false,false,{e:1411678800000,s:1406844000000}]},{name:\"Africa/Casablanca\",rules:[{e:1220223600000,s:1212278400000},{e:1250809200000,s:1243814400000},{e:1281222000000,s:1272758400000},{e:1312066800000,s:1301788800000},{e:1348970400000,s:1345428000000},{e:1382839200000,s:1376100000000},{e:1414288800000,s:1406944800000}]},{name:\"America/Asuncion\",rules:[{e:1205031600000,s:1224388800000},{e:1236481200000,s:1255838400000},{e:1270954800000,s:1286078400000},{e:1302404400000,s:1317528000000},{e:1333854000000,s:1349582400000},{e:1364094000000,s:1381032000000},{e:1395543600000,s:1412481600000}]},{name:\"America/Campo_Grande\",rules:[{e:1203217200000,s:1224388800000},{e:1234666800000,s:1255838400000},{e:1266721200000,s:1287288000000},{e:1298170800000,s:1318737600000},{e:1330225200000,s:1350792000000},{e:1361070000000,s:1382241600000},{e:1392519600000,s:1413691200000}]},{name:\"America/Goose_Bay\",rules:[{e:1225594860000,s:1205035260000},{e:1257044460000,s:1236484860000},{e:1289098860000,s:1268539260000},{e:1320555600000,s:1299988860000},{e:1352005200000,s:1331445600000},{e:1383454800000,s:1362895200000},{e:1414904400000,s:1394344800000}]},{name:\"America/Havana\",rules:[{e:1224997200000,s:1205643600000},{e:1256446800000,s:1236488400000},{e:1288501200000,s:1268542800000},{e:1321160400000,s:1300597200000},{e:1352005200000,s:1333256400000},{e:1383454800000,s:1362891600000},{e:1414904400000,s:1394341200000}]},{name:\"America/Mazatlan\",rules:[{e:1225008000000,s:1207472400000},{e:1256457600000,s:1238922000000},{e:1288512000000,s:1270371600000},{e:1319961600000,s:1301821200000},{e:1351411200000,s:1333270800000},{e:1382860800000,s:1365325200000},{e:1414310400000,s:1396774800000}]},{name:\"America/Mexico_City\",rules:[{e:1225004400000,s:1207468800000},{e:1256454000000,s:1238918400000},{e:1288508400000,s:1270368000000},{e:1319958000000,s:1301817600000},{e:1351407600000,s:1333267200000},{e:1382857200000,s:1365321600000},{e:1414306800000,s:1396771200000}]},{name:\"America/Miquelon\",rules:[{e:1225598400000,s:1205038800000},{e:1257048000000,s:1236488400000},{e:1289102400000,s:1268542800000},{e:1320552000000,s:1299992400000},{e:1352001600000,s:1331442000000},{e:1383451200000,s:1362891600000},{e:1414900800000,s:1394341200000}]},{name:\"America/Santa_Isabel\",rules:[{e:1225011600000,s:1207476000000},{e:1256461200000,s:1238925600000},{e:1288515600000,s:1270375200000},{e:1319965200000,s:1301824800000},{e:1351414800000,s:1333274400000},{e:1382864400000,s:1365328800000},{e:1414314000000,s:1396778400000}]},{name:\"America/Santiago\",rules:[{e:1206846000000,s:1223784000000},{e:1237086000000,s:1255233600000},{e:1270350000000,s:1286683200000},{e:1304823600000,s:1313899200000},{e:1335668400000,s:1346558400000},{e:1367118000000,s:1378612800000},{e:1398567600000,s:1410062400000}]},{name:\"America/Sao_Paulo\",rules:[{e:1203213600000,s:1224385200000},{e:1234663200000,s:1255834800000},{e:1266717600000,s:1287284400000},{e:1298167200000,s:1318734000000},{e:1330221600000,s:1350788400000},{e:1361066400000,s:1382238000000},{e:1392516000000,s:1413687600000}]},{name:\"Asia/Amman\",rules:[{e:1225404000000,s:1206655200000},{e:1256853600000,s:1238104800000},{e:1288303200000,s:1269554400000},{e:1319752800000,s:1301608800000},false,false,{e:1414706400000,s:1395957600000}]},{name:\"Asia/Damascus\",rules:[{e:1225486800000,s:1207260000000},{e:1256850000000,s:1238104800000},{e:1288299600000,s:1270159200000},{e:1319749200000,s:1301608800000},{e:1351198800000,s:1333058400000},{e:1382648400000,s:1364508000000},{e:1414702800000,s:1395957600000}]},{name:\"Asia/Dubai\",rules:[false,false,false,false,false,false,false]},{name:\"Asia/Gaza\",rules:[{e:1219957200000,s:1206655200000},{e:1252015200000,s:1238104800000},{e:1281474000000,s:1269640860000},{e:1312146000000,s:1301608860000},{e:1348178400000,s:1333058400000},{e:1380229200000,s:1364508000000},{e:1414098000000,s:1395957600000}]},{name:\"Asia/Irkutsk\",rules:[{e:1224957600000,s:1206813600000},{e:1256407200000,s:1238263200000},{e:1288461600000,s:1269712800000},false,false,false,false]},{name:\"Asia/Jerusalem\",rules:[{e:1223161200000,s:1206662400000},{e:1254006000000,s:1238112000000},{e:1284246000000,s:1269561600000},{e:1317510000000,s:1301616000000},{e:1348354800000,s:1333065600000},{e:1382828400000,s:1364515200000},{e:1414278000000,s:1395964800000}]},{name:\"Asia/Kamchatka\",rules:[{e:1224943200000,s:1206799200000},{e:1256392800000,s:1238248800000},{e:1288450800000,s:1269698400000},false,false,false,false]},{name:\"Asia/Krasnoyarsk\",rules:[{e:1224961200000,s:1206817200000},{e:1256410800000,s:1238266800000},{e:1288465200000,s:1269716400000},false,false,false,false]},{name:\"Asia/Omsk\",rules:[{e:1224964800000,s:1206820800000},{e:1256414400000,s:1238270400000},{e:1288468800000,s:1269720000000},false,false,false,false]},{name:\"Asia/Vladivostok\",rules:[{e:1224950400000,s:1206806400000},{e:1256400000000,s:1238256000000},{e:1288454400000,s:1269705600000},false,false,false,false]},{name:\"Asia/Yakutsk\",rules:[{e:1224954000000,s:1206810000000},{e:1256403600000,s:1238259600000},{e:1288458000000,s:1269709200000},false,false,false,false]},{name:\"Asia/Yekaterinburg\",rules:[{e:1224968400000,s:1206824400000},{e:1256418000000,s:1238274000000},{e:1288472400000,s:1269723600000},false,false,false,false]},{name:\"Asia/Yerevan\",rules:[{e:1224972000000,s:1206828000000},{e:1256421600000,s:1238277600000},{e:1288476000000,s:1269727200000},{e:1319925600000,s:1301176800000},false,false,false]},{name:\"Australia/Lord_Howe\",rules:[{e:1207407600000,s:1223134200000},{e:1238857200000,s:1254583800000},{e:1270306800000,s:1286033400000},{e:1301756400000,s:1317483000000},{e:1333206000000,s:1349537400000},{e:1365260400000,s:1380987000000},{e:1396710000000,s:1412436600000}]},{name:\"Australia/Perth\",rules:[{e:1206813600000,s:1224957600000},false,false,false,false,false,false]},{name:\"Europe/Helsinki\",rules:[{e:1224982800000,s:1206838800000},{e:1256432400000,s:1238288400000},{e:1288486800000,s:1269738000000},{e:1319936400000,s:1301187600000},{e:1351386000000,s:1332637200000},{e:1382835600000,s:1364691600000},{e:1414285200000,s:1396141200000}]},{name:\"Europe/Minsk\",rules:[{e:1224979200000,s:1206835200000},{e:1256428800000,s:1238284800000},{e:1288483200000,s:1269734400000},false,false,false,false]},{name:\"Europe/Moscow\",rules:[{e:1224975600000,s:1206831600000},{e:1256425200000,s:1238281200000},{e:1288479600000,s:1269730800000},false,false,false,false]},{name:\"Pacific/Apia\",rules:[false,false,false,{e:1301752800000,s:1316872800000},{e:1333202400000,s:1348927200000},{e:1365256800000,s:1380376800000},{e:1396706400000,s:1411826400000}]},{name:\"Pacific/Fiji\",rules:[false,false,{e:1269698400000,s:1287842400000},{e:1327154400000,s:1319292000000},{e:1358604000000,s:1350741600000},{e:1390050000000,s:1382796000000},{e:1421503200000,s:1414850400000}]},{name:\"Europe/London\",rules:[{e:1224982800000,s:1206838800000},{e:1256432400000,s:1238288400000},{e:1288486800000,s:1269738000000},{e:1319936400000,s:1301187600000},{e:1351386000000,s:1332637200000},{e:1382835600000,s:1364691600000},{e:1414285200000,s:1396141200000}]}]};if(typeof a===\"undefined\"){window.jstz=b}else{a.jstz=b}}());Kameleoon.Gatherer={SCRIPT_VERSION:20170220,VISITOR_CODE_LENGTH:16,MAX_VISIT_NUMBER:1000000,SEND_TRACKING_REQUEST_SECURITY_CHECK_INTERVAL:100,MAX_VISIT_IDLE_DURATION:30*60*1000,ACTIVITY_TRACKING_INTERVAL:30*1000,INTERESTS_TRACKING_TIMEOUT_AFTER_WINDOW_LOAD:2*1000,INTERESTS_TRACKING_INTERVAL:5*60*1000,INTERESTS_FRESHNESS_DURATION:7*24*60*60*1000,IMAGES_DETECTION_TEST_IMAGE:\"images/common/personalizations/benchmark.png\",IMAGES_DETECTION_DEFAULT_CACHE_TIMEOUT:20,CUSTOM_DATA_TRACKING_INTERVAL:30*1000,TAB_COUNT_TRACKING_INTERVAL:15*1000,NUMBER_CLICKS_TRACKING_INTERVAL:30*1000,MAX_NUMBER_CONVERSIONS_IN_A_REQUEST:20,MAX_NUMBER_MENTALIST_ACTIONS_IN_A_REQUEST:10,MAX_NUMBER_TARGETING_SEGMENTS_IN_A_REQUEST:20,MAX_NUMBER_CONTAINERS_IN_A_REQUEST:20,REFERENCE_VARIATION_ID_IN_A_REQUEST:0,MAX_SUM_CUSTOM_DATA_VALUES_LENGTHES_IN_A_REQUEST:1024,MAX_HREF_LENGTH_IN_A_REQUEST:200,MAX_PAGE_TITLE_LENGTH_IN_A_REQUEST:200,GOAL_CONVERSION_PREDICTIONS_CUSTOM_DATUM_INDEX:254,DEFAULT_CUSTOM_DATUM_SCOPE:\"VISIT\",CUSTOM_DATA_RETRY_DELAY_BEFORE_CUT_OFF:100,CUSTOM_DATA_CUTOFF:3*1000,VISITOR_DATA_FROM_SERVER_TRACKING_TIMEOUT:2*1000,DEFAULT_LOCALE_LANGUAGE_TAG:\"en\",ENABLE_TAB_COUNT:false,DEBUG_LEVEL:{TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,FATAL:5},run:function(){var trackPage=function(callback){var date=new Date();this.updateIfStartOfVisit(date,true,false,false,function(startOfVisit){this.LocalDataHandler.registerAction(function(){this.saveFieldToVisitCookieOrStoredData(\"timeLastActivity\",date.getTime());Kameleoon.Visitor.setupFromStoredData(true);Kameleoon.Visitor.addPage(date,Kameleoon.Utils.computeCurrentPageCleanAbsoluteURL(),document.title,this.obtainKeyPagesIndexes(),this.obtainReferrersIndexes(startOfVisit));Kameleoon.Visitor.saveToStoredData();if(startOfVisit){this.performGoalConversionPredictionsAtStartOfVisit()}if((([\"medium\",\"full\"].indexOf(Kameleoon.Internals.configuration.trackingMode)>=0)||(startOfVisit&&([\"light\",\"medium\",\"full\"].indexOf(Kameleoon.Internals.configuration.trackingMode)>=0)))){this.sendTrackingRequest(date,\"event=page\",startOfVisit)}if(Kameleoon.API.pageCallbacks!=null){for(var k=0,n=Kameleoon.API.pageCallbacks.length;k<n;++k){try{Kameleoon.API.pageCallbacks[k](date,Kameleoon.Utils.computeCurrentPageCleanAbsoluteURL(),document.title,this.obtainKeyPagesIndexes(),this.obtainReferrersIndexes(startOfVisit))}catch(exception){}}}callback&&callback()}.bind(this),false,true,{urgent:true})}.bind(this))}.bind(this);var scheduleActivityTracking=function(){Kameleoon.Internals.runtime.Gatherer.active=false;var setActivity=function(){Kameleoon.Internals.runtime.Gatherer.active=true}.bind(this);Kameleoon.Utils.addEventListener(document,\"mousemove\",setActivity,false);Kameleoon.Utils.addEventListener(document,\"scroll\",setActivity,false);this.LocalDataHandler.registerAction(function(){this.trackActivity(Kameleoon.Internals.runtime.Gatherer.active);Kameleoon.Internals.runtime.Gatherer.active=false}.bind(this),true,false,{repeatInterval:this.ACTIVITY_TRACKING_INTERVAL})}.bind(this);var scheduleInterestsTracking=function(){var launchInterestsTrackingScheduler=function(){Kameleoon.Utils.setTimeout(function(){this.LocalDataHandler.registerAction(function(){if((!Kameleoon.Internals.runtime.gecko)&&(!Kameleoon.Internals.runtime.webkit)){return}var currentTime=new Date().getTime();Kameleoon.Internals.runtime.numberInterestChecks=0;Kameleoon.Internals.runtime.Gatherer.inheritedActiveInterestIndexes=[];Kameleoon.Internals.runtime.Gatherer.potentialFreshActiveInterestIndexes=[];for(var i=0,l=Kameleoon.Internals.runtime.Gatherer.configuration.interests.length;i<l;++i){if(!Kameleoon.Internals.runtime.Gatherer.configuration.interests[i].disabled){var lastVisitWithFreshActiveInterest=Kameleoon.Visitor.obtainLastVisitWithFreshActiveInterest(i);if((lastVisitWithFreshActiveInterest==null)||(Kameleoon.Internals.runtime.Visitor.currentVisit.timeStarted-lastVisitWithFreshActiveInterest.timeStarted>this.INTERESTS_FRESHNESS_DURATION)){Kameleoon.Internals.runtime.Gatherer.potentialFreshActiveInterestIndexes.push(i)}else{Kameleoon.Internals.runtime.Gatherer.inheritedActiveInterestIndexes.push(i)}}}this.trackInterests(Kameleoon.Internals.runtime.Gatherer.inheritedActiveInterestIndexes,false);Kameleoon.Internals.runtime.Gatherer.freshActiveInterestIndexes=[];var cacheTimeout=Kameleoon.Internals.runtime.Visitor.imagesDetectionCacheTimeout;if(cacheTimeout==null){cacheTimeout=this.IMAGES_DETECTION_DEFAULT_CACHE_TIMEOUT}for(var i=0,l=Kameleoon.Internals.runtime.Gatherer.potentialFreshActiveInterestIndexes.length;i<l;++i){var currentInterestIndex=Kameleoon.Internals.runtime.Gatherer.potentialFreshActiveInterestIndexes[i];var hashes=this.obtainFieldFromStoredData(\"interestHashes-\"+currentInterestIndex);if(!hashes){var lastCheckTime=this.obtainFieldFromStoredData(\"interestLastCheckTime-\"+currentInterestIndex);if((lastCheckTime==null)||(currentTime-lastCheckTime>=this.INTERESTS_TRACKING_INTERVAL)){this.saveFieldToStoredData(\"interestLastCheckTime-\"+currentInterestIndex,currentTime);var cachedHashesArray=hashes?hashes.split(\"|\"):[];for(var j=0,m=Kameleoon.Internals.runtime.Gatherer.configuration.interestsImagesLists[currentInterestIndex].length;j<m;++j){var currentArrayHash=this.computeListHash(Kameleoon.Internals.runtime.Gatherer.configuration.interestsImagesLists[currentInterestIndex][j]);if(cachedHashesArray.indexOf(currentArrayHash)==-1){hashes=(hashes?hashes+\"|\":\"\")+currentArrayHash;this.saveFieldToStoredData(\"interestHashes-\"+currentInterestIndex,hashes);++Kameleoon.Internals.runtime.numberInterestChecks;var iframeNode=document.createElement(\"iframe\");iframeNode.style.display=\"none\";iframeNode.className=\"KameleoonInterestDetection\";var frameCode=\"var cacheTimeout = \"+cacheTimeout+\";\";frameCode+=\"var currentInterestIndex = \"+currentInterestIndex+\";\";frameCode+=\"var images = \"+Kameleoon.Utils.JSONStringify(Kameleoon.Internals.runtime.Gatherer.configuration.interestsImagesLists[currentInterestIndex][j])+\";\";frameCode+='var CoreAlgorithm={webkit:function(b){var d;var c=false;var a=function(){window.removeEventListener(\"message\",a,false);d=new Date().getTime();var f=new Image();f.style.display=\"none\";f.style.position=\"absolute\";f.style.left=\"-9999px\";f.style.top=\"-9999px\";f.src=b;var e=function(j){if(c){--window.currentChecks;return}var h=new Date().getTime();var k=h-d;if(f.complete||f.width>0){--window.currentChecks;var g=true;if(/(\\.css|\\.js|\\.swf)/.test(f.src)){g=true}else{if(f.width==0){g=false}}if(g){c=true;window.parent.postMessage(JSON.stringify({command:\"addKameleoonInterest\",index:currentInterestIndex}),\"*\")}window.stop();window.stop();delete f;window.removeEventListener(\"message\",e,false)}else{if(h-d>cacheTimeout){--window.currentChecks;if(window.stop!==undefined){window.stop()}else{if(document.execCommand!==undefined){document.execCommand(\"Stop\",false)}}delete f;window.removeEventListener(\"message\",e,false)}else{window.postMessage(\"toNextMessageInterval\",\"*\")}}if(!c&&0==window.currentChecks){window.parent.postMessage(JSON.stringify({command:\"finishKameleoonInterestCheck\",index:currentInterestIndex}),\"*\")}};window.addEventListener(\"message\",e,false);window.postMessage(\"\",\"*\")};window.addEventListener(\"message\",a,false);window.postMessage(\"\",\"*\")}};mainCheck=CoreAlgorithm.webkit;window.currentChecks=0;for(var i=0;i<images.length;++i){++window.currentChecks;mainCheck(images[i].url)};';iframeNode.src='javascript:\\'<!doctype html><html><head><meta charset=\"utf-8\"><style>*{margin:0;padding:0;border:0;}</style></head><body><script>'+frameCode+\"<\\/script></body></html>'\";Kameleoon.Internals.runtime.headNode.appendChild(iframeNode);break}}}}}}.bind(this),true,false,{repeatInterval:this.INTERESTS_TRACKING_INTERVAL,firstRunNow:true})}.bind(this),this.INTERESTS_TRACKING_TIMEOUT_AFTER_WINDOW_LOAD)}.bind(this);if(\"complete\"==document.readyState){launchInterestsTrackingScheduler()}else{Kameleoon.Utils.addEventListener(window,\"load\",launchInterestsTrackingScheduler,false)}}.bind(this);var scheduleCustomDataTracking=function(){var obtainCustomData=function(){var obtainCustomDataVirtual=function(virtual,customDataIndexes,customDataValues,customDataOverwritesIfCollection,customDataTreated){var hasNonReadyOrNullValues=false;for(var i=0,l=Kameleoon.Internals.runtime.Gatherer.configuration.customData.length;i<l;++i){if(Kameleoon.Internals.runtime.Gatherer.customDataTreatedByIndex[i]==null){var customDatum=Kameleoon.Internals.runtime.Gatherer.configuration.customData[i];if(!customDatum.disabled){var customDatumVirtual=customDatum.virtual;if(customDatumVirtual==null){customDatumVirtual=false}if(customDatumVirtual==virtual){var customDatumCurrentValue=Kameleoon.Internals.runtime.Visitor.currentVisit.wholeVisitHistory.valueByCustomDatum[i];if((customDatumCurrentValue==null)||(!customDatum.constant)){var valueMap=this.obtainCustomDatumValueMap(i);if(valueMap!=null){var customDatumDetectedValue=valueMap.value;if(customDatumDetectedValue!=null){customDataTreated.push({name:customDatum.name,index:i});var customDatumType=customDatum.type;var customDatumIsCollection=(customDatumType==\"LIST\")||(customDatumType==\"COUNT_LIST\");if(customDatumIsCollection||(customDatumCurrentValue!=customDatumDetectedValue)||((Kameleoon.Internals.runtime.Gatherer.configuration.mappingIdentifier==i)&&(this.obtainFieldFromStoredData(\"visitsRequestSuccess\")==null))){customDataIndexes.push(i);customDataValues.push(customDatumDetectedValue);customDataOverwritesIfCollection.push(valueMap.overwrite)}}else{hasNonReadyOrNullValues=true}}else{hasNonReadyOrNullValues=true}}}}}}return hasNonReadyOrNullValues}.bind(this);var customDataIndexes=[];var customDataValues=[];var customDataOverwritesIfCollection=[];var customDataTreated=[];var hasNonReadyOrNullValues=false;hasNonReadyOrNullValues=obtainCustomDataVirtual(false,customDataIndexes,customDataValues,customDataOverwritesIfCollection,customDataTreated)||hasNonReadyOrNullValues;hasNonReadyOrNullValues=obtainCustomDataVirtual(true,customDataIndexes,customDataValues,customDataOverwritesIfCollection,customDataTreated)||hasNonReadyOrNullValues;return[customDataIndexes,customDataValues,customDataOverwritesIfCollection,customDataTreated,hasNonReadyOrNullValues]}.bind(this);var registerCustomData=function(obtainCustomDataResult){var customDataIndexes=obtainCustomDataResult[0];var customDataValues=obtainCustomDataResult[1];var customDataOverwritesIfCollection=obtainCustomDataResult[2];var customDataTreated=obtainCustomDataResult[3];for(var i=0,l=customDataIndexes.length;i<l;++i){if((Kameleoon.Internals.runtime.Gatherer.configuration.mappingIdentifier==customDataIndexes[i])&&Kameleoon.Internals.configuration.enableHistoryReconciliation){var registerVisitsRequestSuccessAndChangePreviousVisits=function(visitsFromServer){this.saveFieldToStoredData(\"visitsRequestSuccess\",true);for(var i=0,l=visitsFromServer.length;i<l;++i){Kameleoon.Visit.convertVisitFromServer(visitsFromServer[i])}if(visitsFromServer.length>0){this.LocalDataHandler.registerAction(function(){Kameleoon.Visitor.setupFromStoredData(true);Kameleoon.Visitor.changePreviousVisits(visitsFromServer);var previousVisit=visitsFromServer[visitsFromServer.length-1];var correctedVisitorCode=previousVisit.visitorCode;var correctedVisitNumber=previousVisit.visitNumber+1;Kameleoon.Internals.runtime.Visitor.currentVisit.visitorCode=correctedVisitorCode;Kameleoon.Internals.runtime.Visitor.currentVisit.visitNumber=correctedVisitNumber;this.saveFieldToVisitCookieOrStoredData(\"visitorCode\",correctedVisitorCode);this.saveFieldToVisitCookieOrStoredData(\"visitNumber\",correctedVisitNumber);Kameleoon.Visitor.updateAPIAfterCurrentVisitChange();Kameleoon.Visitor.saveToStoredData();this.inheritVisitorScopeCustomDataAndTrackVisitorDataFromServer()}.bind(this),false,true,{urgent:true})}}.bind(this);Kameleoon.Utils.performBeaconServerCall(this.obtainVisitsRequestPrefix()+\"siteCode=\"+Kameleoon.Internals.configuration.siteCode+\"&mappingIdentifier=\"+customDataIndexes[i]+\"&mappingValue=\"+encodeURIComponent(customDataValues[i]),function(){if((this.readyState==4)&&(this.status==200)){registerVisitsRequestSuccessAndChangePreviousVisits(Kameleoon.Utils.JSONParse(this.responseText))}})}}this.trackCustomData(customDataIndexes,customDataValues,customDataOverwritesIfCollection);for(var i=0,l=customDataTreated.length;i<l;++i){var customDatumTreated=customDataTreated[i];Kameleoon.API.state.customDataTreated[customDatumTreated.name]=true;Kameleoon.Internals.runtime.Gatherer.customDataTreatedByIndex[customDatumTreated.index]=true}}.bind(this);this.LocalDataHandler.registerAction(function(){var obtainCustomDataFirstTryStartTime=new Date().getTime();var obtainCustomDataWithRetriesBeforeCutOff=null;obtainCustomDataWithRetriesBeforeCutOff=function(){var obtainCustomDataResult=obtainCustomData();if(obtainCustomDataResult[4]&&(new Date().getTime()-obtainCustomDataFirstTryStartTime<this.CUSTOM_DATA_CUTOFF)){Kameleoon.Utils.setTimeout(obtainCustomDataWithRetriesBeforeCutOff,this.CUSTOM_DATA_RETRY_DELAY_BEFORE_CUT_OFF)}else{registerCustomData(obtainCustomDataResult)}}.bind(this);obtainCustomDataWithRetriesBeforeCutOff()}.bind(this),Kameleoon.Internals.runtime.Gatherer.customDataUpdateNeedsLocalData,false,{});this.LocalDataHandler.registerAction(function(){registerCustomData(obtainCustomData())}.bind(this),Kameleoon.Internals.runtime.Gatherer.customDataUpdateNeedsLocalData,false,{repeatInterval:this.CUSTOM_DATA_TRACKING_INTERVAL,firstRunNow:true})}.bind(this);var scheduleTabCountTracking=function(){if(Kameleoon.Internals.configuration.useWideDomainSupport){Kameleoon.Internals.runtime.Gatherer.tabCode=Kameleoon.Utils.obtainRandomString(16);this.LocalDataHandler.registerAction(function(){Kameleoon.Utils.postMessageToExternalIframe(Kameleoon.Utils.JSONStringify({type:\"tabcount\",tabCode:Kameleoon.Internals.runtime.Gatherer.tabCode,deadTime:new Date().getTime()+this.TAB_COUNT_TRACKING_INTERVAL,callbackId:Kameleoon.Utils.addPostMessageCallback(this.trackTabCount)}))}.bind(this),true,false,{repeatInterval:this.TAB_COUNT_TRACKING_INTERVAL,firstRunNow:true})}}.bind(this);var scheduleNumberClicksTracking=function(){Kameleoon.Internals.runtime.Gatherer.numberClicks=0;Kameleoon.Utils.addEventListener(document,\"click\",function(){Kameleoon.Internals.runtime.Gatherer.numberClicks++}.bind(this),false);this.LocalDataHandler.registerAction(function(){this.trackNumberClicks(Kameleoon.Internals.runtime.Gatherer.numberClicks);Kameleoon.Internals.runtime.Gatherer.numberClicks=0}.bind(this),true,false,{repeatInterval:this.NUMBER_CLICKS_TRACKING_INTERVAL,firstRunNow:true})}.bind(this);var processMessageEvent=function(event){if(typeof event.data!==\"string\"){return}if((event.data.indexOf(\"addKameleoonInterest\")>=0)||(event.data.indexOf(\"finishKameleoonInterestCheck\")>=0)){var messageData=Kameleoon.Utils.JSONParse(event.data);if(\"addKameleoonInterest\"==messageData.command){Kameleoon.Internals.runtime.Gatherer.freshActiveInterestIndexes.push(messageData.index)}--Kameleoon.Internals.runtime.numberInterestChecks;if(0==Kameleoon.Internals.runtime.numberInterestChecks){Kameleoon.Utils.setTimeout(function(){var iframes=document.getElementsByClassName(\"KameleoonInterestDetection\");for(var i=0,l=iframes.length;i<l;++i){var iframe=iframes.item(0);iframe.parentNode.removeChild(iframe)}this.trackInterests(Kameleoon.Internals.runtime.Gatherer.freshActiveInterestIndexes,true)}.bind(this),300)}return}}.bind(this);if(Kameleoon.API==null){Kameleoon.API={}}if(Kameleoon.API.state==null){Kameleoon.API.state={}}Kameleoon.API.state.customDataTreated={};if(Kameleoon.Internals.runtime.Gatherer==null){Kameleoon.Internals.runtime.Gatherer={}}if(Kameleoon.Internals.configuration.environment==\"DEVELOPMENT\"){Kameleoon.Internals.runtime.Gatherer.configuration=Kameleoon.Utils.clone(Kameleoon.Internals.configuration.Gatherer)}else{Kameleoon.Internals.runtime.Gatherer.configuration=Kameleoon.Utils.JSONParse(Kameleoon.Utils.decodeString(Kameleoon.Internals.configuration.Gatherer))}Kameleoon.Internals.runtime.Gatherer.customDataTreatedByIndex={};Kameleoon.Internals.runtime.Gatherer.customDataUpdateNeedsLocalData=false;for(var i=0,l=Kameleoon.Internals.runtime.Gatherer.configuration.customData.length;i<l;++i){var customDatum=Kameleoon.Internals.runtime.Gatherer.configuration.customData[i];if(!customDatum.disabled){var customDatumScope=this.obtainCorrectedCustomDatumScope(customDatum.scope);if((\"VISIT\"==customDatumScope)||(\"VISITOR\"==customDatumScope)){Kameleoon.Internals.runtime.Gatherer.customDataUpdateNeedsLocalData=true;break}}}if(Kameleoon.Internals.runtime.Visitor==null){Kameleoon.Internals.runtime.Visitor={}}this.initializeTabDataIfNecessary();if(this.obtainFieldFromTabData(\"valueByCustomDatum\")==null){this.saveFieldToTabData(\"valueByCustomDatum\",{})}this.initializeStoredDataIfNecessary();if(!Kameleoon.Internals.configuration.useWideDomainSupport){this.initializeVisitCookieIfNecessary()}this.LocalDataHandler.init();Kameleoon.Utils.addEventListener(window,\"message\",processMessageEvent,false);if(\"https:\"==window.location.protocol){var interestsImagesListsHTTPS=[];for(var i=0,l=Kameleoon.Internals.runtime.Gatherer.configuration.interestsImagesLists.length;i<l;++i){var interestsImagesListsHTTPS_i=[];for(var j=0,m=Kameleoon.Internals.runtime.Gatherer.configuration.interestsImagesLists[i].length;j<m;++j){var interestsImagesListsHTTPS_i_j=[];for(var k=0,n=Kameleoon.Internals.runtime.Gatherer.configuration.interestsImagesLists[i][j].length;k<n;++k){if(0==Kameleoon.Internals.runtime.Gatherer.configuration.interestsImagesLists[i][j][k].url.indexOf(\"https:\")){interestsImagesListsHTTPS_i_j.push(Kameleoon.Internals.runtime.Gatherer.configuration.interestsImagesLists[i][j][k])}}interestsImagesListsHTTPS_i.push(interestsImagesListsHTTPS_i_j)}interestsImagesListsHTTPS.push(interestsImagesListsHTTPS_i)}Kameleoon.Internals.runtime.Gatherer.configuration.interestsImagesLists=interestsImagesListsHTTPS}if((Kameleoon.Mentalist!=null)&&(!Kameleoon.Mentalist.computeIsSecure())){Kameleoon.Mentalist=null}this.LocalDataHandler.registerAction(function(){if(Kameleoon.Internals.runtime.storedData[\"Kameleoon.Gatherer.startsOfVisitForCurrentPage\"]!=null){var gathererStoredDataNamePrefix=\"Kameleoon.Gatherer.\";for(var key in Kameleoon.Internals.runtime.storedData){if(key.indexOf(gathererStoredDataNamePrefix)==0){this.saveFieldToStoredData(key.slice(gathererStoredDataNamePrefix.length),Kameleoon.Internals.runtime.storedData[key]);delete Kameleoon.Internals.runtime.storedData[key]}}Kameleoon.Visitor.setupFromStoredDataOLD();Kameleoon.Visitor.saveToStoredData();for(var key in Kameleoon.Internals.runtime.storedData){if(key.indexOf(Kameleoon.Visitor.STORED_DATA_NAME_PREFIX)==0){delete Kameleoon.Internals.runtime.storedData[key]}}}if(Kameleoon.Internals.runtime.Gatherer.configuration.enableImagesDetectionCacheTimeoutComputation){Kameleoon.Visitor.setupFromStoredData(false);if(Kameleoon.Internals.runtime.Visitor.imagesDetectionCacheTimeout==null){var downloadImage=function(url,cacheParameterValue,callback){var image=new Image();var timeStarted=new Date().getTime();image.onload=function(){var timeEnded=new Date().getTime();callback&&callback(timeEnded-timeStarted)};image.src=url+\"?cache=\"+cacheParameterValue}.bind(this);var cacheParameterValue=new Date().getTime();downloadImage(Kameleoon.Internals.configuration.staticURL+this.IMAGES_DETECTION_TEST_IMAGE,cacheParameterValue,function(timeWithoutCache){downloadImage(Kameleoon.Internals.configuration.staticURL+this.IMAGES_DETECTION_TEST_IMAGE,cacheParameterValue,function(timeWithCache){this.LocalDataHandler.registerAction(function(){Kameleoon.Visitor.setupFromStoredData(false);Kameleoon.Internals.runtime.Visitor.imagesDetectionTimeWithoutCache=timeWithoutCache;Kameleoon.Internals.runtime.Visitor.imagesDetectionTimeWithCache=timeWithCache;var timeRatio=timeWithoutCache/timeWithCache;if(timeRatio>=6){Kameleoon.Internals.runtime.Visitor.imagesDetectionCacheTimeout=2*timeWithCache}else{if(timeRatio>=4){Kameleoon.Internals.runtime.Visitor.imagesDetectionCacheTimeout=1.75*timeWithCache}else{if(timeRatio>=2){Kameleoon.Internals.runtime.Visitor.imagesDetectionCacheTimeout=1.5*timeWithCache}else{Kameleoon.Internals.runtime.Visitor.imagesDetectionCacheTimeout=1.25*timeWithCache}}}Kameleoon.Visitor.saveToStoredData()}.bind(this),false,true,{})}.bind(this))}.bind(this))}}this.saveFieldToStoredData(\"startsOfVisitForCurrentPage\",0);try{eval(Kameleoon.Internals.runtime.Gatherer.configuration.customScriptBefore)}catch(error){}trackPage(function(){scheduleActivityTracking();scheduleInterestsTracking();scheduleCustomDataTracking();if(this.ENABLE_TAB_COUNT){scheduleTabCountTracking()}scheduleNumberClicksTracking()}.bind(this))}.bind(this),false,true,{urgent:true})},trackActivity:function(b){var a=new Date();var c=function(d){this.LocalDataHandler.registerAction(function(){if(b||(!this.obtainVisitIsFinished(a))){Kameleoon.Visitor.setupFromStoredData(true);Kameleoon.Visitor.addActivity(a,b);Kameleoon.Visitor.saveToStoredData();if(([\"full\"].indexOf(Kameleoon.Internals.configuration.trackingMode)>=0)){this.sendTrackingRequest(a,\"event=activity&active=\"+b,d)}if(Kameleoon.API.activityCallbacks!=null){for(var e=0,g=Kameleoon.API.activityCallbacks.length;e<g;++e){try{Kameleoon.API.activityCallbacks[e](a,b)}catch(f){}}}}}.bind(this),false,true,{urgent:true})}.bind(this);if(b){this.updateIfStartOfVisit(a,false,false,false,function(d){this.LocalDataHandler.registerAction(function(){this.saveFieldToVisitCookieOrStoredData(\"timeLastActivity\",a.getTime());if(d){this.performGoalConversionPredictionsAtStartOfVisit()}c(d)}.bind(this),false,true,{urgent:true})}.bind(this))}else{c(false)}},trackInterests:function(b,a){if(b.length>0){this.LocalDataHandler.registerAction(function(){var d=new Date();if(!this.obtainVisitIsFinished(d)){Kameleoon.Visitor.setupFromStoredData(true);Kameleoon.Visitor.addInterests(b,a);Kameleoon.Visitor.saveToStoredData();if(([\"full\"].indexOf(Kameleoon.Internals.configuration.trackingMode)>=0)){this.sendTrackingRequest(d,\"event=interests&activeInterests=\"+this.joinAll(b,\"-\")+\"&fresh=\"+a,false)}if(Kameleoon.API.interestsCallbacks!=null){for(var c=0,f=Kameleoon.API.interestsCallbacks.length;c<f;++c){try{Kameleoon.API.interestsCallbacks[c](d,b,a)}catch(e){}}}}}.bind(this),false,true,{})}},trackSearch:function(d,c,a){var b=new Date();this.updateIfStartOfVisit(b,false,false,false,function(e){this.LocalDataHandler.registerAction(function(){this.saveFieldToVisitCookieOrStoredData(\"timeLastActivity\",b.getTime());if(e){this.performGoalConversionPredictionsAtStartOfVisit()}Kameleoon.Visitor.setupFromStoredData(true);Kameleoon.Visitor.addSearch(b,this.obtainKeyWordsIndexes(d),c,a);Kameleoon.Visitor.saveToStoredData();if(([\"full\"].indexOf(Kameleoon.Internals.configuration.trackingMode)>=0)){this.sendTrackingRequest(b,\"event=search&keyWords=\"+this.joinAll(this.obtainKeyWordsIndexes(d),\"-\")+\"&numberResults=\"+c+\"&followed=\"+a,e)}if(Kameleoon.API.searchCallbacks!=null){for(var f=0,h=Kameleoon.API.searchCallbacks.length;f<h;++f){try{Kameleoon.API.searchCallbacks[f](b,this.obtainKeyWordsIndexes(d),c,a)}catch(g){}}}}.bind(this),false,true,{urgent:true})}.bind(this))},trackConversions:function(c,a){var b=c.length;if(b>0){this.LocalDataHandler.registerAction(function(){var g=new Date();if(!this.obtainVisitIsFinished(g)){var t=([\"light\",\"medium\",\"full\"].indexOf(Kameleoon.Internals.configuration.trackingMode)>=0);(!a)&&Kameleoon.Visitor.setupFromStoredData(true);for(var s=0;s<b;s+=this.MAX_NUMBER_CONVERSIONS_IN_A_REQUEST){var o=Math.min(this.MAX_NUMBER_CONVERSIONS_IN_A_REQUEST,b-s);var r=null;if(t){r=\"event=conversions&number=\"+o}for(var q=0;q<o;++q){var m=c[s+q];var p=m.goalId;var d=parseFloat(m.revenue);var l=(m.negative===true);if(isNaN(d)){this.logDebugMessage(\"Revenue given = \"+m.revenue+\"; revenue set to 0.0\",this.DEBUG_LEVEL.ERROR,\"CustomerError\");d=0}Kameleoon.Visitor.addConversion(p,d,l);if(t){r+=(\"&goalId\"+q+\"=\"+p+\"&revenue\"+q+\"=\"+d);if(l){r+=(\"&negative\"+q+\"=true\")}}if(Kameleoon.API.conversionCallbacks!=null){for(var h=0,f=Kameleoon.API.conversionCallbacks.length;h<f;++h){try{Kameleoon.API.conversionCallbacks[h](g,p,d,l)}catch(e){}}}}if(t){this.sendTrackingRequest(g,r,false)}}(!a)&&Kameleoon.Visitor.saveToStoredData()}}.bind(this),(!a)&&false,(!a)&&true,{urgent:true})}},trackMentalistActions:function(a,d,b){var c=a.length;if(c>0){this.LocalDataHandler.registerAction(function(){var h=new Date();if(!this.obtainVisitIsFinished(h)){var r=([\"full\"].indexOf(Kameleoon.Internals.configuration.trackingMode)>=0);Kameleoon.Visitor.setupFromStoredData(true);for(var q=0;q<c;q+=this.MAX_NUMBER_MENTALIST_ACTIONS_IN_A_REQUEST){var m=Math.min(this.MAX_NUMBER_MENTALIST_ACTIONS_IN_A_REQUEST,c-q);var p=null;if(r){p=\"event=mentalistActions&number=\"+m}for(var o=0;o<m;++o){var u=q+o;var e=a[u];var s=d[u];var t=b[u];Kameleoon.Visitor.addMentalistAction(e,s,t);if(r){p+=(\"&actionTakenIds\"+o+\"=\"+this.joinAll(e,\"-\")+\"&actionNotTakenIds\"+o+\"=\"+this.joinAll(s,\"-\")+\"&mentalistDecision\"+o+\"=\"+t)}if(Kameleoon.API.mentalistActionCallbacks!=null){for(var l=0,g=Kameleoon.API.mentalistActionCallbacks.length;l<g;++l){try{Kameleoon.API.mentalistActionCallbacks[l](h,e,s,t)}catch(f){}}}}if(r){this.sendTrackingRequest(h,p,false)}}Kameleoon.Visitor.saveToStoredData()}}.bind(this),false,true,{urgent:true})}},trackTargetingSegments:function(a){var b=a.length;if(b>0){this.LocalDataHandler.registerAction(function(){var f=new Date();if(!this.obtainVisitIsFinished(f)){var p=([\"light\",\"medium\",\"full\"].indexOf(Kameleoon.Internals.configuration.trackingMode)>=0);Kameleoon.Visitor.setupFromStoredData(true);for(var o=0;o<b;o+=this.MAX_NUMBER_TARGETING_SEGMENTS_IN_A_REQUEST){var h=Math.min(this.MAX_NUMBER_TARGETING_SEGMENTS_IN_A_REQUEST,b-o);var m=null;if(p){m=\"event=targetingSegments&number=\"+h}for(var l=0;l<h;++l){var e=o+l;var q=a[e];Kameleoon.Visitor.addTargetingSegment(f,q);if(p){m+=(\"&id\"+l+\"=\"+q)}if(Kameleoon.API.targetingSegmentCallbacks!=null){for(var g=0,d=Kameleoon.API.targetingSegmentCallbacks.length;g<d;++g){try{Kameleoon.API.targetingSegmentCallbacks[g](f,q)}catch(c){}}}}if(p){this.sendTrackingRequest(f,m,false)}}Kameleoon.Visitor.saveToStoredData()}}.bind(this),false,true,{urgent:true})}},trackContainers:function(a,b){if((a.length+b.length)>0){this.LocalDataHandler.registerAction(function(){var c=new Date();if(!this.obtainVisitIsFinished(c)){var d=function(m,g){var u=m.length;if(u>0){for(var s=0;s<u;s+=this.MAX_NUMBER_CONTAINERS_IN_A_REQUEST){var p=Math.min(this.MAX_NUMBER_CONTAINERS_IN_A_REQUEST,u-s);var r=null;if(g){r=\"event=containers&number=\"+p}for(var q=0;q<p;++q){var f=m[s+q];var e=null;var t=null;switch(f.type.toUpperCase()){case\"EXPERIMENT\":e=Kameleoon.Visitor.addExperiment.bind(Kameleoon.Visitor);t=Kameleoon.API.experimentCallbacks;break;case\"PERSONALIZATION\":e=Kameleoon.Visitor.addPersonalization.bind(Kameleoon.Visitor);t=Kameleoon.API.personalizationCallbacks;break}if(e!=null){e(c,f.id,f.variationId,f.mentalistDecision)}if(g){r+=(\"&type\"+q+\"=\"+f.type+\"&id\"+q+\"=\"+f.id+\"&variationId\"+q+\"=\"+(f.variationId==null?this.REFERENCE_VARIATION_ID_IN_A_REQUEST:f.variationId)+\"&mentalistDecision\"+q+\"=\"+f.mentalistDecision)}if(t!=null){for(var o=0,l=t.length;o<l;++o){try{t[o](c,f.id,f.variationId,f.mentalistDecision)}catch(h){}}}}if(g){this.sendTrackingRequest(c,r,false)}}}}.bind(this);Kameleoon.Visitor.setupFromStoredData(true);d(a,([\"light\",\"medium\",\"full\"].indexOf(Kameleoon.Internals.configuration.trackingMode)>=0));d(b,false);Kameleoon.Visitor.saveToStoredData()}}.bind(this),false,true,{urgent:true})}},trackWeather:function(a,c,e,b,g,h,f,d){this.LocalDataHandler.registerAction(function(){var j=new Date();if(!this.obtainVisitIsFinished(j)){Kameleoon.Visitor.setupFromStoredData(true);Kameleoon.Visitor.addWeather(a,c,e,b,g,h,f,d);Kameleoon.Visitor.saveToStoredData();if(([\"full\"].indexOf(Kameleoon.Internals.configuration.trackingMode)>=0)){this.sendTrackingRequest(j,\"event=weather&temperature=\"+a+\"&humidity=\"+c+\"&pressure=\"+e+\"&windSpeed=\"+b+\"&cloudiness=\"+g+\"&sunriseTime=\"+h+\"&sunsetTime=\"+f+(d!=null?\"&weatherCode=\"+d:\"\"),false)}if(Kameleoon.API.weatherCallbacks!=null){for(var i=0,m=Kameleoon.API.weatherCallbacks.length;i<m;++i){try{Kameleoon.API.weatherCallbacks[i](j,a,c,e,b,g,h,f,d)}catch(l){}}}}}.bind(this),false,true,{})},trackCustomData:function(d,c,e,b){var a=d.length;if(a>0){this.LocalDataHandler.registerAction(function(){var z=new Date();if(!this.obtainVisitIsFinished(z)){var A=[];var f=[];var q=[];for(var x=0;x<a;x++){var l=d[x];var t=c[x];var B=e[x];if((l!=null)&&(t!=null)){var o=false;if(!o){o=(this.GOAL_CONVERSION_PREDICTIONS_CUSTOM_DATUM_INDEX==l)}if(!o){o=((!Kameleoon.Internals.runtime.Gatherer.configuration.customData[l].constant)||(Kameleoon.Internals.runtime.Visitor.currentVisit.wholeVisitHistory.valueByCustomDatum[l]==null))}if(o){A.push(l);f.push(t);q.push(B)}}}d=A;c=f;e=q;a=d.length;if(a>0){var g=[];var j=[];var y=[];var u=0;var h=function(){var C=\"event=customData&indexes=\"+this.joinAll(g,\"-\");for(var n=0,i=g.length;n<i;++n){var k=g[n];C+=\"&value\"+k+\"=\"+encodeURIComponent(j[n])+\"&overwriteIfCollection\"+k+\"=\"+y[n]}this.sendTrackingRequest(z,C,false)}.bind(this);var r=([\"medium\",\"full\"].indexOf(Kameleoon.Internals.configuration.trackingMode)>=0);(!b)&&Kameleoon.Visitor.setupFromStoredData(true);for(var x=0;x<a;x++){var l=d[x];var t=c[x];var B=e[x];var p=null;if(this.GOAL_CONVERSION_PREDICTIONS_CUSTOM_DATUM_INDEX!=l){p=Kameleoon.Internals.runtime.Gatherer.configuration.customData[l]}Kameleoon.Visitor.addCustomData(l,t,B);if((this.GOAL_CONVERSION_PREDICTIONS_CUSTOM_DATUM_INDEX!=l)&&(\"PAGE\"==this.obtainCorrectedCustomDatumScope(p.scope))){this.obtainFieldFromTabData(\"valueByCustomDatum\")[l]=Kameleoon.Internals.runtime.Visitor.currentVisit.wholeVisitHistory.valueByCustomDatum[l]}if((this.GOAL_CONVERSION_PREDICTIONS_CUSTOM_DATUM_INDEX==l)||(!p.localOnly)){if(r){var w=t.toString().length;if(w<=this.MAX_SUM_CUSTOM_DATA_VALUES_LENGTHES_IN_A_REQUEST){if(u+w<=this.MAX_SUM_CUSTOM_DATA_VALUES_LENGTHES_IN_A_REQUEST){g.push(l);j.push(t);y.push(B);u+=w}else{h();g=[l];j=[t];y=[B];u=w}}}}if(Kameleoon.API.customDatumCallbacks!=null){for(var v=0,s=Kameleoon.API.customDatumCallbacks.length;v<s;++v){try{Kameleoon.API.customDatumCallbacks[v](z,l,t,B)}catch(m){}}}}(!b)&&Kameleoon.Visitor.saveToStoredData();if(g.length>0){h()}}}}.bind(this),(!b)&&false,(!b)&&Kameleoon.Internals.runtime.Gatherer.customDataUpdateNeedsLocalData,{urgent:true})}},trackTabCount:function(a){this.LocalDataHandler.registerAction(function(){var c=new Date();if(!this.obtainVisitIsFinished(c)){Kameleoon.Visitor.setupFromStoredData(true);Kameleoon.Visitor.addTabCount(a);Kameleoon.Visitor.saveToStoredData();if(([\"full\"].indexOf(Kameleoon.Internals.configuration.trackingMode)>=0)){this.sendTrackingRequest(c,\"event=tabCount&tabCount=\"+a,false)}if(Kameleoon.API.tabCountCallbacks!=null){for(var b=0,e=Kameleoon.API.tabCountCallbacks.length;b<e;++b){try{Kameleoon.API.tabCountCallbacks[b](c,a)}catch(d){}}}}}.bind(this),false,true,{})},trackProduct:function(a){this.LocalDataHandler.registerAction(function(){var c=new Date();if(!this.obtainVisitIsFinished(c)){Kameleoon.Visitor.setupFromStoredData(true);Kameleoon.Visitor.addProduct(a);Kameleoon.Visitor.saveToStoredData();if(([].indexOf(Kameleoon.Internals.configuration.trackingMode)>=0)){this.sendTrackingRequest(c,\"event=product&code=\"+a,false)}if(Kameleoon.API.productCallbacks!=null){for(var b=0,e=Kameleoon.API.productCallbacks.length;b<e;++b){try{Kameleoon.API.productCallbacks[b](c,a)}catch(d){}}}}}.bind(this),false,true,{})},trackGeolocation:function(d,b,c,e,a){this.LocalDataHandler.registerAction(function(){var g=new Date();if(!this.obtainVisitIsFinished(g)){Kameleoon.Visitor.setupFromStoredData(true);Kameleoon.Visitor.addGeolocation(d,b,c,e,a);Kameleoon.Visitor.saveToStoredData();if(([\"full\"].indexOf(Kameleoon.Internals.configuration.trackingMode)>=0)){this.sendTrackingRequest(g,\"event=geolocation\"+(d!=null?\"&country=\"+d:\"\")+(b!=null?\"&region=\"+b:\"\")+(c!=null?\"&city=\"+c:\"\")+(e!=null?\"&latitude=\"+e:\"\")+(a!=null?\"&longitude=\"+a:\"\"),false)}if(Kameleoon.API.geolocationCallbacks!=null){for(var f=0,i=Kameleoon.API.geolocationCallbacks.length;f<i;++f){try{Kameleoon.API.geolocationCallbacks[f](g,d,b,c,e,a)}catch(h){}}}}}.bind(this),false,true,{})},trackNumberClicks:function(a){this.LocalDataHandler.registerAction(function(){var c=new Date();if(!this.obtainVisitIsFinished(c)){Kameleoon.Visitor.setupFromStoredData(true);Kameleoon.Visitor.addNumberClicks(a);Kameleoon.Visitor.saveToStoredData();if(([\"full\"].indexOf(Kameleoon.Internals.configuration.trackingMode)>=0)){this.sendTrackingRequest(c,\"event=numberClicks&number=\"+a,false)}if(Kameleoon.API.numberClicksCallbacks!=null){for(var b=0,e=Kameleoon.API.numberClicksCallbacks.length;b<e;++b){try{Kameleoon.API.numberClicksCallbacks[b](c,a)}catch(d){}}}}}.bind(this),false,true,{})},trackAdBlocker:function(){this.LocalDataHandler.registerAction(function(){var b=new Date();if(!this.obtainVisitIsFinished(b)){Kameleoon.Visitor.setupFromStoredData(true);Kameleoon.Visitor.addAdBlocker();Kameleoon.Visitor.saveToStoredData();if(([\"full\"].indexOf(Kameleoon.Internals.configuration.trackingMode)>=0)){this.sendTrackingRequest(b,\"event=adBlocker\",false)}if(Kameleoon.API.adBlockerCallbacks!=null){for(var a=0,d=Kameleoon.API.adBlockerCallbacks.length;a<d;++a){try{Kameleoon.API.adBlockerCallbacks[a](b)}catch(c){}}}}}.bind(this),false,true,{})},startNewVisit:function(a,b){this.updateIfStartOfVisit(a,false,true,b,function(c){this.LocalDataHandler.registerAction(function(){}.bind(this),false,true,{urgent:true})}.bind(this))},sendTrackingRequest:function(a,c,b){if(this.checkSendTrackingRequestIsSecure()){this.sendDelayedTrackingRequests();this.secureSendTrackingRequest(a,c,b)}else{this.addDelayedTrackingRequest(a,c,b)}},checkSendTrackingRequestIsSecure:function(){return(typeof document.visibilityState==\"undefined\")||(document.visibilityState!=\"prerender\")},addDelayedTrackingRequest:function(a,c,b){if(Kameleoon.Internals.runtime.Gatherer.delayedSendTrackingRequestParameters==null){Kameleoon.Internals.runtime.Gatherer.delayedSendTrackingRequestParameters=[]}Kameleoon.Internals.runtime.Gatherer.delayedSendTrackingRequestParameters.push([a,c,b]);if(Kameleoon.Internals.runtime.Gatherer.sendTrackingRequestSecurityCheckIntervalSetup==null){Kameleoon.Utils.setInterval(function(){if(this.checkSendTrackingRequestIsSecure()){this.sendDelayedTrackingRequests()}}.bind(this),this.SEND_TRACKING_REQUEST_SECURITY_CHECK_INTERVAL);Kameleoon.Internals.runtime.Gatherer.sendTrackingRequestSecurityCheckIntervalSetup=true}},sendDelayedTrackingRequests:function(){if(Kameleoon.Internals.runtime.Gatherer.delayedSendTrackingRequestParameters!=null){for(var b=0,a=Kameleoon.Internals.runtime.Gatherer.delayedSendTrackingRequestParameters.length;b<a;++b){var c=Kameleoon.Internals.runtime.Gatherer.delayedSendTrackingRequestParameters[b];this.secureSendTrackingRequest(c[0],c[1],c[2])}Kameleoon.Internals.runtime.Gatherer.delayedSendTrackingRequestParameters=null}},secureSendTrackingRequest:function(c,j,i){if((!Kameleoon.Internals.runtime.simulationMode)&&(!Kameleoon.Internals.runtime.proxyMode)&&Kameleoon.Internals.runtime.Gatherer.configuration.track&&(!this.obtainFieldFromVisitCookieOrStoredData(\"untrackedVisit\"))){var d=this.obtainFieldFromStoredData(\"visitStaticDataSent\");var g=this.obtainFieldFromStoredData(\"landingPageHref\");var k=this.obtainFieldFromStoredData(\"landingPageTitle\");var b=this.obtainFieldFromStoredData(\"landingPages\")||[null];var a=this.obtainFieldFromStoredData(\"firstReferrerHref\");var l=this.obtainFieldFromStoredData(\"firstReferrers\")||[null];var h=\"&siteCode=\"+Kameleoon.Internals.configuration.siteCode+\"&visitorCode=\"+this.obtainFieldFromVisitCookieOrStoredData(\"visitorCode\")+\"&visitNumber=\"+this.obtainFieldFromVisitCookieOrStoredData(\"visitNumber\")+\"&startOfVisit=\"+(i===true)+\"&href=\"+encodeURIComponent(Kameleoon.Utils.computeCurrentPageCleanAbsoluteURL().slice(0,this.MAX_HREF_LENGTH_IN_A_REQUEST))+\"&title=\"+encodeURIComponent(document.title.slice(0,this.MAX_PAGE_TITLE_LENGTH_IN_A_REQUEST))+\"&keyPages=\"+this.joinAll(this.obtainKeyPagesIndexes(),\"-\")+\"&referrers=\"+this.joinAll(this.obtainReferrersIndexes(i),\"-\")+\"&scriptVersion=\"+this.SCRIPT_VERSION+\"&time=\"+c.getTime()+\"&timeLastActivity=\"+this.obtainFieldFromVisitCookieOrStoredData(\"timeLastActivity\");if(d==null){h+=\"&trackingMode=\"+Kameleoon.Internals.configuration.trackingMode+\"&timeSincePreviousVisit=\"+this.obtainFieldFromVisitCookieOrStoredData(\"timeSincePreviousVisit\")+(g!=null?\"&landingPageHref=\"+encodeURIComponent(g.slice(0,this.MAX_HREF_LENGTH_IN_A_REQUEST)):\"\")+(k!=null?\"&landingPageTitle=\"+encodeURIComponent(k.slice(0,this.MAX_PAGE_TITLE_LENGTH_IN_A_REQUEST)):\"\")+\"&landingPages=\"+this.joinAll(b,\"-\")+(a!=null?\"&firstReferrerHref=\"+encodeURIComponent(a.slice(0,this.MAX_HREF_LENGTH_IN_A_REQUEST)):\"\")+\"&firstReferrers=\"+this.joinAll(l,\"-\")+\"&timeZoneGroups=\"+this.joinAll(this.obtainTimeZoneGroupsIndexes(),\"-\")+\"&language=\"+this.obtainLanguageIndex()+\"&browser=\"+this.obtainBrowserIndex()+\"&browserVersion=\"+Kameleoon.Internals.runtime.browserVersion+\"&mobileBrowser=\"+Kameleoon.Internals.runtime.mobileDevice+\"&os=\"+this.obtainOSIndex()+\"&windowWidth=\"+this.obtainWindowWidth()+\"&windowHeight=\"+this.obtainWindowHeight()+\"&screenWidth=\"+this.obtainScreenWidth()+\"&screenHeight=\"+this.obtainScreenHeight()+\"&javaEnabled=\"+this.obtainJavaEnabled()+\"&timeZoneId=\"+this.obtainTimeZoneId()+\"&localeLanguageTag=\"+this.obtainLocaleLanguageTag()+\"&deviceType=\"+Kameleoon.Internals.runtime.deviceType+\"&browserName=\"+this.obtainBrowser()+\"&osName=\"+this.obtainOS()}var f=null;if(d==null){var e=function(){this.LocalDataHandler.registerAction(function(){this.saveFieldToStoredData(\"visitStaticDataSent\",true)}.bind(this),false,true,{})}.bind(this);f=function(){if((this.readyState==4)&&((this.status==200)||(this.status==204))){e()}}}Kameleoon.Utils.performBeaconServerCall(this.obtainTrackingRequestPrefix()+\"p=\"+encodeURIComponent(Kameleoon.Utils.encodeString(j+h)),f,null)}},updateIfStartOfVisit:function(date,callerIsTrackPage,forceStartOfVisit,forceStartOfVisitor,callback){var finalCallback=function(startOfVisit){if((Kameleoon.Internals.configuration.segmentUserIdJavaScriptVarPath!=null)&&(window.WebSocket!=null)){var userId;try{userId=eval(Kameleoon.Internals.configuration.segmentUserIdJavaScriptVarPath)}catch(e){userId=null}if((Kameleoon.Internals.runtime.Gatherer.segmentWebSocket!=null)&&(Kameleoon.Internals.runtime.Gatherer.segmentWebSocketUserId!=userId)){try{Kameleoon.Internals.runtime.Gatherer.segmentWebSocket.close()}catch(e){}Kameleoon.Internals.runtime.Gatherer.segmentWebSocket=null;Kameleoon.Internals.runtime.Gatherer.segmentWebSocketUserId=null}if((Kameleoon.Internals.runtime.Gatherer.segmentWebSocket==null)&&(userId!=null)){Kameleoon.Internals.runtime.Gatherer.segmentWebSocket=new WebSocket(this.obtainSegmentWebSocketURLPrefix()+Kameleoon.Internals.configuration.siteCode+\"/\"+userId);Kameleoon.Internals.runtime.Gatherer.segmentWebSocket.onmessage=function(event){var customDatumValueByName=JSON.parse(event.data);var customDatumIndexesToTrack=[];var customDatumValuesToTrack=[];var customDatumOverwritesIfCollectionToTrack=[];var customData=Kameleoon.Internals.runtime.Gatherer.configuration.customData;for(var customDatumName in customDatumValueByName){for(var i=0,l=customData.length;i<l;++i){var customDatum=customData[i];if(!customDatum.disabled){if(customDatum.name==customDatumName){customDatumIndexesToTrack.push(i);customDatumValuesToTrack.push(customDatumValueByName[customDatumName]);customDatumOverwritesIfCollectionToTrack.push(true);break}}}}this.trackCustomData(customDatumIndexesToTrack,customDatumValuesToTrack,customDatumOverwritesIfCollectionToTrack)};Kameleoon.Internals.runtime.Gatherer.segmentWebSocketUserId=userId}}callback&&callback(startOfVisit)};if(forceStartOfVisitor){forceStartOfVisit=true}var visitNumber=this.obtainFieldFromVisitCookieOrStoredData(\"visitNumber\");if(forceStartOfVisit||(visitNumber==null)||this.obtainVisitIsFinished(date)){this.saveFieldToStoredData(\"startsOfVisitForCurrentPage\",this.obtainFieldFromStoredData(\"startsOfVisitForCurrentPage\")+1);var timeSincePreviousVisit;if(forceStartOfVisitor||(visitNumber==null)){timeSincePreviousVisit=0;visitNumber=0}else{timeSincePreviousVisit=date.getTime()-this.obtainFieldFromVisitCookieOrStoredData(\"timeLastActivity\");visitNumber++}this.saveFieldToVisitCookieOrStoredData(\"storedDataVersion\",this.SCRIPT_VERSION);this.saveFieldToVisitCookieOrStoredData(\"visitNumber\",visitNumber);this.saveFieldToVisitCookieOrStoredData(\"untrackedVisit\",Math.random()<Kameleoon.Internals.runtime.Gatherer.configuration.dropRate);this.saveFieldToVisitCookieOrStoredData(\"timeLastActivity\",date.getTime());this.saveFieldToVisitCookieOrStoredData(\"timeSincePreviousVisit\",timeSincePreviousVisit);this.saveFieldToStoredData(\"visitStaticDataSent\",null);this.saveFieldToStoredData(\"visitsRequestSuccess\",null);this.saveFieldToStoredData(\"landingPageHref\",Kameleoon.Utils.computeCurrentPageCleanAbsoluteURL());this.saveFieldToStoredData(\"landingPageTitle\",document.title);this.saveFieldToStoredData(\"landingPages\",this.obtainKeyPagesIndexes());this.saveFieldToStoredData(\"firstReferrerHref\",this.obtainCorrectedReferrer(true));this.saveFieldToStoredData(\"firstReferrers\",this.obtainReferrersIndexes(true));if(visitNumber==0){this.saveFieldToVisitCookieOrStoredData(\"visitorCode\",Kameleoon.Utils.obtainRandomString(this.VISITOR_CODE_LENGTH));Kameleoon.Visitor.init()}else{Kameleoon.Visitor.setupFromStoredData(false)}var landingPageHref=this.obtainFieldFromStoredData(\"landingPageHref\");var landingPageTitle=this.obtainFieldFromStoredData(\"landingPageTitle\");var landingPages=this.obtainFieldFromStoredData(\"landingPages\")||[null];var firstReferrerHref=this.obtainFieldFromStoredData(\"firstReferrerHref\");var firstReferrers=this.obtainFieldFromStoredData(\"firstReferrers\")||[null];var visit=Kameleoon.Visit.create(Kameleoon.Internals.configuration.trackingMode,Kameleoon.Internals.configuration.siteCode,this.obtainFieldFromVisitCookieOrStoredData(\"visitorCode\"),date,this.obtainFieldFromVisitCookieOrStoredData(\"timeSincePreviousVisit\"),this.obtainFieldFromVisitCookieOrStoredData(\"visitNumber\"),landingPageHref,landingPageTitle,landingPages,firstReferrerHref,firstReferrers,this.obtainTimeZoneGroupsIndexes(),this.obtainLanguageIndex(),this.obtainBrowserIndex(),Kameleoon.Internals.runtime.browserVersion,Kameleoon.Internals.runtime.mobileDevice,this.obtainOSIndex(),this.obtainWindowWidth(),this.obtainWindowHeight(),this.obtainScreenWidth(),this.obtainScreenHeight(),this.obtainJavaEnabled(),this.obtainTimeZoneId(),this.obtainLocaleLanguageTag(),Kameleoon.Internals.runtime.deviceType,this.obtainBrowser(),this.obtainOS());Kameleoon.Visitor.addVisit(visit);if(!callerIsTrackPage){Kameleoon.Visitor.addPage(date,Kameleoon.Utils.computeCurrentPageCleanAbsoluteURL(),document.title,this.obtainKeyPagesIndexes(),this.obtainReferrersIndexes(true))}Kameleoon.Visitor.saveToStoredData();this.inheritVisitorScopeCustomDataAndTrackVisitorDataFromServer();if(Kameleoon.API.startOfVisitCallbacks!=null){for(var k=0,n=Kameleoon.API.startOfVisitCallbacks.length;k<n;++k){try{Kameleoon.API.startOfVisitCallbacks[k](date,visitNumber)}catch(exception){}}}finalCallback(true)}else{finalCallback(false)}},inheritVisitorScopeCustomDataAndTrackVisitorDataFromServer:function(){this.LocalDataHandler.registerAction(function(){Kameleoon.Visitor.setupFromStoredData(true);if(Kameleoon.Internals.runtime.Visitor.visits.length>1){var b=Kameleoon.Internals.runtime.Visitor.visits[Kameleoon.Internals.runtime.Visitor.visits.length-2];var g=[];var j=[];var h=[];var k=Kameleoon.Internals.runtime.Gatherer.configuration.customData;for(var f=0,c=k.length;f<c;++f){var e=k[f];if(!e.disabled){var d=this.obtainCorrectedCustomDatumScope(e.scope);if(\"VISITOR\"==d){var a=b.wholeVisitHistory.valueByCustomDatum[f];if(a!=null){g.push(f);j.push(a);h.push(true)}}}}this.trackCustomData(g,j,h,true);Kameleoon.Visitor.saveToStoredData()}}.bind(this),false,true,{urgent:true})},performGoalConversionPredictionsAtStartOfVisit:function(){if(Kameleoon.Mentalist!=null){var h={};var d=false;for(var c=0,a=Kameleoon.Internals.configuration.goals.length;c<a;++c){var b=Kameleoon.Internals.configuration.goals[c];if(b.mentalistWeight>0){var f=b.id;var e=Kameleoon.Mentalist.computeGoalConversionPredictionAtStartOfVisit(f);if(e!=null){h[f]=e;d=true}}}if(d){var g=\"0/\";for(var f in h){g+=(f+\"/\");g+=(h[f].probability+\"/\")}this.trackCustomData([this.GOAL_CONVERSION_PREDICTIONS_CUSTOM_DATUM_INDEX],[g],[false])}}},obtainCorrectedCustomDatumScope:function(a){if(a==null){a=this.DEFAULT_CUSTOM_DATUM_SCOPE}return a},initializeTabDataIfNecessary:function(){if(Kameleoon.Internals.runtime.Gatherer.tabData==null){Kameleoon.Internals.runtime.Gatherer.tabData={}}},obtainFieldFromTabData:function(a){return Kameleoon.Internals.runtime.Gatherer.tabData[a]},saveFieldToTabData:function(a,b){Kameleoon.Internals.runtime.Gatherer.tabData[a]=b},initializeStoredDataIfNecessary:function(){if(Kameleoon.Internals.runtime.storedData==null){Kameleoon.Internals.runtime.storedData={}}if(Kameleoon.Internals.runtime.storedData.Gatherer==null){Kameleoon.Internals.runtime.storedData.Gatherer={}}if(Kameleoon.Internals.runtime.storedData.Visitor==null){Kameleoon.Internals.runtime.storedData.Visitor={}}},obtainFieldFromStoredData:function(a){return Kameleoon.Internals.runtime.storedData.Gatherer[a]},saveFieldToStoredData:function(a,b){Kameleoon.Internals.runtime.storedData.Gatherer[a]=b},initializeVisitCookieIfNecessary:function(){this.restoreVisitCookie()},obtainFieldFromVisitCookie:function(a){if((a==\"untrackedVisit\")&&(Kameleoon.Internals.runtime.Gatherer.visitCookie.visitorCode==\"droppedvisitor\")){return true}return Kameleoon.Internals.runtime.Gatherer.visitCookie[a]},saveFieldToVisitCookie:function(a,b){if((a==\"untrackedVisit\")&&(Kameleoon.Internals.runtime.Gatherer.visitCookie.visitorCode==\"droppedvisitor\")){b=true}Kameleoon.Internals.runtime.Gatherer.visitCookie[a]=b},restoreVisitCookie:function(){Kameleoon.Internals.runtime.Gatherer.visitCookie={};var d=Kameleoon.Utils.readLocalData(\"kameleoonVisit\",\"COOKIE\",false);if(d!=null){var a=d.split(\"/\");var c=a.length;if((c==0)||((a[0].length==8)&&(!isNaN(parseInt(a[0])))&&(a[0]==parseInt(a[0]).toString()))){var b=0;Kameleoon.Internals.runtime.Gatherer.visitCookie.storedDataVersion=((c>b)&&(a[b].length>0)?parseInt(a[b]):null);++b;Kameleoon.Internals.runtime.Gatherer.visitCookie.visitorCode=((c>b)&&(a[b].length>0)?a[b]:null);++b;Kameleoon.Internals.runtime.Gatherer.visitCookie.visitNumber=((c>b)&&(a[b].length>0)?parseInt(a[b]):null);++b;Kameleoon.Internals.runtime.Gatherer.visitCookie.timeLastActivity=((c>b)&&(a[b].length>0)?parseInt(a[b]):null);++b;Kameleoon.Internals.runtime.Gatherer.visitCookie.timeSincePreviousVisit=((c>b)&&(a[b].length>0)?parseInt(a[b]):null);++b;Kameleoon.Internals.runtime.Gatherer.visitCookie.untrackedVisit=((c>b)&&(a[b].length>0)?(a[b]==\"true\"):false)}else{var b=0;Kameleoon.Internals.runtime.Gatherer.visitCookie.visitorCode=((c>b)&&(a[b].length>0)?a[b]:null);++b;Kameleoon.Internals.runtime.Gatherer.visitCookie.visitNumber=((c>b)&&(a[b].length>0)?parseInt(a[b]):null);++b;Kameleoon.Internals.runtime.Gatherer.visitCookie.timeLastActivity=((c>b)&&(a[b].length>0)?parseInt(a[b]):null);++b;Kameleoon.Internals.runtime.Gatherer.visitCookie.storedDataVersion=((c>b)&&(a[b].length>0)?parseInt(a[b]):null);++b;Kameleoon.Internals.runtime.Gatherer.visitCookie.timeSincePreviousVisit=((c>b)&&(a[b].length>0)?parseInt(a[b]):null)}if((Kameleoon.Internals.runtime.Gatherer.visitCookie.visitorCode==\"NaN\")||isNaN(Kameleoon.Internals.runtime.Gatherer.visitCookie.visitNumber)||(Kameleoon.Internals.runtime.Gatherer.visitCookie.visitNumber>this.MAX_VISIT_NUMBER)){Kameleoon.Internals.runtime.Gatherer.visitCookie={}}}},saveVisitCookie:function(){var a=\"\";if(Kameleoon.Internals.runtime.Gatherer.visitCookie.storedDataVersion!=null){a+=Kameleoon.Internals.runtime.Gatherer.visitCookie.storedDataVersion}a+=\"/\";if(Kameleoon.Internals.runtime.Gatherer.visitCookie.visitorCode!=null){a+=Kameleoon.Internals.runtime.Gatherer.visitCookie.visitorCode}a+=\"/\";if(Kameleoon.Internals.runtime.Gatherer.visitCookie.visitNumber!=null){a+=Kameleoon.Internals.runtime.Gatherer.visitCookie.visitNumber}a+=\"/\";if(Kameleoon.Internals.runtime.Gatherer.visitCookie.timeLastActivity!=null){a+=Kameleoon.Internals.runtime.Gatherer.visitCookie.timeLastActivity}a+=\"/\";if(Kameleoon.Internals.runtime.Gatherer.visitCookie.timeSincePreviousVisit!=null){a+=Kameleoon.Internals.runtime.Gatherer.visitCookie.timeSincePreviousVisit}a+=\"/\";if(Kameleoon.Internals.runtime.Gatherer.visitCookie.untrackedVisit===true){a+=Kameleoon.Internals.runtime.Gatherer.visitCookie.untrackedVisit}Kameleoon.Utils.createLocalData(\"kameleoonVisit\",a,365,null,\"COOKIE\",false,null)},obtainFieldFromVisitCookieOrStoredData:function(a){return Kameleoon.Internals.configuration.useWideDomainSupport?this.obtainFieldFromStoredData(a):this.obtainFieldFromVisitCookie(a)},saveFieldToVisitCookieOrStoredData:function(a,b){if(Kameleoon.Internals.configuration.useWideDomainSupport){this.saveFieldToStoredData(a,b)}else{this.saveFieldToVisitCookie(a,b)}},obtainVisitIsFinished:function(a){var b=a.getTime()-this.MAX_VISIT_IDLE_DURATION;return this.obtainFieldFromVisitCookieOrStoredData(\"timeLastActivity\")<b},obtainTrackingRequestPrefix:function(){var a=Kameleoon.Internals.configuration.trackerNodeCode;if(null==a){a=\"01\"}return\"//visit-\"+a+\".\"+Kameleoon.Internals.configuration.DOMAIN+\"/_.gif?sc=\"+Kameleoon.Internals.configuration.siteCode+\"&\"},obtainVisitsRequestPrefix:function(){return\"//api-visit.\"+Kameleoon.Internals.configuration.DOMAIN+\"/visits?\"},obtainVisitorDataRequestPrefix:function(){return\"//api-visit.\"+Kameleoon.Internals.configuration.DOMAIN+\"/visitorsData?\"},obtainSegmentWebSocketURLPrefix:function(){return(\"https:\"==window.location.protocol?\"wss\":\"ws\")+\"://api-visit.\"+Kameleoon.Internals.configuration.DOMAIN+\"/segment/\"},obtainTimeZoneId:function(){return jstz.determine().name()},obtainTimeZoneGroupsIndexes:function(){var b=this.obtainTimeZoneId();var a=[];for(var c=0;c<Kameleoon.Internals.runtime.Gatherer.configuration.timeZoneGroups.length;c++){if((!Kameleoon.Internals.runtime.Gatherer.configuration.timeZoneGroups[c].disabled)&&this.obtainTimeZoneGroupMatches(Kameleoon.Internals.runtime.Gatherer.configuration.timeZoneGroups[c].timeZones,b)){a.push(c)}}if(a.length==0){a.push(null)}return a},obtainTimeZoneGroupMatches:function(d,b){var a=b.toUpperCase();for(var c=0;c<d.length;c++){if(d[c].toUpperCase()==a){return true}}return false},obtainLocaleLanguageTag:function(){var a=null;if(navigator){if(navigator.language){a=navigator.language}else{if(navigator.browserLanguage){a=navigator.browserLanguage}else{if(navigator.systemLanguage){a=navigator.systemLanguage}else{if(navigator.userLanguage){a=navigator.userLanguage}}}}}return a?a:this.DEFAULT_LOCALE_LANGUAGE_TAG},obtainLanguage:function(){var b=this.obtainLocaleLanguageTag();var a=b.indexOf(\"-\");if(a>=0){return b.substring(0,a)}return b},obtainLanguageIndex:function(){var a=this.obtainLanguage().toUpperCase();for(var b=0;b<Kameleoon.Internals.runtime.Gatherer.configuration.languages.length;b++){if((!Kameleoon.Internals.runtime.Gatherer.configuration.languages[b].disabled)&&(Kameleoon.Internals.runtime.Gatherer.configuration.languages[b].code.toUpperCase()==a)){return b}}return null},obtainBrowser:function(){var a=Kameleoon.Internals.runtime.browserName;if((\"Internet Explorer\"==a)||(\"Microsoft Edge\"==a)){a=\"Explorer\"}return a},obtainBrowserIndex:function(){var c=this.obtainBrowser();if(c==null){return null}var a=c.toUpperCase();for(var b=0;b<Kameleoon.Internals.runtime.Gatherer.configuration.browsers.length;b++){if((!Kameleoon.Internals.runtime.Gatherer.configuration.browsers[b].disabled)&&(Kameleoon.Internals.runtime.Gatherer.configuration.browsers[b].name.toUpperCase()==a)){return b}}return null},obtainOS:function(){if(Kameleoon.Internals.runtime.windowsphone){return\"Windows Phone\"}if(Kameleoon.Internals.runtime.ios){return\"iOS\"}if(Kameleoon.Internals.runtime.android){return\"Android\"}if(Kameleoon.Internals.runtime.windows){return\"Windows\"}if(Kameleoon.Internals.runtime.mac){return\"Mac\"}if(Kameleoon.Internals.runtime.linux){return\"Linux\"}return null},obtainOSIndex:function(){var c=this.obtainOS();if(c==null){return null}var a=c.toUpperCase();for(var b=0;b<Kameleoon.Internals.runtime.Gatherer.configuration.oss.length;b++){if((!Kameleoon.Internals.runtime.Gatherer.configuration.oss[b].disabled)&&(Kameleoon.Internals.runtime.Gatherer.configuration.oss[b].name.toUpperCase()==a)){return b}}return null},obtainReferrer:function(){return document.referrer},obtainCorrectedReferrer:function(a){switch(this.obtainReferrerType(a)){case 0:case 1:case 2:return null;default:return this.obtainReferrer()}},obtainReferrerType:function(b){if(this.obtainReferrerIsIgnored(b)){return 0}var c=this.obtainInternalReferrerType();var a=this.obtainFieldFromStoredData(\"startsOfVisitForCurrentPage\");if((a>1)||((a==1)&&(c>=0))){return 1}if(c>=0){return 2}return 3},obtainReferrerIsIgnored:function(d){var c=this.obtainReferrer();if(Kameleoon.Internals.runtime.Gatherer.configuration.directNoneReferrerOnlyFirst){if((c==\"\")&&(!d)){return true}}var e=window.location.pathname;var a=Kameleoon.Internals.runtime.Gatherer.configuration.noReferrerPages.length;for(var b=0;b<a;b++){if(e==Kameleoon.Internals.runtime.Gatherer.configuration.noReferrerPages[b]){return true}}return false},obtainInternalReferrerType:function(){var d=this.obtainReferrer();if(d==\"\"){return -1}var e=this.parseHostName(d);var b=Kameleoon.Utils.obtainCurrentRootDomain();if((b!=null)&&this.computeIfSuffix(e,b)){return Kameleoon.Internals.runtime.Gatherer.configuration.aliasSites.length}var a=Kameleoon.Internals.runtime.Gatherer.configuration.aliasSites.length;for(var c=0;c<a;c++){if(this.computeIfSuffix(e,Kameleoon.Internals.runtime.Gatherer.configuration.aliasSites[c])){return c}}return -1},obtainReferrersIndexes:function(e){switch(this.obtainReferrerType(e)){case 0:case 2:return[-1];case 1:return[0];default:var d=[];var c=Number.NEGATIVE_INFINITY;for(var b=0;b<Kameleoon.Internals.runtime.Gatherer.configuration.referrers.length;b++){if((!Kameleoon.Internals.runtime.Gatherer.configuration.referrers[b].disabled)&&this.obtainReferrerMatches(Kameleoon.Internals.runtime.Gatherer.configuration.referrers[b])){var a=Kameleoon.Internals.runtime.Gatherer.configuration.referrers[b].priority;if(a==null){a=Number.NEGATIVE_INFINITY}if(a>=c){if(a>c){d=[];c=a}d.push(b+1)}}}if(d.length==0){d.push(null)}return d}},obtainReferrerMatches:function(c){var a=c.detections;for(var b=0;b<a.length;b++){if(this.obtainReferrerDetectionMatches(a[b])){return true}}return false},obtainReferrerDetectionMatches:function(b){var a=this.obtainReferrerDetectionPartMatches(b.method,b.parameters);if(b.and){a=a&&this.obtainReferrerDetectionPartMatches(b.andMethod,b.andParameters)}return a},obtainReferrerDetectionPartMatches:function(method,parameters){switch(method.toUpperCase()){case\"REFERRER_REGEX\":return new RegExp(parameters).test(this.obtainReferrer());case\"URL_REGEX\":var regExp=new RegExp(parameters);return regExp.test(Kameleoon.Utils.computeCurrentPageCleanAbsoluteURL())||regExp.test(Kameleoon.Utils.computeCurrentPageCleanRelativeURL());default:try{return eval(parameters)===true}catch(error){return false}}},obtainKeyPagesIndexes:function(){var d=[];for(var c=0,a=Kameleoon.Internals.runtime.Gatherer.configuration.keyPages.length;c<a;c++){var e=Kameleoon.Internals.runtime.Gatherer.configuration.keyPages[c];if(!e.disabled){var b=new RegExp(e.relativeURLRegExp);if(b.test(Kameleoon.Utils.computeCurrentPageCleanAbsoluteURL())||b.test(Kameleoon.Utils.computeCurrentPageCleanRelativeURL())){d.push(c)}}}if(d.length==0){d.push(null)}return d},obtainKeyWordsIndexes:function(d){var b=[];for(var c=0,a=Kameleoon.Internals.runtime.Gatherer.configuration.keyWords.length;c<a;c++){var e=Kameleoon.Internals.runtime.Gatherer.configuration.keyWords[c];if((!e.disabled)&&(new RegExp(e.wordRegExp,\"i\").test(d))){b.push(c)}}return b},obtainWindowWidth:function(){var a=null;if(document.body&&document.body.offsetWidth){a=document.body.offsetWidth}if(document.compatMode==\"CSS1Compat\"&&document.documentElement&&document.documentElement.offsetWidth){a=document.documentElement.offsetWidth}if(window.innerWidth){a=window.innerWidth}return a},obtainWindowHeight:function(){var a=null;if(document.body&&document.body.offsetHeight){a=document.body.offsetHeight}if(document.compatMode==\"CSS1Compat\"&&document.documentElement&&document.documentElement.offsetHeight){a=document.documentElement.offsetHeight}if(window.innerHeight){a=window.innerHeight}return a},obtainScreenWidth:function(){return window.screen.width},obtainScreenHeight:function(){return window.screen.height},obtainJavaEnabled:function(){return navigator.javaEnabled()===true},obtainCustomDatumValueMap:function(customDataIndex){var customDatumValueMap=null;var customDatum=Kameleoon.Internals.runtime.Gatherer.configuration.customData[customDataIndex];switch(customDatum.method.toUpperCase()){case\"GTM\":if(window.dataLayer&&customDatum.gtmVariableName){for(var i=0,l=dataLayer.length;i<l;++i){var dataLayer_i=dataLayer[i];if(dataLayer_i.hasOwnProperty(customDatum.gtmVariableName)){customDatumValueMap={value:dataLayer_i[customDatum.gtmVariableName],overwrite:false};break}}}break;case\"TC\":if(window.tc_vars&&customDatum.tcVariableName){var tc_var=tc_vars[customDatum.tcVariableName];if(\"\"==tc_var){tc_var=null}customDatumValueMap={value:tc_var,overwrite:false}}break;case\"CUSTOM_CODE\":try{customDatumValueMap=eval(\"(function() {\"+customDatum.customEvalCode+\"})();\");if(customDatumValueMap.overwrite==null){customDatumValueMap.overwrite=false}}catch(error){}break;default:break}return customDatumValueMap},computeIfSuffix:function(b,c){var a=b.length-c.length;var d=b.indexOf(c,a);return(d>=0)&&(d==a)},computeListHash:function(c){var d=0;for(var b=0;b<c.length;++b){for(var a=0;a<c[b].length;++a){d=((d<<5)-d)+c[b].charCodeAt(a);d=d&d}}return d},joinAll:function(d,c){var a=\"\";if(d.length>0){a+=d[0];for(var b=1;b<d.length;b++){a+=c;a+=d[b]}}return a},parseHostName:function(c){var b=document.createElement(\"a\");b.href=c;return b.hostname},logDebugMessage:function(c,d,a){if((!Kameleoon.Internals.runtime.simulationMode)&&(!Kameleoon.Internals.runtime.proxyMode)&&Kameleoon.Internals.runtime.Gatherer.configuration.track&&(!this.obtainFieldFromVisitCookieOrStoredData(\"untrackedVisit\"))){if(!d){d=this.DEBUG_LEVEL.DEBUG}if(!a){a=\"CommonLog\"}if(d>=Kameleoon.Internals.runtime.Gatherer.configuration.debugLevel){var b=\"debugMessage=\"+encodeURIComponent(c)+\"&debugLevel=\"+d+\"&debugLog=\"+a+\"&visitorCode=\"+this.obtainFieldFromVisitCookieOrStoredData(\"visitorCode\")+\"&visitNumber=\"+this.obtainFieldFromVisitCookieOrStoredData(\"visitNumber\")+\"&debug=true\";Kameleoon.Utils.performBeaconServerCall(this.obtainTrackingRequestPrefix()+b,null,null)}}},LocalDataHandler:{ONE_SHOT_ACTIONS_INTERVAL:1*1000,REPEATED_ACTIONS_INTERVAL:15*1000,init:function(){if(Kameleoon.Internals.runtime.Gatherer.LocalDataHandler==null){Kameleoon.Internals.runtime.Gatherer.LocalDataHandler={}}Kameleoon.Internals.runtime.Gatherer.LocalDataHandler.oneShotActions=[];Kameleoon.Internals.runtime.Gatherer.LocalDataHandler.repeatedActions=[];Kameleoon.Internals.runtime.Gatherer.LocalDataHandler.oneShotActionsLastLaunchTime=-this.ONE_SHOT_ACTIONS_INTERVAL;Kameleoon.Internals.runtime.Gatherer.LocalDataHandler.repeatedActionsLastLaunchTime=-this.REPEATED_ACTIONS_INTERVAL;Kameleoon.Internals.runtime.Gatherer.LocalDataHandler.numberWrites=0;var a=function(){var f=new Date().getTime();var h=false;var e=false;var c=[];if(Kameleoon.Internals.runtime.Gatherer.LocalDataHandler.oneShotActionsLastLaunchTime+this.ONE_SHOT_ACTIONS_INTERVAL<=f){for(var d=0,b=Kameleoon.Internals.runtime.Gatherer.LocalDataHandler.oneShotActions.length;d<b;++d){var g=Kameleoon.Internals.runtime.Gatherer.LocalDataHandler.oneShotActions[d];if(g.restoreLocalData==true){h=true}if(g.saveLocalData==true){e=true}c.push(g.actionFunction)}Kameleoon.Internals.runtime.Gatherer.LocalDataHandler.oneShotActions=[];Kameleoon.Internals.runtime.Gatherer.LocalDataHandler.oneShotActionsLastLaunchTime=f}if(Kameleoon.Internals.runtime.Gatherer.LocalDataHandler.repeatedActionsLastLaunchTime+this.REPEATED_ACTIONS_INTERVAL<=f){for(var d=0,b=Kameleoon.Internals.runtime.Gatherer.LocalDataHandler.repeatedActions.length;d<b;++d){var g=Kameleoon.Internals.runtime.Gatherer.LocalDataHandler.repeatedActions[d];if(g.lastRunTime+g.repeatInterval<=f){if(g.restoreLocalData==true){h=true}if(g.saveLocalData==true){e=true}c.push(g.actionFunction);g.lastRunTime=f}}Kameleoon.Internals.runtime.Gatherer.LocalDataHandler.repeatedActionsLastLaunchTime=f;h=true}this.launchAction(function(){for(var m=0,j=c.length;m<j;++m){try{c[m]()}catch(k){}}}.bind(this),h,e)}.bind(this);Kameleoon.Utils.setInterval(a,Math.min(this.ONE_SHOT_ACTIONS_INTERVAL,this.REPEATED_ACTIONS_INTERVAL))},registerAction:function(a,e,b,d){if(d.urgent===true){this.launchAction(a,e,b)}else{var c=parseInt(d.repeatInterval);if(isNaN(c)){Kameleoon.Internals.runtime.Gatherer.LocalDataHandler.oneShotActions.push({actionFunction:a,restoreLocalData:e,saveLocalData:b})}else{if(d.firstRunNow===true){Kameleoon.Internals.runtime.Gatherer.LocalDataHandler.oneShotActions.push({actionFunction:a,restoreLocalData:e,saveLocalData:b})}Kameleoon.Internals.runtime.Gatherer.LocalDataHandler.repeatedActions.push({actionFunction:a,restoreLocalData:e,saveLocalData:b,repeatInterval:c,lastRunTime:new Date().getTime()})}}},launchAction:function(a,d,c){var b=function(){a();if(c){this.saveLocalData()}}.bind(this);if(d){this.restoreLocalData(b)}else{b()}},saveLocalData:function(){this.incrementNumberWrites();if(!Kameleoon.Internals.configuration.useWideDomainSupport){Kameleoon.Gatherer.saveVisitCookie()}Kameleoon.Utils.saveStoredData(this.decrementNumberWrites.bind(this))},restoreLocalData:function(a){if(Kameleoon.Internals.runtime.Gatherer.LocalDataHandler.numberWrites==0){if(!Kameleoon.Internals.configuration.useWideDomainSupport){Kameleoon.Gatherer.restoreVisitCookie()}Kameleoon.Utils.restoreStoredData(a)}else{a&&a()}},incrementNumberWrites:function(){Kameleoon.Internals.runtime.Gatherer.LocalDataHandler.numberWrites++},decrementNumberWrites:function(){Kameleoon.Internals.runtime.Gatherer.LocalDataHandler.numberWrites=Math.max(Kameleoon.Internals.runtime.Gatherer.LocalDataHandler.numberWrites-1,0)}}};Kameleoon.Visitor={STORED_DATA_NAME_PREFIX:\"Kameleoon.Visitor.\",init:function(){if(Kameleoon.Internals.runtime.Visitor==null){Kameleoon.Internals.runtime.Visitor={}}Kameleoon.Internals.runtime.Visitor.visits=[];Kameleoon.Internals.runtime.Visitor.currentVisit=null;Kameleoon.Internals.runtime.Visitor.totalVisits=0;Kameleoon.Internals.runtime.Visitor.timeStartedEldestVisit=null;Kameleoon.Internals.runtime.Visitor.imagesDetectionTimeWithoutCache=null;Kameleoon.Internals.runtime.Visitor.imagesDetectionTimeWithCache=null;Kameleoon.Internals.runtime.Visitor.imagesDetectionCacheTimeout=null;if(Kameleoon.API==null){Kameleoon.API={}}Kameleoon.API.visits=[];Kameleoon.API.firstVisit=null;Kameleoon.API.currentVisit=null;Kameleoon.API.previousVisit=null;if(Kameleoon.API.visitor==null){Kameleoon.API.visitor={}}Kameleoon.API.visitor.totalVisits=Kameleoon.Internals.runtime.Visitor.totalVisits;Kameleoon.API.visitor.timeStartedEldestVisit=Kameleoon.Internals.runtime.Visitor.timeStartedEldestVisit;Kameleoon.API.visitor.customData={}},addVisit:function(a){Kameleoon.Internals.runtime.Visitor.visits.push(a);Kameleoon.Internals.runtime.Visitor.currentVisit=a;Kameleoon.Internals.runtime.Visitor.totalVisits++;if(Kameleoon.Internals.runtime.Visitor.timeStartedEldestVisit==null){Kameleoon.Internals.runtime.Visitor.timeStartedEldestVisit=a.timeStarted}this.updateAPIAfterCurrentVisitChange();Kameleoon.API.visitor.totalVisits=Kameleoon.Internals.runtime.Visitor.totalVisits;Kameleoon.API.visitor.timeStartedEldestVisit=Kameleoon.Internals.runtime.Visitor.timeStartedEldestVisit;var b=Kameleoon.Internals.runtime.Visitor.visits.length;var c=Math.max(1,Kameleoon.Internals.configuration.maxNumberLocalVisits);if(b>c){Kameleoon.Internals.runtime.Visitor.visits=Kameleoon.Internals.runtime.Visitor.visits.slice(b-c);Kameleoon.API.visits=Kameleoon.API.visits.slice(b-c);Kameleoon.API.firstVisit=Kameleoon.API.visits[0];if(c>1){Kameleoon.API.previousVisit=Kameleoon.API.visits[c-2]}else{Kameleoon.API.previousVisit=null}}},changePreviousVisits:function(d){if(Kameleoon.Internals.runtime.Visitor.currentVisit!=null){var b=Kameleoon.Internals.runtime.Visitor.currentVisit;this.init();for(var c=0,a=d.length;c<a;c++){this.addVisit(d[c])}this.addVisit(b)}},buildPreviousVisitsHistory:function(){var c=Kameleoon.PreviousVisitsHistory.create();for(var b=0,a=Kameleoon.Internals.runtime.Visitor.visits.length-1;b<a;++b){c.addVisit(Kameleoon.Internals.runtime.Visitor.visits[b])}return c},saveToStoredData:function(){this.saveFieldToStoredData(\"visits\",Kameleoon.Internals.runtime.Visitor.visits);this.saveFieldToStoredData(\"totalVisits\",Kameleoon.Internals.runtime.Visitor.totalVisits);this.saveFieldToStoredData(\"timeStartedEldestVisit\",Kameleoon.Internals.runtime.Visitor.timeStartedEldestVisit);this.saveFieldToStoredData(\"imagesDetectionTimeWithoutCache\",Kameleoon.Internals.runtime.Visitor.imagesDetectionTimeWithoutCache);this.saveFieldToStoredData(\"imagesDetectionTimeWithCache\",Kameleoon.Internals.runtime.Visitor.imagesDetectionTimeWithCache);this.saveFieldToStoredData(\"imagesDetectionCacheTimeout\",Kameleoon.Internals.runtime.Visitor.imagesDetectionCacheTimeout)},setupFromStoredDataOLD:function(){var a=Kameleoon.Internals.runtime.storedData[this.STORED_DATA_NAME_PREFIX+\"numberVisits\"];this.init();if(a!=null){for(var b=0;b<a;++b){this.addVisit(Kameleoon.Visit.createFromStoredDataOLD(this.STORED_DATA_NAME_PREFIX+\"visit\"+b+\".\"))}Kameleoon.Internals.runtime.Visitor.totalVisits=Kameleoon.Internals.runtime.storedData[this.STORED_DATA_NAME_PREFIX+\"totalVisits\"];if(Kameleoon.Internals.runtime.Visitor.totalVisits==null){Kameleoon.Internals.runtime.Visitor.totalVisits=a;Kameleoon.Internals.runtime.Visitor.timeStartedEldestVisit=a>0?Kameleoon.Internals.runtime.Visitor.visits[0].timeStarted:null}else{Kameleoon.Internals.runtime.Visitor.timeStartedEldestVisit=Kameleoon.Internals.runtime.storedData[this.STORED_DATA_NAME_PREFIX+\"timeStartedEldestVisit\"]}Kameleoon.API.visitor.totalVisits=Kameleoon.Internals.runtime.Visitor.totalVisits;Kameleoon.API.visitor.timeStartedEldestVisit=Kameleoon.Internals.runtime.Visitor.timeStartedEldestVisit}},setupFromStoredData:function(l){var g=this.obtainFieldFromStoredData(\"visits\");this.init();if(g==null){if(l){var a=Kameleoon.Gatherer;var f=a.obtainFieldFromStoredData(\"landingPageHref\");var j=a.obtainFieldFromStoredData(\"landingPageTitle\");var c=a.obtainFieldFromStoredData(\"landingPages\")||[null];var b=a.obtainFieldFromStoredData(\"firstReferrerHref\");var k=a.obtainFieldFromStoredData(\"firstReferrers\")||[null];var h=Kameleoon.Visit.create(Kameleoon.Internals.configuration.trackingMode,Kameleoon.Internals.configuration.siteCode,a.obtainFieldFromVisitCookieOrStoredData(\"visitorCode\"),new Date(),a.obtainFieldFromVisitCookieOrStoredData(\"timeSincePreviousVisit\"),a.obtainFieldFromVisitCookieOrStoredData(\"visitNumber\"),f,j,c,b,k,a.obtainTimeZoneGroupsIndexes(),a.obtainLanguageIndex(),a.obtainBrowserIndex(),Kameleoon.Internals.runtime.browserVersion,Kameleoon.Internals.runtime.mobileDevice,a.obtainOSIndex(),a.obtainWindowWidth(),a.obtainWindowHeight(),a.obtainScreenWidth(),a.obtainScreenHeight(),a.obtainJavaEnabled(),a.obtainTimeZoneId(),a.obtainLocaleLanguageTag(),Kameleoon.Internals.runtime.deviceType,a.obtainBrowser(),a.obtainOS());this.addVisit(h)}return l}else{var d=g.length;for(var e=0;e<d;++e){var h=g[e];Kameleoon.Visit.convertVisitFromStoredData(h);this.addVisit(h)}Kameleoon.Internals.runtime.Visitor.totalVisits=this.obtainFieldFromStoredData(\"totalVisits\");if(Kameleoon.Internals.runtime.Visitor.totalVisits==null){Kameleoon.Internals.runtime.Visitor.totalVisits=d;Kameleoon.Internals.runtime.Visitor.timeStartedEldestVisit=d>0?Kameleoon.Internals.runtime.Visitor.visits[0].timeStarted:null}else{Kameleoon.Internals.runtime.Visitor.timeStartedEldestVisit=this.obtainFieldFromStoredData(\"timeStartedEldestVisit\");Kameleoon.Internals.runtime.Visitor.imagesDetectionTimeWithoutCache=this.obtainFieldFromStoredData(\"imagesDetectionTimeWithoutCache\");Kameleoon.Internals.runtime.Visitor.imagesDetectionTimeWithCache=this.obtainFieldFromStoredData(\"imagesDetectionTimeWithCache\");Kameleoon.Internals.runtime.Visitor.imagesDetectionCacheTimeout=this.obtainFieldFromStoredData(\"imagesDetectionCacheTimeout\")}Kameleoon.API.visitor.totalVisits=Kameleoon.Internals.runtime.Visitor.totalVisits;Kameleoon.API.visitor.timeStartedEldestVisit=Kameleoon.Internals.runtime.Visitor.timeStartedEldestVisit;return false}},obtainFieldFromStoredData:function(a){return Kameleoon.Internals.runtime.storedData.Visitor[a]},saveFieldToStoredData:function(a,b){Kameleoon.Internals.runtime.storedData.Visitor[a]=b},addPage:function(d,c,e,a,b){if(Kameleoon.Internals.runtime.Visitor.currentVisit!=null){Kameleoon.Internals.runtime.Visitor.currentVisit.addPage(d,c,e,a,b);this.updateAPIAfterCurrentVisitChange()}},addActivity:function(a,b){if(Kameleoon.Internals.runtime.Visitor.currentVisit!=null){Kameleoon.Internals.runtime.Visitor.currentVisit.addActivity(a,b);this.updateAPIAfterCurrentVisitChange()}},addInterests:function(b,a){if(Kameleoon.Internals.runtime.Visitor.currentVisit!=null){Kameleoon.Internals.runtime.Visitor.currentVisit.addInterests(b,a);this.updateAPIAfterCurrentVisitChange()}},addSearch:function(c,d,b,a){if(Kameleoon.Internals.runtime.Visitor.currentVisit!=null){Kameleoon.Internals.runtime.Visitor.currentVisit.addSearch(c,d,b,a);this.updateAPIAfterCurrentVisitChange()}},addConversion:function(c,a,b){if(Kameleoon.Internals.runtime.Visitor.currentVisit!=null){if(b){Kameleoon.Internals.runtime.Visitor.currentVisit.addConversions(c,-1,-a)}else{Kameleoon.Internals.runtime.Visitor.currentVisit.addConversions(c,1,a)}this.updateAPIAfterCurrentVisitChange()}},addMentalistAction:function(b,a,c){if(Kameleoon.Internals.runtime.Visitor.currentVisit!=null){Kameleoon.Internals.runtime.Visitor.currentVisit.addMentalistAction(b,a,c);this.updateAPIAfterCurrentVisitChange()}},addTargetingSegment:function(a,b){if(Kameleoon.Internals.runtime.Visitor.currentVisit!=null){Kameleoon.Internals.runtime.Visitor.currentVisit.addTargetingSegment(a,b);this.updateAPIAfterCurrentVisitChange()}},addExperiment:function(a,b,d,c){if(Kameleoon.Internals.runtime.Visitor.currentVisit!=null){Kameleoon.Internals.runtime.Visitor.currentVisit.addExperiment(a,b,d,c);this.updateAPIAfterCurrentVisitChange()}},addPersonalization:function(b,a,d,c){if(Kameleoon.Internals.runtime.Visitor.currentVisit!=null){Kameleoon.Internals.runtime.Visitor.currentVisit.addPersonalization(b,a,d,c);this.updateAPIAfterCurrentVisitChange()}},addWeather:function(a,c,e,b,g,h,f,d){if(Kameleoon.Internals.runtime.Visitor.currentVisit!=null){Kameleoon.Internals.runtime.Visitor.currentVisit.addWeather(a,c,e,b,g,h,f,d);this.updateAPIAfterCurrentVisitChange()}},addCustomData:function(a,c,b){if(Kameleoon.Internals.runtime.Visitor.currentVisit!=null){Kameleoon.Internals.runtime.Visitor.currentVisit.addCustomData(a,c,b);this.updateAPIAfterCurrentVisitChange()}},addTabCount:function(a){if(Kameleoon.Internals.runtime.Visitor.currentVisit!=null){Kameleoon.Internals.runtime.Visitor.currentVisit.addTabCount(a);this.updateAPIAfterCurrentVisitChange()}},addProduct:function(a){if(Kameleoon.Internals.runtime.Visitor.currentVisit!=null){Kameleoon.Internals.runtime.Visitor.currentVisit.addProduct(a);this.updateAPIAfterCurrentVisitChange()}},addGeolocation:function(d,b,c,e,a){if(Kameleoon.Internals.runtime.Visitor.currentVisit!=null){Kameleoon.Internals.runtime.Visitor.currentVisit.addGeolocation(d,b,c,e,a);this.updateAPIAfterCurrentVisitChange()}},addNumberClicks:function(a){if(Kameleoon.Internals.runtime.Visitor.currentVisit!=null){Kameleoon.Internals.runtime.Visitor.currentVisit.addNumberClicks(a);this.updateAPIAfterCurrentVisitChange()}},addAdBlocker:function(){if(Kameleoon.Internals.runtime.Visitor.currentVisit!=null){Kameleoon.Internals.runtime.Visitor.currentVisit.addAdBlocker();this.updateAPIAfterCurrentVisitChange()}},updateAPIAfterCurrentVisitChange:function(){var a=Kameleoon.Internals.runtime.Visitor.visits.length;Kameleoon.API.visits[a-1]=Kameleoon.Internals.runtime.Visitor.currentVisit.buildVisitForAPI();Kameleoon.API.firstVisit=Kameleoon.API.visits[0];Kameleoon.API.currentVisit=Kameleoon.API.visits[a-1];if(a>1){Kameleoon.API.previousVisit=Kameleoon.API.visits[a-2]}Kameleoon.API.visitor.customData={};for(var d in Kameleoon.Internals.runtime.Visitor.currentVisit.wholeVisitHistory.valueByCustomDatum){if(Kameleoon.Gatherer.GOAL_CONVERSION_PREDICTIONS_CUSTOM_DATUM_INDEX!=d){var c=Kameleoon.Internals.runtime.Gatherer.configuration.customData[d];if(\"VISITOR\"==Kameleoon.Gatherer.obtainCorrectedCustomDatumScope(c.scope)){var g=Kameleoon.Internals.runtime.Visitor.currentVisit.wholeVisitHistory.valueByCustomDatum[d];if(c.type==\"LIST\"){var f=[];for(var e=0,b=g.length;e<b;++e){f.push(g[e].value)}Kameleoon.API.visitor.customData[c.name]=f}else{Kameleoon.API.visitor.customData[c.name]=g}}}}},obtainKeyPageIsVisited:function(c){for(var b=0,a=Kameleoon.Internals.runtime.Visitor.visits.length;b<a;++b){if(Kameleoon.Internals.runtime.Visitor.visits[b].obtainKeyPageIsVisited(c)){return true}}return false},obtainKeyWordIsSearched:function(c){for(var b=0,a=Kameleoon.Internals.runtime.Visitor.visits.length;b<a;++b){if(Kameleoon.Internals.runtime.Visitor.visits[b].obtainKeyWordIsSearched(c)){return true}}return false},obtainInterestIsActive:function(c){for(var b=0,a=Kameleoon.Internals.runtime.Visitor.visits.length;b<a;++b){if(Kameleoon.Internals.runtime.Visitor.visits[b].obtainInterestIsActive(c,null)){return true}}return false},obtainReferrerIsPresent:function(c){for(var b=0,a=Kameleoon.Internals.runtime.Visitor.visits.length;b<a;++b){if(Kameleoon.Internals.runtime.Visitor.visits[b].obtainReferrerIsPresent(c)){return true}}return false},obtainLastVisitWithFreshActiveInterest:function(c){for(var b=Kameleoon.Internals.runtime.Visitor.visits.length-1;b>=0;--b){var a=Kameleoon.Internals.runtime.Visitor.visits[b];if(a.obtainInterestIsActive(c,true)){return a}}return null},obtainNumberConversions:function(c){var a=0;for(var b=Kameleoon.Internals.runtime.Visitor.visits.length-1;b>=0;--b){a+=Kameleoon.Internals.runtime.Visitor.visits[b].obtainNumberConversions(c)}return a},obtainContainerIsActive:function(d,h,f,e,c){var a=Kameleoon.Internals.runtime.Visitor.visits.length;if(a>0){if(f){if(Kameleoon.Internals.runtime.Visitor.visits[a-1][c](d,h)){return true}}if(e){for(var g=0,b=a-1;g<b;++g){if(Kameleoon.Internals.runtime.Visitor.visits[g][c](d,h)){return true}}}}return false},obtainExperimentIsActive:function(c,d,b,a){return this.obtainContainerIsActive(c,d,b,a,\"obtainExperimentIsActive\")},obtainPersonalizationIsActive:function(a,d,c,b){return this.obtainContainerIsActive(a,d,c,b,\"obtainPersonalizationIsActive\")},obtainContainerNumberActivations:function(e,j,f,h,m,k,b){var c=Kameleoon.Internals.runtime.Visitor.visits.length;var g=0;if(c>0){if(m){g+=Kameleoon.Internals.runtime.Visitor.visits[c-1][b](e,j,f,h)}if(k){for(var d=0,a=c-1;d<a;++d){g+=Kameleoon.Internals.runtime.Visitor.visits[d][b](e,j,f,h)}}}return g},obtainExperimentNumberActivations:function(e,f,d,a,c,b){return this.obtainContainerNumberActivations(e,f,d,a,c,b,\"obtainExperimentNumberActivations\")},obtainPersonalizationNumberActivations:function(a,f,e,b,d,c){return this.obtainContainerNumberActivations(a,f,e,b,d,c,\"obtainPersonalizationNumberActivations\")},obtainPageNumberViews:function(a,g,f,h,k,j){var d=Kameleoon.Internals.runtime.Visitor.visits.length;var c=0;if(d>0){if(k){c+=Kameleoon.Internals.runtime.Visitor.visits[d-1].obtainPageNumberViews(a,g,f,h)}if(j){for(var e=0,b=d-1;e<b;++e){c+=Kameleoon.Internals.runtime.Visitor.visits[e].obtainPageNumberViews(a,g,f,h)}}}return c}};Kameleoon.Visit={create:function(B,k,b,w,c,u,n,t,l,d,a,j,r,z,m,o,f,A,h,q,y,e,s,p,i,x,v){var g={};g.trackingMode=B;g.siteCode=k;g.visitorCode=b;g.timeStarted=w.getTime();g.timeLastActivity=w.getTime();g.actionsTakenIds=[];g.actionsNotTakenIds=[];g.actionsTakenIdsWithMentalistDecision={};g.actionsNotTakenIdsWithMentalistDecision={};g.wholeVisitHistory=Kameleoon.VisitHistory.create(w);g.actionTakenHistoryByActionId={};g.actionNotTakenHistoryByActionId={};g.timeSincePreviousVisit=c;g.visitNumber=u;g.landingPages=l;g.firstReferrers=this.replaceReferrersIfInternal(a);g.timeZoneGroups=j;g.language=r;g.browser=z;g.browserVersion=m;g.mobileBrowser=o;g.os=f;g.windowWidth=A;g.windowHeight=h;g.screenWidth=q;g.screenHeight=y;g.javaEnabled=e;g.conversionCountByGoalId={};g.revenueCountByGoalId={};g.timesByTargetingSegmentId={};g.variationIdByExperimentId={};g.mentalistDecisionByExperimentId={};g.timesByVariationIdByExperimentId={};g.variationIdByPersonalizationId={};g.mentalistDecisionByPersonalizationId={};g.timesByVariationIdByPersonalizationId={};g.sunriseTime=null;g.sunsetTime=null;g.weatherCode=null;g.productCodes={};g.timeZoneId=s;g.localeLanguageTag=p;g.landingPageHref=n;g.landingPageTitle=t;g.timesByPageHref={};g.pageTitleByHref={};g.firstReferrerHref=d;g.country=null;g.region=null;g.city=null;g.latitude=null;g.longitude=null;g.deviceType=i;g.browserName=x;g.osName=v;g.adBlocker=false;this.createBinds(g);return g},createFromStoredDataOLD:function(g){var f=function(i,h){b[i]=Kameleoon.Internals.runtime.storedData[g+i];b[i]=(b[i]===undefined?h:b[i])}.bind(this);var b={};f(\"trackingMode\",Kameleoon.Internals.configuration.trackingMode);f(\"siteCode\",Kameleoon.Internals.configuration.siteCode);f(\"visitorCode\",\"\");f(\"timeStarted\",0);f(\"timeLastActivity\",0);f(\"actionsTakenIds\",[]);f(\"actionsNotTakenIds\",[]);f(\"actionsTakenIdsWithMentalistDecision\",{});f(\"actionsNotTakenIdsWithMentalistDecision\",{});b.wholeVisitHistory=Kameleoon.VisitHistory.createFromStoredDataOLD(g+\"wholeVisitHistory.\");b.actionTakenHistoryByActionId={};for(var d=0,a=b.actionsTakenIds.length;d<a;d++){var c=b.actionsTakenIds[d];b.actionTakenHistoryByActionId[c]=Kameleoon.VisitHistory.createFromStoredDataOLD(g+\"actionTakenId\"+c+\".\")}b.actionNotTakenHistoryByActionId={};for(var d=0,a=b.actionsNotTakenIds.length;d<a;d++){var e=b.actionsNotTakenIds[d];b.actionNotTakenHistoryByActionId[e]=Kameleoon.VisitHistory.createFromStoredDataOLD(g+\"actionNotTakenId\"+e+\".\")}f(\"timeSincePreviousVisit\",0);f(\"visitNumber\",0);f(\"landingPages\",[null]);f(\"firstReferrers\",[null]);f(\"timeZoneGroups\",[null]);f(\"language\",null);f(\"browser\",null);f(\"browserVersion\",null);f(\"mobileBrowser\",false);f(\"os\",null);f(\"windowWidth\",null);f(\"windowHeight\",null);f(\"screenWidth\",null);f(\"screenHeight\",null);f(\"javaEnabled\",false);f(\"conversionCountByGoalId\",{});f(\"revenueCountByGoalId\",{});f(\"timesByTargetingSegmentId\",{});f(\"variationIdByExperimentId\",{});f(\"mentalistDecisionByExperimentId\",{});f(\"timesByVariationIdByExperimentId\",{});f(\"variationIdByPersonalizationId\",{});f(\"mentalistDecisionByPersonalizationId\",{});f(\"timesByVariationIdByPersonalizationId\",{});f(\"sunriseTime\",null);f(\"sunsetTime\",null);f(\"weatherCode\",null);f(\"productCodes\",{});f(\"timeZoneId\",\"UTC\");f(\"localeLanguageTag\",\"en\");f(\"landingPageHref\",null);if(b.landingPageHref==null){f(\"originalLandingPage\",null);b.landingPageHref=b.originalLandingPage;b.originalLandingPage=undefined}f(\"landingPageTitle\",null);f(\"timesByPageHref\",{});f(\"pageTitleByHref\",{});f(\"firstReferrerHref\",null);if(b.firstReferrerHref==null){f(\"originalReferrer\",null);b.firstReferrerHref=b.originalReferrer;b.originalReferrer=undefined}f(\"country\",null);f(\"region\",null);f(\"city\",null);f(\"latitude\",null);f(\"longitude\",null);f(\"deviceType\",null);f(\"browserName\",null);f(\"osName\",null);f(\"adBlocker\",false);this.createBinds(b);return b},convertVisitFromStoredData:function(d){var c=function(f,e){d[f]=(d[f]===undefined?e:d[f])}.bind(this);c(\"trackingMode\",Kameleoon.Internals.configuration.trackingMode);c(\"siteCode\",Kameleoon.Internals.configuration.siteCode);c(\"visitorCode\",\"\");c(\"timeStarted\",0);c(\"timeLastActivity\",0);c(\"actionsTakenIds\",[]);c(\"actionsNotTakenIds\",[]);c(\"actionsTakenIdsWithMentalistDecision\",{});c(\"actionsNotTakenIdsWithMentalistDecision\",{});Kameleoon.VisitHistory.convertVisitHistoryFromStoredData(d.wholeVisitHistory);for(var a in d.actionTakenHistoryByActionId){Kameleoon.VisitHistory.convertVisitHistoryFromStoredData(d.actionTakenHistoryByActionId[a])}for(var b in d.actionNotTakenHistoryByActionId){Kameleoon.VisitHistory.convertVisitHistoryFromStoredData(d.actionNotTakenHistoryByActionId[b])}c(\"timeSincePreviousVisit\",0);c(\"visitNumber\",0);c(\"landingPages\",[null]);c(\"firstReferrers\",[null]);c(\"timeZoneGroups\",[null]);c(\"language\",null);c(\"browser\",null);c(\"browserVersion\",null);c(\"mobileBrowser\",false);c(\"os\",null);c(\"windowWidth\",null);c(\"windowHeight\",null);c(\"screenWidth\",null);c(\"screenHeight\",null);c(\"javaEnabled\",false);c(\"conversionCountByGoalId\",{});c(\"revenueCountByGoalId\",{});c(\"timesByTargetingSegmentId\",{});c(\"variationIdByExperimentId\",{});c(\"mentalistDecisionByExperimentId\",{});c(\"timesByVariationIdByExperimentId\",{});c(\"variationIdByPersonalizationId\",{});c(\"mentalistDecisionByPersonalizationId\",{});c(\"timesByVariationIdByPersonalizationId\",{});c(\"sunriseTime\",null);c(\"sunsetTime\",null);c(\"weatherCode\",null);c(\"productCodes\",{});c(\"timeZoneId\",\"UTC\");c(\"localeLanguageTag\",\"en\");c(\"landingPageHref\",null);if(d.landingPageHref==null){c(\"originalLandingPage\",null);d.landingPageHref=d.originalLandingPage;d.originalLandingPage=undefined}c(\"landingPageTitle\",null);c(\"timesByPageHref\",{});c(\"pageTitleByHref\",{});c(\"firstReferrerHref\",null);if(d.firstReferrerHref==null){c(\"originalReferrer\",null);d.firstReferrerHref=d.originalReferrer;d.originalReferrer=undefined}c(\"country\",null);c(\"region\",null);c(\"city\",null);c(\"latitude\",null);c(\"longitude\",null);c(\"deviceType\",null);c(\"browserName\",null);c(\"osName\",null);c(\"adBlocker\",false);this.createBinds(d)},convertVisitFromServer:function(f){var e=f.actionsTakenIdsWithMentalistDecision;f.actionsTakenIdsWithMentalistDecision={};for(var c=0,a=e.length;c<a;++c){f.actionsTakenIdsWithMentalistDecision[e[c]]=true}var g=f.actionsNotTakenIdsWithMentalistDecision;f.actionsNotTakenIdsWithMentalistDecision={};for(var c=0,a=g.length;c<a;++c){f.actionsNotTakenIdsWithMentalistDecision[g[c]]=true}Kameleoon.VisitHistory.convertVisitHistoryFromServer(f.wholeVisitHistory);for(var b in f.actionTakenHistoryByActionId){Kameleoon.VisitHistory.convertVisitHistoryFromServer(f.actionTakenHistoryByActionId[b])}for(var d in f.actionNotTakenHistoryByActionId){Kameleoon.VisitHistory.convertVisitHistoryFromServer(f.actionNotTakenHistoryByActionId[d])}f.productCodes={};this.createBinds(f)},computeReferrersIsInternal:function(a){return(a.length==1)&&(a[0]==-1)},replaceReferrersIfInternal:function(a){if(this.computeReferrersIsInternal(a)){return[null]}return a},addContainer:function(c,f,i,j,g,h,b,a){if((g[f]===undefined)||(a&&(i!=null)&&(g[f]==null))){g[f]=i;h[f]=j}var e=b[f];if(e==null){e={};b[f]=e}var d=e[i];if(d==null){d=[];e[i]=d}d.push(c.getTime())},computeContainerIsActive:function(a,c,b){return(c===b[a])},computeContainerNumberActivations:function(c,g,d,b,f){var a=f[c];if(a==null){return 0}var e=a[g];if(e==null){return 0}return this.computeObjectNumberPresence(d,b,e)},computeObjectNumberPresence:function(f,c,e){var b=0;for(var g=0,a=e.length;g<a;++g){var d=e[g];if(((f==null)||(d>=f))&&((c==null)||(d<=c))){b++}}return b},createBinds:function(a){a.buildVisitForAPI=function(){var d=Kameleoon.Internals.runtime.Gatherer.configuration;var m=this.wholeVisitHistory;var g={};g.visitorCode=this.visitorCode;g.timeStarted=this.timeStarted;g.timeLastActivity=this.timeLastActivity;g.timeSincePreviousVisit=this.timeSincePreviousVisit;g.visitNumber=this.visitNumber;if(d.languages.length>0){g.language=(this.language==null)?\"<OTHER / UNKNOWN>\":d.languages[this.language].code}g.environment={};g.environment.browser=(this.browser==null)?\"<OTHER / UNKNOWN>\":d.browsers[this.browser].name;g.environment.browserVersion=this.browserVersion;g.environment.mobileBrowser=this.mobileBrowser;g.environment.os=(this.os==null)?\"<OTHER / UNKNOWN>\":d.oss[this.os].name;g.environment.windowWidth=this.windowWidth;g.environment.windowHeight=this.windowHeight;g.environment.screenWidth=this.screenWidth;g.environment.screenHeight=this.screenHeight;g.environment.timeZone=this.timeZoneId;g.acquisition={};g.acquisition.landingPages=[];for(var r=0,q=this.landingPages.length;r<q;r++){var k=this.landingPages[r];g.acquisition.landingPages.push((k==null)?\"<OTHER / UNKNOWN>\":d.keyPages[k].name)}g.acquisition.referrers=[];for(var r=0,q=this.firstReferrers.length;r<q;r++){var b=this.firstReferrers[r];g.acquisition.referrers.push((b==null)?\"<OTHER / UNKNOWN>\":(b==0?\"<RESTART>\":d.referrers[b-1].name))}g.weather={};g.weather.temperature=m.temperature;g.weather.humidity=m.humidity;g.weather.pressure=m.pressure;g.weather.windSpeed=m.windSpeed;g.weather.cloudiness=m.cloudiness;g.weather.sunrise=(this.sunriseTime==null?null:new Date(this.sunriseTime));g.weather.sunset=(this.sunsetTime==null?null:new Date(this.sunsetTime));g.weather.code=this.weatherCode;g.customData={};for(var o in m.valueByCustomDatum){if(Kameleoon.Gatherer.GOAL_CONVERSION_PREDICTIONS_CUSTOM_DATUM_INDEX!=o){var j=d.customData[o];var y=m.valueByCustomDatum[o];if(j.type==\"LIST\"){var t=[];for(var r=0,q=y.length;r<q;++r){t.push(y[r].value)}g.customData[j.name]=t}else{g.customData[j.name]=y}}}g.conversions=[];if(Kameleoon.Internals.configuration.goals!=null){for(var r=0,q=Kameleoon.Internals.configuration.goals.length;r<q;++r){var h=Kameleoon.Internals.configuration.goals[r];var c=this.conversionCountByGoalId[h.id];if((c!=null)&&(c>0)){var v=this.revenueCountByGoalId[h.id];if(v==null){v=0}g.conversions.push({goalName:h.name,goalId:h.id,count:c,revenue:v})}}}g.activeExperiments=[];if(Kameleoon.Internals.runtime.experiments!=null){for(var r=0,q=Kameleoon.Internals.runtime.experiments.length;r<q;++r){var f=Kameleoon.Internals.runtime.experiments[r];var s=f.id;var w=f.registeredVariationId;if((w!=null)&&(w!=\"none\")){var n={id:s,name:f.name,variationId:w};var u=Kameleoon.Analyst.findVariation(w);if(u){n.variationName=u.name}if(this.mentalistDecisionByExperimentId[s]){n.mentalistDecision=true}g.activeExperiments.push(n)}}}g.activePersonalizations=[];if(Kameleoon.Internals.runtime.personalizations!=null){for(var r=0,q=Kameleoon.Internals.runtime.personalizations.length;r<q;++r){var x=Kameleoon.Internals.runtime.personalizations[r];var p=x.id;var w=this.variationIdByPersonalizationId[p];if(null!=w){var n={id:p,name:x.name};if(this.mentalistDecisionByPersonalizationId[p]){n.mentalistDecision=true}g.activePersonalizations.push(n)}}}g.productCodes={};for(var e in this.productCodes){g.productCodes[e]=this.productCodes[e]}g.interests=[];for(var z in m.freshByActiveInterest){g.interests.push(d.interests[z].name)}if(this.landingPageHref!=null){g.acquisition.originalLandingPage=this.landingPageHref}if(this.firstReferrerHref!=null){g.acquisition.originalReferrer=this.firstReferrerHref}g.geolocation={};if(this.country!=null){g.geolocation.country=this.country}if(this.region!=null){g.geolocation.region=this.region}if(this.city!=null){g.geolocation.city=this.city}if(this.latitude!=null){g.geolocation.latitude=this.latitude}if(this.longitude!=null){g.geolocation.longitude=this.longitude}g.pageViews=m.timesStartedPages.length;g.timeSpent=this.timeLastActivity-this.timeStarted;return g};a.addPage=function(e,d,g,b,c){this.addActivity(e,true);this.wholeVisitHistory.addPage(e,b,c);var f=this.timesByPageHref[d];if(f==null){f=[];this.timesByPageHref[d]=f}f.push(e.getTime());this.pageTitleByHref[d]=g};a.addActivity=function(b,c){if(c){this.timeLastActivity=b.getTime()}this.wholeVisitHistory.addActivity(b,c)};a.addInterests=function(c,b){this.wholeVisitHistory.addInterests(c,b)};a.addSearch=function(d,e,c,b){this.addActivity(d,true);this.wholeVisitHistory.addSearch(d,e,c,b)};a.addConversions=function(g,e,b){var c=this.conversionCountByGoalId[g];if(c==null){c=0}var f=c+e;if(f>0){this.conversionCountByGoalId[g]=f;var d=this.revenueCountByGoalId[g];if(d==null){d=0}this.revenueCountByGoalId[g]=Math.max(0,d+b)}else{delete (this.conversionCountByGoalId[g]);delete (this.revenueCountByGoalId[g])}};a.addMentalistAction=function(c,b,d){this.privateAddMentalistAction(c,d,this.actionsTakenIds,this.actionsTakenIdsWithMentalistDecision,this.actionTakenHistoryByActionId);this.privateAddMentalistAction(b,d,this.actionsNotTakenIds,this.actionsNotTakenIdsWithMentalistDecision,this.actionNotTakenHistoryByActionId)};a.privateAddMentalistAction=function(g,h,c,f,b){for(var e=0,d=g.length;e<d;++e){var j=g[e];if((this.actionTakenHistoryByActionId[j]==null)&&(this.actionNotTakenHistoryByActionId[j]==null)){c.push(j);if(h){f[j]=true}b[j]=Kameleoon.VisitHistory.createCopy(this.wholeVisitHistory)}}};a.addTargetingSegment=function(b,d){var c=this.timesByTargetingSegmentId[d];if(c==null){c=[];this.timesByTargetingSegmentId[d]=c}c.push(b.getTime())};a.addExperiment=function(b,c,e,d){Kameleoon.Visit.addContainer(b,c,e,d,this.variationIdByExperimentId,this.mentalistDecisionByExperimentId,this.timesByVariationIdByExperimentId,false)};a.addPersonalization=function(c,b,e,d){Kameleoon.Visit.addContainer(c,b,e,d,this.variationIdByPersonalizationId,this.mentalistDecisionByPersonalizationId,this.timesByVariationIdByPersonalizationId,true)};a.addWeather=function(b,d,f,c,h,i,g,e){this.wholeVisitHistory.addWeather(b,d,f,c,h);if(this.sunriseTime==null){this.sunriseTime=i}if(this.sunsetTime==null){this.sunsetTime=g}if(this.weatherCode==null){this.weatherCode=e}};a.addCustomData=function(b,d,c){this.wholeVisitHistory.addCustomData(b,d,c)};a.addTabCount=function(b){this.wholeVisitHistory.addTabCount(b)};a.addProduct=function(b){this.productCodes[b]=true};a.addGeolocation=function(e,c,d,f,b){this.country=e;this.region=c;this.city=d;this.latitude=f;this.longitude=b};a.addNumberClicks=function(b){this.wholeVisitHistory.addNumberClicks(b)};a.addAdBlocker=function(){this.adBlocker=true};a.obtainKeyPageIsVisited=function(b){return this.wholeVisitHistory.obtainKeyPageIsVisited(b)};a.obtainKeyWordIsSearched=function(b){return this.wholeVisitHistory.obtainKeyWordIsSearched(b)};a.obtainInterestIsActive=function(c,b){return this.wholeVisitHistory.obtainInterestIsActive(c,b)};a.obtainReferrerIsPresent=function(b){return this.wholeVisitHistory.obtainReferrerIsPresent(b)};a.obtainNumberConversions=function(c){var b=this.conversionCountByGoalId[c];return(b==null?0:b)};a.obtainMeanPageDuration=function(){var c=new Date();var b=Kameleoon.OnlineMeanAndDeviation.createFromDifferences(this.wholeVisitHistory.timesStartedPages,false,true,true);b.update([c.getTime()-this.wholeVisitHistory.timesStartedPages[this.wholeVisitHistory.timesStartedPages.length-1]]);return b.mean[0]};a.obtainExperimentIsActive=function(b,c){return Kameleoon.Visit.computeContainerIsActive(b,c,this.variationIdByExperimentId)};a.obtainExperimentNumberActivations=function(d,e,c,b){return Kameleoon.Visit.computeContainerNumberActivations(d,e,c,b,this.timesByVariationIdByExperimentId)};a.obtainPersonalizationIsActive=function(b,c){return Kameleoon.Visit.computeContainerIsActive(b,c,this.variationIdByPersonalizationId)};a.obtainPersonalizationNumberActivations=function(b,e,d,c){return Kameleoon.Visit.computeContainerNumberActivations(b,e,d,c,this.timesByVariationIdByPersonalizationId)};a.obtainPageNumberViews=function(f,e,d,b){var c=0;for(var h in this.timesByPageHref){if(h!=null){var g=Kameleoon.Utils.computeRelativeURL(h);if(((f==null)||(f.test(h)||f.test(g)))&&((e==null)||((!e.test(h))&&(!e.test(g))))){c+=Kameleoon.Visit.computeObjectNumberPresence(d,b,this.timesByPageHref[h])}}}return c}}};Kameleoon.VisitHistory={create:function(b){var a={};a.timesStartedPages=[];a.timesReferrers=[];a.timesSearches=[];a.keyPages=[];a.searchesNumberResults=[];a.searchesFollowed=[];a.timeLastActivity=b.getTime();a.timeLastInactivity=b.getTime();a.referrers=[];a.keyWords=[];a.freshByActiveInterest={};a.maxTabCount=null;a.numberClicks=0;a.temperature=null;a.humidity=null;a.pressure=null;a.windSpeed=null;a.cloudiness=null;a.valueByCustomDatum={};this.createBinds(a);return a},createCopy:function(c){var a={};a.timesStartedPages=c.timesStartedPages.slice(0);a.timesReferrers=c.timesReferrers.slice(0);a.timesSearches=c.timesSearches.slice(0);a.keyPages=[];for(var b=0;b<c.keyPages.length;b++){a.keyPages.push(c.keyPages[b].slice(0))}a.searchesNumberResults=c.searchesNumberResults.slice(0);a.searchesFollowed=c.searchesFollowed.slice(0);a.timeLastActivity=c.timeLastActivity;a.timeLastInactivity=c.timeLastInactivity;a.referrers=[];for(var b=0;b<c.referrers.length;b++){a.referrers.push(c.referrers[b].slice(0))}a.keyWords=[];for(var b=0;b<c.keyWords.length;b++){a.keyWords.push(c.keyWords[b].slice(0))}a.freshByActiveInterest={};for(var b in c.freshByActiveInterest){a.freshByActiveInterest[b]=c.freshByActiveInterest[b]}a.maxTabCount=c.maxTabCount;a.numberClicks=c.numberClicks;a.temperature=c.temperature;a.humidity=c.humidity;a.pressure=c.pressure;a.windSpeed=c.windSpeed;a.cloudiness=c.cloudiness;a.valueByCustomDatum={};for(var b in c.valueByCustomDatum){a.valueByCustomDatum[b]=c.valueByCustomDatum[b]}this.createBinds(a);return a},createFromStoredDataOLD:function(f){var e=function(i,h){a[i]=Kameleoon.Internals.runtime.storedData[f+i];a[i]=(a[i]===undefined?h:a[i])}.bind(this);var a={};e(\"timesStartedPages\",[]);e(\"timesReferrers\",[]);e(\"timesSearches\",[]);e(\"keyPages\",[]);var b=a.timesSearches.length;var g=[];var d=[];for(var c=0;c<b;c++){g[c]=0;d[c]=false}e(\"searchesNumberResults\",g);e(\"searchesFollowed\",d);e(\"timeLastActivity\",0);e(\"timeLastInactivity\",0);e(\"referrers\",[]);e(\"keyWords\",[]);e(\"freshByActiveInterest\",{});e(\"maxTabCount\",null);e(\"numberClicks\",null);e(\"temperature\",null);e(\"humidity\",null);e(\"pressure\",null);e(\"windSpeed\",null);e(\"cloudiness\",null);e(\"valueByCustomDatum\",{});this.createBinds(a);return a},convertVisitHistoryFromStoredData:function(a){var e=function(h,g){a[h]=(a[h]===undefined?g:a[h])}.bind(this);e(\"timesStartedPages\",[]);e(\"timesReferrers\",[]);e(\"timesSearches\",[]);e(\"keyPages\",[]);var b=a.timesSearches.length;var f=[];var d=[];for(var c=0;c<b;c++){f[c]=0;d[c]=false}e(\"searchesNumberResults\",f);e(\"searchesFollowed\",d);e(\"timeLastActivity\",0);e(\"timeLastInactivity\",0);e(\"referrers\",[]);e(\"keyWords\",[]);e(\"freshByActiveInterest\",{});e(\"maxTabCount\",null);e(\"numberClicks\",null);e(\"temperature\",null);e(\"humidity\",null);e(\"pressure\",null);e(\"windSpeed\",null);e(\"cloudiness\",null);e(\"valueByCustomDatum\",{});this.createBinds(a)},convertVisitHistoryFromServer:function(a){this.createBinds(a)},mergeCustomDataValueForCollection:function(f,e){if(e!=null){if(e instanceof Array){for(var d=0,b=e.length;d<b;++d){this.mergeCustomDataValueForCollection(f,e[d])}}else{var c,a;if(e.value!=null){c=e.value;a=e.count;if(a==null){a=1}}else{c=e;a=1}this.mergeCountCustomDataValueForCollection(f,c,a)}}},mergeCountCustomDataValueForCollection:function(f,d,c){for(var e=0,b=f.length;e<b;++e){var a=f[e];if(a.value===d){a.count+=c;return}}f.push({value:d,count:c})},createBinds:function(a){a.addPage=function(d,b,c){this.timesStartedPages.push(d.getTime());this.keyPages.push(b);if(this.obtainShouldStoreReferrers(c)){this.timesReferrers.push(d.getTime());this.referrers.push(Kameleoon.Visit.replaceReferrersIfInternal(c));return true}return false};a.obtainShouldStoreReferrers=function(b){return(this.referrers.length==0)||(!Kameleoon.Visit.computeReferrersIsInternal(b))};a.addActivity=function(b,c){if(c){this.timeLastActivity=b.getTime()}else{this.timeLastInactivity=b.getTime()}};a.addInterests=function(e,c){for(var d=0,b=e.length;d<b;d++){this.freshByActiveInterest[e[d]]=c}};a.addSearch=function(d,e,c,b){this.timesSearches.push(d.getTime());this.keyWords.push(e);this.searchesNumberResults.push(c);this.searchesFollowed.push(b)};a.addTabCount=function(b){if((this.maxTabCount==null)||(b>this.maxTabCount)){this.maxTabCount=b}};a.addNumberClicks=function(b){if(this.numberClicks!=null){this.numberClicks+=b}};a.addWeather=function(b,d,e,c,f){if(this.temperature==null){this.temperature=b}if(this.humidity==null){this.humidity=d}if(this.pressure==null){this.pressure=e}if(this.windSpeed==null){this.windSpeed=c}if(this.cloudiness==null){this.cloudiness=f}};a.addCustomData=function(b,f,e){if(f!=null){if(Kameleoon.Gatherer.GOAL_CONVERSION_PREDICTIONS_CUSTOM_DATUM_INDEX!=b){var c=Kameleoon.Internals.runtime.Gatherer.configuration.customData[b].type;var d=(c==\"LIST\")||(c==\"COUNT_LIST\");if(d){if(e||(this.valueByCustomDatum[b]==null)){this.valueByCustomDatum[b]=[]}Kameleoon.VisitHistory.mergeCustomDataValueForCollection(this.valueByCustomDatum[b],f)}else{this.valueByCustomDatum[b]=f}}else{this.valueByCustomDatum[b]=f}}};a.obtainKeyPageIsVisited=function(g){for(var e=0,c=this.keyPages.length;e<c;e++){var f=this.keyPages[e];for(var d=0,b=f.length;d<b;d++){if(g==f[d]){return true}}}return false};a.obtainKeyWordIsSearched=function(g){for(var e=0,c=this.keyWords.length;e<c;e++){var f=this.keyWords[e];for(var d=0,b=f.length;d<b;d++){if(g==f[d]){return true}}}return false};a.obtainInterestIsActive=function(c,b){if(b==null){return this.freshByActiveInterest[c]!=null}return this.freshByActiveInterest[c]==b};a.obtainReferrerIsPresent=function(f){var g=(f==null?null:f+1);for(var e=0,c=this.referrers.length;e<c;e++){var h=this.referrers[e];for(var d=0,b=h.length;d<b;d++){if(h[d]==g){return true}}}return false}}};Kameleoon.PreviousVisitsHistory={create:function(){var a={};a.timesStartedVisits=[];a.timesLastActivityVisits=[];a.timesStartedPages=[];a.timesReferrers=[];a.timesSearches=[];a.keyPages=[];a.searchesNumberResults=[];a.searchesFollowed=[];a.referrers=[];a.keyWords=[];a.activeInterests={};a.conversionCountByGoalId={};a.revenueCountByGoalId={};a.maxTabCountsVisits=[];a.numberClicksVisits=[];a.temperatureVisits=[];a.humidityVisits=[];a.pressureVisits=[];a.windSpeedVisits=[];a.cloudinessVisits=[];a.valueByCustomDatumVisits=[];this.createBinds(a);return a},createBinds:function(a){a.addVisit=function(e){var f=e.wholeVisitHistory;this.timesStartedVisits.push(e.timeStarted);this.timesLastActivityVisits.push(e.timeLastActivity);this.timesStartedPages=this.timesStartedPages.concat(f.timesStartedPages);this.timesReferrers=this.timesReferrers.concat(f.timesReferrers);this.timesSearches=this.timesSearches.concat(f.timesSearches);this.keyPages=this.keyPages.concat(f.keyPages);this.searchesNumberResults=this.searchesNumberResults.concat(f.searchesNumberResults);this.searchesFollowed=this.searchesFollowed.concat(f.searchesFollowed);this.referrers=this.referrers.concat(f.referrers);this.keyWords=this.keyWords.concat(f.keyWords);for(var d in f.freshByActiveInterest){this.activeInterests[d]=true}for(var g in e.conversionCountByGoalId){var b=this.conversionCountByGoalId[g];if(b==null){b=0}this.conversionCountByGoalId[g]=b+e.conversionCountByGoalId[g]}for(var g in e.revenueCountByGoalId){var c=this.revenueCountByGoalId[g];if(c==null){c=0}this.revenueCountByGoalId[g]=c+e.revenueCountByGoalId[g]}this.maxTabCountsVisits.push(f.maxTabCount);this.numberClicksVisits.push(f.numberClicks);this.temperatureVisits.push(f.temperature);this.humidityVisits.push(f.humidity);this.pressureVisits.push(f.pressure);this.windSpeedVisits.push(f.windSpeed);this.cloudinessVisits.push(f.cloudiness);this.valueByCustomDatumVisits.push(f.valueByCustomDatum)};a.obtainInterestIsActive=function(b){return this.activeInterests[b]}}};Kameleoon.OnlineMeanAndDeviation={create:function(c){var a={};a.dimension=c;a.mean=[];a.m2=[];a.deviation=[];for(var b=0;b<c;++b){a.mean[b]=0;a.m2[b]=0;a.deviation[b]=0}a.numberUpdates=0;this.createBinds(a);return a},createFromDifferences:function(h,j,f,g){var a=this.create(1);var e=h.length;var c=0;if(c<e){var d=h[c];c++;while(c<e){var b=h[c];c++;var k=b-d;if(((k<0)&&j)||((k==0)&&f)||((k>0)&&g)){a.update([k])}d=b}}return a},createFromValues:function(c){var b=this.create(1);for(var d=0,a=c.length;d<a;d++){b.update([c[d]])}return b},createFromBooleanValues:function(c){var b=this.create(1);for(var d=0,a=c.length;d<a;d++){b.update([c[d]?1:0])}return b},createBinds:function(a){a.update=function(b){this.numberUpdates++;for(var c=0;c<this.dimension;++c){var d=b[c]-this.mean[c];this.mean[c]=this.mean[c]+(d/this.numberUpdates);this.m2[c]=this.m2[c]+(d*(b[c]-this.mean[c]));this.deviation[c]=Math.sqrt(this.m2[c]/this.numberUpdates)}}}};\nKameleoon.Internals = {\"configuration\":{\"siteCode\":\"da69l4kf9p\",\"memberCode\":\"0\",\"abtestingSetup\":true,\"EDITOR_HOST_NAME\":\"editor\",\"BACK_OFFICE_HOST_NAME\":\"back-office\",\"STATIC_HOST_NAME\":\"static\",\"API_HOST_NAME\":\"api\",\"DOMAIN\":\"kameleoon.com\",\"environment\":\"PRODUCTION\",\"QOOXDOO_ESTIMATED_LOADING_TIME\":2000,\"SERVER_CALL_ESTIMATED_LOADING_TIME\":500,\"GUI_ESTIMATED_LOADING_TIME\":3000,\"BASE_EDITOR_URL\":\"//static.kameleoon.com/js/editor/\",\"IFRAME_ORIGIN\":\"https://da69l4kf9p.kameleoon.eu\",\"variations\":[{\"id\":\"reference\",\"name\":\"Reference\",\"builtCssCodeLevel2\":\"\",\"elementSets\":[]}],\"experiments\":[],\"personalizations\":[],\"disableWhenTimeout\":false,\"disableVisitWhenTimeout\":false,\"personalizationsDeviation\":1.0,\"personalizationSetup\":false,\"pausedExperiments\":[41218,41922,42277,42319,42538,42649,42739,42994],\"boLocale\":\"FRENCH\",\"geolocation\":false,\"weather\":false,\"weatherForecast\":false,\"weatherHistory\":false,\"ip\":false,\"adobeOmniture\":{\"object\":\"s\",\"anchorReferrer\":true},\"useLocalStorage\":true,\"goals\":[{\"id\":41359,\"name\":\"CLIC CHOIX MAGASIN MONTPARNASSE VIA ESPACE CONNECTéE\",\"type\":\"CUSTOM\",\"multipleConversions\":false,\"mentalistWeight\":0.0},{\"id\":36730,\"name\":\"clic_ajout_panier_LP\",\"type\":\"CLICK\",\"multipleConversions\":false,\"mentalistWeight\":0.0},{\"id\":40716,\"name\":\"clic_ajout_panier_pse\",\"type\":\"CLICK\",\"multipleConversions\":false,\"mentalistWeight\":0.0},{\"id\":41358,\"name\":\"CLIC Choix magasin Montparnasse via POPIN, Liste Bandeau\",\"type\":\"CUSTOM\",\"multipleConversions\":false,\"mentalistWeight\":0.0},{\"id\":30747,\"name\":\"Page options de livraison\",\"type\":\"URL\",\"multipleConversions\":false,\"url\":\"https\\\\://secure\\\\.darty\\\\.com/tunnel_achat/livraison(.*)\",\"mentalistWeight\":0.0},{\"id\":41465,\"name\":\"MOBILE_clic ajout panier\",\"type\":\"CLICK\",\"multipleConversions\":false,\"mentalistWeight\":0.0},{\"id\":40723,\"name\":\"Panier avec PSE\",\"type\":\"CUSTOM\",\"multipleConversions\":false,\"mentalistWeight\":0.0},{\"id\":40215,\"name\":\"Confirmation Panier PSE\",\"type\":\"CUSTOM\",\"multipleConversions\":false,\"mentalistWeight\":0.0},{\"id\":42096,\"name\":\"Sac-aspi Accès guide sacs\",\"type\":\"URL\",\"multipleConversions\":false,\"url\":\"(.*)reco/choisir-sac-aspirateur(.*)\",\"mentalistWeight\":0.0},{\"id\":20268,\"name\":\"Livraison\",\"type\":\"URL\",\"multipleConversions\":false,\"url\":\".*\\\\/tunnel\\\\_achat\\\\/livraison\\\\/choix\\\\_destinataire.*\",\"mentalistWeight\":0.0},{\"id\":40415,\"name\":\"clic_bouton_reprise\",\"type\":\"CLICK\",\"multipleConversions\":false,\"mentalistWeight\":0.0},{\"id\":41735,\"name\":\"Mobile_clic_retrait_mag\",\"type\":\"CLICK\",\"multipleConversions\":false,\"mentalistWeight\":0.0},{\"id\":29324,\"name\":\"Transaction\",\"type\":\"URL\",\"multipleConversions\":false,\"url\":\"(.*)//secure\\\\.darty\\\\.com/tunnel_achat/recu\\\\?i\\\\=(.*)\",\"mentalistWeight\":0.0},{\"id\":42304,\"name\":\"CLIC CLOSE POPIN SAC-ASPIRATEUR\",\"type\":\"CUSTOM\",\"multipleConversions\":false,\"mentalistWeight\":0.0},{\"id\":36731,\"name\":\"clic_acces_FP\",\"type\":\"CLICK\",\"multipleConversions\":false,\"mentalistWeight\":0.0},{\"id\":11590,\"name\":\"Engagement\",\"type\":\"ENGAGEMENT\",\"multipleConversions\":false,\"mentalistWeight\":0.0},{\"id\":41467,\"name\":\"MOBILE_transaction\",\"type\":\"URL\",\"multipleConversions\":false,\"url\":\"(.*)darty\\\\.com/m/tunnel_achat/recu\\\\?i\\\\=(.*)\",\"mentalistWeight\":0.0},{\"id\":42266,\"name\":\"CLIC Ajout Panier SAC-ASPIRATEUR\",\"type\":\"CUSTOM\",\"multipleConversions\":false,\"mentalistWeight\":0.0},{\"id\":42252,\"name\":\"CLIC BANNIERE SAC-ASPIRATEUR\",\"type\":\"CUSTOM\",\"multipleConversions\":false,\"mentalistWeight\":0.0},{\"id\":41550,\"name\":\"Clic_retrait_magasin\",\"type\":\"CLICK\",\"multipleConversions\":false,\"mentalistWeight\":0.0},{\"id\":41466,\"name\":\"MOBILE_clic sections fiche produit\",\"type\":\"CLICK\",\"multipleConversions\":false,\"mentalistWeight\":0.0},{\"id\":38277,\"name\":\"clic_menu_burger\",\"type\":\"CLICK\",\"multipleConversions\":false,\"mentalistWeight\":0.0},{\"id\":32944,\"name\":\"clic menu mobile\",\"type\":\"CLICK\",\"multipleConversions\":false,\"mentalistWeight\":0.0},{\"id\":44763,\"name\":\"Clic_vers_DPRO\",\"type\":\"CLICK\",\"multipleConversions\":false,\"mentalistWeight\":0.0},{\"id\":42250,\"name\":\"Clic Popin Sac-Aspirateur\",\"type\":\"CUSTOM\",\"multipleConversions\":false,\"mentalistWeight\":0.0},{\"id\":42251,\"name\":\"CLIC BANDEAU SAC-ASPIRATEUR\",\"type\":\"CUSTOM\",\"multipleConversions\":false,\"mentalistWeight\":0.0},{\"id\":20267,\"name\":\"post Panier\",\"type\":\"URL\",\"multipleConversions\":false,\"url\":\".*tunnel\\\\_achat\\\\/identification.*\",\"mentalistWeight\":0.0},{\"id\":42297,\"name\":\"Commande avec Sac Aspi\",\"type\":\"CUSTOM\",\"multipleConversions\":false,\"mentalistWeight\":0.0}],\"checkTestedTrafficActive\":false,\"trackingScript\":\"/*fix Omniture*/\\r\\nwindow.s = window.s_c_il[1];\\r\\n\\r\\n// TEST PSE Tracking de clics\\r\\njQuery(\\\"body\\\").on(\\\"mousedown\\\", \\\".service-add, .service-add-pse\\\", function() {\\r\\n  \\t//Kameleoon.API.processConversion(40716);\\r\\n    Kameleoon.API.processConversion(40215);\\r\\n});\\r\\n\\r\\n// TEST PSE\\r\\nif (location.href.indexOf(\\\"https://secure.darty.com/tunnel_achat/recu\\\") != -1) {\\r\\n    Kameleoon.API.runWhenConditionTrue(function () {\\r\\n        return typeof jQuery != \\\"undefined\\\" && jQuery(\\\"#totalOrder\\\").length > 0;\\r\\n    }, function () {\\r\\n        var ktotal = parseFloat(jQuery(\\\"#totalOrder .total\\\").text().trim().split(\\\"€\\\")[0].replace(\\\",\\\", \\\".\\\"));\\r\\n        Kameleoon.API.processConversion(29324, ktotal);\\r\\n    }, 100);\\r\\n}\\r\\nif (location.href.indexOf(\\\"//secure.darty.com/tunnel_achat/recu?i=\\\") != -1) {\\r\\n   var PSEValue = Kameleoon.Utils.readLocalData(\\\"kTemp\\\");\\r\\n   Kameleoon.API.setCustomData(\\\"Prix PSE\\\", PSEValue);\\r\\n   Kameleoon.API.processConversion(40723);\\r\\n}\\r\\nKameleoon.API.runWhenConditionTrue(function() {\\r\\n  return location.href.indexOf(\\\"nav/extra/basket_add\\\") && typeof darProdTu != \\\"undefined\\\";\\r\\n}, function() {\\r\\n   var PSEValue = 0;\\r\\n   for (var i = 0; i < darProdTu.length; i++) {\\r\\n      if (darProdTu[i][1].indexOf(\\\"PSE\\\") != -1) {\\r\\n         PSEValue = darProdTu[i][3];\\r\\n         Kameleoon.Utils.createLocalData(\\\"kTemp\\\", PSEValue);\\r\\n      }\\r\\n   }\\r\\n}, 100);\\r\\n\\r\\n\\r\\n// Darty Montparnasse\\r\\n    // 1st\\r\\n    Kameleoon.API.runWhenConditionTrue(function(){\\r\\n        return typeof jQuery != \\\"undefined\\\" && (jQuery(\\\".darty_liste_produit\\\").length > 0 || jQuery(\\\".page-list-products\\\").length > 0); \\r\\n    }, function(){\\r\\n    // Page Liste produits\\r\\n    //if(jQuery('body').hasClass(\\\"darty_liste_produit\\\")){\\r\\n\\r\\n        jQuery(\\\".favorite_stores_list\\\").on('click', 'ul li a', function(e){\\r\\n            if(jQuery(this).text() == \\\"Montparnasse\\\"){\\r\\n                Kameleoon.API.processConversion(41358);\\r\\n            }\\r\\n        });\\r\\n\\r\\n\\r\\n    //}\\r\\n    }, 200);\\r\\n\\r\\n\\r\\n    Kameleoon.API.runWhenConditionTrue(function(){\\r\\n        return typeof jQuery != \\\"undefined\\\" && jQuery(\\\"#modal-stores-select iframe\\\").length > 0; \\r\\n    }, function(){\\r\\n    // Page article\\r\\n    // Retrait magasin\\r\\n        var $iframe = jQuery('#modal-stores-select iframe');\\r\\n        jQuery(function(){\\r\\n            $iframe.on('load', function(){\\r\\n                $iframe.ready(function() {\\r\\n\\r\\n                    $iframe.contents().find(\\\".store-favorite\\\").on('click', '.column-actions form button', function(e){\\r\\n                        if(jQuery(this).parent().parent().siblings('.column-infos').find('.store-name').text() == \\\"DARTY Montparnasse\\\"){\\r\\n                            Kameleoon.API.processConversion(41358);\\r\\n                        }\\r\\n                    });\\r\\n\\r\\n                });\\r\\n            });\\r\\n        });\\r\\n    }, 200);\\r\\n\\r\\n    // Version Mob\\r\\n    Kameleoon.API.runWhenConditionTrue(function(){\\r\\n        return typeof jQuery != \\\"undefined\\\" && jQuery(\\\"#page-add-basket\\\").length > 0; \\r\\n    }, function(){\\r\\n            jQuery(\\\".store-favorite\\\").on('click', '.column-actions a.btn-primary', function(e){\\r\\n                if(jQuery(this).parent().siblings('.column-infos').find('.store-name').text() == \\\"DARTY Montparnasse\\\"){\\r\\n                    Kameleoon.API.processConversion(41358);\\r\\n                }\\r\\n            });\\r\\n    }, 200);\\r\\n\\r\\n    Kameleoon.API.runWhenConditionTrue(function(){\\r\\n        return typeof jQuery != \\\"undefined\\\" && jQuery(\\\"#customer_area_favorite_stores\\\").length > 0; \\r\\n    }, function(){\\r\\n    // Espace client\\r\\n        if(jQuery('body#customer_area_favorite_stores').length > 0){\\r\\n            var $iframe = jQuery(\\\"#modal-stores-select iframe\\\");\\r\\n            jQuery(function(){\\r\\n                $iframe.on('load', function(){\\r\\n                    $iframe.ready(function() {\\r\\n                        \\r\\n\\r\\n                        $iframe.contents().find(\\\"#choix_retraitmagasin #stores-list\\\").on('click', '.store .column-actions .btn-primary', function(e){\\r\\n                            if(jQuery(this).parent().siblings('.column-infos').find('.store-name').text() == \\\"DARTY Montparnasse\\\"){\\r\\n                                Kameleoon.API.processConversion(41359);\\r\\n                            }                       \\r\\n                            \\r\\n                        });\\r\\n\\r\\n\\r\\n                    });\\r\\n                });\\r\\n            });  \\r\\n        }\\r\\n    }, 200);\\r\\n\\r\\n    // Version Mob\\r\\n    Kameleoon.API.runWhenConditionTrue(function(){\\r\\n        return typeof jQuery != \\\"undefined\\\" && jQuery(\\\"#page-identification\\\").length > 0; \\r\\n    }, function(){\\r\\n    // Espace client\\r\\n        if(jQuery('#stores-list').length > 0){\\r\\n\\r\\n            jQuery(\\\"#stores-list\\\").on('click', '.store .column-actions .btn-primary', function(e){\\r\\n                if(jQuery(this).parent().siblings('.column-infos').find('.store-name').text() == \\\"DARTY Montparnasse\\\"){\\r\\n                    Kameleoon.API.processConversion(41359);\\r\\n                }                       \\r\\n                \\r\\n            });\\r\\n\\r\\n\\r\\n        }\\r\\n    }, 200);\\r\\n// End Darty Montparnasse\\r\\n\\r\\n// CD magasin prefere Montparnasse\\r\\n// END CD magasin prefere Montparnasse\\r\\n\\r\\n// TEST SAC ASPI : Banniere\\r\\njQuery(\\\"body\\\").on(\\\"mousedown\\\", \\\"#product_list_carousel .slide_elem\\\", function(e) {\\r\\n\\tKameleoon.API.processConversion(42252);\\r\\n});\\r\\n\\r\\n// TEST SAC_ASPI : clic bouton panier\\r\\nif(window.location.href.indexOf(\\\"sac_aspirateur\\\")){\\r\\n\\tjQuery(\\\"body\\\").on(\\\"mousedown\\\", \\\"button.ajout_panier_bouton\\\", function(e) {\\r\\n\\t\\tKameleoon.API.processConversion(42266);\\r\\n\\t});\\r\\n}\\r\\n\\r\\n// Commande avec Sac ASPI\\r\\nif (location.href.indexOf(\\\"//secure.darty.com/tunnel_achat/recu\\\") != -1) {\\r\\n    Kameleoon.API.runWhenConditionTrue(function () {\\r\\n        return typeof jQuery != \\\"undefined\\\" && jQuery(\\\"#recapProducts\\\").length > 0;\\r\\n    }, function () {\\r\\n        \\r\\n        booleanAspi = true;\\r\\n    \\tjQuery(\\\"#recapProducts tbody tr\\\").each(function(e){\\r\\n    \\t\\tif(jQuery(this).find(\\\".line .family\\\").text() == \\\"Sac aspirateur\\\" && booleanAspi){\\r\\n    \\t\\t\\tKameleoon.API.processConversion(42297);\\r\\n    \\t\\t\\tbooleanAspi = false;\\r\\n    \\t\\t}\\r\\n    \\t});\\r\\n\\r\\n\\r\\n\\r\\n    }, 100);\\r\\n}\\r\\n\\r\\n// M goal transaction\\r\\nif (location.href.indexOf(\\\"darty.com/m/tunnel_achat/recu\\\") != -1) {\\r\\n    Kameleoon.API.runWhenConditionTrue(function () {\\r\\n        return typeof jQuery != \\\"undefined\\\" && dartProdPriList;\\r\\n    }, function () {\\r\\n\\r\\n        var kprice = dartProdPriList[0];\\r\\n        var klivraison = 0;\\r\\n        if(dartProdPriList && dartProdPriList[1]){\\r\\n        \\t var klivraison = dartProdPriList[1];\\r\\n        }\\r\\n        var ktotal = kprice + klivraison;\\r\\n        ktotal = parseInt(ktotal);\\r\\n        Kameleoon.API.processConversion(41467, ktotal);\\r\\n\\r\\n    }, 100);\\r\\n};\\ntry { var touchMove = false; if( Kameleoon.Internals.runtime.mouseDownEvent != \\\"mousedown\\\" ) { Kameleoon.Utils.addEventListener(document,\\\"touchmove\\\", function(e){touchMove=true;}); Kameleoon.Utils.addEventListener(document,\\\"touchstart\\\", function(e){touchMove=false;}); } Kameleoon.API.runWhenElementPresent('#kameleoonElement409170', function() { var elements = Kameleoon.Utils.querySelectorAll('#kameleoonElement409170');for (var i = 0, l = elements.length; i < l; ++i) { Kameleoon.Utils.addEventListener(elements[i], Kameleoon.Internals.runtime.mouseDownEvent, kameleoonEventTrackerCallback40415, true); }; }, null, false);var kameleoonEventTrackerCallback36730 = function(event) { if(Kameleoon.Internals.runtime.mouseDownEvent == \\\"mousedown\\\" || !touchMove) {  Kameleoon.API.processConversion(36730);}};Kameleoon.API.runWhenElementPresent('#product-list-cont-parent > div:first-child > div:first-child + div + div + div > div:first-child + div + div + form', function() { var elements = Kameleoon.Utils.querySelectorAll('#product-list-cont-parent > div:first-child > div:first-child + div + div + div > div:first-child + div + div + form');for (var i = 0, l = elements.length; i < l; ++i) { Kameleoon.Utils.addEventListener(elements[i], Kameleoon.Internals.runtime.mouseDownEvent, kameleoonEventTrackerCallback36730, true); }; }, null, false);var kameleoonEventTrackerCallback40716 = function(event) { if(Kameleoon.Internals.runtime.mouseDownEvent == \\\"mousedown\\\" || !touchMove) {  Kameleoon.API.processConversion(40716);}};Kameleoon.API.runWhenElementPresent('.service-add', function() { var elements = Kameleoon.Utils.querySelectorAll('.service-add');for (var i = 0, l = elements.length; i < l; ++i) { Kameleoon.Utils.addEventListener(elements[i], Kameleoon.Internals.runtime.mouseDownEvent, kameleoonEventTrackerCallback40716, true); }; }, null, false);var kameleoonEventTrackerCallback41465 = function(event) { if(Kameleoon.Internals.runtime.mouseDownEvent == \\\"mousedown\\\" || !touchMove) {  Kameleoon.API.processConversion(41465);}};Kameleoon.API.runWhenElementPresent('.btn.btn-primary.btn-img.btn-buy', function() { var elements = Kameleoon.Utils.querySelectorAll('.btn.btn-primary.btn-img.btn-buy');for (var i = 0, l = elements.length; i < l; ++i) { Kameleoon.Utils.addEventListener(elements[i], Kameleoon.Internals.runtime.mouseDownEvent, kameleoonEventTrackerCallback41465, true); }; }, null, false);Kameleoon.API.runWhenElementPresent('#product-list-cont-parent > div:first-child > div:first-child + div + div > h3:first-child + h2 > a:first-child', function() { var elements = Kameleoon.Utils.querySelectorAll('#product-list-cont-parent > div:first-child > div:first-child + div + div > h3:first-child + h2 > a:first-child');for (var i = 0, l = elements.length; i < l; ++i) { Kameleoon.Utils.addEventListener(elements[i], Kameleoon.Internals.runtime.mouseDownEvent, kameleoonEventTrackerCallback36731, true); }; }, null, false);Kameleoon.API.runWhenElementPresent('#kameleoonElement407435 > img:first-child', function() { var elements = Kameleoon.Utils.querySelectorAll('#kameleoonElement407435 > img:first-child');for (var i = 0, l = elements.length; i < l; ++i) { Kameleoon.Utils.addEventListener(elements[i], Kameleoon.Internals.runtime.mouseDownEvent, kameleoonEventTrackerCallback40415, true); }; }, null, false);Kameleoon.API.runWhenElementPresent('div.kButton', function() { var elements = Kameleoon.Utils.querySelectorAll('div.kButton');for (var i = 0, l = elements.length; i < l; ++i) { Kameleoon.Utils.addEventListener(elements[i], Kameleoon.Internals.runtime.mouseDownEvent, kameleoonEventTrackerCallback40716, true); }; }, null, false);var kameleoonEventTrackerCallback40415 = function(event) { if(Kameleoon.Internals.runtime.mouseDownEvent == \\\"mousedown\\\" || !touchMove) {  Kameleoon.API.processConversion(40415);}};Kameleoon.API.runWhenElementPresent('#kameleoonElement407377 > img:first-child', function() { var elements = Kameleoon.Utils.querySelectorAll('#kameleoonElement407377 > img:first-child');for (var i = 0, l = elements.length; i < l; ++i) { Kameleoon.Utils.addEventListener(elements[i], Kameleoon.Internals.runtime.mouseDownEvent, kameleoonEventTrackerCallback40415, true); }; }, null, false);var kameleoonEventTrackerCallback41735 = function(event) { if(Kameleoon.Internals.runtime.mouseDownEvent == \\\"mousedown\\\" || !touchMove) {  Kameleoon.API.processConversion(41735);}};Kameleoon.API.runWhenElementPresent('.btn-secondary', function() { var elements = Kameleoon.Utils.querySelectorAll('.btn-secondary');for (var i = 0, l = elements.length; i < l; ++i) { Kameleoon.Utils.addEventListener(elements[i], Kameleoon.Internals.runtime.mouseDownEvent, kameleoonEventTrackerCallback41735, true); }; }, null, false);var kameleoonEventTrackerCallback36731 = function(event) { if(Kameleoon.Internals.runtime.mouseDownEvent == \\\"mousedown\\\" || !touchMove) {  Kameleoon.API.processConversion(36731);}};Kameleoon.API.runWhenElementPresent('#product-list-cont-parent > div:first-child > div:first-child + div > a:first-child > img:first-child', function() { var elements = Kameleoon.Utils.querySelectorAll('#product-list-cont-parent > div:first-child > div:first-child + div > a:first-child > img:first-child');for (var i = 0, l = elements.length; i < l; ++i) { Kameleoon.Utils.addEventListener(elements[i], Kameleoon.Internals.runtime.mouseDownEvent, kameleoonEventTrackerCallback36731, true); }; }, null, false);Kameleoon.API.runWhenElementPresent('#kameleoonElement422839', function() { var elements = Kameleoon.Utils.querySelectorAll('#kameleoonElement422839');for (var i = 0, l = elements.length; i < l; ++i) { Kameleoon.Utils.addEventListener(elements[i], Kameleoon.Internals.runtime.mouseDownEvent, kameleoonEventTrackerCallback44763, true); }; }, null, false);Kameleoon.API.runWhenElementPresent('#kameleoonElement407418', function() { var elements = Kameleoon.Utils.querySelectorAll('#kameleoonElement407418');for (var i = 0, l = elements.length; i < l; ++i) { Kameleoon.Utils.addEventListener(elements[i], Kameleoon.Internals.runtime.mouseDownEvent, kameleoonEventTrackerCallback40415, true); }; }, null, false);Kameleoon.API.runWhenElementPresent('#kameleoonElement409166', function() { var elements = Kameleoon.Utils.querySelectorAll('#kameleoonElement409166');for (var i = 0, l = elements.length; i < l; ++i) { Kameleoon.Utils.addEventListener(elements[i], Kameleoon.Internals.runtime.mouseDownEvent, kameleoonEventTrackerCallback40415, true); }; }, null, false);var kameleoonEventTrackerCallback41550 = function(event) { if(Kameleoon.Internals.runtime.mouseDownEvent == \\\"mousedown\\\" || !touchMove) {  Kameleoon.API.processConversion(41550);}};Kameleoon.API.runWhenElementPresent('.retirer_magasin', function() { var elements = Kameleoon.Utils.querySelectorAll('.retirer_magasin');for (var i = 0, l = elements.length; i < l; ++i) { Kameleoon.Utils.addEventListener(elements[i], Kameleoon.Internals.runtime.mouseDownEvent, kameleoonEventTrackerCallback41550, true); }; }, null, false);var kameleoonEventTrackerCallback41466 = function(event) { if(Kameleoon.Internals.runtime.mouseDownEvent == \\\"mousedown\\\" || !touchMove) {  Kameleoon.API.processConversion(41466);}};Kameleoon.API.runWhenElementPresent('#page-details-product .bloc-expandable', function() { var elements = Kameleoon.Utils.querySelectorAll('#page-details-product .bloc-expandable');for (var i = 0, l = elements.length; i < l; ++i) { Kameleoon.Utils.addEventListener(elements[i], Kameleoon.Internals.runtime.mouseDownEvent, kameleoonEventTrackerCallback41466, true); }; }, null, false);var kameleoonEventTrackerCallback38277 = function(event) { if(Kameleoon.Internals.runtime.mouseDownEvent == \\\"mousedown\\\" || !touchMove) {  Kameleoon.API.processConversion(38277);}};Kameleoon.API.runWhenElementPresent('#alert_cookie + div > div:first-child > div:first-child > ul:first-child > li:first-child + li > button:first-child > img:first-child', function() { var elements = Kameleoon.Utils.querySelectorAll('#alert_cookie + div > div:first-child > div:first-child > ul:first-child > li:first-child + li > button:first-child > img:first-child');for (var i = 0, l = elements.length; i < l; ++i) { Kameleoon.Utils.addEventListener(elements[i], Kameleoon.Internals.runtime.mouseDownEvent, kameleoonEventTrackerCallback38277, true); }; }, null, false);var kameleoonEventTrackerCallback32944 = function(event) { if(Kameleoon.Internals.runtime.mouseDownEvent == \\\"mousedown\\\" || !touchMove) {  Kameleoon.API.processConversion(32944);}};Kameleoon.API.runWhenElementPresent('#menu-fix > li:first-child + li + li + li > a:first-child', function() { var elements = Kameleoon.Utils.querySelectorAll('#menu-fix > li:first-child + li + li + li > a:first-child');for (var i = 0, l = elements.length; i < l; ++i) { Kameleoon.Utils.addEventListener(elements[i], Kameleoon.Internals.runtime.mouseDownEvent, kameleoonEventTrackerCallback32944, true); }; }, null, false);var kameleoonEventTrackerCallback44763 = function(event) { if(Kameleoon.Internals.runtime.mouseDownEvent == \\\"mousedown\\\" || !touchMove) {  Kameleoon.API.processConversion(44763);}};Kameleoon.API.runWhenElementPresent('#kameleoonElement422874 > u:first-child', function() { var elements = Kameleoon.Utils.querySelectorAll('#kameleoonElement422874 > u:first-child');for (var i = 0, l = elements.length; i < l; ++i) { Kameleoon.Utils.addEventListener(elements[i], Kameleoon.Internals.runtime.mouseDownEvent, kameleoonEventTrackerCallback44763, true); }; }, null, false);} catch (exception) { console.log('An error occurred in your custom JavaScript Kameleoon tracking function, please check your code.'); console.log(exception, exception.message); }\",\"maxNumberLocalVisits\":25,\"staticURL\":\"//static.kameleoon.eu/\",\"kameleoonByteLength\":null,\"trackerNodeCode\":null,\"trackingMode\":\"none\"}};\nKameleoon.Internals.configuration.Gatherer = \"eyJkZWJ1Z0xldmVsIjo0LCJlbmFibGVJbWFnZXNEZXRlY3Rpb25DYWNoZVRpbWVvdXRDb21wdXRhdGlvbiI6ZmFsc2UsImludGVyZXN0cyI6W10sImludGVyZXN0c0ltYWdlc0xpc3RzIjpbXSwidGltZVpvbmVHcm91cHMiOltdLCJsYW5ndWFnZXMiOltdLCJicm93c2VycyI6W3sibmFtZSI6IkNIUk9NRSIsImRpc2FibGVkIjpmYWxzZX0seyJuYW1lIjoiRVhQTE9SRVIiLCJkaXNhYmxlZCI6ZmFsc2V9LHsibmFtZSI6IkZJUkVGT1giLCJkaXNhYmxlZCI6ZmFsc2V9LHsibmFtZSI6IlNBRkFSSSIsImRpc2FibGVkIjpmYWxzZX0seyJuYW1lIjoiT1BFUkEiLCJkaXNhYmxlZCI6ZmFsc2V9XSwib3NzIjpbeyJuYW1lIjoiV0lORE9XUyIsImRpc2FibGVkIjpmYWxzZX0seyJuYW1lIjoiTUFDIiwiZGlzYWJsZWQiOmZhbHNlfSx7Im5hbWUiOiJJT1MiLCJkaXNhYmxlZCI6ZmFsc2V9LHsibmFtZSI6IkxJTlVYIiwiZGlzYWJsZWQiOmZhbHNlfSx7Im5hbWUiOiJBTkRST0lEIiwiZGlzYWJsZWQiOmZhbHNlfV0sImFsaWFzU2l0ZXMiOltdLCJub1JlZmVycmVyUGFnZXMiOltdLCJkaXJlY3ROb25lUmVmZXJyZXJPbmx5Rmlyc3QiOmZhbHNlLCJyZWZlcnJlcnMiOlt7Im5hbWUiOiJHb29nbGUgQWRXb3JkcyIsImRpc2FibGVkIjpmYWxzZSwidGFnIjoiQWQiLCJwcmlvcml0eSI6MCwiZGV0ZWN0aW9ucyI6W3siYW5kTWV0aG9kIjoiIiwibWV0aG9kIjoiUkVGRVJSRVJfUkVHRVgiLCJhbmQiOmZhbHNlLCJhbmRQYXJhbWV0ZXJzIjoiIiwicGFyYW1ldGVycyI6Il4uK1xcLmdvb2dsZShcXC5jb20/KT9cXC5bXi9cXC5dKy9hY2xrKFtcXD8mI10uKnwpJCJ9LHsiYW5kTWV0aG9kIjoiIiwibWV0aG9kIjoiVVJMX1JFR0VYIiwiYW5kIjpmYWxzZSwiYW5kUGFyYW1ldGVycyI6IiIsInBhcmFtZXRlcnMiOiJbXFw/JiNdZ2NsaWQ9In1dfSx7Im5hbWUiOiJHb29nbGUgT3JnYW5pYyBTZWFyY2giLCJkaXNhYmxlZCI6ZmFsc2UsInRhZyI6Ik9yZ2FuaWMgU2VhcmNoIiwicHJpb3JpdHkiOjAsImRldGVjdGlvbnMiOlt7ImFuZE1ldGhvZCI6IiIsIm1ldGhvZCI6IlJFRkVSUkVSX1JFR0VYIiwiYW5kIjpmYWxzZSwiYW5kUGFyYW1ldGVycyI6IiIsInBhcmFtZXRlcnMiOiJeLitcXC5nb29nbGUoXFwuY29tPyk/XFwuW14vXFwuXSsvKD8hYWNsa3xpbWdyZXMpLipbXFw/JiNdcT0uKihbXFw/JiNdLip8KSQifSx7ImFuZE1ldGhvZCI6IiIsIm1ldGhvZCI6IlJFRkVSUkVSX1JFR0VYIiwiYW5kIjpmYWxzZSwiYW5kUGFyYW1ldGVycyI6IiIsInBhcmFtZXRlcnMiOiJeLitcXC5nb29nbGUoXFwuY29tPyk/XFwuW14vXFwuXSsvPyQifV19LHsibmFtZSI6IkJpbmcgT3JnYW5pYyBTZWFyY2giLCJkaXNhYmxlZCI6ZmFsc2UsInRhZyI6Ik9yZ2FuaWMgU2VhcmNoIiwicHJpb3JpdHkiOjAsImRldGVjdGlvbnMiOlt7ImFuZE1ldGhvZCI6IiIsIm1ldGhvZCI6IlJFRkVSUkVSX1JFR0VYIiwiYW5kIjpmYWxzZSwiYW5kUGFyYW1ldGVycyI6IiIsInBhcmFtZXRlcnMiOiJeLitcXC5iaW5nXFwuW14vXFwuXSsvLipbXFw/JiNdcT0uKihbXFw/JiNdLip8KSQifV19LHsibmFtZSI6IllhaG9vIE9yZ2FuaWMgU2VhcmNoIiwiZGlzYWJsZWQiOmZhbHNlLCJ0YWciOiJPcmdhbmljIFNlYXJjaCIsInByaW9yaXR5IjowLCJkZXRlY3Rpb25zIjpbeyJhbmRNZXRob2QiOiIiLCJtZXRob2QiOiJSRUZFUlJFUl9SRUdFWCIsImFuZCI6ZmFsc2UsImFuZFBhcmFtZXRlcnMiOiIiLCJwYXJhbWV0ZXJzIjoiXi4rXFwueWFob29cXC5bXi9cXC5dKy8uKltcXD8mI11wPS4qKFtcXD8mI10uKnwpJCJ9XX0seyJuYW1lIjoiQmFpZHUgT3JnYW5pYyBTZWFyY2giLCJkaXNhYmxlZCI6ZmFsc2UsInRhZyI6Ik9yZ2FuaWMgU2VhcmNoIiwicHJpb3JpdHkiOjAsImRldGVjdGlvbnMiOlt7ImFuZE1ldGhvZCI6IiIsIm1ldGhvZCI6IlJFRkVSUkVSX1JFR0VYIiwiYW5kIjpmYWxzZSwiYW5kUGFyYW1ldGVycyI6IiIsInBhcmFtZXRlcnMiOiJeLitcXC5iYWlkdVxcLlteL1xcLl0rLy4qW1xcPyYjXXdkPS4qKFtcXD8mI10uKnwpJCJ9XX1dLCJrZXlQYWdlcyI6W10sImtleVdvcmRzIjpbXSwidHJhY2siOnRydWUsImZ1bGxUcmFja2luZ01vZGUiOmZhbHNlLCJkcm9wUmF0ZSI6MC4wLCJjdXN0b21EYXRhIjpbeyJ2aXJ0dWFsIjpmYWxzZSwiY3VzdG9tRXZhbENvZGUiOiIiLCJjb25zdGFudCI6ZmFsc2UsIm1ldGhvZCI6IkNMSUVOVCIsImd0bVZhcmlhYmxlTmFtZSI6IiIsImxlYXJuYWJsZSI6ZmFsc2UsImZpbHRyYWJsZVZlbnRpbGFibGUiOnRydWUsInRjVmFyaWFibGVOYW1lIjoiIiwidHlwZSI6IlNUUklORyIsInRhcmdldGFibGUiOnRydWUsImxvY2FsT25seSI6ZmFsc2UsIm51bWJlclZhbHVlcyI6LTEsInNjb3BlIjoiVklTSVQiLCJuYW1lIjoiUHJpeCBQU0UifSx7ImRpc2FibGVkIjp0cnVlfSx7InZpcnR1YWwiOmZhbHNlLCJjdXN0b21FdmFsQ29kZSI6IiIsImNvbnN0YW50IjpmYWxzZSwibWV0aG9kIjoiQ0xJRU5UIiwiZ3RtVmFyaWFibGVOYW1lIjoiIiwibGVhcm5hYmxlIjpmYWxzZSwiZmlsdHJhYmxlVmVudGlsYWJsZSI6dHJ1ZSwidGNWYXJpYWJsZU5hbWUiOiIiLCJ0eXBlIjoiQk9PTEVBTiIsInRhcmdldGFibGUiOnRydWUsImxvY2FsT25seSI6ZmFsc2UsIm51bWJlclZhbHVlcyI6LTIsInNjb3BlIjoiVklTSVRPUiIsIm5hbWUiOiJNYWdhc2luIFByZWZlcmUgTW9udHBhcm5hc3NlIn0seyJ2aXJ0dWFsIjpmYWxzZSwiY3VzdG9tRXZhbENvZGUiOiIiLCJjb25zdGFudCI6ZmFsc2UsIm1ldGhvZCI6IkNMSUVOVCIsImd0bVZhcmlhYmxlTmFtZSI6IiIsImxlYXJuYWJsZSI6ZmFsc2UsImZpbHRyYWJsZVZlbnRpbGFibGUiOnRydWUsInRjVmFyaWFibGVOYW1lIjoiIiwidHlwZSI6IkJPT0xFQU4iLCJ0YXJnZXRhYmxlIjp0cnVlLCJsb2NhbE9ubHkiOmZhbHNlLCJudW1iZXJWYWx1ZXMiOi0yLCJzY29wZSI6IlZJU0lUIiwibmFtZSI6Ikdlb2xvY2FsaXNlIHpvbmUgTW9udHBhcm5hc3NlIn1dLCJjdXN0b21TY3JpcHRCZWZvcmUiOiIifQ==\";\n!function(a,b){this[a]=b()}(\"bowser\",function(){var e=true;function c(A){function s(J){var I=A.match(J);return(I&&I.length>1&&I[1])||\"\"}function B(J){var I=A.match(J);return(I&&I.length>1&&I[2])||\"\"}var z=s(/(ipod|iphone|ipad)/i).toLowerCase(),j=/like android/i.test(A),F=!j&&/android/i.test(A),x=/nexus\\s*[0-6]\\s*/i.test(A),G=!x&&/nexus\\s*[0-9]+/i.test(A),v=/CrOS/.test(A),w=/silk/i.test(A),D=/sailfish/i.test(A),y=/tizen/i.test(A),i=/(web|hpw)os/i.test(A),r=/windows phone/i.test(A),C=/SamsungBrowser/i.test(A),E=!r&&/windows/i.test(A),o=!z&&!w&&/macintosh/i.test(A),t=!F&&!D&&!y&&!i&&/linux/i.test(A),m=s(/edge\\/(\\d+(\\.\\d+)?)/i),H=s(/version\\/(\\d+(\\.\\d+)?)/i),q=/tablet/i.test(A),l=!q&&/[^-]mobi/i.test(A),p=/xbox/i.test(A),u;if(/opera/i.test(A)){u={name:\"Opera\",opera:e,version:H||s(/(?:opera|opr|opios)[\\s\\/](\\d+(\\.\\d+)?)/i)}}else{if(/opr|opios/i.test(A)){u={name:\"Opera\",opera:e,version:s(/(?:opr|opios)[\\s\\/](\\d+(\\.\\d+)?)/i)||H}}else{if(/SamsungBrowser/i.test(A)){u={name:\"Samsung Internet for Android\",samsungBrowser:e,version:H||s(/(?:SamsungBrowser)[\\s\\/](\\d+(\\.\\d+)?)/i)}}else{if(/coast/i.test(A)){u={name:\"Opera Coast\",coast:e,version:H||s(/(?:coast)[\\s\\/](\\d+(\\.\\d+)?)/i)}}else{if(/yabrowser/i.test(A)){u={name:\"Yandex Browser\",yandexbrowser:e,version:H||s(/(?:yabrowser)[\\s\\/](\\d+(\\.\\d+)?)/i)}}else{if(/ucbrowser/i.test(A)){u={name:\"UC Browser\",ucbrowser:e,version:s(/(?:ucbrowser)[\\s\\/](\\d+(?:\\.\\d+)+)/i)}}else{if(/mxios/i.test(A)){u={name:\"Maxthon\",maxthon:e,version:s(/(?:mxios)[\\s\\/](\\d+(?:\\.\\d+)+)/i)}}else{if(/epiphany/i.test(A)){u={name:\"Epiphany\",epiphany:e,version:s(/(?:epiphany)[\\s\\/](\\d+(?:\\.\\d+)+)/i)}}else{if(/puffin/i.test(A)){u={name:\"Puffin\",puffin:e,version:s(/(?:puffin)[\\s\\/](\\d+(?:\\.\\d+)?)/i)}}else{if(/sleipnir/i.test(A)){u={name:\"Sleipnir\",sleipnir:e,version:s(/(?:sleipnir)[\\s\\/](\\d+(?:\\.\\d+)+)/i)}}else{if(/k-meleon/i.test(A)){u={name:\"K-Meleon\",kMeleon:e,version:s(/(?:k-meleon)[\\s\\/](\\d+(?:\\.\\d+)+)/i)}}else{if(r){u={name:\"Windows Phone\",windowsphone:e};if(m){u.msedge=e;u.version=m}else{u.msie=e;u.version=s(/iemobile\\/(\\d+(\\.\\d+)?)/i)}}else{if(/msie|trident/i.test(A)){u={name:\"Internet Explorer\",msie:e,version:s(/(?:msie |rv:)(\\d+(\\.\\d+)?)/i)}}else{if(v){u={name:\"Chrome\",chromeos:e,chromeBook:e,chrome:e,version:s(/(?:chrome|crios|crmo)\\/(\\d+(\\.\\d+)?)/i)}}else{if(/chrome.+? edge/i.test(A)){u={name:\"Microsoft Edge\",msedge:e,version:m}}else{if(/vivaldi/i.test(A)){u={name:\"Vivaldi\",vivaldi:e,version:s(/vivaldi\\/(\\d+(\\.\\d+)?)/i)||H}}else{if(D){u={name:\"Sailfish\",sailfish:e,version:s(/sailfish\\s?browser\\/(\\d+(\\.\\d+)?)/i)}}else{if(/seamonkey\\//i.test(A)){u={name:\"SeaMonkey\",seamonkey:e,version:s(/seamonkey\\/(\\d+(\\.\\d+)?)/i)}}else{if(/firefox|iceweasel|fxios/i.test(A)){u={name:\"Firefox\",firefox:e,version:s(/(?:firefox|iceweasel|fxios)[ \\/](\\d+(\\.\\d+)?)/i)};if(/\\((mobile|tablet);[^\\)]*rv:[\\d\\.]+\\)/i.test(A)){u.firefoxos=e}}else{if(w){u={name:\"Amazon Silk\",silk:e,version:s(/silk\\/(\\d+(\\.\\d+)?)/i)}}else{if(/phantom/i.test(A)){u={name:\"PhantomJS\",phantom:e,version:s(/phantomjs\\/(\\d+(\\.\\d+)?)/i)}}else{if(/slimerjs/i.test(A)){u={name:\"SlimerJS\",slimer:e,version:s(/slimerjs\\/(\\d+(\\.\\d+)?)/i)}}else{if(/blackberry|\\bbb\\d+/i.test(A)||/rim\\stablet/i.test(A)){u={name:\"BlackBerry\",blackberry:e,version:H||s(/blackberry[\\d]+\\/(\\d+(\\.\\d+)?)/i)}}else{if(i){u={name:\"WebOS\",webos:e,version:H||s(/w(?:eb)?osbrowser\\/(\\d+(\\.\\d+)?)/i)};/touchpad\\//i.test(A)&&(u.touchpad=e)}else{if(/bada/i.test(A)){u={name:\"Bada\",bada:e,version:s(/dolfin\\/(\\d+(\\.\\d+)?)/i)}}else{if(y){u={name:\"Tizen\",tizen:e,version:s(/(?:tizen\\s?)?browser\\/(\\d+(\\.\\d+)?)/i)||H}}else{if(/qupzilla/i.test(A)){u={name:\"QupZilla\",qupzilla:e,version:s(/(?:qupzilla)[\\s\\/](\\d+(?:\\.\\d+)+)/i)||H}}else{if(/chromium/i.test(A)){u={name:\"Chromium\",chromium:e,version:s(/(?:chromium)[\\s\\/](\\d+(?:\\.\\d+)?)/i)||H}}else{if(/chrome|crios|crmo/i.test(A)){u={name:\"Chrome\",chrome:e,version:s(/(?:chrome|crios|crmo)\\/(\\d+(\\.\\d+)?)/i)}}else{if(F){u={name:\"Android\",version:H}}else{if(/safari|applewebkit/i.test(A)){u={name:\"Safari\",safari:e};if(H){u.version=H}}else{if(z){u={name:z==\"iphone\"?\"iPhone\":z==\"ipad\"?\"iPad\":\"iPod\"};if(H){u.version=H}}else{if(/googlebot/i.test(A)){u={name:\"Googlebot\",googlebot:e,version:s(/googlebot\\/(\\d+(\\.\\d+))/i)||H}}else{u={name:s(/^(.*)\\/(.*) /),version:B(/^(.*)\\/(.*) /)}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}if(!u.msedge&&/(apple)?webkit/i.test(A)){if(/(apple)?webkit\\/537\\.36/i.test(A)){u.name=u.name||\"Blink\";u.blink=e;u.webkit=e}else{u.name=u.name||\"Webkit\";u.webkit=e}if(!u.version&&H){u.version=H}}else{if(!u.opera&&/gecko\\//i.test(A)){u.name=u.name||\"Gecko\";u.gecko=e;u.version=u.version||s(/gecko\\/(\\d+(\\.\\d+)?)/i)}else{if(u.msedge&&/(apple)?webkit/i.test(A)){if(/(apple)?webkit\\/537\\.36/i.test(A)){u.webkit=e}}}}if(!u.windowsphone&&!u.msedge&&(F||u.silk)){u.android=e}else{if(!u.windowsphone&&!u.msedge&&z){u[z]=e;u.ios=e}else{if(o){u.mac=e}else{if(p){u.xbox=e}else{if(E){u.windows=e}else{if(t){u.linux=e}}}}}}var k=\"\";if(u.windowsphone){k=s(/windows phone (?:os)?\\s?(\\d+(\\.\\d+)*)/i)}else{if(z){k=s(/os (\\d+([_\\s]\\d+)*) like mac os x/i);k=k.replace(/[_\\s]/g,\".\")}else{if(F){k=s(/android[ \\/-](\\d+(\\.\\d+)*)/i)}else{if(u.webos){k=s(/(?:web|hpw)os\\/(\\d+(\\.\\d+)*)/i)}else{if(u.blackberry){k=s(/rim\\stablet\\sos\\s(\\d+(\\.\\d+)*)/i)}else{if(u.bada){k=s(/bada\\/(\\d+(\\.\\d+)*)/i)}else{if(u.tizen){k=s(/tizen[\\/\\s](\\d+(\\.\\d+)*)/i)}}}}}}}if(k){u.osversion=k}var n=k.split(\".\")[0];if(q||G||z==\"ipad\"||(F&&(n==3||(n>=4&&!l)))||u.silk){u.tablet=e}else{if(l||z==\"iphone\"||z==\"ipod\"||F||x||u.blackberry||u.webos||u.bada){u.mobile=e}}if(u.msedge||(u.msie&&u.version>=10)||(u.yandexbrowser&&u.version>=15)||(u.vivaldi&&u.version>=1)||(u.chrome&&u.version>=20)||(u.samsungBrowser&&u.version>=4)||(u.firefox&&u.version>=20)||(u.safari&&u.version>=6)||(u.opera&&u.version>=10)||(u.ios&&u.osversion&&u.osversion.split(\".\")[0]>=6)||(u.blackberry&&u.version>=10.1)||(u.chromium&&u.version>=20)){u.a=e}else{if((u.msie&&u.version<10)||(u.chrome&&u.version<20)||(u.firefox&&u.version<20)||(u.safari&&u.version<6)||(u.opera&&u.version<10)||(u.ios&&u.osversion&&u.osversion.split(\".\")[0]<6)||(u.chromium&&u.version<20)){u.c=e}else{u.x=e}}return u}var f=c(typeof navigator!==\"undefined\"?navigator.userAgent||\"\":\"\");f.test=function(k){for(var l=0;l<k.length;++l){var j=k[l];if(typeof j===\"string\"){if(j in f){return true}}}return false};function g(i){return i.split(\".\").length}function h(k,m){var j=[],l;if(Array.prototype.map){return Array.prototype.map.call(k,m)}for(l=0;l<k.length;l++){j.push(m(k[l]))}return j}function a(i){var j=Math.max(g(i[0]),g(i[1]));var k=h(i,function(l){var m=j-g(l);l=l+new Array(m+1).join(\".0\");return h(l.split(\".\"),function(n){return new Array(20-n.length).join(\"0\")+n}).reverse()});while(--j>=0){if(k[0][j]>k[1][j]){return 1}else{if(k[0][j]===k[1][j]){if(j===0){return 0}}else{return -1}}}}function d(n,l,k){var m=f;if(typeof l===\"string\"){k=l;l=void (0)}if(l===void (0)){l=false}if(k){m=c(k)}var i=\"\"+m.version;for(var j in n){if(n.hasOwnProperty(j)){if(m[j]){return a([i,n[j]])<0}}}return l}function b(k,j,i){return !d(k,j,i)}f.isUnsupportedBrowser=d;f.compareVersions=a;f.check=b;f._detect=c;return f});this.Element&&function(a){a.matches=a.matches||Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(b){var e=this,c=(e.parentNode||e.document).querySelectorAll(b),d=-1;while(c[++d]&&c[d]!=e){}return !!c[d]}}(Element.prototype);this.Element&&function(a){a.closest=a.closest||function(b){var c=this;while(c&&c.matches&&!c.matches(b)){c=c.parentNode}return c&&c.matches?c:null}}(Element.prototype);";
				if (! window.noLocalStorage)
				{
					messageToPost += "Kameleoon.Internals.configuration.useWideDomainSupport = true;";
					var externalIframeDataAsString;
					try
					{
						externalIframeDataAsString = JSON.stringify(window.retrieve());
						eval("window.testExternalIframeData = " + externalIframeDataAsString + ";delete window.testExternalIframeData;")
					}
					catch (e)
					{
						externalIframeDataAsString = JSON.stringify({});
					}
					messageToPost += ("Kameleoon.Internals.configuration.externalIframeData = " + externalIframeDataAsString + ";");
					var kameleoonFull = sessionStorage.getItem("kameleoonFull");
					var kameleoonFullTime = sessionStorage.getItem("kameleoonFullTime");
					if ((null != kameleoonFull) && (null != kameleoonFullTime) && (new Date().getTime() - parseInt(kameleoonFullTime) < 12 * 60 * 60 * 1000 /* 12 hours */))
					{
						messageToPost += ("Kameleoon.Internals.configuration.kameleoonFull = " + JSON.stringify(kameleoonFull) + ";");
					}
				}
				window.parent.postMessage(messageToPost, "*");
			}
		</script>
	</head>
	<body>

</body></html>