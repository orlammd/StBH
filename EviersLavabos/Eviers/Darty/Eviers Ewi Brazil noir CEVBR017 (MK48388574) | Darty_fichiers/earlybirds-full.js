var EarlyBirds=function(window,undefined){var EarlyBirds={};!function(e){var t=!1;if("function"==typeof define&&define.amd&&(define(e),t=!0),"object"==typeof exports&&(module.exports=e(),t=!0),!t){var n=window.Cookies,r=window.Cookies=e();r.noConflict=function(){return window.Cookies=n,r}}}(function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}function t(n){function r(t,i,o){var a;if("undefined"!=typeof document){if(arguments.length>1){if(o=e({path:"/"},r.defaults,o),"number"==typeof o.expires){var s=new Date;s.setMilliseconds(s.getMilliseconds()+864e5*o.expires),o.expires=s}try{a=JSON.stringify(i),/^[\{\[]/.test(a)&&(i=a)}catch(l){}return i=n.write?n.write(i,t):encodeURIComponent(String(i)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)),t=t.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),t=t.replace(/[\(\)]/g,escape),document.cookie=[t,"=",i,o.expires?"; expires="+o.expires.toUTCString():"",o.path?"; path="+o.path:"",o.domain?"; domain="+o.domain:"",o.secure?"; secure":""].join("")}t||(a={});for(var c=document.cookie?document.cookie.split("; "):[],u=/(%[0-9A-Z]{2})+/g,d=0;d<c.length;d++){var f=c[d].split("="),p=f.slice(1).join("=");'"'===p.charAt(0)&&(p=p.slice(1,-1));try{var y=f[0].replace(u,decodeURIComponent);if(p=n.read?n.read(p,y):n(p,y)||p.replace(u,decodeURIComponent),this.json)try{p=JSON.parse(p)}catch(l){}if(t===y){a=p;break}t||(a[y]=p)}catch(l){}}return a}}return r.set=r,r.get=function(e){return r.call(r,e)},r.getJSON=function(){return r.apply({json:!0},[].slice.call(arguments))},r.defaults={},r.remove=function(t,n){r(t,"",e(n,{expires:-1}))},r.withConverter=t,r}return t(function(){})}),function(){function e(e){function t(t,n,r,i,o,a){for(;o>=0&&o<a;o+=e){var s=i?i[o]:o;r=n(r,t[s],s,t)}return r}return function(n,r,i,o){r=m(r,o,4);var a=!B(n)&&b.keys(n),s=(a||n).length,l=e>0?0:s-1;return arguments.length<3&&(i=n[a?a[l]:l],l+=e),t(n,r,i,a,l,s)}}function t(e){return function(t,n,r){n=w(n,r);for(var i=C(t),o=e>0?0:i-1;o>=0&&o<i;o+=e)if(n(t[o],o,t))return o;return-1}}function n(e,t,n){return function(r,i,o){var a=0,s=C(r);if("number"==typeof o)e>0?a=o>=0?o:Math.max(o+s,a):s=o>=0?Math.min(o+1,s):o+s+1;else if(n&&o&&s)return o=n(r,i),r[o]===i?o:-1;if(i!==i)return o=t(u.call(r,a,s),b.isNaN),o>=0?o+a:-1;for(o=e>0?a:s-1;o>=0&&o<s;o+=e)if(r[o]===i)return o;return-1}}function r(e,t){var n=A.length,r=e.constructor,i=b.isFunction(r)&&r.prototype||s,o="constructor";for(b.has(e,o)&&!b.contains(t,o)&&t.push(o);n--;)o=A[n],o in e&&e[o]!==i[o]&&!b.contains(t,o)&&t.push(o)}var i=this,o=i._,a=Array.prototype,s=Object.prototype,l=Function.prototype,c=a.push,u=a.slice,d=s.toString,f=s.hasOwnProperty,p=Array.isArray,y=Object.keys,h=l.bind,g=Object.create,v=function(){},b=function(e){return e instanceof b?e:this instanceof b?void(this._wrapped=e):new b(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=b),exports._=b):i._=b,b.VERSION="1.8.3";var m=function(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,o){return e.call(t,n,r,i,o)}}return function(){return e.apply(t,arguments)}},w=function(e,t,n){return null==e?b.identity:b.isFunction(e)?m(e,t,n):b.isObject(e)?b.matcher(e):b.property(e)};b.iteratee=function(e,t){return w(e,t,1/0)};var E=function(e,t){return function(n){var r=arguments.length;if(r<2||null==n)return n;for(var i=1;i<r;i++)for(var o=arguments[i],a=e(o),s=a.length,l=0;l<s;l++){var c=a[l];t&&void 0!==n[c]||(n[c]=o[c])}return n}},k=function(e){if(!b.isObject(e))return{};if(g)return g(e);v.prototype=e;var t=new v;return v.prototype=null,t},U=function(e){return function(t){return null==t?void 0:t[e]}},O=Math.pow(2,53)-1,C=U("length"),B=function(e){var t=C(e);return"number"==typeof t&&t>=0&&t<=O};b.each=b.forEach=function(e,t,n){t=m(t,n);var r,i;if(B(e))for(r=0,i=e.length;r<i;r++)t(e[r],r,e);else{var o=b.keys(e);for(r=0,i=o.length;r<i;r++)t(e[o[r]],o[r],e)}return e},b.map=b.collect=function(e,t,n){t=w(t,n);for(var r=!B(e)&&b.keys(e),i=(r||e).length,o=Array(i),a=0;a<i;a++){var s=r?r[a]:a;o[a]=t(e[s],s,e)}return o},b.reduce=b.foldl=b.inject=e(1),b.reduceRight=b.foldr=e(-1),b.find=b.detect=function(e,t,n){var r;if(r=B(e)?b.findIndex(e,t,n):b.findKey(e,t,n),void 0!==r&&r!==-1)return e[r]},b.filter=b.select=function(e,t,n){var r=[];return t=w(t,n),b.each(e,function(e,n,i){t(e,n,i)&&r.push(e)}),r},b.reject=function(e,t,n){return b.filter(e,b.negate(w(t)),n)},b.every=b.all=function(e,t,n){t=w(t,n);for(var r=!B(e)&&b.keys(e),i=(r||e).length,o=0;o<i;o++){var a=r?r[o]:o;if(!t(e[a],a,e))return!1}return!0},b.some=b.any=function(e,t,n){t=w(t,n);for(var r=!B(e)&&b.keys(e),i=(r||e).length,o=0;o<i;o++){var a=r?r[o]:o;if(t(e[a],a,e))return!0}return!1},b.contains=b.includes=b.include=function(e,t,n,r){return B(e)||(e=b.values(e)),("number"!=typeof n||r)&&(n=0),b.indexOf(e,t,n)>=0},b.invoke=function(e,t){var n=u.call(arguments,2),r=b.isFunction(t);return b.map(e,function(e){var i=r?t:e[t];return null==i?i:i.apply(e,n)})},b.pluck=function(e,t){return b.map(e,b.property(t))},b.where=function(e,t){return b.filter(e,b.matcher(t))},b.findWhere=function(e,t){return b.find(e,b.matcher(t))},b.max=function(e,t,n){var r,i,o=-(1/0),a=-(1/0);if(null==t&&null!=e){e=B(e)?e:b.values(e);for(var s=0,l=e.length;s<l;s++)r=e[s],r>o&&(o=r)}else t=w(t,n),b.each(e,function(e,n,r){i=t(e,n,r),(i>a||i===-(1/0)&&o===-(1/0))&&(o=e,a=i)});return o},b.min=function(e,t,n){var r,i,o=1/0,a=1/0;if(null==t&&null!=e){e=B(e)?e:b.values(e);for(var s=0,l=e.length;s<l;s++)r=e[s],r<o&&(o=r)}else t=w(t,n),b.each(e,function(e,n,r){i=t(e,n,r),(i<a||i===1/0&&o===1/0)&&(o=e,a=i)});return o},b.shuffle=function(e){for(var t,n=B(e)?e:b.values(e),r=n.length,i=Array(r),o=0;o<r;o++)t=b.random(0,o),t!==o&&(i[o]=i[t]),i[t]=n[o];return i},b.sample=function(e,t,n){return null==t||n?(B(e)||(e=b.values(e)),e[b.random(e.length-1)]):b.shuffle(e).slice(0,Math.max(0,t))},b.sortBy=function(e,t,n){return t=w(t,n),b.pluck(b.map(e,function(e,n,r){return{value:e,index:n,criteria:t(e,n,r)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return e.index-t.index}),"value")};var S=function(e){return function(t,n,r){var i={};return n=w(n,r),b.each(t,function(r,o){var a=n(r,o,t);e(i,r,a)}),i}};b.groupBy=S(function(e,t,n){b.has(e,n)?e[n].push(t):e[n]=[t]}),b.indexBy=S(function(e,t,n){e[n]=t}),b.countBy=S(function(e,t,n){b.has(e,n)?e[n]++:e[n]=1}),b.toArray=function(e){return e?b.isArray(e)?u.call(e):B(e)?b.map(e,b.identity):b.values(e):[]},b.size=function(e){return null==e?0:B(e)?e.length:b.keys(e).length},b.partition=function(e,t,n){t=w(t,n);var r=[],i=[];return b.each(e,function(e,n,o){(t(e,n,o)?r:i).push(e)}),[r,i]},b.first=b.head=b.take=function(e,t,n){if(null!=e)return null==t||n?e[0]:b.initial(e,e.length-t)},b.initial=function(e,t,n){return u.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},b.last=function(e,t,n){if(null!=e)return null==t||n?e[e.length-1]:b.rest(e,Math.max(0,e.length-t))},b.rest=b.tail=b.drop=function(e,t,n){return u.call(e,null==t||n?1:t)},b.compact=function(e){return b.filter(e,b.identity)};var R=function(e,t,n,r){for(var i=[],o=0,a=r||0,s=C(e);a<s;a++){var l=e[a];if(B(l)&&(b.isArray(l)||b.isArguments(l))){t||(l=R(l,t,n));var c=0,u=l.length;for(i.length+=u;c<u;)i[o++]=l[c++]}else n||(i[o++]=l)}return i};b.flatten=function(e,t){return R(e,t,!1)},b.without=function(e){return b.difference(e,u.call(arguments,1))},b.uniq=b.unique=function(e,t,n,r){b.isBoolean(t)||(r=n,n=t,t=!1),null!=n&&(n=w(n,r));for(var i=[],o=[],a=0,s=C(e);a<s;a++){var l=e[a],c=n?n(l,a,e):l;t?(a&&o===c||i.push(l),o=c):n?b.contains(o,c)||(o.push(c),i.push(l)):b.contains(i,l)||i.push(l)}return i},b.union=function(){return b.uniq(R(arguments,!0,!0))},b.intersection=function(e){for(var t=[],n=arguments.length,r=0,i=C(e);r<i;r++){var o=e[r];if(!b.contains(t,o)){for(var a=1;a<n&&b.contains(arguments[a],o);a++);a===n&&t.push(o)}}return t},b.difference=function(e){var t=R(arguments,!0,!0,1);return b.filter(e,function(e){return!b.contains(t,e)})},b.zip=function(){return b.unzip(arguments)},b.unzip=function(e){for(var t=e&&b.max(e,C).length||0,n=Array(t),r=0;r<t;r++)n[r]=b.pluck(e,r);return n},b.object=function(e,t){for(var n={},r=0,i=C(e);r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},b.findIndex=t(1),b.findLastIndex=t(-1),b.sortedIndex=function(e,t,n,r){n=w(n,r,1);for(var i=n(t),o=0,a=C(e);o<a;){var s=Math.floor((o+a)/2);n(e[s])<i?o=s+1:a=s}return o},b.indexOf=n(1,b.findIndex,b.sortedIndex),b.lastIndexOf=n(-1,b.findLastIndex),b.range=function(e,t,n){null==t&&(t=e||0,e=0),n=n||1;for(var r=Math.max(Math.ceil((t-e)/n),0),i=Array(r),o=0;o<r;o++,e+=n)i[o]=e;return i};var x=function(e,t,n,r,i){if(!(r instanceof t))return e.apply(n,i);var o=k(e.prototype),a=e.apply(o,i);return b.isObject(a)?a:o};b.bind=function(e,t){if(h&&e.bind===h)return h.apply(e,u.call(arguments,1));if(!b.isFunction(e))throw new TypeError("Bind must be called on a function");var n=u.call(arguments,2),r=function(){return x(e,r,t,this,n.concat(u.call(arguments)))};return r},b.partial=function(e){var t=u.call(arguments,1),n=function(){for(var r=0,i=t.length,o=Array(i),a=0;a<i;a++)o[a]=t[a]===b?arguments[r++]:t[a];for(;r<arguments.length;)o.push(arguments[r++]);return x(e,n,this,this,o)};return n},b.bindAll=function(e){var t,n,r=arguments.length;if(r<=1)throw new Error("bindAll must be passed function names");for(t=1;t<r;t++)n=arguments[t],e[n]=b.bind(e[n],e);return e},b.memoize=function(e,t){var n=function(r){var i=n.cache,o=""+(t?t.apply(this,arguments):r);return b.has(i,o)||(i[o]=e.apply(this,arguments)),i[o]};return n.cache={},n},b.delay=function(e,t){var n=u.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},b.defer=b.partial(b.delay,b,1),b.throttle=function(e,t,n){var r,i,o,a=null,s=0;n||(n={});var l=function(){s=n.leading===!1?0:b.now(),a=null,o=e.apply(r,i),a||(r=i=null)};return function(){var c=b.now();s||n.leading!==!1||(s=c);var u=t-(c-s);return r=this,i=arguments,u<=0||u>t?(a&&(clearTimeout(a),a=null),s=c,o=e.apply(r,i),a||(r=i=null)):a||n.trailing===!1||(a=setTimeout(l,u)),o}},b.debounce=function(e,t,n){var r,i,o,a,s,l=function(){var c=b.now()-a;c<t&&c>=0?r=setTimeout(l,t-c):(r=null,n||(s=e.apply(o,i),r||(o=i=null)))};return function(){o=this,i=arguments,a=b.now();var c=n&&!r;return r||(r=setTimeout(l,t)),c&&(s=e.apply(o,i),o=i=null),s}},b.wrap=function(e,t){return b.partial(t,e)},b.negate=function(e){return function(){return!e.apply(this,arguments)}},b.compose=function(){var e=arguments,t=e.length-1;return function(){for(var n=t,r=e[t].apply(this,arguments);n--;)r=e[n].call(this,r);return r}},b.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},b.before=function(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}},b.once=b.partial(b.before,2);var T=!{toString:null}.propertyIsEnumerable("toString"),A=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];b.keys=function(e){if(!b.isObject(e))return[];if(y)return y(e);var t=[];for(var n in e)b.has(e,n)&&t.push(n);return T&&r(e,t),t},b.allKeys=function(e){if(!b.isObject(e))return[];var t=[];for(var n in e)t.push(n);return T&&r(e,t),t},b.values=function(e){for(var t=b.keys(e),n=t.length,r=Array(n),i=0;i<n;i++)r[i]=e[t[i]];return r},b.mapObject=function(e,t,n){t=w(t,n);for(var r,i=b.keys(e),o=i.length,a={},s=0;s<o;s++)r=i[s],a[r]=t(e[r],r,e);return a},b.pairs=function(e){for(var t=b.keys(e),n=t.length,r=Array(n),i=0;i<n;i++)r[i]=[t[i],e[t[i]]];return r},b.invert=function(e){for(var t={},n=b.keys(e),r=0,i=n.length;r<i;r++)t[e[n[r]]]=n[r];return t},b.functions=b.methods=function(e){var t=[];for(var n in e)b.isFunction(e[n])&&t.push(n);return t.sort()},b.extend=E(b.allKeys),b.extendOwn=b.assign=E(b.keys),b.findKey=function(e,t,n){t=w(t,n);for(var r,i=b.keys(e),o=0,a=i.length;o<a;o++)if(r=i[o],t(e[r],r,e))return r},b.pick=function(e,t,n){var r,i,o={},a=e;if(null==a)return o;b.isFunction(t)?(i=b.allKeys(a),r=m(t,n)):(i=R(arguments,!1,!1,1),r=function(e,t,n){return t in n},a=Object(a));for(var s=0,l=i.length;s<l;s++){var c=i[s],u=a[c];r(u,c,a)&&(o[c]=u)}return o},b.omit=function(e,t,n){if(b.isFunction(t))t=b.negate(t);else{var r=b.map(R(arguments,!1,!1,1),String);t=function(e,t){return!b.contains(r,t)}}return b.pick(e,t,n)},b.defaults=E(b.allKeys,!0),b.create=function(e,t){var n=k(e);return t&&b.extendOwn(n,t),n},b.clone=function(e){return b.isObject(e)?b.isArray(e)?e.slice():b.extend({},e):e},b.tap=function(e,t){return t(e),e},b.isMatch=function(e,t){var n=b.keys(t),r=n.length;if(null==e)return!r;for(var i=Object(e),o=0;o<r;o++){var a=n[o];if(t[a]!==i[a]||!(a in i))return!1}return!0};var j=function(e,t,n,r){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return e===t;e instanceof b&&(e=e._wrapped),t instanceof b&&(t=t._wrapped);var i=d.call(e);if(i!==d.call(t))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t}var o="[object Array]"===i;if(!o){if("object"!=typeof e||"object"!=typeof t)return!1;var a=e.constructor,s=t.constructor;if(a!==s&&!(b.isFunction(a)&&a instanceof a&&b.isFunction(s)&&s instanceof s)&&"constructor"in e&&"constructor"in t)return!1}n=n||[],r=r||[];for(var l=n.length;l--;)if(n[l]===e)return r[l]===t;if(n.push(e),r.push(t),o){if(l=e.length,l!==t.length)return!1;for(;l--;)if(!j(e[l],t[l],n,r))return!1}else{var c,u=b.keys(e);if(l=u.length,b.keys(t).length!==l)return!1;for(;l--;)if(c=u[l],!b.has(t,c)||!j(e[c],t[c],n,r))return!1}return n.pop(),r.pop(),!0};b.isEqual=function(e,t){return j(e,t)},b.isEmpty=function(e){return null==e||(B(e)&&(b.isArray(e)||b.isString(e)||b.isArguments(e))?0===e.length:0===b.keys(e).length)},b.isElement=function(e){return!(!e||1!==e.nodeType)},b.isArray=p||function(e){return"[object Array]"===d.call(e)},b.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},b.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){b["is"+e]=function(t){return d.call(t)==="[object "+e+"]"}}),b.isArguments(arguments)||(b.isArguments=function(e){return b.has(e,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(b.isFunction=function(e){return"function"==typeof e||!1}),b.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},b.isNaN=function(e){return b.isNumber(e)&&e!==+e},b.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"===d.call(e)},b.isNull=function(e){return null===e},b.isUndefined=function(e){return void 0===e},b.has=function(e,t){return null!=e&&f.call(e,t)},b.noConflict=function(){return i._=o,this},b.identity=function(e){return e},b.constant=function(e){return function(){return e}},b.noop=function(){},b.property=U,b.propertyOf=function(e){return null==e?function(){}:function(t){return e[t]}},b.matcher=b.matches=function(e){return e=b.extendOwn({},e),function(t){return b.isMatch(t,e)}},b.times=function(e,t,n){var r=Array(Math.max(0,e));t=m(t,n,1);for(var i=0;i<e;i++)r[i]=t(i);return r},b.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},b.now=Date.now||function(){return(new Date).getTime()};var _={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},I=b.invert(_),P=function(e){var t=function(t){return e[t]},n="(?:"+b.keys(e).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(e){return e=null==e?"":""+e,r.test(e)?e.replace(i,t):e}};b.escape=P(_),b.unescape=P(I),b.result=function(e,t,n){var r=null==e?void 0:e[t];return void 0===r&&(r=n),b.isFunction(r)?r.call(e):r};var W=0;b.uniqueId=function(e){var t=++W+"";return e?e+t:t},b.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var N=/(.)^/,F={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},M=/\\|'|\r|\n|\u2028|\u2029/g,q=function(e){return"\\"+F[e]};b.template=function(e,t,n){!t&&n&&(t=n),t=b.defaults({},t,b.templateSettings);var r=RegExp([(t.escape||N).source,(t.interpolate||N).source,(t.evaluate||N).source].join("|")+"|$","g"),i=0,o="__p+='";e.replace(r,function(t,n,r,a,s){return o+=e.slice(i,s).replace(M,q),i=s+t.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?o+="'+\n((__t=("+r+"))==null?'':__t)+\n'":a&&(o+="';\n"+a+"\n__p+='"),t}),o+="';\n",t.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var a=new Function(t.variable||"obj","_",o)}catch(s){throw s.source=o,s}var l=function(e){return a.call(this,e,b)},c=t.variable||"obj";return l.source="function("+c+"){\n"+o+"}",l},b.chain=function(e){var t=b(e);return t._chain=!0,t};var L=function(e,t){return e._chain?b(t).chain():t};b.mixin=function(e){b.each(b.functions(e),function(t){var n=b[t]=e[t];b.prototype[t]=function(){var e=[this._wrapped];return c.apply(e,arguments),L(this,n.apply(b,e))}})},b.mixin(b),b.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=a[e];b.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0],L(this,n)}}),b.each(["concat","join","slice"],function(e){var t=a[e];b.prototype[e]=function(){return L(this,t.apply(this._wrapped,arguments))}}),b.prototype.value=function(){return this._wrapped},b.prototype.valueOf=b.prototype.toJSON=b.prototype.value,b.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return b})}.call(this);var Arrive=function(e,t,n){"use strict";function r(e,t,n){a.addMethod(t,n,e.unbindEvent),a.addMethod(t,n,e.unbindEventWithSelectorOrCallback),a.addMethod(t,n,e.unbindEventWithSelectorAndCallback)}function i(e){e.arrive=d.bindEvent,r(d,e,"unbindArrive"),e.leave=f.bindEvent,r(f,e,"unbindLeave")}if(e.MutationObserver&&"undefined"!=typeof HTMLElement){var o=0,a=function(){var t=HTMLElement.prototype.matches||HTMLElement.prototype.webkitMatchesSelector||HTMLElement.prototype.mozMatchesSelector||HTMLElement.prototype.msMatchesSelector;return{matchesSelector:function(e,n){return e instanceof HTMLElement&&t.call(e,n)},addMethod:function(e,t,n){var r=e[t];e[t]=function(){return n.length==arguments.length?n.apply(this,arguments):"function"==typeof r?r.apply(this,arguments):void 0}},callCallbacks:function(e){for(var t,n=0;t=e[n];n++)t.callback.call(t.elem)},checkChildNodesRecursively:function(e,t,n,r){for(var i,o=0;i=e[o];o++)n(i,t,r)&&r.push({callback:t.callback,elem:i}),i.childNodes.length>0&&a.checkChildNodesRecursively(i.childNodes,t,n,r)},mergeArrays:function(e,t){var n,r={};for(n in e)r[n]=e[n];for(n in t)r[n]=t[n];return r},toElementsArray:function(t){return"undefined"==typeof t||"number"==typeof t.length&&t!==e||(t=[t]),t}}}(),s=function(){var e=function(){this._eventsBucket=[],this._beforeAdding=null,this._beforeRemoving=null};return e.prototype.addEvent=function(e,t,n,r){var i={target:e,selector:t,options:n,callback:r,firedElems:[]};return this._beforeAdding&&this._beforeAdding(i),this._eventsBucket.push(i),i},e.prototype.removeEvent=function(e){for(var t,n=this._eventsBucket.length-1;t=this._eventsBucket[n];n--)e(t)&&(this._beforeRemoving&&this._beforeRemoving(t),this._eventsBucket.splice(n,1))},e.prototype.beforeAdding=function(e){this._beforeAdding=e},e.prototype.beforeRemoving=function(e){this._beforeRemoving=e},e}(),l=function(t,r){var i=new s,o=this,l={fireOnAttributesModification:!1};return i.beforeAdding(function(n){var i,a=n.target;n.selector,n.callback,(a===e.document||a===e)&&(a=document.getElementsByTagName("html")[0]),i=new MutationObserver(function(e){r.call(this,e,n)});var s=t(n.options);i.observe(a,s),n.observer=i,n.me=o}),i.beforeRemoving(function(e){e.observer.disconnect()}),this.bindEvent=function(e,t,n){t=a.mergeArrays(l,t);for(var r=a.toElementsArray(this),o=0;o<r.length;o++)i.addEvent(r[o],e,t,n)},this.unbindEvent=function(){var e=a.toElementsArray(this);i.removeEvent(function(t){for(var r=0;r<e.length;r++)if(this===n||t.target===e[r])return!0;return!1})},this.unbindEventWithSelectorOrCallback=function(e){var t,r=a.toElementsArray(this),o=e;t="function"==typeof e?function(e){for(var t=0;t<r.length;t++)if((this===n||e.target===r[t])&&e.callback===o)return!0;return!1}:function(t){for(var i=0;i<r.length;i++)if((this===n||t.target===r[i])&&t.selector===e)return!0;return!1},i.removeEvent(t)},this.unbindEventWithSelectorAndCallback=function(e,t){var r=a.toElementsArray(this);i.removeEvent(function(i){for(var o=0;o<r.length;o++)if((this===n||i.target===r[o])&&i.selector===e&&i.callback===t)return!0;return!1})},this},c=function(){function e(e){var t={attributes:!1,childList:!0,subtree:!0};return e.fireOnAttributesModification&&(t.attributes=!0),t}function t(e,t){e.forEach(function(e){var n=e.addedNodes,i=e.target,o=[];null!==n&&n.length>0?a.checkChildNodesRecursively(n,t,r,o):"attributes"===e.type&&r(i,t,o)&&o.push({callback:t.callback,elem:node}),a.callCallbacks(o)})}function r(e,t,r){if(a.matchesSelector(e,t.selector)&&(e._id===n&&(e._id=o++),-1==t.firedElems.indexOf(e._id))){if(t.options.onceOnly){if(0!==t.firedElems.length)return;t.me.unbindEventWithSelectorAndCallback.call(t.target,t.selector,t.callback)}t.firedElems.push(e._id),r.push({callback:t.callback,elem:e})}}var i={fireOnAttributesModification:!1,onceOnly:!1,existing:!1};d=new l(e,t);var s=d.bindEvent;return d.bindEvent=function(e,t,n){"undefined"==typeof n?(n=t,t=i):t=a.mergeArrays(i,t);var r=a.toElementsArray(this);if(t.existing){for(var o=[],l=0;l<r.length;l++)for(var c=r[l].querySelectorAll(e),u=0;u<c.length;u++)o.push({callback:n,elem:c[u]});if(t.onceOnly&&o.length)return n.call(o[0].elem);setTimeout(a.callCallbacks,1,o)}s.call(this,e,t,n)},d},u=function(){function e(e){var t={childList:!0,subtree:!0};return t}function t(e,t){e.forEach(function(e){var r=e.removedNodes,i=(e.target,[]);null!==r&&r.length>0&&a.checkChildNodesRecursively(r,t,n,i),a.callCallbacks(i)})}function n(e,t){return a.matchesSelector(e,t.selector)}var r={};f=new l(e,t);var i=f.bindEvent;return f.bindEvent=function(e,t,n){"undefined"==typeof n?(n=t,t=r):t=a.mergeArrays(r,t),i.call(this,e,t,n)},f},d=new c,f=new u;t&&i(t.fn),i(HTMLElement.prototype),i(NodeList.prototype),i(HTMLCollection.prototype),i(HTMLDocument.prototype),i(Window.prototype);var p={};return r(d,p,"unbindAllArrive"),r(f,p,"unbindAllLeave"),p}}(window,"undefined"==typeof jQuery?null:jQuery,void 0);"object"!=typeof ebJSON&&(ebJSON={}),function(){"use strict";function f(e){return e<10?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,i,o,a,s=gap,l=t[e];switch(l&&"object"==typeof l&&"function"==typeof l.toebJSON&&(l=l.toebJSON(e)),"function"==typeof rep&&(l=rep.call(t,e,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(l)){for(o=l.length,n=0;n<o;n+=1)a[n]=str(n,l)||"null";return i=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+s+"]":"["+a.join(",")+"]",gap=s,i}if(rep&&"object"==typeof rep)for(o=rep.length,n=0;n<o;n+=1)"string"==typeof rep[n]&&(r=rep[n],i=str(r,l),i&&a.push(quote(r)+(gap?": ":":")+i));else for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(i=str(r,l),i&&a.push(quote(r)+(gap?": ":":")+i));return i=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+s+"}":"{"+a.join(",")+"}",gap=s,i}}"function"!=typeof Date.prototype.toebJSON&&(Date.prototype.toebJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toebJSON=Number.prototype.toebJSON=Boolean.prototype.toebJSON=function(){return this.valueOf()});var cx,escapable,gap,indent,meta,rep;"function"!=typeof ebJSON.stringify&&(escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},ebJSON.stringify=function(e,t,n){var r;if(gap="",indent="","number"==typeof n)for(r=0;r<n;r+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("ebJSON.stringify");return str("",{"":e})}),"function"!=typeof ebJSON.parse&&(cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,ebJSON.parse=function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&&"object"==typeof i)for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r=walk(i,n),r!==undefined?i[n]=r:delete i[n]);return reviver.call(e,t,i)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("ebebJSON.parse")})}();var EarlyBirdsQueue=function(e){this.eb=e};EarlyBirdsQueue.prototype.push=function(){for(var e=this,t=0;t<arguments.length;t++)try{if("function"==typeof arguments[t])arguments[t]();else{var n=arguments[t][0];e.eb[n].apply(e.eb,arguments[t].slice(1))}}catch(r){e.eb.ebUtils.log(r)}};var EarlyBirdsUtils=function(e){this.eb=e,Function.prototype.bind&&window.console&&"object"==typeof window.console.log&&["log","info","warn","error","assert","dir","clear","profile","profileEnd"].forEach(function(e){window.console[e]=this.call(window.console[e],window.console)},Function.prototype.bind)};EarlyBirdsUtils.isIE8=function(){return(!Function.prototype.bind||Function.prototype.bind&&"undefined"==typeof window.addEventListener)&&"object"==typeof console&&"object"==typeof console.log},EarlyBirdsUtils.prototype.eb=null,EarlyBirdsUtils.prototype.vargs=function(e){var t=Array.prototype.slice,n=e.length;return function(){var r=arguments.length,i=arguments[r-1];if(r>=n||"function"!=typeof i)return e.apply(this,arguments);for(var o=t.call(arguments,0,r-1),a=n-r;a;a-=1)o.push(undefined);return o.push(i),e.apply(this,o)}},EarlyBirdsUtils.prototype.getXMLHttpRequest=function(e,t){var n,r=this,i="",o=function(e){if(4===n.readyState){try{i=JSON.parse(n.responseText)}catch(e){i=n.responseText}if(200===n.status)t&&t(null,i);else{var o="Bad HTTP status: "+n.status+" "+n.statusText;r.logError(o),t&&t(new Error(o),i)}}};if(window.XMLHttpRequest)n=new window.XMLHttpRequest,n.onreadystatechange=o;else if(e&&window.XDomainRequest)n=new window.XDomainRequest,n.onload=function(){try{i=JSON.parse(n.responseText)}catch(e){i=n.responseText}t(null,i)},n.onerror=function(){r.logError("XDomainRequest failed")},n.ontimeout=function(){r.logError("XDomainRequest timeout")},n.onprogress=function(){};else try{n=new ActiveXObject("MSXML2.XMLHTTP.3.0"),n.onreadystatechange=o}catch(a){return null}return n},EarlyBirdsUtils.prototype.sendRequest=EarlyBirdsUtils.prototype.vargs(function(e,t,n,r){var i,o=this;if(i=t.indexOf(document.location.hostname)!=-1?this.getXMLHttpRequest(!1,r):this.getXMLHttpRequest(!0,r),"undefined"==typeof n)n=null;else try{n=ebJSON.stringify(n)}catch(a){}if("//"==t.substring(0,2)&&(t=HTTP_PROTOCOL+t.substring(2,t.length)),null!==i)try{i.open(e,t,!0),t.indexOf("api.early")>=0&&i.setRequestHeader("Content-Type","text/plain"),"undefined"!=typeof i.withCredentials&&(i.withCredentials=!0),i.send(n)}catch(a){o.log(a)}else r(new Error("Request is null"))}),EarlyBirdsUtils.prototype.isConsoleLog=function(){var e=navigator.userAgent,t=/Windows\sNT\s(\d+\.\d+)/;console&&console.log&&/MSIE\s(\d+)/.test(e)&&t.test(e)&&parseFloat(t.exec(e)[1])>=6.1&&(this.isIECompatibilityView=!0)},EarlyBirdsUtils.prototype.dispatchEvent=function(e,t){window.ebExtensionInjected===!0&&"function"==typeof document.dispatchEvent&&"function"==typeof window.CustomEvent&&document.dispatchEvent(new CustomEvent(e,{detail:t}))},EarlyBirdsUtils.prototype.log=function(){if(this.eb.debug&&"undefined"!==window.console&&window.console)if(EarlyBirdsUtils.isIE8())Function.prototype.call.call(console.log,console,Array.prototype.slice.call(args));else try{1===arguments.length&&"string"==typeof arguments[0]?window.console.log.apply(window.console,["[EarlyBirds] : "+arguments[0]]):(window.console.log.apply(window.console,["[EarlyBirds] : "]),window.console.log.apply(window.console,arguments))}catch(e){this.eb._.each(arguments,function(e){window.console.log(e)})}},EarlyBirdsUtils.prototype.logError=function(){if(this.eb.debug&&"undefined"!==window.console&&window.console){var e=["[Earlybirds] - Error :"].concat(this.eb._.toArray(arguments));if(EarlyBirdsUtils.isIE8())Function.prototype.call.call(console.log,console,Array.prototype.slice.call(e));else try{"undefined"!=typeof window.console.error?window.console.error.apply(window.console,e):window.console.log.apply(window.console,e)}catch(t){}}},EarlyBirdsUtils.prototype.parseErrorsThenCallback=function(e,t,n){e(t,n)},EarlyBirdsUtils.prototype.hashCode=function(e){var t,n,r,i=0;if(0===e.length)return i;for(t=0,r=e.length;t<r;t++)n=e.charCodeAt(t),i=(i<<5)-i+n,i|=0;return i},EarlyBirdsUtils.prototype.guid=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},EarlyBirdsUtils.prototype.truncate=function(e,t){return e.length>t?e.substring(0,t)+"...":e},EarlyBirdsUtils.prototype.clone=function(e){if(null===e||"object"!=typeof e)return e;var t=e.constructor();for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},EarlyBirdsUtils.prototype.loadScript=function(e,t){var n=document.createElement("script");n.type="text/javascript",t&&(n.readyState?n.onreadystatechange=function(){"loaded"!=n.readyState&&"complete"!=n.readyState||(n.onreadystatechange=null,t())}:n.onload=function(){t()}),n.src=e,document.getElementsByTagName("head")[0].appendChild(n)},EarlyBirdsUtils.prototype.placeholderFromUrlParam=function(e){for(var t=null,n=/{{.*?}}/g;null!==(t=n.exec(e));)e=e.replace(t[0],this.getParamByName(t[0].replace(/({{|}})/g,"")));return e},EarlyBirdsUtils.prototype.getParamByName=function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)"),n=t.exec(location.search);return null===n?"":decodeURIComponent(n[1].replace(/\+/g," "))},EarlyBirdsUtils.prototype.testLocalStorage=function(){var e="$earlybirds$";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(t){return!1}},EarlyBirdsUtils.prototype.addPropertiesToObject=function(e,t,n,r){for(var i=0;i<n.length;i++)typeof t[n[i]]!==undefined&&t[n[i]]&&(e[r+n[i]]=t[n[i]]);return e},EarlyBirdsUtils.prototype.getNavigatorSegments=function(){var e={},t=["appCodeName","appName","appVersion","cookieEnabled","doNotTrack","language","platform","product","productSub","userAgent","vendor","vendorSub"];return this.addPropertiesToObject(e,window.navigator,t,"navigator_"),e.navigator_localStorageEnabled=this.testLocalStorage(),window.screen.width&&window.screen.height&&(e.screen_resolution=window.screen.width+"x"+window.screen.height),e},EarlyBirdsUtils.prototype.getFingerPrint=function(e){
try{(new Fingerprint2).get(function(t){return e(t)})}catch(t){return e(null)}},EarlyBirdsUtils.prototype.fireWhenSelectorIsReady=function(e,t){if("undefined"==typeof document.arrive){var n=function(){return this.eb.$.find(e).length>0?t():void window.setTimeout(n,200)};n()}else document.arrive(e,{existing:!0,onceOnly:!0},function(){return t()})},EarlyBirdsUtils.prototype.fireWhenConditionTrue=function(e,t,n){var r=function(){e()===!0?n():window.setTimeout(r,t)};r()},function(e){function t(e){return r?r[e]:(r=require("unicode/category/So"),i=["sign","cross","of","symbol","staff","hand","black","white"].map(function(e){return new RegExp(e,"gi")}),r[e])}function n(e,r){e=e.toString(),"string"==typeof r&&(r={replacement:r}),r=r||{},r.mode=r.mode||n.defaults.mode;for(var o,a=n.defaults.modes[r.mode],s=["replacement","multicharmap","charmap","remove","lower"],l=0,c=s.length;l<c;l++)o=s[l],r[o]=o in r?r[o]:a[o];"undefined"==typeof r.symbols&&(r.symbols=a.symbols);var u=[];for(var o in r.multicharmap)if(r.multicharmap.hasOwnProperty(o)){var d=o.length;u.indexOf(d)===-1&&u.push(d)}for(var f,p,y,h="",l=0,c=e.length;l<c;l++){if(y=e[l],!u.some(function(t){var n=e.substr(l,t);return!!r.multicharmap[n]&&(l+=t-1,y=r.multicharmap[n],!0)})&&(r.charmap[y]?(y=r.charmap[y],f=y.charCodeAt(0)):f=e.charCodeAt(l),r.symbols&&(p=t(f)))){y=p.name.toLowerCase();for(var g=0,v=i.length;g<v;g++)y=y.replace(i[g],"");y=y.replace(/^\s+|\s+$/g,"")}y=y.replace(/[^\w\s\-\.\_~]/g,""),r.remove&&(y=y.replace(r.remove,"")),h+=y}return h=h.replace(/^\s+|\s+$/g,""),h=h.replace(/[-\s]+/g,r.replacement),h=h.replace(r.replacement+"$",""),r.lower&&(h=h.toLowerCase()),h}var r,i;if(n.defaults={mode:"pretty"},n.multicharmap=n.defaults.multicharmap={"<3":"love","&&":"and","||":"or","w/":"with"},n.charmap=n.defaults.charmap={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","Æ":"AE","Ç":"C","È":"E","É":"E","Ê":"E","Ë":"E","Ì":"I","Í":"I","Î":"I","Ï":"I","Ð":"D","Ñ":"N","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ő":"O","Ø":"O","Ù":"U","Ú":"U","Û":"U","Ü":"U","Ű":"U","Ý":"Y","Þ":"TH","ß":"ss","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","æ":"ae","ç":"c","è":"e","é":"e","ê":"e","ë":"e","ì":"i","í":"i","î":"i","ï":"i","ð":"d","ñ":"n","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ő":"o","ø":"o","ù":"u","ú":"u","û":"u","ü":"u","ű":"u","ý":"y","þ":"th","ÿ":"y","ẞ":"SS","α":"a","β":"b","γ":"g","δ":"d","ε":"e","ζ":"z","η":"h","θ":"8","ι":"i","κ":"k","λ":"l","μ":"m","ν":"n","ξ":"3","ο":"o","π":"p","ρ":"r","σ":"s","τ":"t","υ":"y","φ":"f","χ":"x","ψ":"ps","ω":"w","ά":"a","έ":"e","ί":"i","ό":"o","ύ":"y","ή":"h","ώ":"w","ς":"s","ϊ":"i","ΰ":"y","ϋ":"y","ΐ":"i","Α":"A","Β":"B","Γ":"G","Δ":"D","Ε":"E","Ζ":"Z","Η":"H","Θ":"8","Ι":"I","Κ":"K","Λ":"L","Μ":"M","Ν":"N","Ξ":"3","Ο":"O","Π":"P","Ρ":"R","Σ":"S","Τ":"T","Υ":"Y","Φ":"F","Χ":"X","Ψ":"PS","Ω":"W","Ά":"A","Έ":"E","Ί":"I","Ό":"O","Ύ":"Y","Ή":"H","Ώ":"W","Ϊ":"I","Ϋ":"Y","ş":"s","Ş":"S","ı":"i","İ":"I","ğ":"g","Ğ":"G","а":"a","б":"b","в":"v","г":"g","д":"d","е":"e","ё":"yo","ж":"zh","з":"z","и":"i","й":"j","к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ф":"f","х":"h","ц":"c","ч":"ch","ш":"sh","щ":"sh","ъ":"u","ы":"y","ь":"","э":"e","ю":"yu","я":"ya","А":"A","Б":"B","В":"V","Г":"G","Д":"D","Е":"E","Ё":"Yo","Ж":"Zh","З":"Z","И":"I","Й":"J","К":"K","Л":"L","М":"M","Н":"N","О":"O","П":"P","Р":"R","С":"S","Т":"T","У":"U","Ф":"F","Х":"H","Ц":"C","Ч":"Ch","Ш":"Sh","Щ":"Sh","Ъ":"U","Ы":"Y","Ь":"","Э":"E","Ю":"Yu","Я":"Ya","Є":"Ye","І":"I","Ї":"Yi","Ґ":"G","є":"ye","і":"i","ї":"yi","ґ":"g","č":"c","ď":"d","ě":"e","ň":"n","ř":"r","š":"s","ť":"t","ů":"u","ž":"z","Č":"C","Ď":"D","Ě":"E","Ň":"N","Ř":"R","Š":"S","Ť":"T","Ů":"U","Ž":"Z","ą":"a","ć":"c","ę":"e","ł":"l","ń":"n","ś":"s","ź":"z","ż":"z","Ą":"A","Ć":"C","Ę":"E","Ł":"L","Ń":"N","Ś":"S","Ź":"Z","Ż":"Z","ā":"a","ē":"e","ģ":"g","ī":"i","ķ":"k","ļ":"l","ņ":"n","ū":"u","Ā":"A","Ē":"E","Ģ":"G","Ī":"I","Ķ":"K","Ļ":"L","Ņ":"N","Ū":"U","ė":"e","į":"i","ų":"u","Ė":"E","Į":"I","Ų":"U","ț":"t","Ț":"T","ţ":"t","Ţ":"T","ș":"s","Ș":"S","ă":"a","Ă":"A","Ạ":"A","Ả":"A","Ầ":"A","Ấ":"A","Ậ":"A","Ẩ":"A","Ẫ":"A","Ằ":"A","Ắ":"A","Ặ":"A","Ẳ":"A","Ẵ":"A","Ẹ":"E","Ẻ":"E","Ẽ":"E","Ề":"E","Ế":"E","Ệ":"E","Ể":"E","Ễ":"E","Ị":"I","Ỉ":"I","Ĩ":"I","Ọ":"O","Ỏ":"O","Ồ":"O","Ố":"O","Ộ":"O","Ổ":"O","Ỗ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ợ":"O","Ở":"O","Ỡ":"O","Ụ":"U","Ủ":"U","Ũ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ự":"U","Ử":"U","Ữ":"U","Ỳ":"Y","Ỵ":"Y","Ỷ":"Y","Ỹ":"Y","Đ":"D","ạ":"a","ả":"a","ầ":"a","ấ":"a","ậ":"a","ẩ":"a","ẫ":"a","ằ":"a","ắ":"a","ặ":"a","ẳ":"a","ẵ":"a","ẹ":"e","ẻ":"e","ẽ":"e","ề":"e","ế":"e","ệ":"e","ể":"e","ễ":"e","ị":"i","ỉ":"i","ĩ":"i","ọ":"o","ỏ":"o","ồ":"o","ố":"o","ộ":"o","ổ":"o","ỗ":"o","ơ":"o","ờ":"o","ớ":"o","ợ":"o","ở":"o","ỡ":"o","ụ":"u","ủ":"u","ũ":"u","ư":"u","ừ":"u","ứ":"u","ự":"u","ử":"u","ữ":"u","ỳ":"y","ỵ":"y","ỷ":"y","ỹ":"y","đ":"d","€":"euro","₢":"cruzeiro","₣":"french franc","£":"pound","₤":"lira","₥":"mill","₦":"naira","₧":"peseta","₨":"rupee","₩":"won","₪":"new shequel","₫":"dong","₭":"kip","₮":"tugrik","₯":"drachma","₰":"penny","₱":"peso","₲":"guarani","₳":"austral","₴":"hryvnia","₵":"cedi","¢":"cent","¥":"yen","元":"yuan","円":"yen","﷼":"rial","₠":"ecu","¤":"currency","฿":"baht",$:"dollar","₹":"indian rupee","©":"(c)","œ":"oe","Œ":"OE","∑":"sum","®":"(r)","†":"+","“":'"',"”":'"',"‘":"'","’":"'","∂":"d","ƒ":"f","™":"tm","℠":"sm","…":"...","˚":"o","º":"o","ª":"a","•":"*","∆":"delta","∞":"infinity","♥":"love","&":"and","|":"or","<":"less",">":"greater"},n.defaults.modes={rfc3986:{replacement:"-",symbols:!0,remove:null,lower:!0,charmap:n.defaults.charmap,multicharmap:n.defaults.multicharmap},pretty:{replacement:"-",symbols:!0,remove:/[.]/g,lower:!1,charmap:n.defaults.charmap,multicharmap:n.defaults.multicharmap}},"undefined"!=typeof define&&define.amd){for(var o in n.defaults.modes)n.defaults.modes.hasOwnProperty(o)&&(n.defaults.modes[o].symbols=!1);define([],function(){return n})}else if("undefined"!=typeof module&&module.exports)t(),module.exports=n;else{for(var o in n.defaults.modes)n.defaults.modes.hasOwnProperty(o)&&(n.defaults.modes[o].symbols=!1);e.prototype.slug=n}}(EarlyBirdsUtils);var EarlyBirdsStats=function(e){this.r=Math.floor(100*Math.random(100,1)),this.eb=e,this.stats=null,"undefined"!=typeof performance&&this.r<=5&&(this.stats={})};EarlyBirdsStats.prototype.initWidgetStats=function(e){this.stats&&(this.stats.widgetKey=e.widgetKey,this.stats.beforeGetReco=Date.now())},EarlyBirdsStats.prototype.getRecommendationsFinished=function(){this.stats&&(this.stats.getReco=Date.now())},EarlyBirdsStats.prototype.getCompiledTemplateFinished=function(){this.stats&&(this.stats.templating=Date.now())},EarlyBirdsStats.prototype.computeAndSend=function(){var e=this;if(this.stats){var t=function(){if(performance.timing.domContentLoadedEventEnd){var n=performance.timing.domContentLoadedEventEnd;e.stats.domLoaded=n-(performance.timing.fetchStart||performance.timing.requestStart),e.stats.beforeGetReco=e.stats.beforeGetReco-n,e.stats.getReco=e.stats.getReco-e.stats.beforeGetReco-n,e.stats.templating=e.stats.templating-e.stats.beforeGetReco-e.stats.getReco-n;for(var r=Object.keys(e.stats),i=0;i<r.length;++i)if(e.stats[r[i]]<0)return;e.eb.ebUtils.sendRequest("POST",eb.config.apiHost+"/logs/loading-stats",{stats:e.stats},function(){})}else setTimeout(t,1e3)};t()}};var EarlyBirdsWidgets=function(e){this.eb=e,this.personalshopperResultLoaded=!1,this.template={},this.compiledTemplate={},this.widgets={},this.stats=new EarlyBirdsStats(e)};EarlyBirdsWidgets.prototype.loadWidget=function(e,t){var n=this,r=n.eb;if(r.ebUtils.log("widget:loadWidget",e),e.widgetKey&&"570fbe24eb5a8cc84f161a65"!==e.widgetKey)switch(e.preLoadWidget&&e.preLoadWidget.call(n,e),n.widgets[e.widgetKey]=r.$(e.selector),e.type){case"recommendations":return n.loadRecommendationsWidget(e,t);case"recently-viewed":return n.loadRecentlyViewedWidget(e,t);case"favorites":return n.loadFavoritesWidget(e,t);case"personalshopper-cta":return n.loadPersonalshopperCtaWidget(e,t)}else r.ebUtils.logError("No widgetKey provided for widget type "+e.type)},EarlyBirdsWidgets.prototype.fireWhenSelectorIsReady=function(e,t){var n=this,r=n.eb,i=function(e){return e.replace(/:[^,\s]*/g,"")};if(!e.selector&&e.location&&e.location.path){r.ebUtils.log("widget:fireWhenSelectorIsReady : selector is computed from location");var o="eb-"+r.ebUtils.guid(),a=function(){return r.$(e.location.path)[e.location.type]('<div id="'+o+'"></div>'),e.selector="#"+o,n.widgets[e.widgetKey]=r.$(e.selector),t()};r.ebUtils.fireWhenSelectorIsReady(i(e.location.path),a)}else e.selector?r.ebUtils.fireWhenSelectorIsReady(i(e.selector),t):r.ebUtils.log("Widget not fired because there was not an available selector")},EarlyBirdsWidgets.prototype.loadRecommendations=function(e,t,n){var r=this,i=r.eb;r.getCompiledTemplate(e.template,function(o,a){r.stats.getCompiledTemplateFinished(),null!==o&&n(o);var s=a({recommendations:t,config:e});i.$(e.selector).html(s),r.mapHtmlRecommendationsToProducts(e.selector,t),r.bindClickOnReco(e.selector,e),r.turnRecommendationWidgetToInteractive(e,t),n()})},EarlyBirdsWidgets.prototype.loadRecommendationsWidget=function(e,t){var n=this,r=n.eb;r.ebUtils.log("loadRecommendationsWidget"),n.stats.initWidgetStats(e),n.getRecommendations(e,function(i,o,a,s){return null!==i?r.ebUtils.logError(i):(n.stats.getRecommendationsFinished(),o.length?void("undefined"!=typeof s&&(e.widget=s,e.template&&"string"==typeof e.template&&(e.template={path:e.template}),!e.template&&s.template&&(e.template=s.template),s.location&&(e.location=s.location),e.preLoadRecommendations&&e.preLoadRecommendations.call(n,e),n.fireWhenSelectorIsReady(e,function(){var i=e.loadRecommendations?e.loadRecommendations:n.loadRecommendations;i.call(n,e,o,function(i){return i||(r.ebUtils.dispatchEvent("eb-widget-loaded",{config:e,recommendations:o,metadata:a,widget:s}),n.stats.computeAndSend()),"function"==typeof t?t(i,e,o,a,s):null!==i&&"undefined"!=typeof i?r.ebUtils.logError(i):void 0})}))):void(e.onRecommendationsEmpty&&e.onRecommendationsEmpty.call(n,e,o,a,s)))})},EarlyBirdsWidgets.prototype.loadFavoritesWidget=function(e,t){var n=this,r=n.eb;r.ebUtils.log("loadFavoritesWidget"),n.getFavorites(e,function(i,o){return null!==i?r.ebUtils.logError(i):void n.getCompiledTemplate(e.template,function(i,a){if(null!==i)return r.ebUtils.logError(i);var s=a({favorites:o,config:e});n.fireWhenSelectorIsReady(e,function(){r.$(e.selector).html(s),n.mapHtmlToProducts(e.selector,o),n.bindClickOnReco(e.selector,e),n.bindRemoveFavoriteBtns(e),"function"==typeof t&&t(i,e,o)})})})},EarlyBirdsWidgets.prototype.loadRecentlyViewedWidget=function(e,t){var n=this,r=n.eb;r.ebUtils.log("loadRecentlyViewedWidget"),n.getRecentlyViewed(e,function(i,o){return null!==i?r.ebUtils.logError(i):void n.getCompiledTemplate(e.template,function(i,a){if(null!==i)return r.ebUtils.logError(i);var s=a({products:o,config:e});n.fireWhenSelectorIsReady(e,function(){r.$(e.selector).html(s),n.mapHtmlToProducts(e.selector,o),n.bindClickOnReco(e.selector,e),"function"==typeof t&&t(i,e,o)})})})},EarlyBirdsWidgets.prototype.loadPersonalshopperCtaWidget=function(e,t){var n=this,r=n.eb;r.ebUtils.log("loadPersonalshopperCtaWidget"),n.countFavorites(e,function(i,o){return null!==i?r.ebUtils.logError(i):void n.getCompiledTemplate(e.template,function(n,i){if(null!==n)return r.ebUtils.logError(n);var a=i({nbFavorites:o,config:e});r.$("body").append(a),"function"==typeof t&&t()})})},EarlyBirdsWidgets.prototype.getIdsToBan=function(e,t){var n=this,r=n.eb,i=r.config.apiHost+"/widget/"+e.widgetKey+"/idsToBan/"+e.profile;r.ebUtils.sendRequest("GET",i,r.ebUtils.parseErrorsThenCallback.bind(this,function(e,n){"undefined"!=typeof n.idsToBan?t(null,n.idsToBan):t(new Error("Banned ids could not be retrieved"))}))},EarlyBirdsWidgets.prototype.getFavorites=function(e,t){var n=this,r=n.eb,i=r.config.apiHost+"/widget/"+e.widgetKey+"/favorites/"+e.profile;r.ebUtils.sendRequest("GET",i,function(e,n){"undefined"!=typeof n.favorites?(Cookies.set("eb-nbfavorites-count",n.favorites.length),t(null,n.favorites)):t(new Error("Favorites could not be retrieved"))})},EarlyBirdsWidgets.prototype.getRecentlyViewed=function(e,t){var n=this,r=n.eb,i=r.config.apiHost+"/widget/"+e.widgetKey+"/products-by-verb/"+e.profile+"/view?howMany=10";r.ebUtils.sendRequest("GET",i,function(e,n){"undefined"!=typeof n.products?t(null,n.products):t(new Error("Products could not be retrieved"))})},EarlyBirdsWidgets.prototype.countFavorites=function(e,t){var n=this,r=n.eb,i=Cookies.get("eb-nbfavorites-count");if(i)t(null,i);else{var o=r.config.apiHost+"/widget/"+e.widgetKey+"/favorites/"+e.profile+"/count";r.ebUtils.sendRequest("GET",o,r.ebUtils.parseErrorsThenCallback.bind(this,function(e,n){"undefined"!=typeof n.count?(Cookies.set("eb-nbfavorites-count",n.count),t(null,n.count)):t(new Error("Favorites count could not be retrieved"))}))}},EarlyBirdsWidgets.prototype.getRecommendations=function(e,t){var n=this,r=n.eb,i=r.config.apiHost+"/widget/"+e.widgetKey+"/recommendations/"+e.profile;"undefined"!=typeof e.rescorerParams&&null!==e.rescorerParams&&e.rescorerParams!=={}&&(i+=(i.indexOf("?")>=0?"&":"?")+"rescorerParams="+encodeURIComponent(ebJSON.stringify(e.rescorerParams))),"undefined"!=typeof e.variables&&null!==e.variables&&e.variables!=={}&&("function"==typeof e.variables?e.variables=e.variables.apply(r):e.variables=r._.mapObject(e.variables,function(e,t){return"function"==typeof e?e.apply(r):e}),i+=(i.indexOf("?")>=0?"&":"?")+"variables="+encodeURIComponent(ebJSON.stringify(e.variables))),"undefined"!=typeof e.distribution&&null!==e.distribution&&e.distribution!==[]&&(i+=(i.indexOf("?")>=0?"&":"?")+"distribution="+encodeURIComponent(ebJSON.stringify(e.distribution))),"undefined"!=typeof e.howMany&&null!==e.howMany&&(i+=(i.indexOf("?")>=0?"&":"?")+"howMany="+parseInt(e.howMany)),"undefined"!=typeof e.page&&null!==e.page&&(i+=(i.indexOf("?")>=0?"&":"?")+"page="+parseInt(e.page)),"undefined"!=typeof e.completeWithMostPopularItems&&null!==e.completeWithMostPopularItems&&(i+=(i.indexOf("?")>=0?"&":"?")+"completeWithMostPopularItems="+e.completeWithMostPopularItems),"undefined"!=typeof e.distribIndexes&&null!==e.distribIndexes&&(i+=(i.indexOf("?")>=0?"&":"?")+"distribIndexes="+(Array.isArray(e.distribIndexes)?e.distribIndexes.join(","):e.distribIndexes)),/ebSkipAb=(0|false)/i.test(window.location.href)?Cookies.remove("eb-skip-ab"):/ebSkipAb/i.test(window.location.href)&&Cookies.set("eb-skip-ab",1),Cookies.get("eb-skip-ab")&&(i+=(i.indexOf("?")>=0?"&":"?")+"skipAb"),r.ebUtils.sendRequest("GET",i,r.ebUtils.parseErrorsThenCallback.bind(this,function(e,n){return e?t(e):void("undefined"!=typeof n.recommendations?t(null,n.recommendations,n.metadata,n.widget):t(new Error("Recommendations could not be retrieved")))}))},EarlyBirdsWidgets.prototype.getHashCode=function(e){var t,n,r,i=0;if(0===e.length)return i;for(t=0,r=e.length;t<r;t++)n=e.charCodeAt(t),i=(i<<5)-i+n,i|=0;return i},EarlyBirdsWidgets.prototype.getCompiledTemplate=function(e,t){var n=this,r=n.eb,i=n.getHashCode(ebJSON.stringify(e));return n.compiledTemplate[i]?t(null,n.compiledTemplate[i]):void n.getTemplate(e,function(e,o){return null!==e?t(e):(n.compiledTemplate[i]=r._.template(o),void t(null,n.compiledTemplate[i]))})},EarlyBirdsWidgets.prototype.getTemplate=function(e,t){var n=this,r=n.eb,i=!1;e||(e={path:"//cdn.early-birds.fr/tenants/generic/templates/recommendation.html"});var o=n.getHashCode(ebJSON.stringify(e));if(n.template[o])return t(null,n.template[o]);if("string"==typeof e&&(e={path:e}),e.path&&e.path.indexOf("//")>=0&&(i=e.path),i)r.ebUtils.sendRequest("GET",i,r.ebUtils.parseErrorsThenCallback.bind(this,function(e,r){return null!==e?t(e):(n.template[o]=r,void t(null,n.template[o]))}));else{if(e.ejs){var a=e.ejs;e.css&&(a+='<style type="text/css">'+e.css+"</style>"),n.template[o]=a}else e.path?n.template[o]=r.$(e.path).html():r.ebUtils.logError("No template found for this widget");t(null,n.template[o])}},EarlyBirdsWidgets.prototype.mapHtmlRecommendationsToProducts=function(e,t){var n=this,r=n.eb;if(r.$(e).is("[data-product-id]"))r.$(e).data("product",t[0]);else for(var i=0;i<t.length;i++)r.$(e).find('.eb-recommendation[data-product-id="'+t[i].product._id.original_id+'"]').data("product",t[i])},EarlyBirdsWidgets.prototype.mapHtmlToProducts=function(e,t){var n=this,r=n.eb;if(r.$(e).is("[data-product-id]"))r.$(e).data("product",t[0]);else for(var i=0;i<t.length;i++)r.$(e).find('[data-product-id="'+t[i]._id.original_id+'"]').data("product",t[i])},EarlyBirdsWidgets.prototype.bindButtonsForMultipleRecommendations=function(e,t,n){for(var r=this,i=0;i<t.length;i++){var o=e.find('.eb-recommendation[data-product-id="'+t[i].product._id.original_id+'"]');r.bindButtons(o,n)}},EarlyBirdsWidgets.prototype.bindButtons=function(e,t){var n=this;n.bindLike(e,t),n.bindDislike(e,t),n.bindFavorite(e,t)},EarlyBirdsWidgets.prototype.bindClickOnReco=function(e,t){var n=this,r=n.eb;r.$(e).on("click",".eb-recommendation a:not(.eb-btn), .eb-favorite a:not(.eb-btn)",function(e){var i,o=r.$(this),a="_blank"===o.attr("target");a&&(i=window.open("")),o.hasClass("eb-stop-redirect")||e.preventDefault();var s=o.attr("href"),l=o.parents(".eb-recommendation,.eb-favorite").data("product");if(t.widgetKey){var c=s.indexOf("#"),u="";c>=0&&(u=s.slice(c),s=s.slice(0,c));var d=s.indexOf("?"),f="ebwidgetkey="+t.widgetKey+(d!==-1?"&":"");d===-1&&(d=s.length,f="?"+f),s=[s.slice(0,d+1),f,s.slice(d+1)].join("")+u,Cookies.set("eb-clickonreco",t.widgetKey)}l.product&&(l=l.product),t.checkPrice&&Cookies.set("eb-product",JSON.stringify(l)),r.ebQueue.push(["trackActivity",n.getActivityForProduct(l,"click-on-reco",t),function(){o.hasClass("eb-stop-redirect")||(a?i.location=s:document.location=s)}])})},EarlyBirdsWidgets.prototype.bindLike=function(e,t,n){var r=this,i=r.eb;e.on("click",".eb-btn-like",function(e){e.preventDefault();var o=i.$(this).parents(".eb-recommendation,.eb-favorite"),a=o.data("product");i.ebQueue.push(["trackActivity",r.getActivityForProduct(a.product,"like",t),function(){return n?n.call(r,o,a,t):void r.addFavorite(o,a,t,function(){r.newRecommendation(o,t)})}])})},EarlyBirdsWidgets.prototype.bindDislike=function(e,t,n){var r=this,i=r.eb;e.on("click",".eb-btn-unlike",function(e){e.preventDefault();var o=i.$(this).parents(".eb-recommendation,.eb-favorite"),a=o.data("product");i.ebQueue.push(["trackActivity",r.getActivityForProduct(a.product,"unlike",t),function(){return n?n():void r.newRecommendation(o,t)}])})},EarlyBirdsWidgets.prototype.bindFavorite=function(e,t,n){var r=this,i=r.eb;e.on("click",".eb-btn-favorite",function(e){e.preventDefault();var o=i.$(this).parents(".eb-recommendation,.eb-favorite"),a=o.data("product");r.addFavorite(o,a,t,function(){if(r.newRecommendation(o,t),n)return n()})})},EarlyBirdsWidgets.prototype.bindRemoveFavorite=function(e,t,n){var r=this,i=r.eb;e.on("click",".eb-btn-remove-favorite",function(e){e.preventDefault();var o=i.$(this).parents(".eb-favorite").attr("data-product-id");r.removeFavorite(o,t,n)})},EarlyBirdsWidgets.prototype.getActivityForProduct=function(e,t,n){var r,i=n&&n.widgetKey?n.widgetKey:null;return r={original_id:e._id.original_id,type:"product",verb:t},i&&(r.widget=i),r},EarlyBirdsWidgets.prototype.addFavorite=function(e,t,n,r){var i=this,o=i.eb;i.getCompiledTemplate(n.template,function(a,s){var l=s({favorites:[t.product],recommendations:[],config:n}),c=o.$(l).find(".eb-favorite:eq(0)");c.length>0&&(o.$(c).data("product",t.product),o.$(".eb-favorites-list").prepend(c));var u=parseInt(Cookies.get("eb-nbfavorites-count"))+1;o.$(".eb-favorites-count").html(u),Cookies.set("eb-nbfavorites-count",u),o.$("body").trigger("eb-favorite-added",[t.product,e]),r.call(i,t.product,e)})},EarlyBirdsWidgets.prototype.bindRemoveFavoriteBtns=function(e){var t=this,n=t.eb;t.widgets[e.widgetKey].on("click",".eb-btn-remove-favorite",function(r){r.preventDefault();var i=n.$(this).parents(".eb-favorite").attr("data-product-id");t.removeFavorite(i,e)})},EarlyBirdsWidgets.prototype.newRecommendation=function(e,t){var n=this,r=n.eb,i=r._.clone(t);"undefined"!=typeof i.rescorerParams&&null!==i.rescorerParams||(i.rescorerParams={}),i.distribution&&(i.preserveDistribution&&"undefined"!=typeof r.$(e).data("product").distribution&&(i=r._.extend(i,t.distribution[r.$(e).data("product").distribution])),delete i.distribution);var o=[];r.$(".eb-recommendation").each(function(){o.push(r.$(this).attr("data-product-id"))}),o=r._.uniq(o),i.rescorerParams.idsToBan?i.rescorerParams.idsToBan=r._.union(i.rescorerParams.idsToBan,o):i.rescorerParams.idsToBan=o,i.howMany=1;var a=r.$(e).data("product");a.distribution!==undefined&&(i.distribIndexes=a.distribution);var s=null,l=null,c=!1,u=function(){if(s&&l&&c){var o=l({recommendations:s,config:i}),a=r.$(o).find('.eb-recommendation[data-product-id="'+s[0].product._id.original_id+'"]');a.hide(),r.$(e).replaceWith(a),n.mapHtmlRecommendationsToProducts(a,s),n.bindButtons(a,i),a.fadeIn(400),r.ebUtils.dispatchEvent("eb-recommendation-added",{recommendations:s,config:i}),r.$("body").trigger("eb-recommendation-added",[a,t])}};r.$(e).fadeOut(400,function(){c=!0,u()}),n.getRecommendations(i,function(o,a){return s=a,o?r.ebUtils.logError(o):void(s.length>0?n.getCompiledTemplate(i.template,function(e,t){l=t,u()}):r.$("body").trigger("eb-recommendation-empty",[e,t]))})},EarlyBirdsWidgets.prototype.turnRecommendationWidgetToInteractive=function(e,t){var n=this,r=n.eb;n.widgets[e.widgetKey].find(".eb-btn-like,.eb-btn-unlike").length>0&&(n.bindButtonsForMultipleRecommendations(n.widgets[e.widgetKey],t,e),n.widgets[e.widgetKey].find(".eb-favorites-list").length>0&&n.getFavorites(e,function(t,i){i.length>0&&(n.bindRemoveFavoriteBtns(e),n.getCompiledTemplate(e.template,function(t,o){if(null!==t)return r.ebUtils.logError(t);var a=o({favorites:i,recommendations:[],config:e}),s=r.$(a).find(".eb-favorites-list");n.mapHtmlToProducts(s,i),n.widgets[e.widgetKey].find(".eb-favorites-list").replaceWith(s),n.widgets[e.widgetKey].find(".eb-favorites-count").html(i.length),n.widgets[e.widgetKey].trigger("eb-turned-to-interactive")}))}))},EarlyBirdsWidgets.prototype.removeFavorite=function(e,t,n){var r=this,i=r.eb;i.ebQueue.push(["deleteFavorite",e,function(){var t=parseInt(Cookies.get("eb-nbfavorites-count"))-1;if(Cookies.set("eb-nbfavorites-count",t>0?t:0),i.$('.eb-favorites .eb-favorite[data-product-id="'+e+'"]').remove(),i.$(".eb-favorites-count").html(t),i.$("body").trigger("eb-favorite-removed"),"undefined"!=typeof n)return n()}])};var HTTP_PROTOCOL="https:"==document.location.protocol?"https://":"http://",EarlyBirds=function(){var e=this;e._=_.noConflict(),e.ebUtils=new EarlyBirdsUtils(e);var t=window._ebq;window._ebq=e.ebQueue=new EarlyBirdsQueue(e);var n=!1;if(e.profile=e.getProfile(),"undefined"!=typeof EarlyBirdsWidgets)if(e.ebWidgets=new EarlyBirdsWidgets(e),"undefined"==typeof window.jQuery)e.scripts.push("//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"),n=!0;else{var r=window.jQuery.fn.jquery.split(".");(parseInt(r[0])<1||parseInt(r[1])<9)&&(e.scripts.push("//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"),n=!0)}window._ebq.push.apply(window._ebq,t),e.loadScripts(function(){e.ebWidgets&&(e.ebUtils.log("ebWidgets is loaded with jQuery. Noconflict : "+n),e.$=n===!0?window.jQuery.noConflict(!0):window.jQuery,window._ebq.push.apply(e.ebQueue,e.scriptsQueue))})};if(EarlyBirds.prototype={trackerKey:"",ebUtils:null,ebWidgets:null,ebQueue:null,profile:null,initRequested:!1,initedQueue:[],identifiedRequested:!1,identifiedQueue:[],scriptsQueue:[],scripts:[],cookieConfig:{expires:31536e3},$:null,config:{apiHost:HTTP_PROTOCOL+"api.early-birds.fr"}},EarlyBirds.prototype.getProfile=function(){var e=new Date,t={id:null,hash:null,lashUpdate:null,deprecated:!0},n=Cookies.get("eb-profile");return n?(n=n.split(":"),t={id:n[0],hash:n[1],lastUpdate:n[2],deprecated:!1},isNaN(t.lastUpdate)?t.deprecated=!0:(!t.lastUpdate||e.getTime()-t.lastUpdate>36e5)&&(t.deprecated=!0),t):t},EarlyBirds.prototype.setProfile=function(e){return Cookies.set("eb-profile",e.id+":"+e.hash+":"+e.lastUpdate,this.cookieConfig),this.profile=e,this.profile},EarlyBirds.prototype.debug=!1,EarlyBirds.prototype.loadWidgets=!0,EarlyBirds.prototype.init=function(e){var t=this;return!t.initRequested&&(t.ebUtils.log("Init trackerKey"),void(e?(t.trackerKey=e,t.initRequested=!0,window._ebq.push.apply(t.ebQueue,t.initedQueue)):t.ebUtils.log("Tracker inited without trackerKey")))},EarlyBirds.prototype.loadScripts=function(e){var t=this;t.ebUtils.log("load scripts");var n=function(e,t){var n=document.createElement("script");n.src=e,n.onload=n.onreadystatechange=function(){n.onreadystatechange=n.onload=null,t()};var r=document.getElementsByTagName("head")[0];(r||document.body).appendChild(n)};!function(){0!==t.scripts.length?n(t.scripts.shift(),arguments.callee):e()}()},EarlyBirds.prototype.trackActivity=function(e,t){var n=this;n.ebUtils.log("trackActivity"),this.waitUntilIdentified("trackActivity",e,function(){e instanceof Array||(e=[e]);var r=n.ebUtils.hashCode(ebJSON.stringify(e)),i=Cookies.get("eb-lastactivity-hash");if(i&&r==i)n.ebUtils.log("trackActivity not fired because this activity has already been tracked"),"function"==typeof t&&t();else{var o=!1;if(e.forEach(function(e,t){e.profile=n.profile.id,e.object&&e.object.original_id&&(e.original_id=e.object.original_id,delete e.object.original_id),e.object&&e.object.type&&(e.type=e.object.type,delete e.object.type),e.object&&e.object.price&&(e.price=e.object.price,delete e.object.price),e.object&&e.object.quantity&&(e.quantity=e.object.quantity,delete e.object.quantity),e.type||(e.type="product"),e.original_id||e.originalId||(o=!0)}),o)return n.ebUtils.log("Activities not sent because one of its doesn't have an original_id"),n.ebUtils.log(e),!1;if(e.length<=0)return void n.ebUtils.log("trackActivity need at least one activity to track");n.ebUtils.sendRequest("POST",n.config.apiHost+"/tracker/"+n.trackerKey+"/activity",{activity:e,segments:n.ebUtils.getNavigatorSegments()},n.ebUtils.parseErrorsThenCallback.bind(this,function(e,i){if("function"==typeof t&&t(),Cookies.set("eb-lastactivity-hash",r),i&&(i.activities&&n.ebUtils.log("trackActivity ok : "+i.activities.map(function(e){return e._id}).join(",")),i.profile&&i.profile.clusters)){Cookies.set("eb-profile-clusters",JSON.stringify(i.profile.clusters),3600);var o=Object.keys(i.profile.clusters);if(o&&o[0]){var a=i.profile.clusters[o[0]],s=Object.keys(a);a&&s&&s[0]&&Cookies.set("eb-profile-cluster",a[s[s.length-1]])}}}))}})},EarlyBirds.prototype.trackInterest=function(e,t){var n=this;n.ebUtils.log("trackInterest"),this.waitUntilIdentified("trackInterest",e,function(){return e instanceof Array||(e=[e]),e.forEach(function(e){e.profile=n.profile.id,"function"==typeof e.tags?e.tags=e.tags.apply(n):e.tags=n._.map(e.tags,function(e){return"function"==typeof e?e.apply(n):e})}),e.length<=0?void n.ebUtils.log("trackInterest need at least one interest to track"):void n.ebUtils.sendRequest("POST",n.config.apiHost+"/tracker/"+n.trackerKey+"/interest",{interest:e},n.ebUtils.parseErrorsThenCallback.bind(this,function(e,r){r&&r.interests&&n.ebUtils.log("trackInterest ok : "+r.interests.map(function(e){return e._id}).join(",")),"function"==typeof t&&t()}))})},EarlyBirds.prototype.deleteFavorite=function(e,t){var n=this;if(n.ebUtils.log("deleteFavorite"),n.trackerKey&&e)if(n.profile.id){var r={profile:n.profile.id,original_id:e,verb:"like",opposite:!0};n.ebUtils.sendRequest("POST",n.config.apiHost+"/tracker/"+n.trackerKey+"/activity",{activity:r},n.ebUtils.parseErrorsThenCallback.bind(this,function(e,r){"function"==typeof t&&t(),Cookies.set("eb-lastactivity-hash",hash),r&&r.activities&&n.ebUtils.log("trackActivity ok : "+r.activities.map(function(e){return e._id}).join(","))}))}else n.identifiedQueue.push(["deleteFavorite",e]);else n.initedQueue.push(["deleteFavorite",e])},EarlyBirds.prototype.identify=function(e){var t=this,n=null;if(t.ebUtils.dispatchEvent("eb-identify-initiated",e),t.identifiedRequested)return!1;if(e.callback&&(n=t.ebUtils.clone(e.callback),delete e.callback),e=e||{},!t.trackerKey)return t.initedQueue.push(["identify",e]);t.identifiedRequested=!0;var r=t.ebUtils.hashCode(ebJSON.stringify(e)),i=function(e){return null!==n&&n.call(t,e),window._ebq.push.apply(t.ebQueue,t.identifiedQueue)};if(t.profile.id&&!t.profile.deprecated&&r==t.profile.hash)return t.ebUtils.log("Cookie profile found "+t.profile.id+", identical hash and not deprecated, no request"),t.ebUtils.dispatchEvent("eb-profile-done",t.profile.id),i(t.profile);if(t.profile.id?(e.id=t.profile.id,t.ebUtils.log("Cookie profile found but new hash is different or is deprecated, update the profile")):t.ebUtils.log("No cookie found"),e.datasources){var o=[];e.datasources.forEach(function(e,t){"0"!=e.original_id&&""!=e.original_id&&o.push(e)}),e.datasources=o}var a=t.config.apiHost+"/tracker/"+t.trackerKey+"/identify";t.ebUtils.sendRequest("POST",a,{profile:e},t.ebUtils.parseErrorsThenCallback.bind(this,function(e,n){if(!e&&n&&n.profile){t.ebUtils.log("Identify ok "+n.profile.id),n.cookie&&n.cookie.domain&&document.location.hostname.indexOf(n.cookie.domain)>=0&&(t.cookieConfig=n.cookie);var o=new Date;t.setProfile({id:n.profile.id,hash:r,lastUpdate:o.getTime(),deprecated:!1}),t.ebUtils.dispatchEvent("eb-profile-done",n.profile.id);var a=t.ebUtils.clone(t.profile);return a.profile=n.profile,i(a)}}))},EarlyBirds.prototype.loadWidget=function(e){var t=this;(this.loadWidgets||e.forceLoad)&&(t.ebUtils.log("loadWidget"),this.waitUntilScriptsLoaded("loadWidget",e,function(){var n=t.ebUtils.getParamByName("eb-profile-id");""===n?(e.profile=t.profile.id,e.owner=!0):(e.profile=n,e.owner=!1),t.ebWidgets.loadWidget(e)}))},EarlyBirds.prototype.clickOnRecoCallback=function(e){var t=this;this.waitUntilScriptsLoaded("clickOnRecoCallback",e,function(){if(t.ebUtils.log("clickOnRecoCallback"),document.location.href.indexOf("ebwidgetkey")>-1){var n=t.ebUtils.placeholderFromUrlParam(e.url);e.beforeCall(function(r,i){r||t.ebUtils.sendRequest("POST",t.config.apiHost+n,{data:i,profileId:t.profile.id},t.ebUtils.parseErrorsThenCallback.bind(this,function(t,n){e.callback&&e.callback(t,n)}))})}})},EarlyBirds.prototype.checkClickOnReco=function(e){var t=this;this.waitUntilScriptsLoaded("checkClickOnReco",e,function(){t.ebUtils.log("checkClickOnReco");var n=Cookies.get("eb-clickonreco");n&&(e.isProductPage(function(e,r){t.ebUtils.sendRequest("POST",t.config.apiHost+"/stats/"+n+"/product-not-found",{profileId:t.profile.id},t.ebUtils.parseErrorsThenCallback.bind(this,function(e,t){}))}),Cookies.remove("eb-clickonreco"))})},EarlyBirds.prototype.scrapPrice=function(e){var t=this;this.waitUntilScriptsLoaded("scrapPrice",e,function(){var n=jQuery(document).find(e.domPricePath),r=Cookies.get("eb-product"),i=r?JSON.parse(r):null;if(n.length&&i){var o=parseFloat(n[0].innerText.replace(",",".").replace("€","."));o!==parseFloat(i.price)&&t.ebUtils.sendRequest("POST",t.config.apiHost+"/logs/product-wrong-price/"+i._id.tenant,{product:i,displayedPrice:o,widget:t.ebUtils.placeholderFromUrlParam("{{ebwidgetkey}}")},t.ebUtils.parseErrorsThenCallback.bind(this,function(e,t){}))}Cookies.remove("eb-product")})},EarlyBirds.prototype.execute=function(e){var t=this;t.ebUtils.log("execute"),this.waitUntilScriptsLoaded("execute",e,function(){e.profile=t.profile.id,e.onload.call(t,e)})},EarlyBirds.prototype.waitUntilScriptsLoaded=function(e,t,n){var r=this;this.waitUntilIdentified(e,t,function(){return null!==r.$?n():(r.ebUtils.log("execute passed in scriptsQueue"),void r.scriptsQueue.push([e,t]))})},EarlyBirds.prototype.waitUntilIdentified=function(e,t,n){var r=this;this.waitUntilQueueInited(e,t,function(){return null!==r.profile.id?n():(r.ebUtils.log("execute passed in identifiedQueue"),void r.identifiedQueue.push([e,t]))})},EarlyBirds.prototype.waitUntilQueueInited=function(e,t,n){var r=this;return r.trackerKey?n():(r.ebUtils.log("execute passed in initedQueue"),
void r.initedQueue.push([e,t]))},EarlyBirds.prototype.getProfileClusters=function(){var e=Cookies.get("eb-profile-clusters");return e?JSON.parse(e):null},EarlyBirds.prototype.getDefaultPredictorProfileClusters=function(){var e=this.getProfileClusters();if(e){var t=Object.keys(e);if(t&&t[0])return e[t[0]]}return null},EarlyBirds.prototype.getProfileClusterByGenerationId=function(e,t){var n=this.getProfileClusters();return n&&n[e]&&n[e][t]?n[e][t]:null},EarlyBirds.prototype.getDefaultPredictorProfileClusterByGenerationId=function(e){var t=this.getDefaultPredictorProfileClusters();return t&&t[e]?t[e]:null},!EarlyBirdsUtils.isIE8()){var eb=new EarlyBirds;"undefined"==typeof window.eb&&(window.eb=eb)}return EarlyBirds}(window);